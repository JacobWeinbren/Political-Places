import{hy as n,he as t,cN as r,hb as e,ha as i,hd as l,hh as o,hw as u,cp as a,cH as s,hO as c,hg as f,hB as g,hA as h,hC as d,a8 as w,h8 as m,aB as A,dC as p,h9 as y,cG as E,bO as I,h7 as F,c3 as R}from"../main.js";import{c as b,d as x,h as N,l as S,i as O,j as M,k as Z}from"./arcadeUtils-b1e28917.js";import{S as j,g as k,A as z,w as v,x as C,p as P,O as L,d as B,h as G,j as J,k as T,R as U,E as V,l as W,y as q,W as H,K as D,F as K,M as Q,m as X,P as Y,U as $,G as _,V as nn,b as tn,I as rn,q as en,J as ln,v as on}from"./geometryEngineAsync-0c679e46.js";function un(n){return 0===p.indexOf("4.")?A.fromExtent(n):new A({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function an(n){if(t(n,2,2),n[0]instanceof r&&n[1]instanceof r);else if(n[0]instanceof r&&null===n[1]);else if(n[1]instanceof r&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}function sn(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return F(0);let r=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(r=M(n.spatialReference)/R(n.spatialReference));let e=0;if("polyline"===n.type)for(const t of n.paths)for(let n=1;n<t.length;n++)e+=Z(t[n],t[n-1],r);else if("polygon"===n.type)for(const t of n.rings){for(let n=1;n<t.length;n++)e+=Z(t[n],t[n-1],r);(t[0][0]!==t[t.length-1][0]||t[0][1]!==t[t.length-1][1]||void 0!==t[0][2]&&t[0][2]!==t[t.length-1][2])&&(e+=Z(t[0],t[t.length-1],r))}else"extent"===n.type&&(e+=2*Z([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],r),e+=2*Z([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],r),e*=2,e+=4*Math.abs(f(n.zmax,0)*r-f(n.zmin,0)*r));const i=new s({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,e]]});return K(i,t)}function cn(p){"async"===p.mode&&(p.functions.disjoint=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null===e[0]||null===e[1]||j(e[0],e[1])}))},p.functions.intersects=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&k(e[0],e[1])}))},p.functions.touches=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&z(e[0],e[1])}))},p.functions.crosses=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&v(e[0],e[1])}))},p.functions.within=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&C(e[0],e[1])}))},p.functions.contains=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&P(e[0],e[1])}))},p.functions.overlaps=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null!==e[1]&&L(e[0],e[1])}))},p.functions.equals=function(n,i){return p.standardFunctionAsync(n,i,(function(n,i,l){return t(l,2,2),l[0]===l[1]||(l[0]instanceof r&&l[1]instanceof r?B(l[0],l[1]):!(!e(l[0])||!e(l[1]))&&l[0].getTime()===l[1].getTime())}))},p.functions.relate=function(e,l){return p.standardFunctionAsync(e,l,(function(e,l,o){if(o=n(o),t(o,3,3),o[0]instanceof r&&o[1]instanceof r)return G(o[0],o[1],i(o[2]));if(o[0]instanceof r&&null===o[1])return!1;if(o[1]instanceof r&&null===o[0])return!1;if(null===o[0]&&null===o[1])return!1;throw new Error("Illegal Argument")}))},p.functions.intersection=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null===e[0]||null===e[1]?null:J(e[0],e[1])}))},p.functions.union=function(t,e){return p.standardFunctionAsync(t,e,(function(e,i,a){const s=[];if(0===(a=n(a)).length)throw new Error("Function called with wrong number of Parameters");if(1===a.length)if(l(a[0])){const t=n(a[0]);for(let n=0;n<t.length;n++)if(null!==t[n]){if(!(t[n]instanceof r))throw new Error("Illegal Argument");s.push(t[n])}}else{if(!o(a[0])){if(a[0]instanceof r)return u(b(a[0]),t.spatialReference);if(null===a[0])return null;throw new Error("Illegal Argument")}{const t=n(a[0].toArray());for(let n=0;n<t.length;n++)if(null!==t[n]){if(!(t[n]instanceof r))throw new Error("Illegal Argument");s.push(t[n])}}}else for(let n=0;n<a.length;n++)if(null!==a[n]){if(!(a[n]instanceof r))throw new Error("Illegal Argument");s.push(a[n])}return 0===s.length?null:T(s)}))},p.functions.difference=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null!==e[0]&&null===e[1]?b(e[0]):null===e[0]?null:U(e[0],e[1])}))},p.functions.symmetricdifference=function(t,r){return p.standardFunctionAsync(t,r,(function(t,r,e){return an(e=n(e)),null===e[0]&&null===e[1]?null:null===e[0]?b(e[1]):null===e[1]?b(e[0]):V(e[0],e[1])}))},p.functions.clip=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,2),!(l[1]instanceof a)&&null!==l[1])throw new Error("Illegal Argument");if(null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");return null===l[1]?null:W(l[0],l[1])}))},p.functions.cut=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,2),!(l[1]instanceof s)&&null!==l[1])throw new Error("Illegal Argument");if(null===l[0])return[];if(!(l[0]instanceof r))throw new Error("Illegal Argument");return null===l[1]?[b(l[0])]:q(l[0],l[1])}))},p.functions.area=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){if(t(a,1,2),null===(a=n(a))[0])return 0;if(c(a[0]))return a[0].sumArea(x(f(a[1],-1)),!1,e.abortSignal).then((n=>{if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(l(a[0])||o(a[0])){const n=g(a[0],e.spatialReference);return null===n?0:H(n,x(f(a[1],-1)))}if(!(a[0]instanceof r))throw new Error("Illegal Argument");return H(a[0],x(f(a[1],-1)))}))},p.functions.areageodetic=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){if(t(a,1,2),null===(a=n(a))[0])return 0;if(c(a[0]))return a[0].sumArea(x(f(a[1],-1)),!0,e.abortSignal).then((n=>{if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(l(a[0])||o(a[0])){const n=g(a[0],e.spatialReference);return null===n?0:D(n,x(f(a[1],-1)))}if(!(a[0]instanceof r))throw new Error("Illegal Argument");return D(a[0],x(f(a[1],-1)))}))},p.functions.length=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){if(t(a,1,2),null===(a=n(a))[0])return 0;if(c(a[0]))return a[0].sumLength(N(f(a[1],-1)),!1,e.abortSignal).then((n=>{if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(l(a[0])||o(a[0])){const n=h(a[0],e.spatialReference);return null===n?0:K(n,N(f(a[1],-1)))}if(!(a[0]instanceof r))throw new Error("Illegal Argument");return K(a[0],N(f(a[1],-1)))}))},p.functions.length3d=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){if(t(a,1,2),null===(a=n(a))[0])return 0;if(l(a[0])||o(a[0])){const n=h(a[0],e.spatialReference);return null===n?0:!0===n.hasZ?sn(n,N(f(a[1],-1))):K(n,N(f(a[1],-1)))}if(!(a[0]instanceof r))throw new Error("Illegal Argument");return!0===a[0].hasZ?sn(a[0],N(f(a[1],-1))):K(a[0],N(f(a[1],-1)))}))},p.functions.lengthgeodetic=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){if(t(a,1,2),null===(a=n(a))[0])return 0;if(c(a[0]))return a[0].sumLength(N(f(a[1],-1)),!0,e.abortSignal).then((n=>{if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(l(a[0])||o(a[0])){const n=h(a[0],e.spatialReference);return null===n?0:Q(n,N(f(a[1],-1)))}if(!(a[0]instanceof r))throw new Error("Illegal Argument");return Q(a[0],N(f(a[1],-1)))}))},p.functions.distance=function(e,i){return p.standardFunctionAsync(e,i,(function(i,u,a){a=n(a),t(a,2,3);let s=a[0];(l(a[0])||o(a[0]))&&(s=d(a[0],e.spatialReference));let c=a[1];if((l(a[1])||o(a[1]))&&(c=d(a[1],e.spatialReference)),!(s instanceof r))throw new Error("Illegal Argument");if(!(c instanceof r))throw new Error("Illegal Argument");return X(s,c,N(f(a[2],-1)))}))},p.functions.distancegeodetic=function(r,e){return p.standardFunctionAsync(r,e,(function(r,e,i){i=n(i),t(i,2,3);const l=i[0],o=i[1];if(!(l instanceof w))throw new Error("Illegal Argument");if(!(o instanceof w))throw new Error("Illegal Argument");const u=new s({paths:[],spatialReference:l.spatialReference});return u.addPath([l,o]),Q(u,N(f(i[2],-1)))}))},p.functions.densify=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return l[0]instanceof A||l[0]instanceof s?Y(l[0],o,N(f(l[2],-1))):l[0]instanceof a?Y(un(l[0]),o,N(f(l[2],-1))):l[0]}))},p.functions.densifygeodetic=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return l[0]instanceof A||l[0]instanceof s?$(l[0],o,N(f(l[2],-1))):l[0]instanceof a?$(un(l[0]),o,N(f(l[2],-1))):l[0]}))},p.functions.generalize=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,4),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");return _(l[0],o,y(f(l[2],!0)),N(f(l[3],-1)))}))},p.functions.buffer=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?b(l[0]):nn(l[0],o,N(f(l[2],-1)))}))},p.functions.buffergeodetic=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?b(l[0]):tn(l[0],o,N(f(l[2],-1)))}))},p.functions.offset=function(r,e){return p.standardFunctionAsync(r,e,(function(r,e,l){if(l=n(l),t(l,2,6),null===l[0])return null;if(!(l[0]instanceof A||l[0]instanceof s))throw new Error("Illegal Argument");const o=m(l[1]);if(isNaN(o))throw new Error("Illegal Argument");const u=m(f(l[4],10));if(isNaN(u))throw new Error("Illegal Argument");const a=m(f(l[5],0));if(isNaN(a))throw new Error("Illegal Argument");return rn(l[0],o,N(f(l[2],-1)),i(f(l[3],"round")).toLowerCase(),u,a)}))},p.functions.rotate=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){l=n(l),t(l,2,3);let o=l[0];if(null===o)return null;if(!(o instanceof r))throw new Error("Illegal Argument");o instanceof a&&(o=A.fromExtent(o));const u=m(l[1]);if(isNaN(u))throw new Error("Illegal Argument");const s=f(l[2],null);if(null===s)return en(o,u);if(s instanceof w)return en(o,u,s);throw new Error("Illegal Argument")}))},p.functions.centroid=function(e,i){return p.standardFunctionAsync(e,i,(function(i,c,f){if(f=n(f),t(f,1,1),null===f[0])return null;let g=f[0];if((l(f[0])||o(f[0]))&&(g=d(f[0],e.spatialReference)),null===g)return null;if(!(g instanceof r))throw new Error("Illegal Argument");return g instanceof w?u(b(f[0]),e.spatialReference):g instanceof A?g.centroid:g instanceof s?S(g):g instanceof E?O(g):g instanceof a?g.center:null}))},p.functions.multiparttosinglepart=function(e,i){return p.standardFunctionAsync(e,i,(function(i,l,o){o=n(o),t(o,1,1);const c=[];if(null===o[0])return null;if(!(o[0]instanceof r))throw new Error("Illegal Argument");return o[0]instanceof w||o[0]instanceof a?[u(b(o[0]),e.spatialReference)]:ln(o[0]).then((n=>{if(n instanceof A){const t=[],r=[];for(let e=0;e<n.rings.length;e++)if(n.isClockwise(n.rings[e])){const r=I({rings:[n.rings[e]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(r)}else r.push({ring:n.rings[e],pt:n.getPoint(e,0)});for(let n=0;n<r.length;n++)for(let e=0;e<t.length;e++)if(t[e].contains(r[n].pt)){t[e].addRing(r[n].ring);break}return t}if(n instanceof s){const t=[];for(let r=0;r<n.paths.length;r++){const e=I({paths:[n.paths[r]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(e)}return t}if(o[0]instanceof E){const n=u(b(o[0]),e.spatialReference);for(let t=0;t<n.points.length;t++)c.push(n.getPoint(t));return c}return null}))}))},p.functions.issimple=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,1,1),null===l[0])return!0;if(!(l[0]instanceof r))throw new Error("Illegal Argument");return on(l[0])}))},p.functions.simplify=function(e,i){return p.standardFunctionAsync(e,i,(function(e,i,l){if(l=n(l),t(l,1,1),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");return ln(l[0])}))})}export{cn as registerFunctions};
