import{b6 as t,n as e,a as r}from"../main.js";import"./Texture-0b955648.js";const n=new Float32Array(1);function s(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]}function o(t,e){return 65535&t|e<<16}function i(t,e,r,n){return 255&t|(255&e)<<8|(255&r)<<16|n<<24}var a,c,u,E,f,A,I;new Uint32Array(n.buffer),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"}(a||(a={})),function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(c||(c={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(u||(u={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(f||(f={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(A||(A={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(I||(I={}));class L{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(t,e,r,n,s,o,i,a,c){this.color=t,this.haloColor=e,this.haloSize=r,this.size=n,this.angle=s,this.offsetX=o,this.offsetY=i,this.hAnchor=a,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}L.pool=new t(L);const T=e.getLogger("esri.views.2d.engine.webgl.Utils"),h="geometry",l=[{name:h,strideInBytes:36,divisor:0}],O=[{name:h,strideInBytes:12,divisor:0}],d=[{name:h,strideInBytes:40,divisor:0}],S=[{name:h,strideInBytes:36,divisor:0}],_=[{name:h,strideInBytes:36,divisor:0}];function N(t){const e={};for(const r of t)e[r.name]=r.strideInBytes;return e}const R=N([{name:h,strideInBytes:36,divisor:0}]),U=N(l),w=N(O),C=N(d),v=N(S),y=N(_);function M(t,e){switch(t){case a.MARKER:return R;case a.FILL:return e?w:U;case a.LINE:return C;case a.TEXT:return v;case a.LABEL:return y}}const m=[h],p=[h],P=[h],B=[h],F=[h];function D(t){switch(t){case a.MARKER:return m;case a.FILL:return p;case a.LINE:return P;case a.TEXT:return B;case a.LABEL:return F}}function G(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function b(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}}function g(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function H(t){return null!=t}function X(t){return"number"==typeof t}function Y(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return T.error(new r("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function Z(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return T.error(new r("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function z(t){switch(t){case"opacity":return E.OPACITY;case"color":return E.COLOR;case"rotation":return E.ROTATION;case"size":return E.SIZE;default:return T.error(`Cannot interpret unknown vv: ${t}`),null}}function x(t,e,r,n,s,o,i){for(const e in o){const n=o[e].stride,i=G(n),a=o[e].data,c=r[e].data,u=n*s.vertexCount/i,E=n*t/i,f=n*s.vertexFrom/i;for(let t=0;t<u;++t)c[t+E]=a[t+f]}const a=s.indexCount;for(let r=0;r<a;++r)n[r+e]=i[r+s.indexFrom]-s.vertexFrom+t}const K={[h]:35044};function $(t,e){const r=[];for(let n=0;n<5;++n){const s=D(n),o={};for(const t of s)o[t]={data:e(n,t)};r.push({data:t(n),buffers:o})}return r}function V(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function j(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void T.error(new r("webgl-utils",`Unable to handle type ${t}`))}}function q(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void T.error(new r("webgl-utils",`Unable to handle type ${t}`))}}const W=t=>{const e=new Map;for(const r in t)for(const n of t[r])e.set(n.name,n.location);return e},k=t=>{const e={};for(const r in t){const n=t[r];e[r]=n.length?n[0].stride:0}return e},J=new Map,Q=(t,e)=>{if(!J.has(t)){const r=function(t){const e={};for(const r in t){const n=t[r];let s=0;e[r]=n.map((t=>{const e={...t,normalized:t.normalized||!1,divisor:t.divisor||0,offset:s,stride:0};return s+=t.count*V(t.type),e})),e[r].forEach((t=>t.stride=s))}return e}(e),n={strides:k(r),bufferLayouts:r,attributes:W(e)};J.set(t,n)}return J.get(t)};function tt(t){t(a.FILL),t(a.LINE),t(a.MARKER),t(a.TEXT),t(a.LABEL)}export{f as A,G as C,$ as D,a as E,j as G,q as H,u as I,X as K,s as M,H as N,I as O,Y as P,b as R,Z as S,M as T,z as X,x as _,g as a,A as b,o as m,K as q,tt as r,Q as t,i as w};
