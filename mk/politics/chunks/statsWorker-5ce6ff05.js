import{d3 as a,aT as i}from"../main.js";import{T as e,s as n,m as t,c as o,V as l,g as s,h as r,y as u,D as m,z as f}from"./utils-bf62e5a4.js";import"./ClassBreaksDefinition-af56f321.js";let d=null;async function c(n,t){if(!t)return[];const o=n.field,l=n.valueExpression,s=n.normalizationType,r=n.normalizationField,u=n.normalizationTotal,m=[],f=n.viewInfoParams;let c=null,p=null;if(l){if(!d){const{arcadeUtils:i}=await a();d=i}c=d.createFunction(l),p=f&&d.getViewInfo({viewingMode:f.viewingMode,scale:f.scale,spatialReference:new i(f.spatialReference)})}return t.forEach((a=>{const i=a.attributes;let n;if(l){const i=d.createExecContext(a,p);n=d.executeFunction(c,i)}else i&&(n=i[o]);if(s&&isFinite(n)){const a=i&&parseFloat(i[r]);n=e(n,s,a,u)}m.push(n)})),m}async function p(a){const{attribute:i,features:e}=a,{normalizationType:s,normalizationField:r,minValue:u,maxValue:m,fieldType:f}=i,d=await c({field:i.field,valueExpression:i.valueExpression,normalizationType:s,normalizationField:r,normalizationTotal:i.normalizationTotal,viewInfoParams:i.viewInfoParams},e),p=n({normalizationType:s,normalizationField:r,minValue:u,maxValue:m}),v={value:.5,fieldType:f},z="esriFieldTypeString"===f?t({values:d,supportsNullCount:p,percentileParams:v}):o({values:d,minValue:u,maxValue:m,useSampleStdDev:!s,supportsNullCount:p,percentileParams:v});return l(z,"esriFieldTypeDate"===f)}async function v(a){const{attribute:i,features:e}=a,n=await c({field:i.field,valueExpression:i.valueExpression,viewInfoParams:i.viewInfoParams},e),t=s(n);return r(t,i.domain,i.returnAllCodedValues)}async function z(a){const{attribute:i,features:e}=a,{field:n,normalizationType:t,normalizationField:o,normalizationTotal:l,classificationMethod:s}=i,r=await c({field:n,valueExpression:i.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:l,viewInfoParams:i.viewInfoParams},e),f=u(r,{field:n,normalizationType:t,normalizationField:o,normalizationTotal:l,classificationMethod:s,standardDeviationInterval:i.standardDeviationInterval,numClasses:i.numClasses,minValue:i.minValue,maxValue:i.maxValue});return m(f,s)}async function T(a){const{attribute:i,features:e}=a,{field:n,normalizationType:t,normalizationField:o,normalizationTotal:l,classificationMethod:s}=i,r=await c({field:n,valueExpression:i.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:l,viewInfoParams:i.viewInfoParams},e);return f(r,{field:n,normalizationType:t,normalizationField:o,normalizationTotal:l,classificationMethod:s,standardDeviationInterval:i.standardDeviationInterval,numBins:i.numBins,minValue:i.minValue,maxValue:i.maxValue})}export{z as classBreaks,T as histogram,p as summaryStatistics,v as uniqueValues};
