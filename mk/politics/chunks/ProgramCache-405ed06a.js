import{t as r}from"./ShaderCompiler-f06e17ef.js";var e=class{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach((r=>r.programs.forEach((r=>r.dispose())))),this._programCacheByTemplate=null}getProgram(e,t){return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,(t=>r(this._rctx,e,t))),this.getProgramTemplateInstance(e,t)}addProgramTemplate(r,e){this._programCacheByTemplate.set(r,{constructor:e,programs:new Map})}getProgramTemplateInstance(r,e){const t=this._programCacheByTemplate.get(r);if(t){const r=e?JSON.stringify(e):"default";if(!t.programs.has(r)){const a=t.constructor(e);t.programs.set(r,a)}return t.programs.get(r)}return null}};export{e as s};
