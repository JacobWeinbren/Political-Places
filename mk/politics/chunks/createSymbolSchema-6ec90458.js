import{b as e}from"./Utils-be23a2c6.js";import{L as t}from"./MaterialKey-c7d0c6a2.js";import"../main.js";import"./enums-7acaa04d.js";import"./number-b530ed41.js";import"./enums-154d47de.js";import"./Texture-8b92d5d4.js";import"./VertexElementDescriptor-d5c236cd.js";import"./alignmentUtils-3fedcae3.js";function r(e){var t;return"line-marker"===e.type?{type:"line-marker",color:null==(t=e.color)?void 0:t.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function a(e){return hydrateKey(e)}function s(e,t,a){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return n(e,t,a);case"simple-marker":case"picture-marker":return o(e,t,a);case"simple-line":return i(e,t,a);case"text":return c(e,t,a);case"label":return l(e,t,a);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return{...r(e),type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}function l(r,s,l){const n=r.toJSON(),i=t(e.LABEL,{...s,placement:n.labelPlacement});return{materialKey:l?a(i):i,hash:r.hash(),...n,labelPlacement:n.labelPlacement}}function n(s,l,n){const i=l.supportsOutlineFills,o=t(e.FILL,{...l,isOutlinedFill:i}),c=n?a(o):o,m=s.clone(),u=m.outline;l.supportsOutlineFills||(m.outline=null);const h={materialKey:c,hash:m.hash(),isOutlinedFill:!!l.supportsOutlineFills,...r(m)};if(l.supportsOutlineFills)return h;const p=[];if(p.push(h),u){const s=t(e.LINE,{...l,isOutline:!0}),i={materialKey:n?a(s):s,hash:u.hash(),...r(u)};p.push(i)}return{type:"composite-symbol",layers:p,hash:p.reduce(((e,t)=>t.hash+e),"")}}function i(s,l,n){const i=t(e.LINE,l),o=n?a(i):i,c=s.clone(),m=c.marker;c.marker=null;const u=[];if(u.push({materialKey:o,hash:c.hash(),...r(c)}),m){var h;const s=t(e.MARKER,l),i=n?a(s):s;m.color=null!=(h=m.color)?h:c.color,u.push({materialKey:i,hash:m.hash(),lineWidth:c.width,...r(m)})}return{type:"composite-symbol",layers:u,hash:u.reduce(((e,t)=>t.hash+e),"")}}function o(s,l,n){const i=t(e.MARKER,l),o=n?a(i):i,c=r(s);return{materialKey:o,hash:s.hash(),...c,angle:s.angle,maxVVSize:l.maxVVSize}}function c(s,l,n){const i=t(e.TEXT,l),o=n?a(i):i,c=r(s);return{materialKey:o,hash:s.hash(),...c,angle:s.angle,maxVVSize:l.maxVVSize}}export{s as createSymbolSchema};
