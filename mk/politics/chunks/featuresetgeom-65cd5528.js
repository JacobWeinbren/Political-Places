import{G as e,k as n,ak as t,J as r,K as a}from"./arcadeUtils-445557ef.js";import{g as i,b as s}from"./SpatialFilter-319d276a.js";import{eu as l,dD as o,ev as u}from"../main.js";import{w as c,A as f,x as p,O as d,p as m,g as R,h as S}from"./geometryEngineAsync-88aa6d5e.js";import"./number-a4cb7cba.js";import"./FeatureSetReader-52bf1ffb.js";import"./centroid-1933d1b4.js";import"./WhereClause-c3e95b02.js";function h(e){return e instanceof o}function b(r,a,S,b,y){return y(r,a,(function(r,a,y){if(y.length<2)return b(new Error("Missing Parameters"));if(null===(y=e(y))[0]&&null===y[1])return l(!1);if(n(y[0]))return y[1]instanceof o?l(new i({parentfeatureset:y[0],relation:S,relationGeom:y[1]})):null===y[1]?l(new s({parentfeatureset:y[0]})):b("Spatial Relation cannot accept this parameter type");if(h(y[0])){if(h(y[1])){let e=null;switch(S){case"esriSpatialRelEnvelopeIntersects":e=R(t(y[0]),t(y[1]));break;case"esriSpatialRelIntersects":e=R(y[0],y[1]);break;case"esriSpatialRelContains":e=m(y[0],y[1]);break;case"esriSpatialRelOverlaps":e=d(y[0],y[1]);break;case"esriSpatialRelWithin":e=p(y[0],y[1]);break;case"esriSpatialRelTouches":e=f(y[0],y[1]);break;case"esriSpatialRelCrosses":e=c(y[0],y[1])}return null!==e?e:u(new Error("Unrecognised Relationship"))}return n(y[1])?l(new i({parentfeatureset:y[1],relation:S,relationGeom:y[0]})):null===y[1]?l(!1):b("Spatial Relation cannot accept this parameter type")}return null!==y[0]?b("Spatial Relation cannot accept this parameter type"):n(y[1])?l(new s({parentfeatureset:y[1]})):y[1]instanceof o||null===y[1]?l(!1):void 0}))}function y(t){"async"===t.mode&&(t.functions.intersects=function(e,n){return b(e,n,"esriSpatialRelIntersects",t.failDefferred,t.standardFunctionAsync)},t.functions.envelopeintersects=function(e,n){return b(e,n,"esriSpatialRelEnvelopeIntersects",t.failDefferred,t.standardFunctionAsync)},t.signatures.push({name:"envelopeintersects",min:"2",max:"2"}),t.functions.contains=function(e,n){return b(e,n,"esriSpatialRelContains",t.failDefferred,t.standardFunctionAsync)},t.functions.overlaps=function(e,n){return b(e,n,"esriSpatialRelOverlaps",t.failDefferred,t.standardFunctionAsync)},t.functions.within=function(e,n){return b(e,n,"esriSpatialRelWithin",t.failDefferred,t.standardFunctionAsync)},t.functions.touches=function(e,n){return b(e,n,"esriSpatialRelTouches",t.failDefferred,t.standardFunctionAsync)},t.functions.crosses=function(e,n){return b(e,n,"esriSpatialRelCrosses",t.failDefferred,t.standardFunctionAsync)},t.functions.relate=function(i,l){return t.standardFunctionAsync(i,l,(function(t,i,l){if(l=e(l),r(l,3,3),h(l[0])&&h(l[1]))return S(l[0],l[1],a(l[2]));if(l[0]instanceof o&&null===l[1])return!1;if(l[1]instanceof o&&null===l[0])return!1;if(n(l[0])&&null===l[1])return new s({parentfeatureset:l[0]});if(n(l[1])&&null===l[0])return new s({parentfeatureset:l[1]});if(n(l[0])&&l[1]instanceof o)return l[0].relate(l[1],a(l[2]));if(n(l[1])&&l[0]instanceof o)return l[1].relate(l[0],a(l[2]));if(null===l[0]&&null===l[1])return!1;throw new Error("Illegal Argument")}))})}export{y as registerFunctions};
