import{e}from"../main.js";import{b as t,e as i,_ as s}from"./Utils-4efd2b2d.js";var r,a;function n(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function o(e){switch(e){case"top":return a.Top;case"middle":return a.Center;case"baseline":return a.Baseline;case"bottom":return a.Bottom}}function l(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,a.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,a.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,a.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,a.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,a.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,a.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,a.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,a.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,a.Top];default:return console.debug(`Found invalid placement type ${e}`),[r.Center,a.Center]}}function v(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${e}`),0}}function c(e){switch(e){case a.Top:return 1;case a.Center:return 0;case a.Bottom:case a.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function u(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}!function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(r||(r={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(a||(a={}));function S(e,i){switch(e){case t.FILL:return z.from(i);case t.LINE:return L.from(i);case t.MARKER:return f.from(i);case t.TEXT:return b.from(i);case t.LABEL:return y.from(i);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}class d{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get geometryTypeString(){switch(this.geometryType){case t.FILL:return"fill";case t.MARKER:return"marker";case t.LINE:return"line";case t.TEXT:return"text";case t.LABEL:return"label";default:throw new e(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let s=t,r=0;s<i;s++,r++)this.setBit(s,0!=(e&1<<r))}bits(e,t){let i=0;for(let s=e,r=0;s<t;s++,r++)i|=this.bit(s)<<r;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}}d.shared=new d(0);const p=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const r=function(e,t){const r=i.SIZE_FIELD_STOPS|i.SIZE_MINMAX_VALUE|i.SIZE_SCALE_STOPS|i.SIZE_UNIT_VALUE,a=(e&(s.FIELD_TARGETS_OUTLINE|s.MINMAX_TARGETS_OUTLINE|s.SCALE_TARGETS_OUTLINE|s.UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?r&a:r&~a}(e,t)&e;this.vvSizeMinMaxValue=!!(r&i.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&i.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&i.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&i.SIZE_SCALE_STOPS)}},V=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&i.ROTATION)}},g=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&i.COLOR)}},m=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&i.OPACITY)}};class z extends(g(m(p(d)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const i=this.load(0);return i.geometryType=t.FILL,i.dotDensity="dot-density"===e.stride.fill,i.simple="simple"===e.stride.fill,i.outlinedFill=e.isOutlinedFill,i.dotDensity||i.setVV(e.vvFlags,e),i.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(15)}set dotDensity(e){this.setBit(15,e)}get simple(){return!!this.bit(22)}set simple(e){this.setBit(22,e)}get outlinedFill(){return!!this.bit(21)}set outlinedFill(e){this.setBit(21,e)}}z.shared=new z(0);class f extends(g(m(V(p(d))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const i=this.load(0);return i.geometryType=t.MARKER,i.setVV(e.vvFlags,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}f.shared=new f(0);class L extends(g(m(p(d)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const i=this.load(0);return i.geometryType=t.LINE,i.setVV(e.vvFlags,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}L.shared=new L(0);class b extends(g(m(V(p(d))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const i=this.load(0);return i.geometryType=t.TEXT,i.setVV(e.vvFlags,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);class y extends(p(d)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const i=this.load(0);return i.geometryType=t.LABEL,i.setVV(e.vvFlags,e),i.mapAligned=h(e.placement),i.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0);export{L as B,S as L,b as R,f as U,d as _,l as a,y as b,v as c,r as e,h as i,o as n,c as o,n as r,u as s,a as t,z as x};
