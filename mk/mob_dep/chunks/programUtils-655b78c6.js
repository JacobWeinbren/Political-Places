import{r as e}from"../main.js";import{a as t}from"./ProgramTemplate-28d6e1e9.js";class r{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(e,t){var r;return null==(r=this._outer.get(e))?void 0:r.get(t)}set(e,t,r){const o=this._outer.get(e);o?o.set(t,r):this._outer.set(e,new Map([[t,r]]))}delete(e,t){const r=this._outer.get(e);r&&(r.delete(t),0===r.size&&this._outer.delete(e))}forEach(e){this._outer.forEach(((t,r)=>e(t,r)))}}class o{constructor(e){this._rctx=e,this._store=new r}dispose(){this._store.forEach((e=>e.forEach((e=>e.dispose())))),this._store.clear()}acquire(r,o,s,i){const n=this._store.get(r,o);if(e(n))return n.ref(),n;const c=new t(this._rctx,r,o,s,i);return c.ref(),this._store.set(r,o,c),c}get test(){let e=0;return this._store.forEach((t=>t.forEach((t=>e+=t.hasGLName?2:1)))),{cachedWebGLObjects:e}}}function s(e){let t="";for(const r in e){const o=e[r];if("boolean"==typeof o)o&&(t+=`#define ${r}\n`);else if("number"==typeof o)t+=`#define ${r} ${o.toFixed()}\n`;else if("object"==typeof o){const e=o.options;let s=0;for(const r in e)t+=`#define ${e[r]} ${(s++).toFixed()}\n`;t+=`#define ${r} ${e[o.value]}\n`}}return t}export{s as e,o as s};
