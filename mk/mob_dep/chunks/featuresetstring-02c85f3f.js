import{J as n,i as e,K as t,X as r,n as o,al as a,k as i,am as d,an as c,ao as u,ap as s,M as m}from"./arcadeUtils-d32dea37.js";import"../main.js";import"./number-0f51978d.js";import"./FeatureSetReader-eb56bd88.js";import"./centroid-3d42d303.js";function f(n){return n&&n.domain?"coded-value"===n.domain.type||"codedValue"===n.domain.type?o.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:a[n.field.type],codedValues:n.domain.codedValues.map((n=>({name:n.name,code:n.code})))}):o.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:a[n.field.type],min:n.domain.min,max:n.domain.max}):null}function l(a){"async"===a.mode&&(a.functions.domain=function(o,c){return a.standardFunctionAsync(o,c,(function(o,a,c){if(n(c,2,3),c[0]instanceof e)return f(c[0].fullDomain(t(c[1]),void 0===c[2]?void 0:r(c[2])));if(i(c[0]))return c[0]._ensureLoaded().then((()=>f(d(t(c[1]),c[0],null,void 0===c[2]?void 0:r(c[2])))));throw new Error("Invalid Parameter")}))},a.functions.subtypes=function(t,r){return a.standardFunctionAsync(t,r,(function(t,r,a){if(n(a,1,1),a[0]instanceof e){const n=a[0].subtypes();return n?o.convertObjectToArcadeDictionary(n):null}if(i(a[0]))return a[0]._ensureLoaded().then((()=>{const n=a[0].subtypes();return n?o.convertObjectToArcadeDictionary(n):null}));throw new Error("Invalid Parameter")}))},a.functions.domainname=function(o,u){return a.standardFunctionAsync(o,u,(function(o,a,u){if(n(u,2,4),u[0]instanceof e)return u[0].domainValueLookup(t(u[1]),u[2],void 0===u[3]?void 0:r(u[3]));if(i(u[0]))return u[0]._ensureLoaded().then((()=>{const n=d(t(u[1]),u[0],null,void 0===u[3]?void 0:r(u[3]));return c(n,u[2])}));throw new Error("Invalid Parameter")}))},a.signatures.push({name:"domainname",min:"2",max:"4"}),a.functions.domaincode=function(o,c){return a.standardFunctionAsync(o,c,(function(o,a,c){if(n(c,2,4),c[0]instanceof e)return c[0].domainCodeLookup(t(c[1]),c[2],void 0===c[3]?void 0:r(c[3]));if(i(c[0]))return c[0]._ensureLoaded().then((()=>{const n=d(t(c[1]),c[0],null,void 0===c[3]?void 0:r(c[3]));return u(n,c[2])}));throw new Error("Invalid Parameter")}))},a.signatures.push({name:"domaincode",min:"2",max:"4"})),a.functions.text=function(e,t){return a.standardFunctionAsync(e,t,(function(e,t,r){if(n(r,1,2),!i(r[0]))return s(r[0],r[1]);{const n=m(r[1],"");if(""===n)return r[0].castToText();if("schema"===n.toLowerCase())return r[0].convertToText("schema",e.abortSignal);if("featureset"===n.toLowerCase())return r[0].convertToText("featureset",e.abortSignal)}}))},a.functions.gdbversion=function(t,r){return a.standardFunctionAsync(t,r,(function(t,r,o){if(n(o,1,1),o[0]instanceof e)return o[0].gdbVersion();if(i(o[0]))return o[0].load().then((n=>n.gdbVersion));throw new Error("Invalid Parameter")}))},a.functions.schema=function(t,r){return a.standardFunctionAsync(t,r,(function(t,r,a){if(n(a,1,1),i(a[0]))return a[0].load().then((()=>o.convertObjectToArcadeDictionary(a[0].schema())));if(a[0]instanceof e){const n=a[0].schema();return n?o.convertObjectToArcadeDictionary(n):null}throw new Error("Invalid Parameter")}))}}export{l as registerFunctions};
