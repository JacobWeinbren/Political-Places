const e=!0,t=!0,i=!0,r=!1,n=!1;let o,s,a,l=!1,c=!1,u=!1,h=!1,d=null,p=!1;const f="undefined"!=typeof window?window:{},m=f.document||{head:{}},g=f.HTMLElement||class{},y={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},v=(()=>{let e=!1;try{m.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),b=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),w=(e,t,i,r)=>{i&&i.map((([i,r,n])=>{const o=x(e,i),s=_(t,n),a=S(i);y.ael(o,r,s,a),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>y.rel(o,r,s,a)))}))},_=(e,t)=>i=>{try{n||e.$hostElement$[t](i)}catch(e){ve(e)}},x=(e,t)=>4&t?m:8&t?f:16&t?m.body:e,S=e=>v?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),k=new WeakMap,M=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=(t.$tagName$,()=>{}),o=((e,t,i,r)=>{let n=T(t,i),o=be.get(n);if(e=11===e.nodeType?e:m,o)if("string"==typeof o){e=e.head||e;let t,i=k.get(e);i||k.set(e,i=new Set),i.has(n)||(t=m.createElement("style"),t.innerHTML=o,e.insertBefore(t,e.querySelector("link")),i&&i.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n})(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&r&&(i["s-sc"]=o,i.classList.add(o+"-h"),2&r&&i.classList.add(o+"-s")),n()},T=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),E={},I=e=>"object"===(e=typeof e)||"function"===e,C=(e,t,...i)=>{let r=null,n=null,o=null,s=!1,a=!1,l=[];const c=t=>{for(let i=0;i<t.length;i++)r=t[i],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((s="function"!=typeof e&&!I(r))&&(r=String(r)),s&&a?l[l.length-1].$text$+=r:l.push(s?O(null,r):r),a=s)};if(c(i),t){t.key&&(n=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,P);const u=O(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=n,u.$name$=o,u},O=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},A={},P={forEach:(e,t)=>e.map(R).forEach(t),map:(e,t)=>e.map(R).map(t).map(L)},R=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),L=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),C(e.vtag,t,...e.vchildren||[])}const t=O(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},D=(e,t,i,r,n,o)=>{if(i!==r){let s=ye(e,t),a=t.toLowerCase();if("class"===t){const t=e.classList,n=F(i),o=F(r);t.remove(...n.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!n.includes(e))))}else if("style"===t){for(const t in i)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)i&&r[t]===i[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=I(r);if((s||l&&null!==r)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let n=null==r?"":r;"list"===t?s=!1:null!=i&&e[t]==n||(e[t]=n)}}catch(e){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS("http://www.w3.org/1999/xlink",t):e.removeAttribute(t)):(!s||4&o||n)&&!l&&(r=!0===r?"":r,c?e.setAttributeNS("http://www.w3.org/1999/xlink",t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):ye(f,a)?a.slice(2):a[2]+t.slice(3),i&&y.rel(e,t,i,!1),r&&y.ael(e,t,r,!1)}},N=/\s/,F=e=>e?e.split(N):[],j=(e,t,i,r)=>{const n=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||E,s=t.$attrs$||E;for(r in o)r in s||D(n,r,o[r],void 0,i,t.$flags$);for(r in s)D(n,r,o[r],s[r],i,t.$flags$)},V=(e,t,i,r)=>{let n,c,d,p=t.$children$[i],f=0;if(l||(u=!0,"slot"===p.$tag$&&(o&&r.classList.add(o+"-s"),p.$flags$|=p.$children$?2:1)),null!==p.$text$)n=p.$elm$=m.createTextNode(p.$text$);else if(1&p.$flags$)n=p.$elm$=m.createTextNode("");else{if(h||(h="svg"===p.$tag$),n=p.$elm$=m.createElementNS(h?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&p.$flags$?"slot-fb":p.$tag$),h&&"foreignObject"===p.$tag$&&(h=!1),j(null,p,h),(e=>null!=e)(o)&&n["s-si"]!==o&&n.classList.add(n["s-si"]=o),p.$children$)for(f=0;f<p.$children$.length;++f)c=V(e,p,f,n),c&&n.appendChild(c);"svg"===p.$tag$?h=!1:"foreignObject"===n.tagName&&(h=!0)}return n["s-hn"]=a,3&p.$flags$&&(n["s-sr"]=!0,n["s-cr"]=s,n["s-sn"]=p.$name$||"",d=e&&e.$children$&&e.$children$[i],d&&d.$tag$===p.$tag$&&e.$elm$&&z(e.$elm$,!1)),n},z=(e,t)=>{y.$flags$|=1;const i=e.childNodes;for(let e=i.length-1;e>=0;e--){const r=i[e];r["s-hn"]!==a&&r["s-ol"]&&(W(r).insertBefore(r,B(r)),r["s-ol"].remove(),r["s-ol"]=void 0,u=!0),t&&z(r,t)}y.$flags$&=-2},U=(e,t,i,r,n,o)=>{let s,l=e["s-cr"]&&e["s-cr"].parentNode||e;for(l.shadowRoot&&l.tagName===a&&(l=l.shadowRoot);n<=o;++n)r[n]&&(s=V(null,i,n,e),s&&(r[n].$elm$=s,l.insertBefore(s,B(t))))},q=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,X(r),c=!0,n["s-ol"]?n["s-ol"].remove():z(n,!0),n.remove())},G=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),B=e=>e&&e["s-ol"]||e,W=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,H=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,s=t.$text$;let a;null===s?(h="svg"===o||"foreignObject"!==o&&h,"slot"===o||j(e,t,h),null!==r&&null!==n?((e,t,i,r)=>{let n,o,s=0,a=0,l=0,c=0,u=t.length-1,h=t[0],d=t[u],p=r.length-1,f=r[0],m=r[p];for(;s<=u&&a<=p;)if(null==h)h=t[++s];else if(null==d)d=t[--u];else if(null==f)f=r[++a];else if(null==m)m=r[--p];else if(G(h,f))H(h,f),h=t[++s],f=r[++a];else if(G(d,m))H(d,m),d=t[--u],m=r[--p];else if(G(h,m))"slot"!==h.$tag$&&"slot"!==m.$tag$||z(h.$elm$.parentNode,!1),H(h,m),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++s],m=r[--p];else if(G(d,f))"slot"!==h.$tag$&&"slot"!==m.$tag$||z(d.$elm$.parentNode,!1),H(d,f),e.insertBefore(d.$elm$,h.$elm$),d=t[--u],f=r[++a];else{for(l=-1,c=s;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==f.$tag$?n=V(t&&t[a],i,l,e):(H(o,f),t[l]=void 0,n=o.$elm$),f=r[++a]):(n=V(t&&t[a],i,a,e),f=r[++a]),n&&W(h.$elm$).insertBefore(n,B(h.$elm$))}s>u?U(e,null==r[p+1]?null:r[p+1].$elm$,i,r,a,p):a>p&&q(t,s,u)})(i,r,t,n):null!==n?(null!==e.$text$&&(i.textContent=""),U(i,null,t,n,0,n.length-1)):null!==r&&q(r,0,r.length-1),h&&"svg"===o&&(h=!1)):(a=i["s-cr"])?a.parentNode.textContent=s:e.$text$!==s&&(i.data=s)},J=e=>{let t,i,r,n,o,s,a=e.childNodes;for(i=0,r=a.length;i<r;i++)if(t=a[i],1===t.nodeType){if(t["s-sr"])for(o=t["s-sn"],t.hidden=!1,n=0;n<r;n++)if(s=a[n].nodeType,a[n]["s-hn"]!==t["s-hn"]||""!==o){if(1===s&&o===a[n].getAttribute("slot")){t.hidden=!0;break}}else if(1===s||3===s&&""!==a[n].textContent.trim()){t.hidden=!0;break}J(t)}},Y=[],Z=e=>{let t,i,r,n,o,s,a=0,l=e.childNodes,u=l.length;for(;a<u;a++){if(t=l[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],s=r.length-1;s>=0;s--)i=r[s],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(K(i,n)?(o=Y.find((e=>e.$nodeToRelocate$===i)),c=!0,i["s-sn"]=i["s-sn"]||n,o?o.$slotRefNode$=t:Y.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Y.map((e=>{K(e.$nodeToRelocate$,i["s-sn"])&&(o=Y.find((e=>e.$nodeToRelocate$===i)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):Y.some((e=>e.$nodeToRelocate$===i))||Y.push({$nodeToRelocate$:i}));1===t.nodeType&&Z(t)}},K=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,X=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(X)},Q=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||O(null,null),h=(d=t)&&d.$tag$===A?t:C(null,null,t);var d;if(a=i.tagName,r.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>h.$attrs$[t]=i[e]))),h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=n.$elm$=i.shadowRoot||i,o=i["s-sc"],s=i["s-cr"],l=0!=(1&r.$flags$),c=!1,H(n,h),y.$flags$|=1,u){let e,t,i,r,n,o;Z(h.$elm$);let s=0;for(;s<Y.length;s++)e=Y[s],t=e.$nodeToRelocate$,t["s-ol"]||(i=m.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(s=0;s<Y.length;s++)if(e=Y[s],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,n=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if(o=i["s-nr"],o&&o["s-sn"]===t["s-sn"]&&r===o.parentNode&&(o=o.nextSibling,!o||!o["s-nr"])){n=o;break}(!n&&r!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,n))}else 1===t.nodeType&&(t.hidden=!0)}c&&J(h.$elm$),y.$flags$&=-2,Y.length=0},ee=(e,t,i)=>{const r=e;return{emit:e=>te(r,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},te=(e,t,i)=>{const r=y.ce(t,i);return e.dispatchEvent(r),r},ie=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return Ee((()=>re(e,t)))},re=(e,t)=>{const i=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),n=i;let o;return o=ae(n,t?"componentWillLoad":"componentWillUpdate"),o=le(o,(()=>ae(n,"componentWillRender"))),r(),le(o,(()=>ne(e,n,t)))},ne=async(e,t,i)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],i&&M(e);const o=(e.$cmpMeta$.$tagName$,()=>{});oe(e,t,r),o(),n(),se(e)},oe=(n,o,s)=>{try{d=o,o=o.render&&o.render(),n.$flags$&=-17,n.$flags$|=2,(e||t)&&(i||t)&&(r||Q(n,o))}catch(e){ve(e,n.$hostElement$)}return d=null,null},se=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},i=e.$hostElement$;e.$ancestorComponent$,ae(i,"componentDidRender"),64&e.$flags$?(ae(i,"componentDidUpdate"),t()):(e.$flags$|=64,ae(i,"componentDidLoad"),t())},ae=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){ve(e)}},le=(e,t)=>e&&e.then?e.then(t):t(),ce=(e,t,i,r)=>{const n=me(e),o=e,s=n.$instanceValues$.get(t),a=n.$flags$,l=o;var c,u;c=i,u=r.$members$[t][0],i=null==c||I(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c;const h=Number.isNaN(s)&&Number.isNaN(i);if(i!==s&&!h){if(n.$instanceValues$.set(t,i),r.$watchers$&&128&a){const e=r.$watchers$[t];e&&e.map((e=>{try{l[e](i,s,t)}catch(e){ve(e,o)}}))}if(2==(18&a)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,s,t))return;ie(n,!1)}}},ue=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),r=e.prototype;i.map((([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(r,e,{get(){return t=e,me(this).$instanceValues$.get(t);var t},set(i){ce(this,e,i,t)},configurable:!0,enumerable:!0})}));{const n=new Map;r.attributeChangedCallback=function(e,t,i){y.jmp((()=>{const t=n.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i}))},e.observedAttributes=i.filter((([e,t])=>15&t[0])).map((([e,i])=>{const r=i[1]||e;return n.set(r,e),512&i[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},he=async(e,t,i,r,n)=>{if(0==(32&t.$flags$)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then((()=>t.$flags$|=128)),n.style)){let r=n.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>we.map((t=>t(e))).find((e=>!!e)))(e)]);const o=T(i,t.$modeName$);if(!be.has(o)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let r=be.get(e);b&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,be.set(e,r)})(o,r,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;ie(t,!0)},de=e=>{const t=e["s-cr"]=m.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},pe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){ge(this,i)},connectedCallback(){(e=>{if(0==(1&y.$flags$)){const t=me(e),i=t.$cmpMeta$,r=(i.$tagName$,()=>{});1&t.$flags$?(w(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&de(e),i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),he(e,t,i)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&y.$flags$)){const t=me(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,ue(e,i)},fe=new WeakMap,me=e=>fe.get(e),ge=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return w(e,i,t.$listeners$),fe.set(e,i)},ye=(e,t)=>t in e,ve=(e,t)=>(0,console.error)(e,t),be=new Map,we=[],_e=[],xe=[],Se=(e,t)=>i=>{e.push(i),p||(p=!0,t&&4&y.$flags$?Te(Me):y.raf(Me))},ke=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){ve(e)}e.length=0},Me=()=>{ke(_e),ke(xe),(p=_e.length>0)&&y.raf(Me)},Te=e=>(e=>Promise.resolve(e))().then(e),Ee=Se(xe,!0),Ie=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAccordionChange=ee(this,"calciteAccordionChange",7),this.appearance="default",this.iconPosition="end",this.iconType="chevron",this.scale="m",this.selectionMode="multi",this.items=[],this.sorted=!1,this.sortItems=e=>e.sort(((e,t)=>e.position-t.position)).map((e=>e.item))}componentDidLoad(){this.sorted||(this.items=this.sortItems(this.items),this.sorted=!0)}render(){return C("div",{class:{"accordion--transparent":"transparent"===this.appearance,"accordion--minimal":"minimal"===this.appearance,accordion:"default"===this.appearance}},C("slot",null))}calciteAccordionItemKeyEvent(e){const t=e.detail.item,i=e.detail.parent;if(this.el===i){const i=t.key,r=e.target,n=0===this.itemIndex(r),o=this.itemIndex(r)===this.items.length-1;switch(i){case"ArrowDown":o?this.focusFirstItem():this.focusNextItem(r);break;case"ArrowUp":n?this.focusLastItem():this.focusPrevItem(r);break;case"Home":this.focusFirstItem();break;case"End":this.focusLastItem()}}}registerCalciteAccordionItem(e){const t={item:e.target,parent:e.detail.parent,position:e.detail.position};this.el===t.parent&&this.items.push(t)}updateActiveItemOnChange(e){this.requestedAccordionItem=e.detail.requestedAccordionItem,this.calciteAccordionChange.emit({requestedAccordionItem:this.requestedAccordionItem})}focusFirstItem(){const e=this.items[0];this.focusElement(e)}focusLastItem(){const e=this.items[this.items.length-1];this.focusElement(e)}focusNextItem(e){const t=this.itemIndex(e),i=this.items[t+1]||this.items[0];this.focusElement(i)}focusPrevItem(e){const t=this.itemIndex(e),i=this.items[t-1]||this.items[this.items.length-1];this.focusElement(i)}itemIndex(e){return this.items.indexOf(e)}focusElement(e){e.focus()}get el(){return this}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([scale=s]){--calcite-accordion-item-spacing-unit:0.25rem;--calcite-accordion-icon-margin:0.5rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-accordion-item-spacing-unit:0.5rem;--calcite-accordion-icon-margin:0.75rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-accordion-item-spacing-unit:0.75rem;--calcite-accordion-icon-margin:1rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:block;max-width:100%;line-height:1.5rem;--calcite-accordion-item-border:var(--calcite-ui-border-2);--calcite-accordion-item-background:var(--calcite-ui-foreground-1)}.accordion--transparent{--calcite-accordion-item-border:transparent;--calcite-accordion-item-background:transparent}.accordion--minimal{--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0}.accordion{border-width:1px;border-bottom-width:0px;border-style:solid;border-color:var(--calcite-ui-border-2)}"}},Ce="calcite--rtl";const Oe=()=>[2,1,1,1,3].map((e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-");function Ae(e){const t=De(e,"[dir]");return t?t.getAttribute("dir"):"ltr"}function Pe(e,t,i){const r=`[${t}]`,n=e.closest(r);return n?n.getAttribute(t):i}function Re(e){return e.getRootNode()}function Le(e){return e.host||null}function De(e,t){return function e(i){return i?i.closest(t)||e(Le(Re(i))):null}(e)}async function Ne(e){if(e)return function(e){return"function"==typeof(null==e?void 0:e.setFocus)}(e)?e.setFocus():e.focus()}function Fe(e,t,i){t&&!Array.isArray(t)&&"string"!=typeof t&&(i=t,t=null);const r=t?Array.isArray(t)?t.map((e=>`[slot="${e}"]`)).join(","):`[slot="${t}"]`:":not([slot])";return(null==i?void 0:i.all)?function(e,t,i){let r=":not([slot])"===t?je(e,":not([slot])"):Array.from(e.querySelectorAll(t));r=i&&!1===i.direct?r:r.filter((t=>t.parentElement===e)),r=(null==i?void 0:i.matches)?r.filter((e=>null==e?void 0:e.matches(i.matches))):r;const n=null==i?void 0:i.selector;return n?r.map((e=>Array.from(e.querySelectorAll(n)))).reduce(((e,t)=>[...e,...t]),[]).filter((e=>!!e)):r}(e,r,i):function(e,t,i){let r=":not([slot])"===t?je(e,":not([slot])")[0]||null:e.querySelector(t);r=i&&!1===i.direct||(null==r?void 0:r.parentElement)===e?r:null,r=(null==i?void 0:i.matches)?(null==r?void 0:r.matches(i.matches))?r:null:r;const n=null==i?void 0:i.selector;return n?null==r?void 0:r.querySelector(n):r}(e,r,i)}function je(e,t){return e?Array.from(e.children||[]).filter((e=>null==e?void 0:e.matches(t))):[]}const $e=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAccordionItemKeyEvent=ee(this,"calciteAccordionItemKeyEvent",7),this.calciteAccordionItemSelect=ee(this,"calciteAccordionItemSelect",7),this.calciteAccordionItemClose=ee(this,"calciteAccordionItemClose",7),this.calciteAccordionItemRegister=ee(this,"calciteAccordionItemRegister",7),this.active=!1,this.guid=Oe(),this.iconPosition="end",this.itemHeaderClickHandler=()=>this.emitRequestedItem()}connectedCallback(){this.parent=this.el.parentElement,this.selectionMode=Pe(this.el,"selection-mode","multi"),this.iconType=Pe(this.el,"icon-type","chevron"),this.iconPosition=Pe(this.el,"icon-position",this.iconPosition)}componentDidLoad(){this.itemPosition=this.getItemPosition(),this.calciteAccordionItemRegister.emit({parent:this.parent,position:this.itemPosition})}render(){const e=Ae(this.el),t=C("calcite-icon",{class:"accordion-item-icon",icon:this.icon,scale:"s"}),{guid:i}=this,r=`${i}-region`,n=`${i}-button`;return C(A,{tabindex:"0"},C("div",{class:{[`icon-position--${this.iconPosition}`]:!0,[`icon-type--${this.iconType}`]:!0}},C("div",{"aria-controls":r,class:{"accordion-item-header":!0,[Ce]:"rtl"===e},id:n,onClick:this.itemHeaderClickHandler,role:"button"},this.icon?t:null,C("div",{class:"accordion-item-header-text"},C("span",{class:"accordion-item-title"},this.itemTitle),this.itemSubtitle?C("span",{class:"accordion-item-subtitle"},this.itemSubtitle):null),C("calcite-icon",{class:"accordion-item-expand-icon",icon:"chevron"===this.iconType?"chevronDown":"caret"===this.iconType?"caretDown":this.active?"minus":"plus",scale:"s"})),C("div",{"aria-expanded":this.active.toString(),"aria-labelledby":n,class:"accordion-item-content",id:r,role:"region"},C("slot",null))))}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.emitRequestedItem(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":case"Home":case"End":this.calciteAccordionItemKeyEvent.emit({parent:this.parent,item:e}),e.preventDefault()}}updateActiveItemOnChange(e){this.requestedAccordionItem=e.detail.requestedAccordionItem,this.el.parentNode===this.requestedAccordionItem.parentNode&&this.determineActiveItem()}determineActiveItem(){switch(this.selectionMode){case"multi":this.el===this.requestedAccordionItem&&(this.active=!this.active);break;case"single":this.active=this.el===this.requestedAccordionItem&&!this.active;break;case"single-persist":this.active=this.el===this.requestedAccordionItem}}emitRequestedItem(){this.calciteAccordionItemSelect.emit({requestedAccordionItem:this.el})}getItemPosition(){return Array.prototype.indexOf.call(this.parent.querySelectorAll("calcite-accordion-item"),this.el)}get el(){return this}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}.icon-position--end,.icon-position--start{--calcite-accordion-item-icon-rotation:calc(90deg * -1);--calcite-accordion-item-active-icon-rotation:0deg;--calcite-accordion-item-icon-rotation-rtl:90deg;--calcite-accordion-item-active-icon-rotation-rtl:0deg}.icon-position--start{--calcite-accordion-item-flex-direction:row-reverse;--calcite-accordion-item-icon-spacing-start:0;--calcite-accordion-item-icon-spacing-end:var(--calcite-accordion-icon-margin)}.icon-position--end{--calcite-accordion-item-flex-direction:row;--calcite-accordion-item-icon-spacing-start:var(--calcite-accordion-icon-margin);--calcite-accordion-item-icon-spacing-end:0}.icon-position--end:not(.icon-type--plus-minus){--calcite-accordion-item-icon-rotation:0deg;--calcite-accordion-item-active-icon-rotation:180deg;--calcite-accordion-item-icon-rotation-rtl:0deg;--calcite-accordion-item-active-icon-rotation-rtl:calc(180deg * -1)}:host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;background-color:var(--calcite-accordion-item-background, var(--calcite-ui-foreground-1))}:host .accordion-item-header{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}:host(:focus) .accordion-item-header{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host([active]){color:var(--calcite-ui-text-1)}:host([active]) .accordion-item-content{display:block;color:var(--calcite-ui-text-1)}:host([active]) .accordion-item-header{border-bottom-color:transparent}:host .accordion-item-header{display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-align:center;align-items:center;-ms-flex-direction:var(--calcite-accordion-item-flex-direction);flex-direction:var(--calcite-accordion-item-flex-direction)}:host .accordion-item-icon{position:relative;margin:0px;display:-ms-inline-flexbox;display:inline-flex;color:var(--calcite-ui-text-3);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-margin-end:var(--calcite-accordion-item-icon-spacing-start);margin-inline-end:var(--calcite-accordion-item-icon-spacing-start);-webkit-margin-start:var(--calcite-accordion-item-icon-spacing-end);margin-inline-start:var(--calcite-accordion-item-icon-spacing-end)}:host .accordion-item-content,:host .accordion-item-header{padding:var(--calcite-accordion-item-padding);border-bottom:1px solid var(--calcite-accordion-item-border, var(--calcite-ui-border-2))}:host .accordion-item-header *{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .accordion-item-content{display:none;padding-top:0px;color:var(--calcite-ui-text-3);text-align:initial}:host .accordion-item-expand-icon{color:var(--calcite-ui-text-3);-webkit-margin-start:var(--calcite-accordion-item-icon-spacing-start);margin-inline-start:var(--calcite-accordion-item-icon-spacing-start);-webkit-margin-end:var(--calcite-accordion-item-icon-spacing-end);margin-inline-end:var(--calcite-accordion-item-icon-spacing-end);-webkit-transform:rotate(var(--calcite-accordion-item-icon-rotation));transform:rotate(var(--calcite-accordion-item-icon-rotation))}.calcite--rtl .accordion-item-expand-icon{-webkit-transform:rotate(var(--calcite-accordion-item-icon-rotation-rtl));transform:rotate(var(--calcite-accordion-item-icon-rotation-rtl))}:host([active]) .accordion-item-expand-icon{color:var(--calcite-ui-text-1);-webkit-transform:rotate(var(--calcite-accordion-item-active-icon-rotation));transform:rotate(var(--calcite-accordion-item-active-icon-rotation))}:host([active]) .calcite--rtl .accordion-item-expand-icon{-webkit-transform:rotate(var(--calcite-accordion-item-active-icon-rotation-rtl));transform:rotate(var(--calcite-accordion-item-active-icon-rotation-rtl))}:host .accordion-item-header-text{margin-top:0px;margin-bottom:0px;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;padding-top:0px;padding-bottom:0px;text-align:initial;-webkit-margin-end:auto;margin-inline-end:auto}:host .accordion-item-title,:host .accordion-item-subtitle{display:-ms-flexbox;display:flex;width:100%}:host .accordion-item-title{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .accordion-item-subtitle{margin-top:0.25rem;color:var(--calcite-ui-text-3)}:host(:focus) .accordion-item-title,:host(:hover) .accordion-item-title{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-icon,:host(:hover) .accordion-item-icon{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-expand-icon,:host(:hover) .accordion-item-expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-subtitle,:host(:hover) .accordion-item-subtitle{color:var(--calcite-ui-text-2)}:host(:focus) .accordion-item-title,:host(:active) .accordion-item-title,:host([active]) .accordion-item-title{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-icon,:host(:active) .accordion-item-icon,:host([active]) .accordion-item-icon{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-expand-icon,:host(:active) .accordion-item-expand-icon,:host([active]) .accordion-item-expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .accordion-item-subtitle,:host(:active) .accordion-item-subtitle,:host([active]) .accordion-item-subtitle{color:var(--calcite-ui-text-2)}"}};function Ve(e,t,i){const r=function(e){return"intersection"===e?window.IntersectionObserver:"mutation"===e?window.MutationObserver:window.ResizeObserver}(e);return new r(t,i)}function ze(){}function Ue(e,t=!1){if(e.disabled)return e.el.setAttribute("tabindex","-1"),e.el.setAttribute("aria-disabled","true"),e.el.contains(document.activeElement)&&document.activeElement.blur(),void(e.el.click=ze);e.el.click=HTMLElement.prototype.click,"function"==typeof t?e.el.setAttribute("tabindex",t.call(e)?"0":"-1"):!0===t?e.el.setAttribute("tabindex","0"):!1===t&&e.el.removeAttribute("tabindex"),e.el.removeAttribute("aria-disabled")}var qe="object"==typeof global&&global&&global.Object===Object&&global,Ge="object"==typeof self&&self&&self.Object===Object&&self,Be=qe||Ge||Function("return this")(),We=Be.Symbol,He=Object.prototype,Je=He.hasOwnProperty,Ye=He.toString,Ze=We?We.toStringTag:void 0;var Ke=Object.prototype.toString;var Xe=We?We.toStringTag:void 0;function Qe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Xe&&Xe in Object(e)?function(e){var t=Je.call(e,Ze),i=e[Ze];try{e[Ze]=void 0;var r=!0}catch(e){}var n=Ye.call(e);return r&&(t?e[Ze]=i:delete e[Ze]),n}(e):function(e){return Ke.call(e)}(e)}function et(e){return null!=e&&"object"==typeof e}var tt=We?We.prototype:void 0;tt&&tt.toString;function it(e){return et(e)&&"[object Arguments]"==Qe(e)}var rt=Object.prototype;rt.hasOwnProperty,rt.propertyIsEnumerable;it(function(){return arguments}());var nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ot=nt&&"object"==typeof module&&module&&!module.nodeType&&module,st=ot&&ot.exports===nt?Be.Buffer:void 0;st&&st.isBuffer;var at="object"==typeof exports&&exports&&!exports.nodeType&&exports,lt=at&&"object"==typeof module&&module&&!module.nodeType&&module,ct=lt&&lt.exports===at&&qe.process,ut=function(){try{var e=lt&&lt.require&&lt.require("util").types;return e||ct&&ct.binding&&ct.binding("util")}catch(e){}}();ut&&ut.isTypedArray;const ht=new Set;let dt;const pt={childList:!0};function ft(e){e.forEach((({target:e})=>{(e=>{{const t=me(e),i=t.$hostElement$.isConnected;i&&2==(18&t.$flags$)&&ie(t,!1)}})(e)}))}var mt;!function(e){e.green="checkCircle",e.yellow="exclamationMarkTriangle",e.red="exclamationMarkTriangle",e.blue="lightbulb"}(mt||(mt={}));const gt=/^#[0-9A-F]{3}$/i,yt=/^#[0-9A-F]{6}$/i;function vt(e){return bt(e)||function(e){return e&&7===e.length&&yt.test(e)}(e)}function bt(e){return e&&4===e.length&&gt.test(e)}const wt="article",_t="content",xt="header-container",St="icon",kt="status-icon",Mt="toggle",Tt="toggle-icon",Et="title",It="heading",Ct="header",Ot="summary",At="control-container",Pt="valid",Rt="invalid",Lt="loading",Dt="Collapse",Nt="Expand",Ft="Loading",jt="Options",$t="icon",Vt="control",zt="header-menu-actions",Ut={opened:"chevron-up",closed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle",refresh:"refresh"},qt=(e,t)=>{const i=`h${e.level}`;return delete e.level,C(i,Object.assign({},e),t)},Gt=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteBlockToggle=ee(this,"calciteBlockToggle",7),this.collapsible=!1,this.disabled=!1,this.dragHandle=!1,this.intlLoading=Ft,this.intlOptions=jt,this.loading=!1,this.open=!1,this.guid=Oe(),this.onHeaderClick=()=>{this.open=!this.open,this.calciteBlockToggle.emit()}}componentDidRender(){Ue(this)}connectedCallback(){var e;e=this,dt||(dt=Ve("mutation",ft)),dt.observe(e.el,pt)}disconnectedCallback(){!function(e){ht.delete(e.el),ft(dt.takeRecords()),dt.disconnect();for(const[e]of ht.entries())dt.observe(e,pt)}(this)}renderScrim(){const{loading:e}=this,t=C("slot",null);return[e?C("calcite-scrim",{loading:e}):null,t]}renderIcon(){const{el:e,status:t}=this,i=this.loading&&!this.open,r=i?Ut.refresh:Ut[t],n=Fe(e,$t)||r,o=r?C("calcite-icon",{class:{[kt]:!0,[Pt]:"valid"==t,[Rt]:"invalid"==t,[Lt]:i},icon:r,scale:"m"}):C("slot",{key:"icon-slot",name:$t});return n?C("div",{class:St},o):null}renderTitle(){const{heading:e,headingLevel:t,summary:i}=this;return e||i?C("div",{class:Et},C(qt,{class:It,level:t||4},e),i?C("div",{class:Ot},i):null):null}render(){const{collapsible:e,el:t,intlCollapse:i,intlExpand:r,loading:n,open:o,intlLoading:s}=this,a=o?i||Dt:r||Nt,l=C("header",{class:Ct},this.renderIcon(),this.renderTitle()),c=!!Fe(t,Vt),u=!!Fe(t,zt),h=o?Ut.opened:Ut.closed,{guid:d}=this,p=`${d}-region`,f=`${d}-button`,m=C("div",{class:xt},this.dragHandle?C("calcite-handle",null):null,e?C("button",{"aria-controls":p,"aria-expanded":e?o.toString():null,"aria-label":a,class:Mt,id:f,onClick:this.onHeaderClick,title:a},l,c||u?null:C("calcite-icon",{"aria-hidden":"true",class:Tt,icon:h,scale:"s"})):l,n?C("calcite-loader",{inline:!0,"is-active":!0,label:s}):c?C("div",{class:At},C("slot",{name:Vt})):null,u?C("calcite-action-menu",{label:this.intlOptions||jt},C("slot",{name:zt})):null);return C(A,null,C("article",{"aria-busy":n.toString(),class:{[wt]:!0}},m,C("section",{"aria-expanded":this.open.toString(),"aria-labelledby":f,class:_t,hidden:!o,id:p},this.renderScrim())))}get el(){return this}static get style(){return'@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:host{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-direction:column;flex-direction:column;border-width:0px;border-bottom-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);padding:0px;-webkit-transition-property:margin;transition-property:margin;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.215, 0.440, 0.420, 0.880);transition-timing-function:cubic-bezier(0.215, 0.440, 0.420, 0.880);-ms-flex-preferred-size:auto;flex-basis:auto}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.header{margin:0px;display:-ms-flexbox;display:flex;-ms-flex-line-pack:justify;align-content:space-between;-ms-flex-align:center;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{-ms-flex:1 1 auto;flex:1 1 auto;padding:0.5rem}h1.heading{font-size:var(--calcite-font-size-2);line-height:1.5rem}h2.heading{font-size:var(--calcite-font-size-1);line-height:1.5rem}h3.heading{font-size:var(--calcite-font-size-0);line-height:1.25rem}h4.heading,h5.heading{font-size:var(--calcite-font-size--1);line-height:1rem}.header{-ms-flex-pack:start;justify-content:flex-start;padding:0px}.header,.toggle{grid-area:header}.header-container{display:grid;-ms-flex-align:stretch;align-items:stretch;grid-template:auto/auto 1fr auto auto;grid-template-areas:"handle header control menu";grid-column:header-start/menu-end;grid-row:1/2}.toggle{margin:0px;display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;border-style:none;padding:0px;font-family:inherit;outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;text-align:initial;background-color:transparent}.toggle:hover{background-color:var(--calcite-ui-foreground-2)}.toggle:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}calcite-loader[inline]{grid-area:control;align-self:center}calcite-handle{grid-area:handle}.title{margin:0px;padding:0.75rem}.header .title .heading{padding:0px;font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);line-height:1.25;color:var(--calcite-ui-text-2);-webkit-transition-property:color;transition-property:color;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);word-wrap:break-word;word-break:break-word}.summary{margin-top:0.125rem;padding:0px;font-size:var(--calcite-font-size--2);color:var(--calcite-ui-text-3);word-wrap:break-word;word-break:break-word}.icon{-webkit-margin-start:0.75rem;margin-inline-start:0.75rem;-webkit-margin-end:0px;margin-inline-end:0px;margin-block:0.75rem}.status-icon.valid{color:var(--calcite-ui-success)}.status-icon.invalid{color:var(--calcite-ui-danger)}.status-icon.loading{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.toggle-icon{margin-top:0.75rem;margin-bottom:0.75rem;-ms-flex-item-align:center;align-self:center;justify-self:end;color:var(--calcite-ui-text-3);-webkit-transition-property:color;transition-property:color;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-margin-end:1rem;margin-inline-end:1rem;-webkit-margin-start:auto;margin-inline-start:auto}.toggle:hover .toggle-icon{color:var(--calcite-ui-text-1)}.content{position:relative}@keyframes in{0%{opacity:0}100%{opacity:1}}.content{-webkit-animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem}.control-container{margin:0px;display:-ms-flexbox;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}:host([open]){margin-top:0.5rem;margin-bottom:0.5rem}:host([open]) .header .title .heading{color:var(--calcite-ui-text-1)}'}},Bt="content",Wt="invalid",Ht="toggle",Jt="toggle--switch",Yt="toggle--switch__content",Zt="toggle--switch__text",Kt="section-header",Xt="section-header__text",Qt="status-icon",ei="valid",ti="Collapse",ii="Expand",ri={menuOpen:"chevron-down",menuClosedLeft:"chevron-left",menuClosedRight:"chevron-right",valid:"check-circle",invalid:"exclamation-mark-triangle"},ni=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteBlockSectionToggle=ee(this,"calciteBlockSectionToggle",7),this.open=!1,this.toggleDisplay="button",this.guid=Oe(),this.handleHeaderKeyDown=e=>{" "!==e.key&&"Enter"!==e.key||(this.toggleSection(),e.preventDefault(),e.stopPropagation())},this.toggleSection=()=>{this.open=!this.open,this.calciteBlockSectionToggle.emit()}}renderStatusIcon(){var e;const{status:t}=this,i=null!==(e=ri[t])&&void 0!==e&&e;return i?C("calcite-icon",{class:{[Qt]:!0,[ei]:"valid"==t,[Wt]:"invalid"==t},icon:i,scale:"s"}):null}render(){const{el:e,intlCollapse:t,intlExpand:i,open:r,text:n,toggleDisplay:o}=this,s=Ae(e),a=r?ri.menuOpen:"rtl"===s?ri.menuClosedLeft:ri.menuClosedRight,l=r?t||ti:i||ii,{guid:c}=this,u=`${c}-region`,h=`${c}-button`,d="switch"===o?C("div",{"aria-controls":u,"aria-label":l,class:{[Ht]:!0,[Jt]:!0},id:h,onClick:this.toggleSection,onKeyDown:this.handleHeaderKeyDown,tabIndex:0,title:l},C("div",{class:Yt},C("span",{class:Zt},n)),C("calcite-switch",{checked:r,label:l,scale:"s",tabIndex:-1}),this.renderStatusIcon()):C("button",{"aria-controls":u,"aria-label":l,class:{[Kt]:!0,[Ht]:!0},id:h,name:l,onClick:this.toggleSection},C("calcite-icon",{icon:a,scale:"s"}),C("span",{class:Xt},n),this.renderStatusIcon());return C(A,null,d,C("section",{"aria-expanded":r.toString(),"aria-labelledby":h,class:Bt,hidden:!r,id:u},C("slot",null)))}get el(){return this}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size--1);color:var(--calcite-ui-text-2)}:host([open]){border-width:0px;border-bottom-width:1px;border-style:solid;border-bottom-color:var(--calcite-ui-border-3)}:host(:last-child){border-bottom-width:0px}.toggle{width:100%;border-width:0px;background-color:transparent;font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}.toggle--switch,.section-header{margin-left:0px;margin-right:0px;margin-top:0.25rem;margin-bottom:0.25rem;display:-ms-flexbox;display:flex;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-align:center;align-items:center;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;font-size:var(--calcite-font-size--1);outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}.toggle--switch:focus,.section-header:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.toggle--switch:hover,.section-header:hover{color:var(--calcite-ui-text-1)}.section-header .status-icon{-ms-flex-item-align:end;align-self:flex-end}.section-header__text{margin-left:0.75rem;margin-right:0.75rem;margin-top:0px;margin-bottom:0px;-ms-flex:1 1 auto;flex:1 1 auto;text-align:initial;word-wrap:anywhere}.toggle--switch calcite-switch{pointer-events:none;-webkit-margin-start:0.25rem;margin-inline-start:0.25rem}.toggle--switch .status-icon{-webkit-margin-start:0.5rem;margin-inline-start:0.5rem}.toggle--switch__content{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-align:center;align-items:center}.status-icon.valid{color:var(--calcite-ui-success)}.status-icon.invalid{color:var(--calcite-ui-danger)}"}};!function(e){function t(e,t,i){throw new e("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+t+".",i)}"function"!=typeof e.requestSubmit&&(e.requestSubmit=function(e){e?(!function(e,i){e instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==e.type||t(TypeError,"The specified element is not a submit button"),e.form==i||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}(e,this),e.click()):((e=document.createElement("input")).type="submit",e.hidden=!0,this.appendChild(e),e.click(),this.removeChild(e))})}(HTMLFormElement.prototype);const oi="calcite-button--loader",si="content",ai="content--slotted",li="icon",ci="icon--start",ui="icon--end",hi="loading-in",di="loading-out",pi="icon-start-empty",fi="icon-end-empty",mi="Loading",gi=new WeakMap,yi=new Set,vi=e=>{const{id:t}=e,i=t&&function(e,{selector:t,id:i}){return function e(r){if(!r)return null;r.assignedSlot&&(r=r.assignedSlot);const n=Re(r),o=i?"getElementById"in n?n.getElementById(i):null:t?n.querySelector(t):null,s=Le(n);return o||(s?e(s):null)}(e)}(e,{selector:`calcite-label[for="${t}"]`});if(i)return i;const r=De(e,"calcite-label");return!r||function(e,t){let i;const r="custom-element-ancestor-check",n=r=>{r.stopImmediatePropagation();const n=r.composedPath();i=n.slice(n.indexOf(t),n.indexOf(e))};e.addEventListener(r,n,{once:!0}),t.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),e.removeEventListener(r,n);return i.filter((i=>i!==t&&i!==e)).filter((e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.includes("-")})).length>0}(r,e)?null:r};function bi(e){const t=vi(e.el);if(gi.has(t))return;const i=_i.bind(e),r=xi.bind(e);if(t){(()=>{e.labelEl=t;const i=wi.bind(e);gi.set(e.labelEl,i),e.labelEl.addEventListener("calciteInternalLabelClick",i)})(),yi.delete(e),document.removeEventListener("calciteInternalLabelConnected",i),document.addEventListener("calciteInternaLabelDisconnected",r)}else t||yi.has(e)||(r(),document.removeEventListener("calciteInternaLabelDisconnected",r))}function wi(e){if(this.disabled)return;this.el.contains(e.detail.sourceEvent.target)||this.onLabelClick(e)}function _i(){yi.has(this)&&bi(this)}function xi(){yi.add(this);const e=_i.bind(this);document.addEventListener("calciteInternalLabelConnected",e)}const Si=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.alignment="center",this.appearance="solid",this.color="blue",this.disabled=!1,this.intlLoading=mi,this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto",this.mutationObserver=Ve("mutation",(()=>this.updateHasContent())),this.hasContent=!1,this.hasLoader=!1,this.handleClick=()=>{const{formEl:e,type:t}=this;this.href||("submit"===t?null==e||e.requestSubmit():"reset"===t&&(null==e||e.reset()))}}loadingChanged(e,t){e&&!t&&(this.hasLoader=!0),!e&&t&&window.setTimeout((()=>{this.hasLoader=!1}),300)}connectedCallback(){this.hasLoader=this.loading,this.setupTextContentObserver(),bi(this),this.formEl=De(this.el,this.form?`#${this.form}`:"form")}disconnectedCallback(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect(),function(e){const t=_i.bind(e),i=xi.bind(e);if(yi.delete(e),document.removeEventListener("calciteInternalLabelConnected",t),document.removeEventListener("calciteInternaLabelDisconnected",i),!e.labelEl)return;const r=gi.get(e.labelEl);e.labelEl.removeEventListener("calciteInternalLabelClick",r),gi.delete(e.labelEl)}(this),this.formEl=null}componentWillLoad(){this.updateHasContent()}componentDidRender(){Ue(this)}render(){const e=this.href?"a":"button",t=e,i=this.hasLoader?C("div",{class:oi},C("calcite-loader",{active:!0,class:this.loading?hi:di,inline:!0,label:this.intlLoading,scale:"m"})):null,r=C("calcite-icon",{class:{[li]:!0,[ci]:!0},flipRtl:"start"===this.iconFlipRtl||"both"===this.iconFlipRtl,icon:this.iconStart,scale:"s"}),n=C("calcite-icon",{class:{[li]:!0,[ui]:!0},flipRtl:"end"===this.iconFlipRtl||"both"===this.iconFlipRtl,icon:this.iconEnd,scale:"s"}),o=C("span",{class:si},C("slot",null));return C(t,{"aria-label":(s=this,s.label||(null===(l=null===(a=s.labelEl)||void 0===a?void 0:a.textContent)||void 0===l?void 0:l.trim())||""),class:{[ai]:this.hasContent,[pi]:!this.iconStart,[fi]:!this.iconEnd},disabled:this.disabled||this.loading,href:"a"===e&&this.href,name:"button"===e&&this.name,onClick:this.handleClick,ref:e=>this.childEl=e,rel:"a"===e&&this.rel,tabIndex:this.disabled||this.loading?-1:null,target:"a"===e&&this.target,type:"button"===e&&this.type},i,this.iconStart?r:null,this.hasContent?o:null,this.iconEnd?n:null);var s,a,l}async setFocus(){this.childEl.focus()}updateHasContent(){var e,t;const i=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=1===this.el.childNodes.length&&"#text"===(null===(e=this.el.childNodes[0])||void 0===e?void 0:e.nodeName)?(null===(t=this.el.textContent)||void 0===t?void 0:t.trim().length)>0:i}setupTextContentObserver(){var e;null===(e=this.mutationObserver)||void 0===e||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}get el(){return this}static get watchers(){return{loading:["loadingChanged"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:inline-block;width:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host button,:host a{--calcite-button-content-margin:0.5rem;--calcite-button-padding-x:7px;--calcite-button-padding-y:3px;padding:var(--calcite-button-padding-y) var(--calcite-button-padding-x) var(--calcite-button-padding-y) var(--calcite-button-padding-x);position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;height:100%;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);-webkit-text-decoration-line:none;text-decoration-line:none;-webkit-transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, outline-offset var(--calcite-internal-animation-timing-fast) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out, -webkit-box-shadow var(--calcite-animation-timing) ease-in-out;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, outline-offset var(--calcite-internal-animation-timing-fast) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out, -webkit-box-shadow var(--calcite-animation-timing) ease-in-out;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-offset var(--calcite-internal-animation-timing-fast) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-offset var(--calcite-internal-animation-timing-fast) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out, -webkit-box-shadow var(--calcite-animation-timing) ease-in-out}:host button:hover,:host a:hover{-webkit-text-decoration-line:none;text-decoration-line:none}.content{display:-ms-flexbox;display:flex;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-margin-start:var(--calcite-button-content-margin);margin-inline-start:var(--calcite-button-content-margin);-webkit-margin-end:var(--calcite-button-content-margin);margin-inline-end:var(--calcite-button-content-margin)}.icon-start-empty .content{-webkit-margin-start:unset;margin-inline-start:unset}.icon-end-empty .content{-webkit-margin-end:unset;margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin:1rem}:host([width=auto]){width:auto}:host([width=half]){width:50%}:host([width=full]){width:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{-ms-flex-pack:center;justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{-ms-flex-pack:start;justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{-ms-flex-pack:end;justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{-ms-flex-pack:justify;justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{-webkit-margin-end:auto;margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{-webkit-margin-start:auto;margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{-webkit-margin-start:var(--calcite-button-content-margin);margin-inline-start:var(--calcite-button-content-margin)}.icon{position:relative;margin:0px;display:-ms-inline-flexbox;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([loading]){pointer-events:none}:host([loading]) button,:host([loading]) a{pointer-events:none;opacity:var(--calcite-ui-opacity-disabled)}@-webkit-keyframes loader-in{0%{width:0;opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}100%{width:1em;opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes loader-in{0%{width:0;opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}100%{width:1em;opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes loader-out{0%{width:1em;opacity:1;-webkit-transform:scale(1);transform:scale(1)}100%{width:0;opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}}@keyframes loader-out{0%{width:1em;opacity:1;-webkit-transform:scale(1);transform:scale(1)}100%{width:0;opacity:0;-webkit-transform:scale(0.5);transform:scale(0.5)}}.calcite-button--loader{display:-ms-flexbox;display:flex}.calcite-button--loader calcite-loader{margin:0px;-webkit-transition:width var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, -webkit-transform var(--calcite-internal-animation-timing-slow) ease-in-out;transition:width var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, -webkit-transform var(--calcite-internal-animation-timing-slow) ease-in-out;transition:width var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, transform var(--calcite-internal-animation-timing-slow) ease-in-out;transition:width var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, transform var(--calcite-internal-animation-timing-slow) ease-in-out, -webkit-transform var(--calcite-internal-animation-timing-slow) ease-in-out}.calcite-button--loader calcite-loader.loading-in{-webkit-animation-name:loader-in;animation-name:loader-in;-webkit-animation-duration:310ms;animation-duration:310ms}.calcite-button--loader calcite-loader.loading-out{-webkit-animation-name:loader-out;animation-name:loader-out;-webkit-animation-duration:310ms;animation-duration:310ms}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{-webkit-margin-end:var(--calcite-button-content-margin);margin-inline-end:var(--calcite-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance=solid]) button,:host([appearance=solid]) a{border-width:1px;border-style:solid;border-color:transparent}:host([appearance=solid][color=blue]) button,:host([appearance=solid][color=blue]) a{background-color:var(--calcite-ui-brand);color:var(--calcite-ui-text-inverse)}:host([appearance=solid][color=blue]) button:hover,:host([appearance=solid][color=blue]) button:focus,:host([appearance=solid][color=blue]) a:hover,:host([appearance=solid][color=blue]) a:focus{background-color:var(--calcite-ui-brand-hover)}:host([appearance=solid][color=blue]) button:active,:host([appearance=solid][color=blue]) a:active{background-color:var(--calcite-ui-brand-press)}:host([appearance=solid][color=blue]) button calcite-loader,:host([appearance=solid][color=blue]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([appearance=solid][color=red]) button,:host([appearance=solid][color=red]) a{background-color:var(--calcite-ui-danger);color:var(--calcite-ui-text-inverse)}:host([appearance=solid][color=red]) button:hover,:host([appearance=solid][color=red]) button:focus,:host([appearance=solid][color=red]) a:hover,:host([appearance=solid][color=red]) a:focus{background-color:var(--calcite-ui-danger-hover)}:host([appearance=solid][color=red]) button:active,:host([appearance=solid][color=red]) a:active{background-color:var(--calcite-ui-danger-press)}:host([appearance=solid][color=red]) button calcite-loader,:host([appearance=solid][color=red]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([appearance=solid][color=neutral]) button,:host([appearance=solid][color=neutral]) a{background-color:var(--calcite-ui-foreground-3);color:var(--calcite-ui-text-1)}:host([appearance=solid][color=neutral]) button:hover,:host([appearance=solid][color=neutral]) button:focus,:host([appearance=solid][color=neutral]) a:hover,:host([appearance=solid][color=neutral]) a:focus{background-color:var(--calcite-ui-foreground-2)}:host([appearance=solid][color=neutral]) button:active,:host([appearance=solid][color=neutral]) a:active{background-color:var(--calcite-ui-foreground-1)}:host([appearance=solid][color=neutral]) button calcite-loader,:host([appearance=solid][color=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=solid][color=inverse]) button,:host([appearance=solid][color=inverse]) a{color:var(--calcite-ui-text-inverse);background-color:var(--calcite-ui-inverse)}:host([appearance=solid][color=inverse]) button:hover,:host([appearance=solid][color=inverse]) button:focus,:host([appearance=solid][color=inverse]) a:hover,:host([appearance=solid][color=inverse]) a:focus{background-color:var(--calcite-ui-inverse-hover)}:host([appearance=solid][color=inverse]) button:active,:host([appearance=solid][color=inverse]) a:active{background-color:var(--calcite-ui-inverse-press)}:host([appearance=solid][color=inverse]) button calcite-loader,:host([appearance=solid][color=inverse]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:var(--calcite-ui-foreground-1);-webkit-box-shadow:inset 0 0 0 1px transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][color=blue]) button,:host([appearance=outline][color=blue]) a{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand)}:host([appearance=outline][color=blue]) button:hover,:host([appearance=outline][color=blue]) a:hover{border-color:var(--calcite-ui-brand-hover);color:var(--calcite-ui-brand-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover)}:host([appearance=outline][color=blue]) button:focus,:host([appearance=outline][color=blue]) a:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-brand);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}:host([appearance=outline][color=blue]) button:active,:host([appearance=outline][color=blue]) a:active{border-color:var(--calcite-ui-brand-press);color:var(--calcite-ui-brand-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press)}:host([appearance=outline][color=blue]) button calcite-loader,:host([appearance=outline][color=blue]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=outline][color=red]) button,:host([appearance=outline][color=red]) a{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger)}:host([appearance=outline][color=red]) button:hover,:host([appearance=outline][color=red]) a:hover{border-color:var(--calcite-ui-danger-hover);color:var(--calcite-ui-danger-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover)}:host([appearance=outline][color=red]) button:focus,:host([appearance=outline][color=red]) a:focus{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-danger);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger)}:host([appearance=outline][color=red]) button:active,:host([appearance=outline][color=red]) a:active{border-color:var(--calcite-ui-danger-press);color:var(--calcite-ui-danger-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press)}:host([appearance=outline][color=red]) button calcite-loader,:host([appearance=outline][color=red]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=outline][color=neutral]) button,:host([appearance=outline][color=neutral]) a{color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-foreground-3)}:host([appearance=outline][color=neutral]) button:hover,:host([appearance=outline][color=neutral]) a:hover{-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}:host([appearance=outline][color=neutral]) button:focus,:host([appearance=outline][color=neutral]) a:focus{-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline][color=neutral]) button:active,:host([appearance=outline][color=neutral]) a:active{-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline][color=neutral]) button calcite-loader,:host([appearance=outline][color=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline][color=inverse]) button,:host([appearance=outline][color=inverse]) a{color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-inverse)}:host([appearance=outline][color=inverse]) button:hover,:host([appearance=outline][color=inverse]) a:hover{border-color:var(--calcite-ui-inverse-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover)}:host([appearance=outline][color=inverse]) button:focus,:host([appearance=outline][color=inverse]) a:focus{border-color:var(--calcite-ui-inverse);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse)}:host([appearance=outline][color=inverse]) button:active,:host([appearance=outline][color=inverse]) a:active{border-color:var(--calcite-ui-inverse-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press)}:host([appearance=outline][color=inverse]) button calcite-loader,:host([appearance=outline][color=inverse]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=clear]) button,:host([appearance=clear]) a{border-width:1px;border-style:solid;background-color:transparent;-webkit-box-shadow:inset 0 0 0 1px transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=clear][color=blue]) button,:host([appearance=clear][color=blue]) a{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand)}:host([appearance=clear][color=blue]) button:hover,:host([appearance=clear][color=blue]) a:hover{border-color:var(--calcite-ui-brand-hover);color:var(--calcite-ui-brand-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover)}:host([appearance=clear][color=blue]) button:focus,:host([appearance=clear][color=blue]) a:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-brand);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}:host([appearance=clear][color=blue]) button:active,:host([appearance=clear][color=blue]) a:active{border-color:var(--calcite-ui-brand-press);color:var(--calcite-ui-brand-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press)}:host([appearance=clear][color=blue]) button calcite-loader,:host([appearance=clear][color=blue]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=clear][color=red]) button,:host([appearance=clear][color=red]) a{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger)}:host([appearance=clear][color=red]) button:hover,:host([appearance=clear][color=red]) a:hover{border-color:var(--calcite-ui-danger-hover);color:var(--calcite-ui-danger-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover)}:host([appearance=clear][color=red]) button:focus,:host([appearance=clear][color=red]) a:focus{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-danger);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger)}:host([appearance=clear][color=red]) button:active,:host([appearance=clear][color=red]) a:active{border-color:var(--calcite-ui-danger-press);color:var(--calcite-ui-danger-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press)}:host([appearance=clear][color=red]) button calcite-loader,:host([appearance=clear][color=red]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=clear][color=neutral]) button,:host([appearance=clear][color=neutral]) a{color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-foreground-3)}:host([appearance=clear][color=neutral]) button:hover,:host([appearance=clear][color=neutral]) a:hover{-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}:host([appearance=clear][color=neutral]) button:focus,:host([appearance=clear][color=neutral]) a:focus{-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=clear][color=neutral]) button:active,:host([appearance=clear][color=neutral]) a:active{-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3);box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=clear][color=neutral]) button calcite-loader,:host([appearance=clear][color=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=clear][color=inverse]) button,:host([appearance=clear][color=inverse]) a{color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-inverse)}:host([appearance=clear][color=inverse]) button:hover,:host([appearance=clear][color=inverse]) a:hover{border-color:var(--calcite-ui-inverse-hover);-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover)}:host([appearance=clear][color=inverse]) button:focus,:host([appearance=clear][color=inverse]) a:focus{border-color:var(--calcite-ui-inverse);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse)}:host([appearance=clear][color=inverse]) button:active,:host([appearance=clear][color=inverse]) a:active{border-color:var(--calcite-ui-inverse-press);-webkit-box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press)}:host([appearance=clear][color=inverse]) button calcite-loader,:host([appearance=clear][color=inverse]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline][split-child=primary]) button,:host([appearance=clear][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline][split-child=secondary]) button,:host([appearance=clear][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-button-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-button-transparent-press)}:host([appearance=transparent][color=blue]) button,:host([appearance=transparent][color=blue]) a{color:var(--calcite-ui-brand)}:host([appearance=transparent][color=blue]) button:hover,:host([appearance=transparent][color=blue]) a:hover{color:var(--calcite-ui-brand-hover)}:host([appearance=transparent][color=blue]) button:focus,:host([appearance=transparent][color=blue]) a:focus{color:var(--calcite-ui-brand)}:host([appearance=transparent][color=blue]) button:active,:host([appearance=transparent][color=blue]) a:active{color:var(--calcite-ui-brand-press)}:host([appearance=transparent][color=blue]) button calcite-loader,:host([appearance=transparent][color=blue]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=transparent][color=red]) button,:host([appearance=transparent][color=red]) a{color:var(--calcite-ui-danger)}:host([appearance=transparent][color=red]) button:hover,:host([appearance=transparent][color=red]) a:hover{color:var(--calcite-ui-danger-hover)}:host([appearance=transparent][color=red]) button:focus,:host([appearance=transparent][color=red]) a:focus{color:var(--calcite-ui-danger)}:host([appearance=transparent][color=red]) button:active,:host([appearance=transparent][color=red]) a:active{color:var(--calcite-ui-danger-press)}:host([appearance=transparent][color=red]) button calcite-loader,:host([appearance=transparent][color=red]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=transparent][color=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][color=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][color=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=transparent][color=neutral].cancel-editing-button) button{border-top-width:1px;border-bottom-width:1px;color:var(--calcite-ui-text-3);border-top-color:var(--calcite-ui-border-input);border-bottom-color:var(--calcite-ui-border-input);border-bottom-style:solid;border-top-style:solid}:host([appearance=transparent][color=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y:0}:host([appearance=transparent][color=neutral].cancel-editing-button) button:hover{color:var(--calcite-ui-text-1)}:host([appearance=transparent][color=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][color=inverse]) button,:host([appearance=transparent][color=inverse]) a,:host([appearance=transparent][color=inverse]) calcite-loader{color:var(--calcite-ui-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x:0.5rem;--calcite-button-padding-y:0.25rem}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]:not([appearance=transparent])) button.content--slotted,:host([scale=m]:not([appearance=transparent])) a.content--slotted{--calcite-button-padding-y:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x:0.75rem;--calcite-button-padding-y:0.5rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]:not([appearance=transparent])) button.content--slotted,:host([scale=l]:not([appearance=transparent])) a.content--slotted{--calcite-button-padding-y:11px}:host([scale=l][appearance=transparent]) button.content--slotted,:host([scale=l][appearance=transparent]) a.content--slotted{--calcite-button-padding-x:1rem;--calcite-button-padding-y:0.75rem}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x:0.125rem;--calcite-button-padding-y:3px;width:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-height:1.5rem}:host([scale=s][appearance=transparent]) button:not(.content--slotted),:host([scale=s][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y:0.25rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x:0.125rem;--calcite-button-padding-y:7px;width:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-height:2rem}:host([scale=m][appearance=transparent]) button:not(.content--slotted),:host([scale=m][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y:0.5rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x:0.125rem;--calcite-button-padding-y:9px;width:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-height:2.75rem}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x:23px;height:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x:2rem;height:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x:43px;height:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{-webkit-margin-start:1rem;margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x:2.75rem}"}};function ki(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var Mi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ti=ki((function(e){var t=Array.prototype.concat,i=Array.prototype.slice,r=e.exports=function(e){for(var r,n=[],o=0,s=e.length;o<s;o++){var a=e[o];(r=a)&&"string"!=typeof r&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name))?n=t.call(n,i.call(a)):n.push(a)}return n};r.wrap=function(e){return function(){return e(r(arguments))}}})),Ei=ki((function(e){var t=Object.hasOwnProperty,i={};for(var r in Mi)t.call(Mi,r)&&(i[Mi[r]]=r);var n=e.exports={to:{},get:{}};function o(e,t,i){return Math.min(Math.max(t,e),i)}function s(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}n.get=function(e){var t,i;switch(e.substring(0,3).toLowerCase()){case"hsl":t=n.get.hsl(e),i="hsl";break;case"hwb":t=n.get.hwb(e),i="hwb";break;default:t=n.get.rgb(e),i="rgb"}return t?{model:i,value:t}:null},n.get.rgb=function(e){if(!e)return null;var i,r,n,s=[0,0,0,1];if(i=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=i[2],i=i[1],r=0;r<3;r++){var a=2*r;s[r]=parseInt(i.slice(a,a+2),16)}n&&(s[3]=parseInt(n,16)/255)}else if(i=e.match(/^#([a-f0-9]{3,4})$/i)){for(n=(i=i[1])[3],r=0;r<3;r++)s[r]=parseInt(i[r]+i[r],16);n&&(s[3]=parseInt(n+n,16)/255)}else if(i=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)s[r]=parseInt(i[r+1],0);i[4]&&(i[5]?s[3]=.01*parseFloat(i[4]):s[3]=parseFloat(i[4]))}else{if(!(i=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(i=e.match(/^(\w+)$/))?"transparent"===i[1]?[0,0,0,0]:t.call(Mi,i[1])?((s=Mi[i[1]])[3]=1,s):null:null;for(r=0;r<3;r++)s[r]=Math.round(2.55*parseFloat(i[r+1]));i[4]&&(i[5]?s[3]=.01*parseFloat(i[4]):s[3]=parseFloat(i[4]))}for(r=0;r<3;r++)s[r]=o(s[r],0,255);return s[3]=o(s[3],0,1),s},n.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var i=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,o(parseFloat(t[2]),0,100),o(parseFloat(t[3]),0,100),o(isNaN(i)?1:i,0,1)]}return null},n.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var i=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,o(parseFloat(t[2]),0,100),o(parseFloat(t[3]),0,100),o(isNaN(i)?1:i,0,1)]}return null},n.to.hex=function(){var e=Ti(arguments);return"#"+s(e[0])+s(e[1])+s(e[2])+(e[3]<1?s(Math.round(255*e[3])):"")},n.to.rgb=function(){var e=Ti(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},n.to.rgb.percent=function(){var e=Ti(arguments),t=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+i+"%, "+r+"%)":"rgba("+t+"%, "+i+"%, "+r+"%, "+e[3]+")"},n.to.hsl=function(){var e=Ti(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},n.to.hwb=function(){var e=Ti(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},n.to.keyword=function(e){return i[e.slice(0,3)]}})),Ii={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Ci={};for(const e of Object.keys(Ii))Ci[Ii[e]]=e;const Oi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Ai=Oi;for(const e of Object.keys(Oi)){if(!("channels"in Oi[e]))throw new Error("missing channels property: "+e);if(!("labels"in Oi[e]))throw new Error("missing channel labels property: "+e);if(Oi[e].labels.length!==Oi[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:i}=Oi[e];delete Oi[e].channels,delete Oi[e].labels,Object.defineProperty(Oi[e],"channels",{value:t}),Object.defineProperty(Oi[e],"labels",{value:i})}function Pi(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}function Ri(e){const t=function(){const e={},t=Object.keys(Ai);for(let i=t.length,r=0;r<i;r++)e[t[r]]={distance:-1,parent:null};return e}(),i=[e];for(t[e].distance=0;i.length;){const e=i.pop(),r=Object.keys(Ai[e]);for(let n=r.length,o=0;o<n;o++){const n=r[o],s=t[n];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,i.unshift(n))}}return t}function Li(e,t){return function(i){return t(e(i))}}function Di(e,t){const i=[t[e].parent,e];let r=Ai[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)i.unshift(t[n].parent),r=Li(Ai[t[n].parent][n],r),n=t[n].parent;return r.conversion=i,r}Oi.rgb.hsl=function(e){const t=e[0]/255,i=e[1]/255,r=e[2]/255,n=Math.min(t,i,r),o=Math.max(t,i,r),s=o-n;let a,l;o===n?a=0:t===o?a=(i-r)/s:i===o?a=2+(r-t)/s:r===o&&(a=4+(t-i)/s),a=Math.min(60*a,360),a<0&&(a+=360);const c=(n+o)/2;return l=o===n?0:c<=.5?s/(o+n):s/(2-o-n),[a,100*l,100*c]},Oi.rgb.hsv=function(e){let t,i,r,n,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),h=function(e){return(c-e)/6/u+.5};return 0===u?(n=0,o=0):(o=u/c,t=h(s),i=h(a),r=h(l),s===c?n=r-i:a===c?n=1/3+t-r:l===c&&(n=2/3+i-t),n<0?n+=1:n>1&&(n-=1)),[360*n,100*o,100*c]},Oi.rgb.hwb=function(e){const t=e[0],i=e[1];let r=e[2];const n=Oi.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(i,r));return r=1-1/255*Math.max(t,Math.max(i,r)),[n,100*o,100*r]},Oi.rgb.cmyk=function(e){const t=e[0]/255,i=e[1]/255,r=e[2]/255,n=Math.min(1-t,1-i,1-r);return[100*((1-t-n)/(1-n)||0),100*((1-i-n)/(1-n)||0),100*((1-r-n)/(1-n)||0),100*n]},Oi.rgb.keyword=function(e){const t=Ci[e];if(t)return t;let i,r=1/0;for(const t of Object.keys(Ii)){const n=Pi(e,Ii[t]);n<r&&(r=n,i=t)}return i},Oi.keyword.rgb=function(e){return Ii[e]},Oi.rgb.xyz=function(e){let t=e[0]/255,i=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*i+.1805*r),100*(.2126*t+.7152*i+.0722*r),100*(.0193*t+.1192*i+.9505*r)]},Oi.rgb.lab=function(e){const t=Oi.rgb.xyz(e);let i=t[0],r=t[1],n=t[2];i/=95.047,r/=100,n/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(i-r),200*(r-n)]},Oi.hsl.rgb=function(e){const t=e[0]/360,i=e[1]/100,r=e[2]/100;let n,o,s;if(0===i)return s=255*r,[s,s,s];n=r<.5?r*(1+i):r+i-r*i;const a=2*r-n,l=[0,0,0];for(let e=0;e<3;e++)o=t+1/3*-(e-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(n-a)*o:2*o<1?n:3*o<2?a+(n-a)*(2/3-o)*6:a,l[e]=255*s;return l},Oi.hsl.hsv=function(e){const t=e[0];let i=e[1]/100,r=e[2]/100,n=i;const o=Math.max(r,.01);r*=2,i*=r<=1?r:2-r,n*=o<=1?o:2-o;return[t,100*(0===r?2*n/(o+n):2*i/(r+i)),100*((r+i)/2)]},Oi.hsv.rgb=function(e){const t=e[0]/60,i=e[1]/100;let r=e[2]/100;const n=Math.floor(t)%6,o=t-Math.floor(t),s=255*r*(1-i),a=255*r*(1-i*o),l=255*r*(1-i*(1-o));switch(r*=255,n){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},Oi.hsv.hsl=function(e){const t=e[0],i=e[1]/100,r=e[2]/100,n=Math.max(r,.01);let o,s;s=(2-i)*r;const a=(2-i)*n;return o=i*n,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},Oi.hwb.rgb=function(e){const t=e[0]/360;let i=e[1]/100,r=e[2]/100;const n=i+r;let o;n>1&&(i/=n,r/=n);const s=Math.floor(6*t),a=1-r;o=6*t-s,0!=(1&s)&&(o=1-o);const l=i+o*(a-i);let c,u,h;switch(s){default:case 6:case 0:c=a,u=l,h=i;break;case 1:c=l,u=a,h=i;break;case 2:c=i,u=a,h=l;break;case 3:c=i,u=l,h=a;break;case 4:c=l,u=i,h=a;break;case 5:c=a,u=i,h=l}return[255*c,255*u,255*h]},Oi.cmyk.rgb=function(e){const t=e[0]/100,i=e[1]/100,r=e[2]/100,n=e[3]/100;return[255*(1-Math.min(1,t*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]},Oi.xyz.rgb=function(e){const t=e[0]/100,i=e[1]/100,r=e[2]/100;let n,o,s;return n=3.2406*t+-1.5372*i+-.4986*r,o=-.9689*t+1.8758*i+.0415*r,s=.0557*t+-.204*i+1.057*r,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*n,255*o,255*s]},Oi.xyz.lab=function(e){let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*i-16,500*(t-i),200*(i-r)]},Oi.lab.xyz=function(e){let t,i,r;i=(e[0]+16)/116,t=e[1]/500+i,r=i-e[2]/200;const n=i**3,o=t**3,s=r**3;return i=n>.008856?n:(i-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,t*=95.047,i*=100,r*=108.883,[t,i,r]},Oi.lab.lch=function(e){const t=e[0],i=e[1],r=e[2];let n;n=360*Math.atan2(r,i)/2/Math.PI,n<0&&(n+=360);return[t,Math.sqrt(i*i+r*r),n]},Oi.lch.lab=function(e){const t=e[0],i=e[1],r=e[2]/360*2*Math.PI;return[t,i*Math.cos(r),i*Math.sin(r)]},Oi.rgb.ansi16=function(e,t=null){const[i,r,n]=e;let o=null===t?Oi.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),0===o)return 30;let s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(i/255));return 2===o&&(s+=60),s},Oi.hsv.ansi16=function(e){return Oi.rgb.ansi16(Oi.hsv.rgb(e),e[2])},Oi.rgb.ansi256=function(e){const t=e[0],i=e[1],r=e[2];if(t===i&&i===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5)},Oi.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const i=.5*(1+~~(e>50));return[(1&t)*i*255,(t>>1&1)*i*255,(t>>2&1)*i*255]},Oi.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},Oi.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},Oi.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let i=t[0];3===t[0].length&&(i=i.split("").map((e=>e+e)).join(""));const r=parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},Oi.rgb.hcg=function(e){const t=e[0]/255,i=e[1]/255,r=e[2]/255,n=Math.max(Math.max(t,i),r),o=Math.min(Math.min(t,i),r),s=n-o;let a,l;return a=s<1?o/(1-s):0,l=s<=0?0:n===t?(i-r)/s%6:n===i?2+(r-t)/s:4+(t-i)/s,l/=6,l%=1,[360*l,100*s,100*a]},Oi.hsl.hcg=function(e){const t=e[1]/100,i=e[2]/100,r=i<.5?2*t*i:2*t*(1-i);let n=0;return r<1&&(n=(i-.5*r)/(1-r)),[e[0],100*r,100*n]},Oi.hsv.hcg=function(e){const t=e[1]/100,i=e[2]/100,r=t*i;let n=0;return r<1&&(n=(i-r)/(1-r)),[e[0],100*r,100*n]},Oi.hcg.rgb=function(e){const t=e[0]/360,i=e[1]/100,r=e[2]/100;if(0===i)return[255*r,255*r,255*r];const n=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:n[0]=1,n[1]=s,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=s;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=s,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return l=(1-i)*r,[255*(i*n[0]+l),255*(i*n[1]+l),255*(i*n[2]+l)]},Oi.hcg.hsv=function(e){const t=e[1]/100,i=t+e[2]/100*(1-t);let r=0;return i>0&&(r=t/i),[e[0],100*r,100*i]},Oi.hcg.hsl=function(e){const t=e[1]/100,i=e[2]/100*(1-t)+.5*t;let r=0;return i>0&&i<.5?r=t/(2*i):i>=.5&&i<1&&(r=t/(2*(1-i))),[e[0],100*r,100*i]},Oi.hcg.hwb=function(e){const t=e[1]/100,i=t+e[2]/100*(1-t);return[e[0],100*(i-t),100*(1-i)]},Oi.hwb.hcg=function(e){const t=e[1]/100,i=1-e[2]/100,r=i-t;let n=0;return r<1&&(n=(i-r)/(1-r)),[e[0],100*r,100*n]},Oi.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},Oi.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},Oi.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},Oi.gray.hsl=function(e){return[0,0,e[0]]},Oi.gray.hsv=Oi.gray.hsl,Oi.gray.hwb=function(e){return[0,100,e[0]]},Oi.gray.cmyk=function(e){return[0,0,0,e[0]]},Oi.gray.lab=function(e){return[e[0],0,0]},Oi.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i},Oi.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const Ni={};Object.keys(Ai).forEach((e=>{Ni[e]={},Object.defineProperty(Ni[e],"channels",{value:Ai[e].channels}),Object.defineProperty(Ni[e],"labels",{value:Ai[e].labels});const t=function(e){const t=Ri(e),i={},r=Object.keys(t);for(let e=r.length,n=0;n<e;n++){const e=r[n];null!==t[e].parent&&(i[e]=Di(e,t))}return i}(e);Object.keys(t).forEach((i=>{const r=t[i];Ni[e][i]=function(e){const t=function(...t){const i=t[0];if(null==i)return i;i.length>1&&(t=i);const r=e(t);if("object"==typeof r)for(let e=r.length,t=0;t<e;t++)r[t]=Math.round(r[t]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(r),Ni[e][i].raw=function(e){const t=function(...t){const i=t[0];return null==i?i:(i.length>1&&(t=i),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))}));var Fi=Ni;const ji=["keyword","gray","hex"],$i={};for(const e of Object.keys(Fi))$i[[...Fi[e].labels].sort().join("")]=e;const Vi={};function zi(e,t){if(!(this instanceof zi))return new zi(e,t);if(t&&t in ji&&(t=null),t&&!(t in Fi))throw new Error("Unknown model: "+t);let i,r;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof zi)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){const t=Ei.get(e);if(null===t)throw new Error("Unable to parse color from string: "+e);this.model=t.model,r=Fi[this.model].channels,this.color=t.value.slice(0,r),this.valpha="number"==typeof t.value[r]?t.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Fi[this.model].channels;const i=Array.prototype.slice.call(e,0,r);this.color=Bi(i,r),this.valpha="number"==typeof e[r]?e[r]:1}else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;const t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);const r=t.sort().join("");if(!(r in $i))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=$i[r];const{labels:n}=Fi[this.model],o=[];for(i=0;i<n.length;i++)o.push(e[n[i]]);this.color=Bi(o)}if(Vi[this.model])for(r=Fi[this.model].channels,i=0;i<r;i++){const e=Vi[this.model][i];e&&(this.color[i]=e(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}zi.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in Ei.to?this:this.rgb();t=t.round("number"==typeof e?e:1);const i=1===t.valpha?t.color:[...t.color,this.valpha];return Ei.to[t.model](i)},percentString(e){const t=this.rgb().round("number"==typeof e?e:1),i=1===t.valpha?t.color:[...t.color,this.valpha];return Ei.to.rgb.percent(i)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Fi[this.model],{labels:i}=Fi[this.model];for(let r=0;r<t;r++)e[i[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new zi([...this.color.map(Ui(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new zi([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:qi("rgb",0,Gi(255)),green:qi("rgb",1,Gi(255)),blue:qi("rgb",2,Gi(255)),hue:qi(["hsl","hsv","hsl","hwb","hcg"],0,(e=>(e%360+360)%360)),saturationl:qi("hsl",1,Gi(100)),lightness:qi("hsl",2,Gi(100)),saturationv:qi("hsv",1,Gi(100)),value:qi("hsv",2,Gi(100)),chroma:qi("hcg",1,Gi(100)),gray:qi("hcg",2,Gi(100)),white:qi("hwb",1,Gi(100)),wblack:qi("hwb",2,Gi(100)),cyan:qi("cmyk",0,Gi(100)),magenta:qi("cmyk",1,Gi(100)),yellow:qi("cmyk",2,Gi(100)),black:qi("cmyk",3,Gi(100)),x:qi("xyz",0,Gi(95.047)),y:qi("xyz",1,Gi(100)),z:qi("xyz",2,Gi(108.833)),l:qi("lab",0,Gi(100)),a:qi("lab",1),b:qi("lab",2),keyword(e){return void 0!==e?new zi(e):Fi[this.model].keyword(this.color)},hex(e){return void 0!==e?new zi(e):Ei.to.hex(this.rgb().round().color)},hexa(e){if(void 0!==e)return new zi(e);const t=this.rgb().round().color;let i=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===i.length&&(i="0"+i),Ei.to.hex(t)+i},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[i,r]of e.entries()){const e=r/255;t[i]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(2126*e[0]+7152*e[1]+722*e[2])/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return zi.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let i=t.color[0];return i=(i+e)%360,i=i<0?360+i:i,t.color[0]=i,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const i=e.rgb(),r=this.rgb(),n=void 0===t?.5:t,o=2*n-1,s=i.alpha()-r.alpha(),a=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,l=1-a;return zi.rgb(a*i.red()+l*r.red(),a*i.green()+l*r.green(),a*i.blue()+l*r.blue(),i.alpha()*n+r.alpha()*(1-n))}};for(const e of Object.keys(Fi)){if(ji.includes(e))continue;const{channels:t}=Fi[e];zi.prototype[e]=function(...t){return this.model===e?new zi(this):t.length>0?new zi(t,e):new zi([...(i=Fi[this.model][e].raw(this.color),Array.isArray(i)?i:[i]),this.valpha],e);var i},zi[e]=function(...i){let r=i[0];return"number"==typeof r&&(r=Bi(i,t)),new zi(r,e)}}function Ui(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}function qi(e,t,i){e=Array.isArray(e)?e:[e];for(const r of e)(Vi[r]||(Vi[r]=[]))[t]=i;return e=e[0],function(r){let n;return void 0!==r?(i&&(r=i(r)),n=this[e](),n.color[t]=r,n):(n=this[e]().color[t],i&&(n=i(n)),n)}}function Gi(e){return function(t){return Math.max(0,Math.min(e,t))}}function Bi(e,t){for(let i=0;i<t;i++)"number"!=typeof e[i]&&(e[i]=0);return e}var Wi=zi;!function(e){(e=e.toLowerCase()).startsWith("#")||(e=`#${e}`),bt(e)&&function(e){const{r:t,g:i,b:r}=e;`#${t.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`.toLowerCase()}(function(e){if(!vt(e))return null;if(3===(e=e.replace("#","")).length){const[t,i,r]=e.split("");return{r:parseInt(`${t}${t}`,16),g:parseInt(`${i}${i}`,16),b:parseInt(`${r}${r}`,16)}}const t=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return{r:t,g:i,b:r}}(e))}(Wi("#007AC2").hex()),Wi();var Hi="top",Ji="bottom",Yi="right",Zi="left",Ki=[Hi,Ji,Yi,Zi],Xi=Ki.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),Qi=[].concat(Ki,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),er=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function tr(e){return e?(e.nodeName||"").toLowerCase():null}function ir(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rr(e){return e instanceof ir(e).Element||e instanceof Element}function nr(e){return e instanceof ir(e).HTMLElement||e instanceof HTMLElement}function or(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ir(e).ShadowRoot||e instanceof ShadowRoot)}const sr={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},n=t.elements[e];nr(n)&&tr(n)&&(Object.assign(n.style,i),Object.keys(r).forEach((function(e){var t=r[e];!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],n=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});nr(r)&&tr(r)&&(Object.assign(r.style,o),Object.keys(n).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function ar(e){return e.split("-")[0]}var lr=Math.max,cr=Math.min,ur=Math.round;function hr(e,t){void 0===t&&(t=!1);var i=e.getBoundingClientRect(),r=1,n=1;if(nr(e)&&t){var o=e.offsetHeight,s=e.offsetWidth;s>0&&(r=ur(i.width)/s||1),o>0&&(n=ur(i.height)/o||1)}return{width:i.width/r,height:i.height/n,top:i.top/n,right:i.right/r,bottom:i.bottom/n,left:i.left/r,x:i.left/r,y:i.top/n}}function dr(e){var t=hr(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function pr(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&or(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fr(e){return ir(e).getComputedStyle(e)}function mr(e){return["table","td","th"].indexOf(tr(e))>=0}function gr(e){return((rr(e)?e.ownerDocument:e.document)||window.document).documentElement}function yr(e){return"html"===tr(e)?e:e.assignedSlot||e.parentNode||(or(e)?e.host:null)||gr(e)}function vr(e){return nr(e)&&"fixed"!==fr(e).position?e.offsetParent:null}function br(e){for(var t=ir(e),i=vr(e);i&&mr(i)&&"static"===fr(i).position;)i=vr(i);return i&&("html"===tr(i)||"body"===tr(i)&&"static"===fr(i).position)?t:i||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&nr(e)&&"fixed"===fr(e).position)return null;var i=yr(e);for(or(i)&&(i=i.host);nr(i)&&["html","body"].indexOf(tr(i))<0;){var r=fr(i);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return i;i=i.parentNode}return null}(e)||t}function wr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _r(e,t,i){return lr(e,cr(t,i))}function xr(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Sr(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}const kr={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,r=e.name,n=e.options,o=i.elements.arrow,s=i.modifiersData.popperOffsets,a=ar(i.placement),l=wr(a),c=[Zi,Yi].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return xr("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Sr(e,Ki))}(n.padding,i),h=dr(o),d="y"===l?Hi:Zi,p="y"===l?Ji:Yi,f=i.rects.reference[c]+i.rects.reference[l]-s[l]-i.rects.popper[c],m=s[l]-i.rects.reference[l],g=br(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[d],w=y-h[c]-u[p],_=y/2-h[c]/2+v,x=_r(b,_,w),S=l;i.modifiersData[r]=((t={})[S]=x,t.centerOffset=x-_,t)}},effect:function(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&pr(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Mr(e){return e.split("-")[1]}var Tr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Er(e){var t,i=e.popper,r=e.popperRect,n=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=s.x,p=void 0===d?0:d,f=s.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),b=Zi,w=Hi,_=window;if(c){var x=br(i),S="clientHeight",k="clientWidth";if(x===ir(i)&&"static"!==fr(x=gr(i)).position&&"absolute"===a&&(S="scrollHeight",k="scrollWidth"),x=x,n===Hi||(n===Zi||n===Yi)&&"end"===o)w=Ji,m-=(h&&x===_&&_.visualViewport?_.visualViewport.height:x[S])-r.height,m*=l?1:-1;if(n===Zi||(n===Hi||n===Ji)&&"end"===o)b=Yi,p-=(h&&x===_&&_.visualViewport?_.visualViewport.width:x[k])-r.width,p*=l?1:-1}var M,T=Object.assign({position:a},c&&Tr),E=!0===u?function(e){var t=e.x,i=e.y,r=window.devicePixelRatio||1;return{x:ur(t*r)/r||0,y:ur(i*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=E.x,m=E.y,l?Object.assign({},T,((M={})[w]=v?"0":"",M[b]=y?"0":"",M.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M)):Object.assign({},T,((t={})[w]=v?m+"px":"",t[b]=y?p+"px":"",t.transform="",t))}var Ir={passive:!0};var Cr={left:"right",right:"left",bottom:"top",top:"bottom"};function Or(e){return e.replace(/left|right|bottom|top/g,(function(e){return Cr[e]}))}var Ar={start:"end",end:"start"};function Pr(e){return e.replace(/start|end/g,(function(e){return Ar[e]}))}function Rr(e){var t=ir(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Lr(e){return hr(gr(e)).left+Rr(e).scrollLeft}function Dr(e){var t=fr(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function Nr(e){return["html","body","#document"].indexOf(tr(e))>=0?e.ownerDocument.body:nr(e)&&Dr(e)?e:Nr(yr(e))}function Fr(e,t){var i;void 0===t&&(t=[]);var r=Nr(e),n=r===(null==(i=e.ownerDocument)?void 0:i.body),o=ir(r),s=n?[o].concat(o.visualViewport||[],Dr(r)?r:[]):r,a=t.concat(s);return n?a:a.concat(Fr(yr(s)))}function jr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function $r(e,t){return"viewport"===t?jr(function(e){var t=ir(e),i=gr(e),r=t.visualViewport,n=i.clientWidth,o=i.clientHeight,s=0,a=0;return r&&(n=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:n,height:o,x:s+Lr(e),y:a}}(e)):rr(t)?function(e){var t=hr(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):jr(function(e){var t,i=gr(e),r=Rr(e),n=null==(t=e.ownerDocument)?void 0:t.body,o=lr(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=lr(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+Lr(e),l=-r.scrollTop;return"rtl"===fr(n||i).direction&&(a+=lr(i.clientWidth,n?n.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(gr(e)))}function Vr(e,t,i){var r="clippingParents"===t?function(e){var t=Fr(yr(e)),i=["absolute","fixed"].indexOf(fr(e).position)>=0&&nr(e)?br(e):e;return rr(i)?t.filter((function(e){return rr(e)&&pr(e,i)&&"body"!==tr(e)})):[]}(e):[].concat(t),n=[].concat(r,[i]),o=n[0],s=n.reduce((function(t,i){var r=$r(e,i);return t.top=lr(r.top,t.top),t.right=cr(r.right,t.right),t.bottom=cr(r.bottom,t.bottom),t.left=lr(r.left,t.left),t}),$r(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function zr(e){var t,i=e.reference,r=e.element,n=e.placement,o=n?ar(n):null,s=n?Mr(n):null,a=i.x+i.width/2-r.width/2,l=i.y+i.height/2-r.height/2;switch(o){case Hi:t={x:a,y:i.y-r.height};break;case Ji:t={x:a,y:i.y+i.height};break;case Yi:t={x:i.x+i.width,y:l};break;case Zi:t={x:i.x-r.width,y:l};break;default:t={x:i.x,y:i.y}}var c=o?wr(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case"start":t[c]=t[c]-(i[u]/2-r[u]/2);break;case"end":t[c]=t[c]+(i[u]/2-r[u]/2)}}return t}function Ur(e,t){void 0===t&&(t={});var i=t,r=i.placement,n=void 0===r?e.placement:r,o=i.boundary,s=void 0===o?"clippingParents":o,a=i.rootBoundary,l=void 0===a?"viewport":a,c=i.elementContext,u=void 0===c?"popper":c,h=i.altBoundary,d=void 0!==h&&h,p=i.padding,f=void 0===p?0:p,m=xr("number"!=typeof f?f:Sr(f,Ki)),g="popper"===u?"reference":"popper",y=e.rects.popper,v=e.elements[d?g:u],b=Vr(rr(v)?v:v.contextElement||gr(e.elements.popper),s,l),w=hr(e.elements.reference),_=zr({reference:w,element:y,strategy:"absolute",placement:n}),x=jr(Object.assign({},y,_)),S="popper"===u?x:w,k={top:b.top-S.top+m.top,bottom:S.bottom-b.bottom+m.bottom,left:b.left-S.left+m.left,right:S.right-b.right+m.right},M=e.modifiersData.offset;if("popper"===u&&M){var T=M[n];Object.keys(k).forEach((function(e){var t=[Yi,Ji].indexOf(e)>=0?1:-1,i=[Hi,Ji].indexOf(e)>=0?"y":"x";k[e]+=T[i]*t}))}return k}function qr(e,t){void 0===t&&(t={});var i=t,r=i.placement,n=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?Qi:l,u=Mr(r),h=u?a?Xi:Xi.filter((function(e){return Mr(e)===u})):Ki,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,i){return t[i]=Ur(e,{placement:i,boundary:n,rootBoundary:o,padding:s})[ar(i)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}const Gr={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,o=void 0===n||n,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,c=i.padding,u=i.boundary,h=i.rootBoundary,d=i.altBoundary,p=i.flipVariations,f=void 0===p||p,m=i.allowedAutoPlacements,g=t.options.placement,y=ar(g),v=l||(y===g||!f?[Or(g)]:function(e){if("auto"===ar(e))return[];var t=Or(e);return[Pr(e),t,Pr(t)]}(g)),b=[g].concat(v).reduce((function(e,i){return e.concat("auto"===ar(i)?qr(t,{placement:i,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):i)}),[]),w=t.rects.reference,_=t.rects.popper,x=new Map,S=!0,k=b[0],M=0;M<b.length;M++){var T=b[M],E=ar(T),I="start"===Mr(T),C=[Hi,Ji].indexOf(E)>=0,O=C?"width":"height",A=Ur(t,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),P=C?I?Yi:Zi:I?Ji:Hi;w[O]>_[O]&&(P=Or(P));var R=Or(P),L=[];if(o&&L.push(A[E]<=0),a&&L.push(A[P]<=0,A[R]<=0),L.every((function(e){return e}))){k=T,S=!1;break}x.set(T,L)}if(S)for(var D=function(e){var t=b.find((function(t){var i=x.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},N=f?3:1;N>0;N--){if("break"===D(N))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Br(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function Wr(e){return[Hi,Yi,Ji,Zi].some((function(t){return e[t]>=0}))}const Hr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,r=e.name,n=i.offset,o=void 0===n?[0,0]:n,s=Qi.reduce((function(e,i){return e[i]=function(e,t,i){var r=ar(e),n=[Zi,Hi].indexOf(r)>=0?-1:1,o="function"==typeof i?i(Object.assign({},t,{placement:e})):i,s=o[0],a=o[1];return s=s||0,a=(a||0)*n,[Zi,Yi].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(i,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};const Jr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,o=void 0===n||n,s=i.altAxis,a=void 0!==s&&s,l=i.boundary,c=i.rootBoundary,u=i.altBoundary,h=i.padding,d=i.tether,p=void 0===d||d,f=i.tetherOffset,m=void 0===f?0:f,g=Ur(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=ar(t.placement),v=Mr(t.placement),b=!v,w=wr(y),_="x"===w?"y":"x",x=t.modifiersData.popperOffsets,S=t.rects.reference,k=t.rects.popper,M="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"==typeof M?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(x){if(o){var C,O="y"===w?Hi:Zi,A="y"===w?Ji:Yi,P="y"===w?"height":"width",R=x[w],L=R+g[O],D=R-g[A],N=p?-k[P]/2:0,F="start"===v?S[P]:k[P],j="start"===v?-k[P]:-S[P],$=t.elements.arrow,V=p&&$?dr($):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=z[O],q=z[A],G=_r(0,S[P],V[P]),B=b?S[P]/2-N-G-U-T.mainAxis:F-G-U-T.mainAxis,W=b?-S[P]/2+N+G+q+T.mainAxis:j+G+q+T.mainAxis,H=t.elements.arrow&&br(t.elements.arrow),J=H?"y"===w?H.clientTop||0:H.clientLeft||0:0,Y=null!=(C=null==E?void 0:E[w])?C:0,Z=R+W-Y,K=_r(p?cr(L,R+B-Y-J):L,R,p?lr(D,Z):D);x[w]=K,I[w]=K-R}if(a){var X,Q="x"===w?Hi:Zi,ee="x"===w?Ji:Yi,te=x[_],ie="y"===_?"height":"width",re=te+g[Q],ne=te-g[ee],oe=-1!==[Hi,Zi].indexOf(y),se=null!=(X=null==E?void 0:E[_])?X:0,ae=oe?re:te-S[ie]-k[ie]-se+T.altAxis,le=oe?te+S[ie]+k[ie]-se-T.altAxis:ne,ce=p&&oe?function(e,t,i){var r=_r(e,t,i);return r>i?i:r}(ae,te,le):_r(p?ae:re,te,p?le:ne);x[_]=ce,I[_]=ce-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]};function Yr(e,t,i){void 0===i&&(i=!1);var r,n,o=nr(t),s=nr(t)&&function(e){var t=e.getBoundingClientRect(),i=ur(t.width)/e.offsetWidth||1,r=ur(t.height)/e.offsetHeight||1;return 1!==i||1!==r}(t),a=gr(t),l=hr(e,s),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!i)&&(("body"!==tr(t)||Dr(a))&&(c=(r=t)!==ir(r)&&nr(r)?{scrollLeft:(n=r).scrollLeft,scrollTop:n.scrollTop}:Rr(r)),nr(t)?((u=hr(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=Lr(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function Zr(e){var t=new Map,i=new Set,r=[];function n(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var r=t.get(e);r&&n(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||n(e)})),r}function Kr(e){var t;return function(){return t||(t=new Promise((function(i){Promise.resolve().then((function(){t=void 0,i(e())}))}))),t}}var Xr={placement:"bottom",modifiers:[],strategy:"absolute"};function Qr(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function en(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,r=void 0===i?[]:i,n=t.defaultOptions,o=void 0===n?Xr:n;return function(e,t,i){void 0===i&&(i=o);var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xr,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:n,setOptions:function(i){var a="function"==typeof i?i(n.options):i;c(),n.options=Object.assign({},o,n.options,a),n.scrollParents={reference:rr(e)?Fr(e):e.contextElement?Fr(e.contextElement):[],popper:Fr(t)};var u,h,d=function(e){var t=Zr(e);return er.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((u=[].concat(r,n.options.modifiers),h=u.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(h).map((function(e){return h[e]}))));return n.orderedModifiers=d.filter((function(e){return e.enabled})),n.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,r=void 0===i?{}:i,o=e.effect;if("function"==typeof o){var a=o({state:n,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=n.elements,t=e.reference,i=e.popper;if(Qr(t,i)){n.rects={reference:Yr(t,br(i),"fixed"===n.options.strategy),popper:dr(i)},n.reset=!1,n.placement=n.options.placement,n.orderedModifiers.forEach((function(e){return n.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<n.orderedModifiers.length;r++)if(!0!==n.reset){var o=n.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"==typeof s&&(n=s({state:n,options:u,name:h,instance:l})||n)}else n.reset=!1,r=-1}}},update:Kr((function(){return new Promise((function(e){l.forceUpdate(),e(n)}))})),destroy:function(){c(),a=!0}};if(!Qr(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(i).then((function(e){!a&&i.onFirstUpdate&&i.onFirstUpdate(e)})),l}}var tn=en({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,o=void 0===n||n,s=r.resize,a=void 0===s||s,l=ir(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",i.update,Ir)})),a&&l.addEventListener("resize",i.update,Ir),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",i.update,Ir)})),a&&l.removeEventListener("resize",i.update,Ir)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=zr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=void 0===r||r,o=i.adaptive,s=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,c={placement:ar(t.placement),variation:Mr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Er(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Er(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},sr,Hr,Gr,Jr,kr,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,s=Ur(t,{elementContext:"reference"}),a=Ur(t,{altBoundary:!0}),l=Br(s,r),c=Br(a,n,o),u=Wr(l),h=Wr(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]});const rn=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],nn=["top-start","top","top-end","bottom-start","bottom","bottom-end"],on="calcite-popper-anim",sn="calcite-popper-anim--active";function an(e,t){const i=["left","right"],r=["start","end"];return"rtl"===Ae(e)&&(i.reverse(),r.reverse()),t.replace(/-leading/gi,`-${r[0]}`).replace(/-trailing/gi,`-${r[1]}`).replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}const ln="dropdown-trigger",cn=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=ee(this,"calciteDropdownSelect",7),this.calciteDropdownOpen=ee(this,"calciteDropdownOpen",7),this.calciteDropdownClose=ee(this,"calciteDropdownClose",7),this.active=!1,this.disableCloseOnSelect=!1,this.disabled=!1,this.maxItems=0,this.overlayPositioning="absolute",this.placement="bottom-leading",this.scale="m",this.selectedItems=[],this.type="click",this.width="m",this.items=[],this.activeTransitionProp="visibility",this.mutationObserver=Ve("mutation",(()=>this.updateItems())),this.resizeObserver=Ve("resize",(()=>this.setMaxScrollerHeight())),this.setFilteredPlacements=()=>{const{el:e,flipPlacements:t}=this;this.filteredFlipPlacements=t?function(e,t){const i=e.filter((e=>rn.includes(e)));return i.length!==e.length&&console.warn(`${t.tagName}: Invalid value found in: flipPlacements. Try any of these: ${rn.map((e=>`"${e}"`)).join(", ").trim()}`,{el:t}),i}(t,e):null},this.updateItems=()=>{this.updateSelectedItems(),this.triggers=Fe(this.el,"dropdown-trigger",{all:!0}),this.items=Array.from(this.el.querySelectorAll("calcite-dropdown-item")),this.reposition()},this.setMaxScrollerHeight=()=>{const{active:e,scrollerEl:t}=this;if(!t||!e)return;this.reposition();const i=this.getMaxScrollerHeight();t.style.maxHeight=i>0?`${i}px`:"",this.reposition()},this.setScrollerEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e},this.transitionEnd=e=>{e.propertyName===this.activeTransitionProp&&(this.active?this.calciteDropdownOpen.emit():this.calciteDropdownClose.emit())},this.setReferenceEl=e=>{this.referenceEl=e},this.setMenuEl=e=>{this.menuEl=e},this.keyDownHandler=e=>{if(e.target!==this.referenceEl)return;const t=e.key;if(this.active&&("Escape"===t||e.shiftKey&&"Tab"===t))this.closeCalciteDropdown();else switch(t){case" ":case"Enter":this.openCalciteDropdown();break;case"Escape":this.closeCalciteDropdown()}},this.focusOnFirstActiveOrFirstItem=()=>{this.getFocusableElement(this.items.find((e=>e.active))||this.items[0])},this.toggleOpenEnd=()=>{this.focusOnFirstActiveOrFirstItem(),this.el.removeEventListener("calciteDropdownOpen",this.toggleOpenEnd)},this.openCalciteDropdown=()=>{this.active=!this.active,this.active&&this.el.addEventListener("calciteDropdownOpen",this.toggleOpenEnd)}}activeHandler(){this.disabled?this.active=!1:this.reposition()}handleDisabledChange(e){e||(this.active=!1)}flipPlacementsHandler(){this.setFilteredPlacements()}maxItemsHandler(){this.setMaxScrollerHeight()}placementHandler(){this.reposition()}connectedCallback(){var e;null===(e=this.mutationObserver)||void 0===e||e.observe(this.el,{childList:!0,subtree:!0}),this.createPopper(),this.updateItems(),this.setFilteredPlacements()}componentDidLoad(){this.reposition()}componentDidRender(){Ue(this)}disconnectedCallback(){var e,t;null===(e=this.mutationObserver)||void 0===e||e.disconnect(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.destroyPopper()}render(){const{active:e}=this;return C(A,null,C("div",{class:"calcite-dropdown-trigger-container",onClick:this.openCalciteDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},C("slot",{"aria-expanded":e.toString(),"aria-haspopup":"true",name:ln})),C("div",{"aria-hidden":(!e).toString(),class:"calcite-dropdown-wrapper",ref:this.setMenuEl},C("div",{class:{"calcite-dropdown-content":!0,[on]:!0,[sn]:e},onTransitionEnd:this.transitionEnd,ref:this.setScrollerEl},C("div",{hidden:!this.active},C("slot",null)))))}async reposition(){const{popper:e,menuEl:t,placement:i}=this,r=this.getModifiers();e?await async function({el:e,modifiers:t,placement:i,popper:r}){const n=an(e,i);await r.setOptions({modifiers:t,placement:n})}({el:t,modifiers:r,placement:i,popper:e}):this.createPopper()}closeCalciteDropdownOnClick(e){this.active&&!e.composedPath().includes(this.el)&&this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(){this.closeCalciteDropdown()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.active=!1)}mouseEnterHandler(){"hover"===this.type&&this.openCalciteDropdown()}mouseLeaveHandler(){"hover"===this.type&&this.closeCalciteDropdown()}calciteDropdownItemKeyEvent(e){const{keyboardEvent:t}=e.detail,i=t.target,r="A"!==i.nodeName?i:i.parentNode,n=0===this.itemIndex(r),o=this.itemIndex(r)===this.items.length-1;switch(t.key){case"Tab":o&&!t.shiftKey||n&&t.shiftKey?this.closeCalciteDropdown():t.shiftKey?this.focusPrevItem(r):this.focusNextItem(r);break;case"ArrowDown":this.focusNextItem(r);break;case"ArrowUp":this.focusPrevItem(r);break;case"Home":this.focusFirstItem();break;case"End":this.focusLastItem()}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),this.disableCloseOnSelect&&"none"!==e.detail.requestedDropdownGroup.selectionMode||this.closeCalciteDropdown()}getModifiers(){const e={name:"flip",enabled:!0};e.options={fallbackPlacements:this.filteredFlipPlacements||nn};return[e,{name:"eventListeners",enabled:this.active}]}createPopper(){this.destroyPopper();const{menuEl:e,referenceEl:t,placement:i,overlayPositioning:r}=this,n=this.getModifiers();this.popper=function({referenceEl:e,el:t,placement:i,overlayPositioning:r="absolute",modifiers:n}){return e?tn(e,t,{strategy:r,placement:an(t,i),modifiers:n}):null}({el:e,modifiers:n,overlayPositioning:r,placement:i,referenceEl:t})}destroyPopper(){const{popper:e}=this;e&&e.destroy(),this.popper=null}updateSelectedItems(){const e=Array.from(this.el.querySelectorAll("calcite-dropdown-item"));this.selectedItems=e.filter((e=>e.active))}getMaxScrollerHeight(){const e=Array.from(this.el.querySelectorAll("calcite-dropdown-group")),{maxItems:t}=this;let i,r=0,n=0;return e.forEach((e=>{t>0&&r<t&&Array.from(e.children).forEach(((e,o)=>{0===o&&(isNaN(i)&&(i=e.offsetTop),n+=i),r<t&&(n+=e.offsetHeight,r+=1)}))})),n}closeCalciteDropdown(e=!0){this.active=!1,e&&Ne(this.triggers[0])}focusFirstItem(){const e=this.items[0];this.getFocusableElement(e)}focusLastItem(){const e=this.items[this.items.length-1];this.getFocusableElement(e)}focusNextItem(e){const t=this.itemIndex(e),i=this.items[t+1]||this.items[0];this.getFocusableElement(i)}focusPrevItem(e){const t=this.itemIndex(e),i=this.items[t-1]||this.items[this.items.length-1];this.getFocusableElement(i)}itemIndex(e){return this.items.indexOf(e)}getFocusableElement(e){if(!e)return;Ne(e.attributes.isLink?e.shadowRoot.querySelector("a"):e)}get el(){return this}static get watchers(){return{active:["activeHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],placement:["placementHandler"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host .calcite-dropdown-wrapper{display:block;position:absolute;z-index:900;-webkit-transform:scale(0);transform:scale(0);visibility:hidden;pointer-events:none}.calcite-dropdown-wrapper .calcite-popper-anim{position:relative;z-index:1;-webkit-transition:var(--calcite-popper-transition);transition:var(--calcite-popper-transition);visibility:hidden;-webkit-transition-property:visibility, opacity, -webkit-transform;transition-property:visibility, opacity, -webkit-transform;transition-property:transform, visibility, opacity;transition-property:transform, visibility, opacity, -webkit-transform;opacity:0;-webkit-box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);border-radius:0.25rem}.calcite-dropdown-wrapper[data-popper-placement^=bottom] .calcite-popper-anim{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.calcite-dropdown-wrapper[data-popper-placement^=top] .calcite-popper-anim{-webkit-transform:translateY(5px);transform:translateY(5px)}.calcite-dropdown-wrapper[data-popper-placement^=left] .calcite-popper-anim{-webkit-transform:translateX(5px);transform:translateX(5px)}.calcite-dropdown-wrapper[data-popper-placement^=right] .calcite-popper-anim{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.calcite-dropdown-wrapper[data-popper-placement] .calcite-popper-anim--active{opacity:1;visibility:visible;-webkit-transform:translate(0);transform:translate(0)}:host([active]) .calcite-dropdown-wrapper{pointer-events:initial;visibility:visible}:host .calcite-dropdown-content{width:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-ui-foreground-1);max-height:90vh;width:var(--calcite-dropdown-width)}.calcite-dropdown-trigger-container{position:relative;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto}:host([width=s]){--calcite-dropdown-width:12rem}:host([width=m]){--calcite-dropdown-width:14rem}:host([width=l]){--calcite-dropdown-width:16rem}"}},un="container--s",hn="container--m",dn="container--l",pn=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemChange=ee(this,"calciteDropdownItemChange",7),this.selectionMode="single"}componentWillLoad(){this.groupPosition=this.getGroupPosition()}render(){const e=this.scale||Pe(this.el,"scale","m"),t=this.groupTitle?C("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?C("div",{class:"dropdown-separator",role:"separator"}):null;return C(A,{role:"menu"},C("div",{class:{container:!0,[un]:"s"===e,[hn]:"m"===e,[dn]:"l"===e},title:this.groupTitle},i,t,C("slot",null)))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}get el(){return this}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:block}.container--s{font-size:var(--calcite-font-size--2);line-height:1rem}.container--s .dropdown-title{padding:0.5rem}.container--m{font-size:var(--calcite-font-size--1);line-height:1rem}.container--m .dropdown-title{padding:0.75rem}.container--l{font-size:var(--calcite-font-size-0);line-height:1.25rem}.container--l .dropdown-title{padding:1rem}.dropdown-title{margin-bottom:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-bottom-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.dropdown-separator{display:block;height:1px;background-color:var(--calcite-ui-border-3)}"}},fn="container--link",mn="container--s",gn="container--m",yn="container--l",vn="container--multi-selection",bn="container--single-selection",wn="container--none-selection",_n=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=ee(this,"calciteDropdownItemSelect",7),this.calciteDropdownItemKeyEvent=ee(this,"calciteDropdownItemKeyEvent",7),this.calciteDropdownCloseRequest=ee(this,"calciteDropdownCloseRequest",7),this.active=!1}async setFocus(){this.el.focus()}componentWillLoad(){this.initialize()}connectedCallback(){this.initialize()}render(){const e=Pe(this.el,"scale","m"),t=C("calcite-icon",{class:"dropdown-item-icon-start",flipRtl:"start"===this.iconFlipRtl||"both"===this.iconFlipRtl,icon:this.iconStart,scale:"s"}),i=C("span",{class:"dropdown-item-content"},C("slot",null)),r=C("calcite-icon",{class:"dropdown-item-icon-end",flipRtl:"end"===this.iconFlipRtl||"both"===this.iconFlipRtl,icon:this.iconEnd,scale:"s"}),n=this.iconStart&&this.iconEnd?[t,i,r]:this.iconStart?[t,C("slot",null)]:this.iconEnd?[i,r]:i,o=this.href?C("a",{"aria-label":this.label,class:"dropdown-link",href:this.href,ref:e=>this.childLink=e,rel:this.rel,target:this.target},n):n,s=this.href?null:"single"===this.selectionMode?"menuitemradio":"multi"===this.selectionMode?"menuitemcheckbox":"menuitem",a="none"!==this.selectionMode?this.active.toString():null;return C(A,{"aria-checked":a,role:s,tabindex:"0"},C("div",{class:{container:!0,[fn]:!!this.href,[mn]:"s"===e,[gn]:"m"===e,[yn]:"l"===e,[vn]:"multi"===this.selectionMode,[bn]:"single"===this.selectionMode,[wn]:"none"===this.selectionMode}},"none"!==this.selectionMode?C("calcite-icon",{class:"dropdown-item-icon",icon:"multi"===this.selectionMode?"check":"bullet-point",scale:"s"}):null,o))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":this.emitRequestedItem(),this.href&&(e.preventDefault(),this.childLink.click());break;case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click();break;case"Escape":this.calciteDropdownCloseRequest.emit();break;case"Tab":case"ArrowUp":case"ArrowDown":case"Home":case"End":this.calciteDropdownItemKeyEvent.emit({keyboardEvent:e})}e.preventDefault()}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem())}initialize(){this.selectionMode=Pe(this.el,"selection-mode","single"),this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),"none"===this.selectionMode&&(this.active=!1)}determineActiveItem(){switch(this.selectionMode){case"multi":this.el===this.requestedDropdownItem&&(this.active=!this.active);break;case"single":this.el===this.requestedDropdownItem?this.active=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.active=!1);break;case"none":this.active=!1}}emitRequestedItem(){this.calciteDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}.container--s{padding-top:0.25rem;padding-bottom:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;-webkit-padding-end:0.5rem;padding-inline-end:0.5rem;-webkit-padding-start:1.5rem;padding-inline-start:1.5rem}.container--m{padding-top:0.5rem;padding-bottom:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;-webkit-padding-end:0.75rem;padding-inline-end:0.75rem;-webkit-padding-start:2rem;padding-inline-start:2rem}.container--l{padding-top:0.75rem;padding-bottom:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;-webkit-padding-end:1rem;padding-inline-end:1rem;-webkit-padding-start:2.5rem;padding-inline-start:2.5rem}.container--s.container--none-selection{-webkit-padding-start:0.25rem;padding-inline-start:0.25rem}.container--s.container--none-selection .dropdown-link{-webkit-padding-start:0px;padding-inline-start:0px}.container--m.container--none-selection{-webkit-padding-start:0.5rem;padding-inline-start:0.5rem}.container--m.container--none-selection .dropdown-link{-webkit-padding-start:0px;padding-inline-start:0px}.container--l.container--none-selection{-webkit-padding-start:0.75rem;padding-inline-start:0.75rem}.container--l.container--none-selection .dropdown-link{-webkit-padding-start:0px;padding-inline-start:0px}:host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}.container{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;cursor:pointer;-ms-flex-align:center;align-items:center;color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.dropdown-item-content{-ms-flex:1 1 auto;flex:1 1 auto;-webkit-padding-end:auto;padding-inline-end:auto;-webkit-padding-start:0.25rem;padding-inline-start:0.25rem}:host,.container--link a{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}:host(:focus){outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.container--link{padding:0px}.container--link a{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;cursor:pointer;-ms-flex-align:center;align-items:center;color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.container--s .dropdown-link{padding-top:0.25rem;padding-bottom:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;-webkit-padding-end:0.5rem;padding-inline-end:0.5rem;-webkit-padding-start:1.5rem;padding-inline-start:1.5rem}.container--m .dropdown-link{padding-top:0.5rem;padding-bottom:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;-webkit-padding-end:0.75rem;padding-inline-end:0.75rem;-webkit-padding-start:2rem;padding-inline-start:2rem}.container--l .dropdown-link{padding-top:0.75rem;padding-bottom:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;-webkit-padding-end:1rem;padding-inline-end:1rem;-webkit-padding-start:2.5rem;padding-inline-start:2.5rem}:host(:hover) .container,:host(:active) .container{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);-webkit-text-decoration-line:none;text-decoration-line:none}:host(:hover) .container--link .dropdown-link,:host(:active) .container--link .dropdown-link{color:var(--calcite-ui-text-1)}:host(:focus) .container{color:var(--calcite-ui-text-1);-webkit-text-decoration-line:none;text-decoration-line:none}:host(:active) .container{background-color:var(--calcite-ui-foreground-3)}:host(:hover) .container:before,:host(:active) .container:before,:host(:focus) .container:before{opacity:1}:host([active]) .container:not(.container--none-selection),:host([active]) .container--link .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([active]) .container:not(.container--none-selection):before,:host([active]) .container--link .dropdown-link:before{opacity:1;color:var(--calcite-ui-brand)}:host([active]) .container:not(.container--none-selection) calcite-icon,:host([active]) .container--link .dropdown-link calcite-icon{color:var(--calcite-ui-brand)}.container--multi-selection:before,.container--none-selection:before{display:none}.container--s:before{inset-inline-start:0.5rem}.container--m:before{inset-inline-start:0.75rem}.container--l:before{inset-inline-start:1rem}.dropdown-item-icon{position:absolute;opacity:0;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(0.9);transform:scale(0.9)}.container--s .dropdown-item-icon{inset-inline-start:0.25rem}.container--m .dropdown-item-icon{inset-inline-start:0.5rem}.container--l .dropdown-item-icon{inset-inline-start:0.75rem}:host(:hover) .dropdown-item-icon{color:var(--calcite-ui-border-1);opacity:1}:host([active]) .dropdown-item-icon{color:var(--calcite-ui-brand);opacity:1}.container--s .dropdown-item-icon-start{-webkit-margin-end:0.5rem;margin-inline-end:0.5rem;-webkit-margin-start:0.25rem;margin-inline-start:0.25rem}.container--s .dropdown-item-icon-end{-webkit-margin-start:0.5rem;margin-inline-start:0.5rem}.container--m .dropdown-item-icon-start{-webkit-margin-end:0.75rem;margin-inline-end:0.75rem;-webkit-margin-start:0.25rem;margin-inline-start:0.25rem}.container--m .dropdown-item-icon-end{-webkit-margin-start:0.75rem;margin-inline-start:0.75rem}.container--l .dropdown-item-icon-start{-webkit-margin-end:1rem;margin-inline-end:1rem;-webkit-margin-start:0.25rem;margin-inline-start:0.25rem}.container--l .dropdown-item-icon-end{-webkit-margin-start:1rem;margin-inline-start:1rem}"}},xn="flip-rtl",Sn={},kn={},Mn={s:16,m:24,l:32};async function Tn({icon:e,scale:t}){const i=Mn[t],r=function(e){const t=!isNaN(Number(e.charAt(0))),i=e.split("-");if(1===i.length)return t?`i${e}`:e;return i.map(((e,i)=>0===i?t?`i${e.toUpperCase()}`:e:e.charAt(0).toUpperCase()+e.slice(1))).join("")}(e),n="F"===r.charAt(r.length-1),o=`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`;if(Sn[o])return Sn[o];kn[o]||(kn[o]=fetch((e=>{const t=new URL(e,y.$resourcesUrl$);return t.origin!==f.location.origin?t.href:t.pathname})(`./assets/icon/${o}.json`)).then((e=>e.json())).catch((()=>(console.error(`"${o}" is not a valid calcite-ui-icon name`),""))));const s=await kn[o];return Sn[o]=s,s}const En=class extends g{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.visible=!1}connectedCallback(){this.waitUntilVisible((()=>{this.visible=!0,this.loadIconPathData()}))}disconnectedCallback(){var e;null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),this.intersectionObserver=null}async componentWillLoad(){this.loadIconPathData()}render(){const{el:e,flipRtl:t,pathData:i,scale:r,textLabel:n}=this,o=Ae(e),s=Mn[r],a=!!n,l=[].concat(i||"");return C(A,{"aria-hidden":(!a).toString(),"aria-label":a?n:null,role:a?"img":null},C("svg",{class:{[xn]:"rtl"===o&&t,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${s} ${s}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},l.map((e=>C("path","string"==typeof e?{d:e}:{d:e.d,opacity:"opacity"in e?e.opacity:1})))))}async loadIconPathData(){const{icon:e,scale:t,visible:i}=this;e&&i&&(this.pathData=await Tn({icon:e,scale:t}))}waitUntilVisible(e){this.intersectionObserver=Ve("intersection",(t=>{t.forEach((t=>{t.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())}))}),{rootMargin:"50px"}),this.intersectionObserver?this.intersectionObserver.observe(this.el):e()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:-ms-inline-flexbox;display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){height:1rem;width:1rem;min-width:1rem;min-height:1rem}:host([scale=m]){height:1.5rem;width:1.5rem;min-width:1.5rem;min-height:1.5rem}:host([scale=l]){height:2rem;width:2rem;min-width:2rem;min-height:2rem}.flip-rtl{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.svg{display:block}"}};var In,Cn;
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function On(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function An(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?On(Object(i),!0).forEach((function(t){Rn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):On(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function Rn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ln(){return Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ln.apply(this,arguments)}function Dn(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}!function(e){e.valid="check-circle",e.invalid="exclamation-mark-triangle",e.idle="information"}(In||(In={})),function(e){e.circle="circle",e.square="square",e.grip="grip"}(Cn||(Cn={}));function Nn(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Fn=Nn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jn=Nn(/Edge/i),$n=Nn(/firefox/i),Vn=Nn(/safari/i)&&!Nn(/chrome/i)&&!Nn(/android/i),zn=Nn(/iP(ad|od|hone)/i),Un=Nn(/chrome/i)&&Nn(/android/i),qn={capture:!1,passive:!1};function Gn(e,t,i){e.addEventListener(t,i,!Fn&&qn)}function Bn(e,t,i){e.removeEventListener(t,i,!Fn&&qn)}function Wn(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Hn(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Jn(e,t,i,r){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Wn(e,t):Wn(e,t))||r&&e===i)return e;if(e===i)break}while(e=Hn(e))}return null}var Yn,Zn=/\s+/g;function Kn(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Zn," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(Zn," ")}}function Xn(e,t,i){var r=e&&e.style;if(r){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=i+("string"==typeof i?"":"px")}}function Qn(e,t){var i="";if("string"==typeof e)i=e;else do{var r=Xn(e,"transform");r&&"none"!==r&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function eo(e,t,i){if(e){var r=e.getElementsByTagName(t),n=0,o=r.length;if(i)for(;n<o;n++)i(r[n],n);return r}return[]}function to(){var e=document.scrollingElement;return e||document.documentElement}function io(e,t,i,r,n){if(e.getBoundingClientRect||e===window){var o,s,a,l,c,u,h;if(e!==window&&e.parentNode&&e!==to()?(s=(o=e.getBoundingClientRect()).top,a=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(n=n||e.parentNode,!Fn))do{if(n&&n.getBoundingClientRect&&("none"!==Xn(n,"transform")||i&&"static"!==Xn(n,"position"))){var d=n.getBoundingClientRect();s-=d.top+parseInt(Xn(n,"border-top-width")),a-=d.left+parseInt(Xn(n,"border-left-width")),l=s+o.height,c=a+o.width;break}}while(n=n.parentNode);if(r&&e!==window){var p=Qn(n||e),f=p&&p.a,m=p&&p.d;p&&(l=(s/=m)+(u/=m),c=(a/=f)+(h/=f))}return{top:s,left:a,bottom:l,right:c,width:h,height:u}}}function ro(e,t,i){for(var r=lo(e,!0),n=io(e)[t];r;){var o=io(r)[i];if(!("top"===i||"left"===i?n>=o:n<=o))return r;if(r===to())break;r=lo(r,!1)}return!1}function no(e,t,i,r){for(var n=0,o=0,s=e.children;o<s.length;){if("none"!==s[o].style.display&&s[o]!==ds.ghost&&(r||s[o]!==ds.dragged)&&Jn(s[o],i.draggable,e,!1)){if(n===t)return s[o];n++}o++}return null}function oo(e,t){for(var i=e.lastElementChild;i&&(i===ds.ghost||"none"===Xn(i,"display")||t&&!Wn(i,t));)i=i.previousElementSibling;return i||null}function so(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ds.clone||t&&!Wn(e,t)||i++;return i}function ao(e){var t=0,i=0,r=to();if(e)do{var n=Qn(e),o=n.a,s=n.d;t+=e.scrollLeft*o,i+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,i]}function lo(e,t){if(!e||!e.getBoundingClientRect)return to();var i=e,r=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Xn(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return to();if(r||t)return i;r=!0}}}while(i=i.parentNode);return to()}function co(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function uo(e,t){return function(){if(!Yn){var i=arguments,r=this;1===i.length?e.call(r,i[0]):e.apply(r,i),Yn=setTimeout((function(){Yn=void 0}),t)}}}function ho(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function po(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var fo="Sortable"+(new Date).getTime();function mo(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Xn(e,"display")&&e!==ds.ghost){t.push({target:e,rect:io(e)});var i=An({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=Qn(e,!0);r&&(i.top-=r.f,i.left-=r.e)}e.fromRect=i}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var n=!1,o=0;t.forEach((function(e){var t=0,i=e.target,s=i.fromRect,a=io(i),l=i.prevFromRect,c=i.prevToRect,u=e.rect,h=Qn(i,!0);h&&(a.top-=h.f,a.left-=h.e),i.toRect=a,i.thisAnimationDuration&&co(l,a)&&!co(s,a)&&(u.top-a.top)/(u.left-a.left)==(s.top-a.top)/(s.left-a.left)&&(t=function(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}(u,l,c,r.options)),co(a,s)||(i.prevFromRect=s,i.prevToRect=a,t||(t=r.options.animation),r.animate(i,u,a,t)),t&&(n=!0,o=Math.max(o,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"==typeof i&&i()}),o):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,r){if(r){Xn(e,"transition",""),Xn(e,"transform","");var n=Qn(this.el),o=n&&n.a,s=n&&n.d,a=(t.left-i.left)/(o||1),l=(t.top-i.top)/(s||1);e.animatingX=!!a,e.animatingY=!!l,Xn(e,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Xn(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Xn(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Xn(e,"transition",""),Xn(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var go=[],yo={initializeByDefault:!0},vo={mount:function(e){for(var t in yo)yo.hasOwnProperty(t)&&!(t in e)&&(e[t]=yo[t]);go.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),go.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var n=e+"Global";go.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][n]&&t[r.pluginName][n](An({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](An({sortable:t},i)))}))},initializePlugins:function(e,t,i,r){for(var n in go.forEach((function(r){var n=r.pluginName;if(e.options[n]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[n]=o,Ln(i,o.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var o=this.modifyOption(e,n,e.options[n]);void 0!==o&&(e.options[n]=o)}},getEventProperties:function(e,t){var i={};return go.forEach((function(r){"function"==typeof r.eventProperties&&Ln(i,r.eventProperties.call(t[r.pluginName],e))})),i},modifyOption:function(e,t,i){var r;return go.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[t]&&(r=n.optionListeners[t].call(e[n.pluginName],i))})),r}};var bo=["evt"],wo=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.evt,n=Dn(i,bo);vo.pluginEvent.bind(ds)(e,t,An({dragEl:xo,parentEl:So,ghostEl:ko,rootEl:Mo,nextEl:To,lastDownEl:Eo,cloneEl:Io,cloneHidden:Co,dragStarted:Uo,putSortable:Do,activeSortable:ds.active,originalEvent:r,oldIndex:Oo,oldDraggableIndex:Po,newIndex:Ao,newDraggableIndex:Ro,hideGhostForTarget:ls,unhideGhostForTarget:cs,cloneNowHidden:function(){Co=!0},cloneNowShown:function(){Co=!1},dispatchSortableEvent:function(e){_o({sortable:t,name:e,originalEvent:r})}},n))};function _o(e){!function(e){var t=e.sortable,i=e.rootEl,r=e.name,n=e.targetEl,o=e.cloneEl,s=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,h=e.newDraggableIndex,d=e.originalEvent,p=e.putSortable,f=e.extraEventProperties;if(t=t||i&&i[fo]){var m,g=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||Fn||jn?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=s||i,m.from=a||i,m.item=n||i,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var v=An(An({},f),vo.getEventProperties(r,t));for(var b in v)m[b]=v[b];i&&i.dispatchEvent(m),g[y]&&g[y].call(t,m)}}(An({putSortable:Do,cloneEl:Io,targetEl:xo,rootEl:Mo,oldIndex:Oo,oldDraggableIndex:Po,newIndex:Ao,newDraggableIndex:Ro},e))}var xo,So,ko,Mo,To,Eo,Io,Co,Oo,Ao,Po,Ro,Lo,Do,No,Fo,jo,$o,Vo,zo,Uo,qo,Go,Bo,Wo,Ho=!1,Jo=!1,Yo=[],Zo=!1,Ko=!1,Xo=[],Qo=!1,es=[],ts="undefined"!=typeof document,is=zn,rs=jn||Fn?"cssFloat":"float",ns=ts&&!Un&&!zn&&"draggable"in document.createElement("div"),os=function(){if(ts){if(Fn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),ss=function(e,t){var i=Xn(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=no(e,0,t),o=no(e,1,t),s=n&&Xn(n),a=o&&Xn(o),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+io(n).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+io(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&"none"!==s.float){var u="left"===s.float?"left":"right";return!o||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return n&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=r&&"none"===i[rs]||o&&"none"===i[rs]&&l+c>r)?"vertical":"horizontal"},as=function(e){function t(e,i){return function(r,n,o,s){var a=r.options.group.name&&n.options.group.name&&r.options.group.name===n.options.group.name;if(null==e&&(i||a))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(r,n,o,s),i)(r,n,o,s);var l=(i?r:n).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},r=e.group;r&&"object"==Pn(r)||(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},ls=function(){!os&&ko&&Xn(ko,"display","none")},cs=function(){!os&&ko&&Xn(ko,"display","")};ts&&!Un&&document.addEventListener("click",(function(e){if(Jo)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Jo=!1,!1}),!0);var us=function(e){if(xo){var t=function(e,t){var i;return Yo.some((function(r){var n=r[fo].options.emptyInsertThreshold;if(n&&!oo(r)){var o=io(r),s=e>=o.left-n&&e<=o.right+n,a=t>=o.top-n&&t<=o.bottom+n;return s&&a?i=r:void 0}})),i}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[fo]._onDragOver(i)}}},hs=function(e){xo&&xo.parentNode[fo]._isOutsideThisEl(e.target)};function ds(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ln({},t),e[fo]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ss(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ds.supportPointer&&"PointerEvent"in window&&!Vn,emptyInsertThreshold:5};for(var r in vo.initializePlugins(this,e,i),i)!(r in t)&&(t[r]=i[r]);for(var n in as(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&ns,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Gn(e,"pointerdown",this._onTapStart):(Gn(e,"mousedown",this._onTapStart),Gn(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Gn(e,"dragover",this),Gn(e,"dragenter",this)),Yo.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ln(this,mo())}function ps(e,t,i,r,n,o,s,a){var l,c,u=e[fo],h=u.options.onMove;return!window.CustomEvent||Fn||jn?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=r,l.related=n||t,l.relatedRect=o||io(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),h&&(c=h.call(u,l,s)),c}function fs(e){e.draggable=!1}function ms(){Qo=!1}function gs(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function ys(e){return setTimeout(e,0)}function vs(e){return clearTimeout(e)}ds.prototype={constructor:ds,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(qo=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,xo):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,n=r.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=r.filter;if(function(e){es.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var r=t[i];r.checked&&es.push(r)}}(i),!xo&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Vn||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=Jn(a,r.draggable,i,!1))&&a.animated||Eo===a)){if(Oo=so(a),Po=so(a,r.draggable),"function"==typeof c){if(c.call(this,e,a,this))return _o({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:i,fromEl:i}),wo("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=Jn(l,r.trim(),i,!1))return _o({sortable:t,rootEl:r,name:"filter",targetEl:a,fromEl:i,toEl:i}),wo("filter",t,{evt:e}),!0}))))return void(n&&e.cancelable&&e.preventDefault());r.handle&&!Jn(l,r.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,i){var r,n=this,o=n.el,s=n.options,a=o.ownerDocument;if(i&&!xo&&i.parentNode===o){var l=io(i);if(Mo=o,So=(xo=i).parentNode,To=xo.nextSibling,Eo=i,Lo=s.group,ds.dragged=xo,No={target:xo,clientX:(t||e).clientX,clientY:(t||e).clientY},Vo=No.clientX-l.left,zo=No.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,xo.style["will-change"]="all",r=function(){wo("delayEnded",n,{evt:e}),ds.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!$n&&n.nativeDraggable&&(xo.draggable=!0),n._triggerDragStart(e,t),_o({sortable:n,name:"choose",originalEvent:e}),Kn(xo,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){eo(xo,e.trim(),fs)})),Gn(a,"dragover",us),Gn(a,"mousemove",us),Gn(a,"touchmove",us),Gn(a,"mouseup",n._onDrop),Gn(a,"touchend",n._onDrop),Gn(a,"touchcancel",n._onDrop),$n&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xo.draggable=!0),wo("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(jn||Fn))r();else{if(ds.eventCanceled)return void this._onDrop();Gn(a,"mouseup",n._disableDelayedDrag),Gn(a,"touchend",n._disableDelayedDrag),Gn(a,"touchcancel",n._disableDelayedDrag),Gn(a,"mousemove",n._delayedDragTouchMoveHandler),Gn(a,"touchmove",n._delayedDragTouchMoveHandler),s.supportPointer&&Gn(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(r,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xo&&fs(xo),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Bn(e,"mouseup",this._disableDelayedDrag),Bn(e,"touchend",this._disableDelayedDrag),Bn(e,"touchcancel",this._disableDelayedDrag),Bn(e,"mousemove",this._delayedDragTouchMoveHandler),Bn(e,"touchmove",this._delayedDragTouchMoveHandler),Bn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Gn(document,"pointermove",this._onTouchMove):Gn(document,t?"touchmove":"mousemove",this._onTouchMove):(Gn(xo,"dragend",this),Gn(Mo,"dragstart",this._onDragStart));try{document.selection?ys((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Ho=!1,Mo&&xo){wo("dragStarted",this,{evt:t}),this.nativeDraggable&&Gn(document,"dragover",hs);var i=this.options;!e&&Kn(xo,i.dragClass,!1),Kn(xo,i.ghostClass,!0),ds.active=this,e&&this._appendGhost(),_o({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Fo){this._lastX=Fo.clientX,this._lastY=Fo.clientY,ls();for(var e=document.elementFromPoint(Fo.clientX,Fo.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Fo.clientX,Fo.clientY))!==t;)t=e;if(xo.parentNode[fo]._isOutsideThisEl(e),t)do{if(t[fo]){if(t[fo]._onDragOver({clientX:Fo.clientX,clientY:Fo.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);cs()}},_onTouchMove:function(e){if(No){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,n=e.touches?e.touches[0]:e,o=ko&&Qn(ko,!0),s=ko&&o&&o.a,a=ko&&o&&o.d,l=is&&Wo&&ao(Wo),c=(n.clientX-No.clientX+r.x)/(s||1)+(l?l[0]-Xo[0]:0)/(s||1),u=(n.clientY-No.clientY+r.y)/(a||1)+(l?l[1]-Xo[1]:0)/(a||1);if(!ds.active&&!Ho){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ko){o?(o.e+=c-(jo||0),o.f+=u-($o||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Xn(ko,"webkitTransform",h),Xn(ko,"mozTransform",h),Xn(ko,"msTransform",h),Xn(ko,"transform",h),jo=c,$o=u,Fo=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ko){var e=this.options.fallbackOnBody?document.body:Mo,t=io(xo,!0,is,!0,e),i=this.options;if(is){for(Wo=e;"static"===Xn(Wo,"position")&&"none"===Xn(Wo,"transform")&&Wo!==document;)Wo=Wo.parentNode;Wo!==document.body&&Wo!==document.documentElement?(Wo===document&&(Wo=to()),t.top+=Wo.scrollTop,t.left+=Wo.scrollLeft):Wo=to(),Xo=ao(Wo)}Kn(ko=xo.cloneNode(!0),i.ghostClass,!1),Kn(ko,i.fallbackClass,!0),Kn(ko,i.dragClass,!0),Xn(ko,"transition",""),Xn(ko,"transform",""),Xn(ko,"box-sizing","border-box"),Xn(ko,"margin",0),Xn(ko,"top",t.top),Xn(ko,"left",t.left),Xn(ko,"width",t.width),Xn(ko,"height",t.height),Xn(ko,"opacity","0.8"),Xn(ko,"position",is?"absolute":"fixed"),Xn(ko,"zIndex","100000"),Xn(ko,"pointerEvents","none"),ds.ghost=ko,e.appendChild(ko),Xn(ko,"transform-origin",Vo/parseInt(ko.style.width)*100+"% "+zo/parseInt(ko.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,n=i.options;wo("dragStart",this,{evt:e}),ds.eventCanceled?this._onDrop():(wo("setupClone",this),ds.eventCanceled||((Io=po(xo)).removeAttribute("id"),Io.draggable=!1,Io.style["will-change"]="",this._hideClone(),Kn(Io,this.options.chosenClass,!1),ds.clone=Io),i.cloneId=ys((function(){wo("clone",i),ds.eventCanceled||(i.options.removeCloneOnHide||Mo.insertBefore(Io,xo),i._hideClone(),_o({sortable:i,name:"clone"}))})),!t&&Kn(xo,n.dragClass,!0),t?(Jo=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Bn(document,"mouseup",i._onDrop),Bn(document,"touchend",i._onDrop),Bn(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",n.setData&&n.setData.call(i,r,xo)),Gn(document,"drop",i),Xn(xo,"transform","translateZ(0)")),Ho=!0,i._dragStartId=ys(i._dragStarted.bind(i,t,e)),Gn(document,"selectstart",i),Uo=!0,Vn&&Xn(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,r,n,o=this.el,s=e.target,a=this.options,l=a.group,c=ds.active,u=Lo===l,h=a.sort,d=Do||c,p=this,f=!1;if(!Qo){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=Jn(s,a.draggable,o,!0),C("dragOver"),ds.eventCanceled)return f;if(xo.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return A(!1);if(Jo=!1,c&&!a.disabled&&(u?h||(r=So!==Mo):Do===this||(this.lastPutMode=Lo.checkPull(this,c,xo,e))&&l.checkPut(this,c,xo,e))){if(n="vertical"===this._getDirection(e,s),t=io(xo),C("dragOverValid"),ds.eventCanceled)return f;if(r)return So=Mo,O(),this._hideClone(),C("revert"),ds.eventCanceled||(To?Mo.insertBefore(xo,To):Mo.appendChild(xo)),A(!0);var m=oo(o,a.draggable);if(!m||function(e,t,i){var r=io(oo(i.el,i.options.draggable)),n=10;return t?e.clientX>r.right+n||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+n}(e,n,this)&&!m.animated){if(m===xo)return A(!1);if(m&&o===e.target&&(s=m),s&&(i=io(s)),!1!==ps(Mo,o,xo,t,s,i,e,!!s))return O(),m&&m.nextSibling?o.insertBefore(xo,m.nextSibling):o.appendChild(xo),So=o,P(),A(!0)}else if(m&&function(e,t,i){var r=io(no(i.el,0,i.options,!0)),n=10;return t?e.clientX<r.left-n||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-n||e.clientY<r.bottom&&e.clientX<r.left}(e,n,this)){var g=no(o,0,a,!0);if(g===xo)return A(!1);if(i=io(s=g),!1!==ps(Mo,o,xo,t,s,i,e,!1))return O(),o.insertBefore(xo,g),So=o,P(),A(!0)}else if(s.parentNode===o){i=io(s);var y,v,b,w=xo.parentNode!==o,_=!function(e,t,i){var r=i?e.left:e.top,n=i?e.right:e.bottom,o=i?e.width:e.height,s=i?t.left:t.top,a=i?t.right:t.bottom,l=i?t.width:t.height;return r===s||n===a||r+o/2===s+l/2}(xo.animated&&xo.toRect||t,s.animated&&s.toRect||i,n),x=n?"top":"left",S=ro(s,"top","top")||ro(xo,"top","top"),k=S?S.scrollTop:void 0;if(qo!==s&&(v=i[x],Zo=!1,Ko=!_&&a.invertSwap||w),y=function(e,t,i,r,n,o,s,a){var l=r?e.clientY:e.clientX,c=r?i.height:i.width,u=r?i.top:i.left,h=r?i.bottom:i.right,d=!1;if(!s)if(a&&Bo<c*n){if(!Zo&&(1===Go?l>u+c*o/2:l<h-c*o/2)&&(Zo=!0),Zo)d=!0;else if(1===Go?l<u+Bo:l>h-Bo)return-Go}else if(l>u+c*(1-n)/2&&l<h-c*(1-n)/2)return function(e){return so(xo)<so(e)?1:-1}(t);if((d=d||s)&&(l<u+c*o/2||l>h-c*o/2))return l>u+c/2?1:-1;return 0}(e,s,i,n,_?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,Ko,qo===s),0!==y){var M=so(xo);do{M-=y,b=So.children[M]}while(b&&("none"===Xn(b,"display")||b===ko))}if(0===y||b===s)return A(!1);qo=s,Go=y;var T=s.nextElementSibling,E=!1,I=ps(Mo,o,xo,t,s,i,e,E=1===y);if(!1!==I)return 1!==I&&-1!==I||(E=1===I),Qo=!0,setTimeout(ms,30),O(),E&&!T?o.appendChild(xo):s.parentNode.insertBefore(xo,E?T:s),S&&ho(S,0,k-S.scrollTop),So=xo.parentNode,void 0===v||Ko||(Bo=Math.abs(v-io(s)[x])),P(),A(!0)}if(o.contains(xo))return A(!1)}return!1}function C(a,l){wo(a,p,An({evt:e,isOwner:u,axis:n?"vertical":"horizontal",revert:r,dragRect:t,targetRect:i,canSort:h,fromSortable:d,target:s,completed:A,onMove:function(i,r){return ps(Mo,o,xo,t,i,io(i),e,r)},changed:P},l))}function O(){C("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function A(t){return C("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==d&&(Kn(xo,Do?Do.options.ghostClass:c.options.ghostClass,!1),Kn(xo,a.ghostClass,!0)),Do!==p&&p!==ds.active?Do=p:p===ds.active&&Do&&(Do=null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){C("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(s===xo&&!xo.animated||s===o&&!s.animated)&&(qo=null),a.dragoverBubble||e.rootEl||s===document||(xo.parentNode[fo]._isOutsideThisEl(e.target),!t&&us(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function P(){Ao=so(xo),Ro=so(xo,a.draggable),_o({sortable:p,name:"change",toEl:o,newIndex:Ao,newDraggableIndex:Ro,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Bn(document,"mousemove",this._onTouchMove),Bn(document,"touchmove",this._onTouchMove),Bn(document,"pointermove",this._onTouchMove),Bn(document,"dragover",us),Bn(document,"mousemove",us),Bn(document,"touchmove",us)},_offUpEvents:function(){var e=this.el.ownerDocument;Bn(e,"mouseup",this._onDrop),Bn(e,"touchend",this._onDrop),Bn(e,"pointerup",this._onDrop),Bn(e,"touchcancel",this._onDrop),Bn(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;Ao=so(xo),Ro=so(xo,i.draggable),wo("drop",this,{evt:e}),So=xo&&xo.parentNode,Ao=so(xo),Ro=so(xo,i.draggable),ds.eventCanceled||(Ho=!1,Ko=!1,Zo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),vs(this.cloneId),vs(this._dragStartId),this.nativeDraggable&&(Bn(document,"drop",this),Bn(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vn&&Xn(document.body,"user-select",""),Xn(xo,"transform",""),e&&(Uo&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ko&&ko.parentNode&&ko.parentNode.removeChild(ko),(Mo===So||Do&&"clone"!==Do.lastPutMode)&&Io&&Io.parentNode&&Io.parentNode.removeChild(Io),xo&&(this.nativeDraggable&&Bn(xo,"dragend",this),fs(xo),xo.style["will-change"]="",Uo&&!Ho&&Kn(xo,Do?Do.options.ghostClass:this.options.ghostClass,!1),Kn(xo,this.options.chosenClass,!1),_o({sortable:this,name:"unchoose",toEl:So,newIndex:null,newDraggableIndex:null,originalEvent:e}),Mo!==So?(Ao>=0&&(_o({rootEl:So,name:"add",toEl:So,fromEl:Mo,originalEvent:e}),_o({sortable:this,name:"remove",toEl:So,originalEvent:e}),_o({rootEl:So,name:"sort",toEl:So,fromEl:Mo,originalEvent:e}),_o({sortable:this,name:"sort",toEl:So,originalEvent:e})),Do&&Do.save()):Ao!==Oo&&Ao>=0&&(_o({sortable:this,name:"update",toEl:So,originalEvent:e}),_o({sortable:this,name:"sort",toEl:So,originalEvent:e})),ds.active&&(null!=Ao&&-1!==Ao||(Ao=Oo,Ro=Po),_o({sortable:this,name:"end",toEl:So,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){wo("nulling",this),Mo=xo=So=ko=To=Io=Eo=Co=No=Fo=Uo=Ao=Ro=Oo=Po=qo=Go=Do=Lo=ds.dragged=ds.ghost=ds.clone=ds.active=null,es.forEach((function(e){e.checked=!0})),es.length=jo=$o=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":xo&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,r=0,n=i.length,o=this.options;r<n;r++)Jn(e=i[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||gs(e));return t},sort:function(e,t){var i={},r=this.el;this.toArray().forEach((function(e,t){var n=r.children[t];Jn(n,this.options.draggable,r,!1)&&(i[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(r.removeChild(i[e]),r.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Jn(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var r=vo.modifyOption(this,e,t);i[e]=void 0!==r?r:t,"group"===e&&as(i)},destroy:function(){wo("destroy",this);var e=this.el;e[fo]=null,Bn(e,"mousedown",this._onTapStart),Bn(e,"touchstart",this._onTapStart),Bn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Bn(e,"dragover",this),Bn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Yo.splice(Yo.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Co){if(wo("hideClone",this),ds.eventCanceled)return;Xn(Io,"display","none"),this.options.removeCloneOnHide&&Io.parentNode&&Io.parentNode.removeChild(Io),Co=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Co){if(wo("showClone",this),ds.eventCanceled)return;xo.parentNode!=Mo||this.options.group.revertClone?To?Mo.insertBefore(Io,To):Mo.appendChild(Io):Mo.insertBefore(Io,xo),this.options.group.revertClone&&this.animate(xo,Io),Xn(Io,"display",""),Co=!1}}else this._hideClone()}},ts&&Gn(document,"touchmove",(function(e){(ds.active||Ho)&&e.cancelable&&e.preventDefault()})),ds.utils={on:Gn,off:Bn,css:Xn,find:eo,is:function(e,t){return!!Jn(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:uo,closest:Jn,toggleClass:Kn,clone:po,index:so,nextTick:ys,cancelNextTick:vs,detectDirection:ss,getChild:no},ds.get=function(e){return e[fo]},ds.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(ds.utils=An(An({},ds.utils),e.utils)),vo.mount(e)}))},ds.create=function(e,t){return new ds(e,t)},ds.version="1.15.0";var bs,ws,_s,xs,Ss,ks,Ms=[],Ts=!1;function Es(){Ms.forEach((function(e){clearInterval(e.pid)})),Ms=[]}function Is(){clearInterval(ks)}var Cs,Os,As=uo((function(e,t,i,r){if(t.scroll){var n,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,c=to(),u=!1;ws!==i&&(ws=i,Es(),bs=t.scroll,n=t.scrollFn,!0===bs&&(bs=lo(i,!0)));var h=0,d=bs;do{var p=d,f=io(p),m=f.top,g=f.bottom,y=f.left,v=f.right,b=f.width,w=f.height,_=void 0,x=void 0,S=p.scrollWidth,k=p.scrollHeight,M=Xn(p),T=p.scrollLeft,E=p.scrollTop;p===c?(_=b<S&&("auto"===M.overflowX||"scroll"===M.overflowX||"visible"===M.overflowX),x=w<k&&("auto"===M.overflowY||"scroll"===M.overflowY||"visible"===M.overflowY)):(_=b<S&&("auto"===M.overflowX||"scroll"===M.overflowX),x=w<k&&("auto"===M.overflowY||"scroll"===M.overflowY));var I=_&&(Math.abs(v-o)<=a&&T+b<S)-(Math.abs(y-o)<=a&&!!T),C=x&&(Math.abs(g-s)<=a&&E+w<k)-(Math.abs(m-s)<=a&&!!E);if(!Ms[h])for(var O=0;O<=h;O++)Ms[O]||(Ms[O]={});Ms[h].vx==I&&Ms[h].vy==C&&Ms[h].el===p||(Ms[h].el=p,Ms[h].vx=I,Ms[h].vy=C,clearInterval(Ms[h].pid),0==I&&0==C||(u=!0,Ms[h].pid=setInterval(function(){r&&0===this.layer&&ds.active._onTouchMove(Ss);var t=Ms[this.layer].vy?Ms[this.layer].vy*l:0,i=Ms[this.layer].vx?Ms[this.layer].vx*l:0;"function"==typeof n&&"continue"!==n.call(ds.dragged.parentNode[fo],i,t,e,Ss,Ms[this.layer].el)||ho(Ms[this.layer].el,i,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&d!==c&&(d=lo(d,!1)));Ts=u}}),30),Ps=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,n=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=i||n;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Rs(){}function Ls(){}Rs.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=no(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Ps},Ln(Rs,{pluginName:"revertOnSpill"}),Ls.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Ps},Ln(Ls,{pluginName:"removeOnSpill"}),ds.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Gn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Gn(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Gn(document,"touchmove",this._handleFallbackAutoScroll):Gn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Bn(document,"dragover",this._handleAutoScroll):(Bn(document,"pointermove",this._handleFallbackAutoScroll),Bn(document,"touchmove",this._handleFallbackAutoScroll),Bn(document,"mousemove",this._handleFallbackAutoScroll)),Is(),Es(),clearTimeout(Yn),Yn=void 0},nulling:function(){Ss=ws=bs=Ts=ks=_s=xs=null,Ms.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,r=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,n);if(Ss=e,t||this.options.forceAutoScrollFallback||jn||Fn||Vn){As(e,this.options,o,t);var s=lo(o,!0);!Ts||ks&&r===_s&&n===xs||(ks&&Is(),ks=setInterval((function(){var o=lo(document.elementFromPoint(r,n),!0);o!==s&&(s=o,Es()),As(e,i.options,o,t)}),10),_s=r,xs=n)}else{if(!this.options.bubbleScroll||lo(o,!0)===to())return void Es();As(e,this.options,lo(o,!1),!1)}}},Ln(e,{pluginName:"scroll",initializeByDefault:!0})}),ds.mount(Ls,Rs),function(e){e.Single="single",e.Multi="multi",e.Children="children",e.MultiChildren="multi-children",e.Ancestors="ancestors"}(Cs||(Cs={})),function(e){e.grip="grip"}(Os||(Os={}));const Ds=pe(Ie,[1,"calcite-accordion",{appearance:[513],iconPosition:[513,"icon-position"],iconType:[513,"icon-type"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteAccordionItemKeyEvent","calciteAccordionItemKeyEvent"],[0,"calciteAccordionItemRegister","registerCalciteAccordionItem"],[0,"calciteAccordionItemSelect","updateActiveItemOnChange"]]]),Ns=pe($e,[1,"calcite-accordion-item",{active:[1540],itemTitle:[1,"item-title"],itemSubtitle:[1,"item-subtitle"],icon:[513]},[[0,"keydown","keyDownHandler"],[16,"calciteAccordionChange","updateActiveItemOnChange"]]]),Fs=pe(Gt,[1,"calcite-block",{collapsible:[4],disabled:[516],dragHandle:[516,"drag-handle"],heading:[1],headingLevel:[2,"heading-level"],intlCollapse:[1,"intl-collapse"],intlExpand:[1,"intl-expand"],intlLoading:[1,"intl-loading"],intlOptions:[1,"intl-options"],loading:[516],open:[1540],status:[513],summary:[1]}]),js=pe(ni,[1,"calcite-block-section",{intlCollapse:[1,"intl-collapse"],intlExpand:[1,"intl-expand"],open:[1540],status:[513],text:[1],toggleDisplay:[513,"toggle-display"]}]),$s=pe(Si,[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],color:[513],disabled:[516],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],intlLoading:[1,"intl-loading"],loading:[516],name:[1],rel:[1],form:[1],round:[516],scale:[513],splitChild:[520,"split-child"],target:[1],type:[1025],width:[513],hasContent:[32],hasLoader:[32]}]),Vs=pe(cn,[1,"calcite-dropdown",{active:[1540],disableCloseOnSelect:[516,"disable-close-on-select"],disabled:[516],flipPlacements:[16],maxItems:[2,"max-items"],overlayPositioning:[1,"overlay-positioning"],placement:[513],scale:[513],selectedItems:[1040],type:[513],width:[513]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"mouseenter","mouseEnterHandler"],[1,"mouseleave","mouseLeaveHandler"],[0,"calciteDropdownItemKeyEvent","calciteDropdownItemKeyEvent"],[0,"calciteDropdownItemSelect","handleItemSelect"]]]),zs=pe(pn,[1,"calcite-dropdown-group",{groupTitle:[513,"group-title"],selectionMode:[513,"selection-mode"],scale:[513]},[[0,"calciteDropdownItemSelect","updateActiveItemOnChange"]]]),Us=pe(_n,[1,"calcite-dropdown-item",{active:[1540],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],href:[513],label:[1],rel:[1],target:[1]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteDropdownItemChange","updateActiveItemOnChange"]]]),qs=pe(En,[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]}]);var Gs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bs={},Ws=Object.prototype.hasOwnProperty;function Hs(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function Js(e){try{return encodeURIComponent(e)}catch(e){return null}}Bs.stringify=function(e,t){t=t||"";var i,r,n=[];for(r in"string"!=typeof t&&(t="?"),e)if(Ws.call(e,r)){if((i=e[r])||null!=i&&!isNaN(i)||(i=""),r=Js(r),i=Js(i),null===r||null===i)continue;n.push(r+"="+i)}return n.length?t+n.join("&"):""},Bs.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,r={};t=i.exec(e);){var n=Hs(t[1]),o=Hs(t[2]);null===n||null===o||n in r||(r[n]=o)}return r};var Ys=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},Zs=Bs,Ks=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Xs=/[\n\r\t]/g,Qs=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ea=/:\d+$/,ta=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,ia=/^[a-zA-Z]:/;function ra(e){return(e||"").toString().replace(Ks,"")}var na=[["#","hash"],["?","query"],function(e,t){return aa(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],oa={hash:1,query:1};function sa(e){var t,i=("undefined"!=typeof window?window:void 0!==Gs?Gs:"undefined"!=typeof self?self:{}).location||{},r={},n=typeof(e=e||i);if("blob:"===e.protocol)r=new ca(unescape(e.pathname),{});else if("string"===n)for(t in r=new ca(e,{}),oa)delete r[t];else if("object"===n){for(t in e)t in oa||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=Qs.test(e.href))}return r}function aa(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function la(e,t){e=(e=ra(e)).replace(Xs,""),t=t||{};var i,r=ta.exec(e),n=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],a=0;return o?s?(i=r[2]+r[3]+r[4],a=r[2].length+r[3].length):(i=r[2]+r[4],a=r[2].length):s?(i=r[3]+r[4],a=r[3].length):i=r[4],"file:"===n?a>=2&&(i=i.slice(2)):aa(n)?i=r[4]:n?o&&(i=i.slice(2)):a>=2&&aa(t.protocol)&&(i=r[4]),{protocol:n,slashes:o||aa(n),slashesCount:a,rest:i}}function ca(e,t,i){if(e=(e=ra(e)).replace(Xs,""),!(this instanceof ca))return new ca(e,t,i);var r,n,o,s,a,l,c=na.slice(),u=typeof t,h=this,d=0;for("object"!==u&&"string"!==u&&(i=t,t=null),i&&"function"!=typeof i&&(i=Zs.parse),r=!(n=la(e||"",t=sa(t))).protocol&&!n.slashes,h.slashes=n.slashes||r&&t.slashes,h.protocol=n.protocol||t.protocol||"",e=n.rest,("file:"===n.protocol&&(2!==n.slashesCount||ia.test(e))||!n.slashes&&(n.protocol||n.slashesCount<2||!aa(h.protocol)))&&(c[3]=[/(.*)/,"pathname"]);d<c.length;d++)"function"!=typeof(s=c[d])?(o=s[0],l=s[1],o!=o?h[l]=e:"string"==typeof o?~(a="@"===o?e.lastIndexOf(o):e.indexOf(o))&&("number"==typeof s[2]?(h[l]=e.slice(0,a),e=e.slice(a+s[2])):(h[l]=e.slice(a),e=e.slice(0,a))):(a=o.exec(e))&&(h[l]=a[1],e=e.slice(0,a.index)),h[l]=h[l]||r&&s[3]&&t[l]||"",s[4]&&(h[l]=h[l].toLowerCase())):e=s(e,h);i&&(h.query=i(h.query)),r&&t.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==t.pathname)&&(h.pathname=function(e,t){if(""===e)return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=i.length,n=i[r-1],o=!1,s=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),s++):s&&(0===r&&(o=!0),i.splice(r,1),s--);return o&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(h.pathname,t.pathname)),"/"!==h.pathname.charAt(0)&&aa(h.protocol)&&(h.pathname="/"+h.pathname),Ys(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(~(a=h.auth.indexOf(":"))?(h.username=h.auth.slice(0,a),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(a+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin="file:"!==h.protocol&&aa(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}ca.prototype={set:function(e,t,i){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||Zs.parse)(t)),r[e]=t;break;case"port":r[e]=t,Ys(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,ea.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!i;break;case"pathname":case"hash":if(t){var n="pathname"===e?"/":"#";r[e]=t.charAt(0)!==n?n+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(r.username=t.slice(0,o),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(o+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var s=0;s<na.length;s++){var a=na[s];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&aa(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=Zs.stringify);var t,i=this,r=i.host,n=i.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(i.protocol&&i.slashes||aa(i.protocol)?"//":"");return i.username?(o+=i.username,i.password&&(o+=":"+i.password),o+="@"):i.password?(o+=":"+i.password,o+="@"):"file:"!==i.protocol&&aa(i.protocol)&&!r&&"/"!==i.pathname&&(o+="@"),(":"===r[r.length-1]||ea.test(i.hostname)&&!i.port)&&(r+=":"),o+=r+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(o+=i.hash),o}},ca.extractProtocol=la,ca.location=sa,ca.trimLeft=ra,ca.qs=Zs;var ua=ca,ha={exports:{}};
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
!function(e){!function(t,i){e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}}("undefined"!=typeof window?window:Gs,(function(e,t){var i=[],r=Object.getPrototypeOf,n=i.slice,o=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},s=i.push,a=i.indexOf,l={},c=l.toString,u=l.hasOwnProperty,h=u.toString,d=h.call(Object),p={},f=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,i){var r,n,o=(i=i||g).createElement("script");if(o.text=e,t)for(r in y)(n=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,n);i.head.appendChild(o).parentNode.removeChild(o)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var w="3.6.0",_=function(e,t){return new _.fn.init(e,t)};function x(e){var t=!!e&&"length"in e&&e.length,i=b(e);return!f(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:w,constructor:_,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(_.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},_.extend=_.fn.extend=function(){var e,t,i,r,n,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||f(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(c&&r&&(_.isPlainObject(r)||(n=Array.isArray(r)))?(i=s[t],o=n&&!Array.isArray(i)?[]:n||_.isPlainObject(i)?i:{},n=!1,s[t]=_.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},_.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e))&&(!(t=r(e))||"function"==typeof(i=u.call(t,"constructor")&&t.constructor)&&h.call(i)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){v(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,r=0;if(x(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(x(Object(e))?_.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:a.call(t,e,i)},merge:function(e,t){for(var i=+t.length,r=0,n=e.length;r<i;r++)e[n++]=t[r];return e.length=n,e},grep:function(e,t,i){for(var r=[],n=0,o=e.length,s=!i;n<o;n++)!t(e[n],n)!==s&&r.push(e[n]);return r},map:function(e,t,i){var r,n,s=0,a=[];if(x(e))for(r=e.length;s<r;s++)null!=(n=t(e[s],s,i))&&a.push(n);else for(s in e)null!=(n=t(e[s],s,i))&&a.push(n);return o(a)},guid:1,support:p}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=i[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
	 * Sizzle CSS Selector Engine v2.3.6
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://js.foundation/
	 *
	 * Date: 2021-02-16
	 */
function(e){var t,i,r,n,o,s,a,l,c,u,h,d,p,f,m,g,y,v,b,w="sizzle"+1*new Date,_=e.document,x=0,S=0,k=le(),M=le(),T=le(),E=le(),I=function(e,t){return e===t&&(h=!0),0},C={}.hasOwnProperty,O=[],A=O.pop,P=O.push,R=O.push,L=O.slice,D=function(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",V=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",z=new RegExp(F+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),B=new RegExp(F+"|>"),W=new RegExp(V),H=new RegExp("^"+j+"$"),J={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){d()},se=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{R.apply(O=L.call(_.childNodes),_.childNodes),O[_.childNodes.length].nodeType}catch(e){R={apply:O.length?function(e,t){P.apply(e,L.call(t))}:function(e,t){for(var i=e.length,r=0;e[i++]=t[r++];);e.length=i-1}}}function ae(e,t,r,n){var o,a,c,u,h,f,y,v=t&&t.ownerDocument,_=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return r;if(!n&&(d(t),t=t||p,m)){if(11!==_&&(h=Q.exec(e)))if(o=h[1]){if(9===_){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(v&&(c=v.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(h[2])return R.apply(r,t.getElementsByTagName(e)),r;if((o=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return R.apply(r,t.getElementsByClassName(o)),r}if(i.qsa&&!E[e+" "]&&(!g||!g.test(e))&&(1!==_||"object"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===_&&(B.test(e)||G.test(e))){for((v=ee.test(e)&&ye(t.parentNode)||t)===t&&i.scope||((u=t.getAttribute("id"))?u=u.replace(re,ne):t.setAttribute("id",u=w)),a=(f=s(e)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+be(f[a]);y=f.join(",")}try{return R.apply(r,v.querySelectorAll(y)),r}catch(t){E(e,!0)}finally{u===w&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,r,n)}function le(){var e=[];return function t(i,n){return e.push(i+" ")>r.cacheLength&&delete t[e.shift()],t[i+" "]=n}}function ce(e){return e[w]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var i=e.split("|"),n=i.length;n--;)r.attrHandle[i[n]]=t}function de(e,t){var i=t&&e,r=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(i,r){for(var n,o=e([],i.length,t),s=o.length;s--;)i[n=o[s]]&&(i[n]=!(r[n]=i[n]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},o=ae.isXML=function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||i&&i.nodeName||"HTML")},d=ae.setDocument=function(e){var t,n,s=e?e.ownerDocument||e:_;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!o(p),_!=p&&(n=p.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),i.scope=ue((function(e){return f.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=X.test(p.getElementsByClassName),i.getById=ue((function(e){return f.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),i.getById?(r.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i,r,n,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),r.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,r=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n++];)1===i.nodeType&&r.push(i);return r}return o},r.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(i.qsa=X.test(p.querySelectorAll))&&(ue((function(e){var t;f.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+N+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=X.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ue((function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",V)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=X.test(f.compareDocumentPosition),b=t||X.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==_&&b(_,e)?-1:t==p||t.ownerDocument==_&&b(_,t)?1:u?D(u,e)-D(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,r=0,n=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!n||!o)return e==p?-1:t==p?1:n?-1:o?1:u?D(u,e)-D(u,t):0;if(n===o)return de(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;s[r]===a[r];)r++;return r?de(s[r],a[r]):s[r]==_?-1:a[r]==_?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(d(e),i.matchesSelector&&m&&!E[t+" "]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var r=v.call(e,t);if(r||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){E(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&d(e);var n=r.attrHandle[t.toLowerCase()],o=n&&C.call(r.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0!==o?o:i.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(re,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],n=0,o=0;if(h=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(I),h){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return u=null,e},n=ae.getText=function(e){var t,i="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=n(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)i+=n(t);return i},r=ae.selectors={cacheLength:50,createPseudo:ce,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&W.test(i)&&(t=s(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+F+"|$)"))&&k(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(r){var n=ae.attr(r,e);return null==n?"!="===t:!t||(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&n.indexOf(i)>-1:"$="===t?i&&n.slice(-i.length)===i:"~="===t?(" "+n.replace(z," ")+" ").indexOf(i)>-1:"|="===t&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,r,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===n?function(e){return!!e.parentNode}:function(t,i,l){var c,u,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(b=(p=(c=(u=(h=(d=g)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[x,p,b];break}}else if(v&&(b=p=(c=(u=(h=(d=t)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===b)for(;(d=++p&&d&&d[m]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[x,b]),d!==t)););return(b-=n)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var i,n=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return n[w]?n(t):n.length>1?(i=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,i){for(var r,o=n(e,t),s=o.length;s--;)e[r=D(e,o[s])]=!(i[r]=o[s])})):function(e){return n(e,0,i)}):n}},pseudos:{not:ce((function(e){var t=[],i=[],r=a(e.replace(U,"$1"));return r[w]?ce((function(e,t,i,n){for(var o,s=r(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}})),has:ce((function(e){return function(t){return ae(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||n(t)).indexOf(e)>-1}})),lang:ce((function(e){return H.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,i){return[i<0?i+t:i]})),even:ge((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:ge((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:ge((function(e,t,i){for(var r=i<0?i+t:i>t?t:i;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,i){for(var r=i<0?i+t:i;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ve(){}function be(e){for(var t=0,i=e.length,r="";t<i;t++)r+=e[t].value;return r}function we(e,t,i){var r=t.dir,n=t.next,o=n||r,s=i&&"parentNode"===o,a=S++;return t.first?function(t,i,n){for(;t=t[r];)if(1===t.nodeType||s)return e(t,i,n);return!1}:function(t,i,l){var c,u,h,d=[x,a];if(l){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(u=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===x&&c[1]===a)return d[2]=c[2];if(u[o]=d,d[2]=e(t,i,l))return!0}return!1}}function _e(e){return e.length>1?function(t,i,r){for(var n=e.length;n--;)if(!e[n](t,i,r))return!1;return!0}:e[0]}function xe(e,t,i,r,n){for(var o,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(o=e[a])&&(i&&!i(o,r,n)||(s.push(o),c&&t.push(a)));return s}function Se(e,t,i,r,n,o){return r&&!r[w]&&(r=Se(r)),n&&!n[w]&&(n=Se(n,o)),ce((function(o,s,a,l){var c,u,h,d=[],p=[],f=s.length,m=o||function(e,t,i){for(var r=0,n=t.length;r<n;r++)ae(e,t[r],i);return i}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:xe(m,d,e,a,l),y=i?n||(o?e:f||r)?[]:s:g;if(i&&i(g,y,a,l),r)for(c=xe(y,p),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(g[p[u]]=h));if(o){if(n||e){if(n){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(g[u]=h);n(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=n?D(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else y=xe(y===s?y.splice(f,y.length):y),n?n(null,s,y,l):R.apply(s,y)}))}function ke(e){for(var t,i,n,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],l=s?1:0,u=we((function(e){return e===t}),a,!0),h=we((function(e){return D(t,e)>-1}),a,!0),d=[function(e,i,r){var n=!s&&(r||i!==c)||((t=i).nodeType?u(e,i,r):h(e,i,r));return t=null,n}];l<o;l++)if(i=r.relative[e[l].type])d=[we(_e(d),i)];else{if((i=r.filter[e[l].type].apply(null,e[l].matches))[w]){for(n=++l;n<o&&!r.relative[e[n].type];n++);return Se(l>1&&_e(d),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),i,l<n&&ke(e.slice(l,n)),n<o&&ke(e=e.slice(n)),n<o&&be(e))}d.push(i)}return _e(d)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,s=ae.tokenize=function(e,t){var i,n,o,s,a,l,c,u=M[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=r.preFilter;a;){for(s in i&&!(n=q.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(o=[])),i=!1,(n=G.exec(a))&&(i=n.shift(),o.push({value:i,type:n[0].replace(U," ")}),a=a.slice(i.length)),r.filter)!(n=J[s].exec(a))||c[s]&&!(n=c[s](n))||(i=n.shift(),o.push({value:i,type:s,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ae.error(e):M(e,l).slice(0)},a=ae.compile=function(e,t){var i,n=[],o=[],a=T[e+" "];if(!a){for(t||(t=s(e)),i=t.length;i--;)(a=ke(t[i]))[w]?n.push(a):o.push(a);a=T(e,function(e,t){var i=t.length>0,n=e.length>0,o=function(o,s,a,l,u){var h,f,g,y=0,v="0",b=o&&[],w=[],_=c,S=o||n&&r.find.TAG("*",u),k=x+=null==_?1:Math.random()||.1,M=S.length;for(u&&(c=s==p||s||u);v!==M&&null!=(h=S[v]);v++){if(n&&h){for(f=0,s||h.ownerDocument==p||(d(h),a=!m);g=e[f++];)if(g(h,s||p,a)){l.push(h);break}u&&(x=k)}i&&((h=!g&&h)&&y--,o&&b.push(h))}if(y+=v,i&&v!==y){for(f=0;g=t[f++];)g(b,w,s,a);if(o){if(y>0)for(;v--;)b[v]||w[v]||(w[v]=A.call(l));w=xe(w)}R.apply(l,w),u&&!o&&w.length>0&&y+t.length>1&&ae.uniqueSort(l)}return u&&(x=k,c=_),b};return i?ce(o):o}(o,n)),a.selector=e}return a},l=ae.select=function(e,t,i,n){var o,l,c,u,h,d="function"==typeof e&&e,p=!n&&s(e=d.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ie),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=J.needsContext.test(e)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((h=r.find[u])&&(n=h(c.matches[0].replace(te,ie),ee.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(o,1),!(e=n.length&&be(l)))return R.apply(i,n),i;break}}return(d||a(e,p))(n,t,!m,i,!t||ee.test(e)&&ye(t.parentNode)||t),i},i.sortStable=w.split("").sort(I).join("")===w,i.detectDuplicates=!!h,d(),i.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||he(N,(function(e,t,i){var r;if(!i)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ae}(e);_.find=S,_.expr=S.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=S.uniqueSort,_.text=S.getText,_.isXMLDoc=S.isXML,_.contains=S.contains,_.escapeSelector=S.escape;var k=function(e,t,i){for(var r=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&_(e).is(i))break;r.push(e)}return r},M=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=_.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,i){return f(t)?_.grep(e,(function(e,r){return!!t.call(e,r,e)!==i})):t.nodeType?_.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?_.grep(e,(function(e){return a.call(t,e)>-1!==i})):_.filter(t,e,i)}_.filter=function(e,t,i){var r=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,(function(e){return 1===e.nodeType})))},_.fn.extend({find:function(e){var t,i,r=this.length,n=this;if("string"!=typeof e)return this.pushStack(_(e).filter((function(){for(t=0;t<r;t++)if(_.contains(n[t],this))return!0})));for(i=this.pushStack([]),t=0;t<r;t++)_.find(e,n[t],i);return r>1?_.uniqueSort(i):i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&T.test(e)?_(e):e||[],!1).length}});var O,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,P=_.fn.init=function(e,t,i){var r,n;if(!e)return this;if(i=i||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),I.test(r[1])&&_.isPlainObject(t))for(r in t)f(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(n=g.getElementById(r[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==i.ready?i.ready(e):e(_):_.makeArray(e,this)};P.prototype=_.fn,O=_(g);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(_.contains(this,t[e]))return!0}))},closest:function(e,t){var i,r=0,n=this.length,o=[],s="string"!=typeof e&&_(e);if(!T.test(e))for(;r<n;r++)for(i=this[r];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&_.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?_.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?a.call(_(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,i){return k(e,"parentNode",i)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,i){return k(e,"nextSibling",i)},prevUntil:function(e,t,i){return k(e,"previousSibling",i)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},(function(e,t){_.fn[e]=function(i,r){var n=_.map(this,t,i);return"Until"!==e.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=_.filter(r,n)),this.length>1&&(L[e]||_.uniqueSort(n),R.test(e)&&n.reverse()),this.pushStack(n)}}));var N=/[^\x20\t\r\n\f]+/g;function F(e){return e}function j(e){throw e}function $(e,t,i,r){var n;try{e&&f(n=e.promise)?n.call(e).done(t).fail(i):e&&f(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(r))}catch(e){i.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(N)||[],(function(e,i){t[i]=!0})),t}(e):_.extend({},e);var t,i,r,n,o=[],s=[],a=-1,l=function(){for(n=n||e.once,r=t=!0;s.length;a=-1)for(i=s.shift();++a<o.length;)!1===o[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=o.length,i=!1);e.memory||(i=!1),t=!1,n&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(a=o.length-1,s.push(i)),function t(i){_.each(i,(function(i,r){f(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==b(r)&&t(r)}))}(arguments),i&&!t&&l()),this},remove:function(){return _.each(arguments,(function(e,t){for(var i;(i=_.inArray(t,o,i))>-1;)o.splice(i,1),i<=a&&a--})),this},has:function(e){return e?_.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=s=[],i||t||(o=i=""),this},locked:function(){return!!n},fireWith:function(e,i){return n||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},_.extend({Deferred:function(t){var i=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return _.Deferred((function(t){_.each(i,(function(i,r){var n=f(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=n&&n.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,n?[e]:arguments)}))})),e=null})).promise()},then:function(t,r,n){var o=0;function s(t,i,r,n){return function(){var a=this,l=arguments,c=function(){var e,c;if(!(t<o)){if((e=r.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,f(c)?n?c.call(e,s(o,i,F,n),s(o,i,j,n)):(o++,c.call(e,s(o,i,F,n),s(o,i,j,n),s(o,i,F,i.notifyWith))):(r!==F&&(a=void 0,l=[e]),(n||i.resolveWith)(a,l))}},u=n?c:function(){try{c()}catch(e){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(e,u.stackTrace),t+1>=o&&(r!==j&&(a=void 0,l=[e]),i.rejectWith(a,l))}};t?u():(_.Deferred.getStackHook&&(u.stackTrace=_.Deferred.getStackHook()),e.setTimeout(u))}}return _.Deferred((function(e){i[0][3].add(s(0,e,f(n)?n:F,e.notifyWith)),i[1][3].add(s(0,e,f(t)?t:F)),i[2][3].add(s(0,e,f(r)?r:j))})).promise()},promise:function(e){return null!=e?_.extend(e,n):n}},o={};return _.each(i,(function(e,t){var s=t[2],a=t[5];n[t[1]]=s.add,a&&s.add((function(){r=a}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),s.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=s.fireWith})),n.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,r=Array(i),o=n.call(arguments),s=_.Deferred(),a=function(e){return function(i){r[e]=this,o[e]=arguments.length>1?n.call(arguments):i,--t||s.resolveWith(r,o)}};if(t<=1&&($(e,s.done(a(i)).resolve,s.reject,!t),"pending"===s.state()||f(o[i]&&o[i].then)))return s.then();for(;i--;)$(o[i],a(i),s.reject);return s.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&V.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},_.readyException=function(t){e.setTimeout((function(){throw t}))};var z=_.Deferred();function U(){g.removeEventListener("DOMContentLoaded",U),e.removeEventListener("load",U),_.ready()}_.fn.ready=function(e){return z.then(e).catch((function(e){_.readyException(e)})),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||z.resolveWith(g,[_]))}}),_.ready.then=z.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(_.ready):(g.addEventListener("DOMContentLoaded",U),e.addEventListener("load",U));var q=function(e,t,i,r,n,o,s){var a=0,l=e.length,c=null==i;if("object"===b(i))for(a in n=!0,i)q(e,t,a,i[a],!0,o,s);else if(void 0!==r&&(n=!0,f(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,i){return c.call(_(e),i)})),t))for(;a<l;a++)t(e[a],i,s?r:r.call(e[a],a,t(e[a],i)));return n?e:c?t.call(e):l?t(e[0],i):o},G=/^-ms-/,B=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function H(e){return e.replace(G,"ms-").replace(B,W)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=_.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var r,n=this.cache(e);if("string"==typeof t)n[H(t)]=i;else for(r in t)n[H(r)]=t[r];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][H(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,r=e[this.expando];if(void 0!==r){if(void 0!==t){i=(t=Array.isArray(t)?t.map(H):(t=H(t))in r?[t]:t.match(N)||[]).length;for(;i--;)delete r[t[i]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Z=new Y,K=new Y,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function ee(e,t,i){var r;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(r))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:X.test(e)?JSON.parse(e):e)}(i)}catch(e){}K.set(e,t,i)}else i=void 0;return i}_.extend({hasData:function(e){return K.hasData(e)||Z.hasData(e)},data:function(e,t,i){return K.access(e,t,i)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,i){return Z.access(e,t,i)},_removeData:function(e,t){Z.remove(e,t)}}),_.fn.extend({data:function(e,t){var i,r,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=K.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(r=s[i].name).indexOf("data-")&&(r=H(r.slice(5)),ee(o,r,n[r]));Z.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){K.set(this,e)})):q(this,(function(t){var i;if(o&&void 0===t)return void 0!==(i=K.get(o,e))||void 0!==(i=ee(o,e))?i:void 0;this.each((function(){K.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){K.remove(this,e)}))}}),_.extend({queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=Z.get(e,t),i&&(!r||Array.isArray(i)?r=Z.access(e,t,_.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=_.queue(e,t),r=i.length,n=i.shift(),o=_._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,(function(){_.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:_.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",i])}))})}}),_.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?_.queue(this[0],e):void 0===t?this:this.each((function(){var i=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&_.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){_.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,r=1,n=_.Deferred(),o=this,s=this.length,a=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=Z.get(o[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(a));return a(),n.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ne=g.documentElement,oe=function(e){return _.contains(e.ownerDocument,e)},se={composed:!0};ne.getRootNode&&(oe=function(e){return _.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===_.css(e,"display")};function le(e,t,i,r){var n,o,s=20,a=r?function(){return r.cur()}:function(){return _.css(e,t,"")},l=a(),c=i&&i[3]||(_.cssNumber[t]?"":"px"),u=e.nodeType&&(_.cssNumber[t]||"px"!==c&&+l)&&ie.exec(_.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)_.style(e,t,u+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),u/=o;u*=2,_.style(e,t,u+c),i=i||[]}return i&&(u=+u||+l||0,n=i[1]?u+(i[1]+1)*i[2]:+i[2],r&&(r.unit=c,r.start=u,r.end=n)),n}var ce={};function ue(e){var t,i=e.ownerDocument,r=e.nodeName,n=ce[r];return n||(t=i.body.appendChild(i.createElement(r)),n=_.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),ce[r]=n,n)}function he(e,t){for(var i,r,n=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(i=r.style.display,t?("none"===i&&(n[o]=Z.get(r,"display")||null,n[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(n[o]=ue(r))):"none"!==i&&(n[o]="none",Z.set(r,"display",i)));for(o=0;o<s;o++)null!=n[o]&&(e[o].style.display=n[o]);return e}_.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ae(this)?_(this).show():_(this).hide()}))}});var de,pe,fe=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;de=g.createDocumentFragment().appendChild(g.createElement("div")),(pe=g.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),p.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",p.option=!!de.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?_.merge([e],i):i}function be(e,t){for(var i=0,r=e.length;i<r;i++)Z.set(e[i],"globalEval",!t||Z.get(t[i],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,p.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function _e(e,t,i,r,n){for(var o,s,a,l,c,u,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===b(o))_.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(me.exec(o)||["",""])[1].toLowerCase(),l=ye[a]||ye._default,s.innerHTML=l[1]+_.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;_.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(r&&_.inArray(o,r)>-1)n&&n.push(o);else if(c=oe(o),s=ve(h.appendChild(o),"script"),c&&be(s),i)for(u=0;o=s[u++];)ge.test(o.type||"")&&i.push(o);return h}var xe=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function ke(){return!1}function Me(e,t){return e===function(){try{return g.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,i,r,n,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(r=r||i,i=void 0),t)Te(e,a,i,r,t[a],o);return e}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),!1===n)n=ke;else if(!n)return e;return 1===o&&(s=n,n=function(e){return _().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=_.guid++)),e.each((function(){_.event.add(this,t,n,r,i)}))}function Ee(e,t,i){i?(Z.set(e,t,!1),_.event.add(e,t,{namespace:!1,handler:function(e){var r,o,s=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(_.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=n.call(arguments),Z.set(this,t,s),r=i(this,t),this[t](),s!==(o=Z.get(this,t))||r?Z.set(this,t,!1):o={},s!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else s.length&&(Z.set(this,t,{value:_.event.trigger(_.extend(s[0],_.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&_.event.add(e,t,Se)}_.event={global:{},add:function(e,t,i,r,n){var o,s,a,l,c,u,h,d,p,f,m,g=Z.get(e);if(J(e))for(i.handler&&(i=(o=i).handler,n=o.selector),n&&_.find.matchesSelector(ne,n),i.guid||(i.guid=_.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(N)||[""]).length;c--;)p=m=(a=xe.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=_.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,h=_.event.special[p]||{},u=_.extend({type:p,origType:m,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&_.expr.match.needsContext.test(n),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),n?d.splice(d.delegateCount++,0,u):d.push(u),_.event.global[p]=!0)},remove:function(e,t,i,r,n){var o,s,a,l,c,u,h,d,p,f,m,g=Z.hasData(e)&&Z.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(p=m=(a=xe.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=_.event.special[p]||{},d=l[p=(r?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!n&&m!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,g.handle)||_.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)_.event.remove(e,p+t[c],i,r,!0);_.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,i,r,n,o,s,a=new Array(arguments.length),l=_.event.fix(e),c=(Z.get(this,"events")||Object.create(null))[l.type]||[],u=_.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=_.event.handlers.call(this,l,c),t=0;(n=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((_.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,r,n,o,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},i=0;i<l;i++)void 0===s[n=(r=t[i]).selector+" "]&&(s[n]=r.needsContext?_(n,this).index(c)>-1:_.find(n,this,null,[c]).length),s[n]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&E(t,"input")&&Ee(t,"click",Se),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&E(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&E(t,"input")&&Z.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},(function(e,t){_.event.special[e]={setup:function(){return Ee(this,e,Me),!1},trigger:function(){return Ee(this,e),!0},_default:function(){return!0},delegateType:t}})),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===r||_.contains(r,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}})),_.fn.extend({on:function(e,t,i,r){return Te(this,e,t,i,r)},one:function(e,t,i,r){return Te(this,e,t,i,r,1)},off:function(e,t,i){var r,n;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=ke),this.each((function(){_.event.remove(this,e,i,t)}))}});var Ie=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var i,r,n,o,s,a;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.get(e).events))for(n in Z.remove(t,"handle events"),a)for(i=0,r=a[n].length;i<r;i++)_.event.add(t,n,a[n][i]);K.hasData(e)&&(o=K.access(e),s=_.extend({},o),K.set(t,s))}}function De(e,t){var i=t.nodeName.toLowerCase();"input"===i&&fe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ne(e,t,i,r){t=o(t);var n,s,a,l,c,u,h=0,d=e.length,m=d-1,g=t[0],y=f(g);if(y||d>1&&"string"==typeof g&&!p.checkClone&&Ce.test(g))return e.each((function(n){var o=e.eq(n);y&&(t[0]=g.call(this,n,o.html())),Ne(o,t,i,r)}));if(d&&(s=(n=_e(t,e[0].ownerDocument,!1,e,r)).firstChild,1===n.childNodes.length&&(n=s),s||r)){for(l=(a=_.map(ve(n,"script"),Pe)).length;h<d;h++)c=n,h!==m&&(c=_.clone(c,!0,!0),l&&_.merge(a,ve(c,"script"))),i.call(e[h],c,h);if(l)for(u=a[a.length-1].ownerDocument,_.map(a,Re),h=0;h<l;h++)c=a[h],ge.test(c.type||"")&&!Z.access(c,"globalEval")&&_.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?_._evalUrl&&!c.noModule&&_._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):v(c.textContent.replace(Oe,""),c,u))}return e}function Fe(e,t,i){for(var r,n=t?_.filter(t,e):e,o=0;null!=(r=n[o]);o++)i||1!==r.nodeType||_.cleanData(ve(r)),r.parentNode&&(i&&oe(r)&&be(ve(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var r,n,o,s,a=e.cloneNode(!0),l=oe(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(s=ve(a),r=0,n=(o=ve(e)).length;r<n;r++)De(o[r],s[r]);if(t)if(i)for(o=o||ve(e),s=s||ve(a),r=0,n=o.length;r<n;r++)Le(o[r],s[r]);else Le(e,a);return(s=ve(a,"script")).length>0&&be(s,!l&&ve(e,"script")),a},cleanData:function(e){for(var t,i,r,n=_.event.special,o=0;void 0!==(i=e[o]);o++)if(J(i)){if(t=i[Z.expando]){if(t.events)for(r in t.events)n[r]?_.event.remove(i,r):_.removeEvent(i,r,t.handle);i[Z.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),_.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return q(this,(function(e){return void 0===e?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ne(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)}))},prepend:function(){return Ne(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ne(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return _.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!ye[(me.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(_.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,(function(t){var i=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ve(this)),i&&i.replaceChild(t,this))}),e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){_.fn[e]=function(e){for(var i,r=[],n=_(e),o=n.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),_(n[a])[t](i),s.apply(r,i.get());return this.pushStack(r)}}));var je=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),$e=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Ve=function(e,t,i){var r,n,o={};for(n in t)o[n]=e.style[n],e.style[n]=t[n];for(n in r=i.call(e),t)e.style[n]=o[n];return r},ze=new RegExp(re.join("|"),"i");function Ue(e,t,i){var r,n,o,s,a=e.style;return(i=i||$e(e))&&(""!==(s=i.getPropertyValue(t)||i[t])||oe(e)||(s=_.style(e,t)),!p.pixelBoxStyles()&&je.test(s)&&ze.test(t)&&(r=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=r,a.minWidth=n,a.maxWidth=o)),void 0!==s?s+"":s}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,l=12===i(t.marginLeft),u.style.right="60%",s=36===i(t.right),n=36===i(t.width),u.style.position="absolute",o=12===i(u.offsetWidth/3),ne.removeChild(c),u=null}}function i(e){return Math.round(parseFloat(e))}var r,n,o,s,a,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===u.style.backgroundClip,_.extend(p,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,i,r,n;return null==a&&(t=g.createElement("table"),i=g.createElement("tr"),r=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",r.style.height="9px",r.style.display="block",ne.appendChild(t).appendChild(i).appendChild(r),n=e.getComputedStyle(i),a=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===i.offsetHeight,ne.removeChild(t)),a}}))}();var Ge=["Webkit","Moz","ms"],Be=g.createElement("div").style,We={};function He(e){var t=_.cssProps[e]||We[e];return t||(e in Be?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Ge.length;i--;)if((e=Ge[i]+t)in Be)return e}(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Xe(e,t,i){var r=ie.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function Qe(e,t,i,r,n,o){var s="width"===t?1:0,a=0,l=0;if(i===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=_.css(e,i+re[s],!0,n)),r?("content"===i&&(l-=_.css(e,"padding"+re[s],!0,n)),"margin"!==i&&(l-=_.css(e,"border"+re[s]+"Width",!0,n))):(l+=_.css(e,"padding"+re[s],!0,n),"padding"!==i?l+=_.css(e,"border"+re[s]+"Width",!0,n):a+=_.css(e,"border"+re[s]+"Width",!0,n));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-a-.5))||0),l}function et(e,t,i){var r=$e(e),n=(!p.boxSizingReliable()||i)&&"border-box"===_.css(e,"boxSizing",!1,r),o=n,s=Ue(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(s)){if(!i)return s;s="auto"}return(!p.boxSizingReliable()&&n||!p.reliableTrDimensions()&&E(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===_.css(e,"display",!1,r))&&e.getClientRects().length&&(n="border-box"===_.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+Qe(e,t,i||(n?"border":"content"),o,r,s)+"px"}function tt(e,t,i,r,n){return new tt.prototype.init(e,t,i,r,n)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ue(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,a=H(t),l=Ye.test(t),c=e.style;if(l||(t=He(a)),s=_.cssHooks[t]||_.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(e,!1,r))?n:c[t];"string"===(o=typeof i)&&(n=ie.exec(i))&&n[1]&&(i=le(e,t,n),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=n&&n[3]||(_.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,r))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,r){var n,o,s,a=H(t);return Ye.test(t)||(t=He(a)),(s=_.cssHooks[t]||_.cssHooks[a])&&"get"in s&&(n=s.get(e,!0,i)),void 0===n&&(n=Ue(e,t,r)),"normal"===n&&t in Ke&&(n=Ke[t]),""===i||i?(o=parseFloat(n),!0===i||isFinite(o)?o||0:n):n}}),_.each(["height","width"],(function(e,t){_.cssHooks[t]={get:function(e,i,r){if(i)return!Je.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):Ve(e,Ze,(function(){return et(e,t,r)}))},set:function(e,i,r){var n,o=$e(e),s=!p.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===_.css(e,"boxSizing",!1,o),l=r?Qe(e,t,r,a,o):0;return a&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Qe(e,t,"border",!1,o)-.5)),l&&(n=ie.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=_.css(e,t)),Xe(0,i,l)}}})),_.cssHooks.marginLeft=qe(p.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),_.each({margin:"",padding:"",border:"Width"},(function(e,t){_.cssHooks[e+t]={expand:function(i){for(var r=0,n={},o="string"==typeof i?i.split(" "):[i];r<4;r++)n[e+re[r]+t]=o[r]||o[r-2]||o[0];return n}},"margin"!==e&&(_.cssHooks[e+t].set=Xe)})),_.fn.extend({css:function(e,t){return q(this,(function(e,t,i){var r,n,o={},s=0;if(Array.isArray(t)){for(r=$e(e),n=t.length;s<n;s++)o[t[s]]=_.css(e,t[s],!1,r);return o}return void 0!==i?_.style(e,t,i):_.css(e,t)}),e,t,arguments.length>1)}}),_.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,i,r,n,o){this.elem=e,this.prop=i,this.easing=n||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(_.cssNumber[i]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,i=tt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||!_.cssHooks[e.prop]&&null==e.elem.style[He(e.prop)]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=tt.prototype.init,_.fx.step={};var it,rt,nt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){rt&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,_.fx.interval),_.fx.tick())}function at(){return e.setTimeout((function(){it=void 0})),it=Date.now()}function lt(e,t){var i,r=0,n={height:e};for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=re[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function ct(e,t,i){for(var r,n=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),o=0,s=n.length;o<s;o++)if(r=n[o].call(i,t,e))return r}function ut(e,t,i){var r,n,o=0,s=ut.prefilters.length,a=_.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var t=it||at(),i=Math.max(0,c.startTime+c.duration-t),r=1-(i/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(e,[c,r,i]),r<1&&s?i:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},i),originalProperties:t,originalOptions:i,startTime:it||at(),duration:i.duration,tweens:[],createTween:function(t,i){var r=_.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var i=0,r=t?c.tweens.length:0;if(n)return this;for(n=!0;i<r;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var i,r,n,o,s;for(i in e)if(n=t[r=H(i)],o=e[i],Array.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==r&&(e[r]=o,delete e[i]),(s=_.cssHooks[r])&&"expand"in s)for(i in o=s.expand(o),delete e[r],o)i in e||(e[i]=o[i],t[i]=n);else t[r]=n}(u,c.opts.specialEasing);o<s;o++)if(r=ut.prefilters[o].call(c,e,u,c.opts))return f(r.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return _.map(u,ct,c),f(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(ut,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return le(i.elem,e,ie.exec(t),i),i}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(N);for(var i,r=0,n=e.length;r<n;r++)i=e[r],ut.tweeners[i]=ut.tweeners[i]||[],ut.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var r,n,o,s,a,l,c,u,h="width"in t||"height"in t,d=this,p={},f=e.style,m=e.nodeType&&ae(e),g=Z.get(e,"fxshow");for(r in i.queue||(null==(s=_._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,_.queue(e,"fx").length||s.empty.fire()}))}))),t)if(n=t[r],nt.test(n)){if(delete t[r],o=o||"toggle"===n,n===(m?"hide":"show")){if("show"!==n||!g||void 0===g[r])continue;m=!0}p[r]=g&&g[r]||_.style(e,r)}if((l=!_.isEmptyObject(t))||!_.isEmptyObject(p))for(r in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Z.get(e,"display")),"none"===(u=_.css(e,"display"))&&(c?u=c:(he([e],!0),c=e.style.display||c,u=_.css(e,"display"),he([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===_.css(e,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Z.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&he([e],!0),d.done((function(){for(r in m||he([e]),Z.remove(e,"fxshow"),p)_.style(e,r,p[r])}))),l=ct(m?g[r]:0,r,d),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),_.speed=function(e,t,i){var r=e&&"object"==typeof e?_.extend({},e):{complete:i||!i&&t||f(e)&&e,duration:e,easing:i&&t||t&&!f(t)&&t};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){f(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,i,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var n=_.isEmptyObject(e),o=_.speed(t,i,r),s=function(){var t=ut(this,_.extend({},e),o);(n||Z.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",o=_.timers,s=Z.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&ot.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));!t&&i||_.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=Z.get(this),r=i[e+"queue"],n=i[e+"queueHooks"],o=_.timers,s=r?r.length:0;for(i.finish=!0,_.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete i.finish}))}}),_.each(["toggle","show","hide"],(function(e,t){var i=_.fn[t];_.fn[t]=function(e,r,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(t,!0),e,r,n)}})),_.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){_.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}})),_.timers=[],_.fx.tick=function(){var e,t=0,i=_.timers;for(it=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||_.fx.stop(),it=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){rt||(rt=!0,st())},_.fx.stop=function(){rt=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(t,i){return t=_.fx&&_.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,r){var n=e.setTimeout(i,t);r.stop=function(){e.clearTimeout(n)}}))},function(){var e=g.createElement("input"),t=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=g.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var ht,dt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return q(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){_.removeAttr(this,e)}))}}),_.extend({attr:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?_.prop(e,t,i):(1===o&&_.isXMLDoc(e)||(n=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ht:void 0)),void 0!==i?null===i?void _.removeAttr(e,t):n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&E(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,r=0,n=t&&t.match(N);if(n&&1===e.nodeType)for(;i=n[r++];)e.removeAttribute(i)}}),ht={set:function(e,t,i){return!1===t?_.removeAttr(e,i):e.setAttribute(i,i),i}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=dt[t]||_.find.attr;dt[t]=function(e,t,r){var n,o,s=t.toLowerCase();return r||(o=dt[s],dt[s]=n,n=null!=i(e,t,r)?s:null,dt[s]=o),n}}));var pt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function mt(e){return(e.match(N)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}_.fn.extend({prop:function(e,t){return q(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[_.propFix[e]||e]}))}}),_.extend({prop:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(e)||(t=_.propFix[t]||t,n=_.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:e[t]=i:n&&"get"in n&&null!==(r=n.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this})),_.fn.extend({addClass:function(e){var t,i,r,n,o,s,a,l=0;if(f(e))return this.each((function(t){_(this).addClass(e.call(this,t,gt(this)))}));if((t=yt(e)).length)for(;i=this[l++];)if(n=gt(i),r=1===i.nodeType&&" "+mt(n)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");n!==(a=mt(r))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,r,n,o,s,a,l=0;if(f(e))return this.each((function(t){_(this).removeClass(e.call(this,t,gt(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;i=this[l++];)if(n=gt(i),r=1===i.nodeType&&" "+mt(n)+" "){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");n!==(a=mt(r))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e,r="string"===i||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):f(e)?this.each((function(i){_(this).toggleClass(e.call(this,i,gt(this),t),t)})):this.each((function(){var t,n,o,s;if(r)for(n=0,o=_(this),s=yt(e);t=s[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==i||((t=gt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,r=0;for(t=" "+e+" ";i=this[r++];)if(1===i.nodeType&&(" "+mt(gt(i))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;_.fn.extend({val:function(e){var t,i,r,n=this[0];return arguments.length?(r=f(e),this.each((function(i){var n;1===this.nodeType&&(null==(n=r?e.call(this,i,_(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=_.map(n,(function(e){return null==e?"":e+""}))),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=_.valHooks[n.type]||_.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:"string"==typeof(i=n.value)?i.replace(vt,""):null==i?"":i:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:mt(_.text(e))}},select:{get:function(e){var t,i,r,n=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],l=s?o+1:n.length;for(r=o<0?l:s?o:0;r<l;r++)if(((i=n[r]).selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!E(i.parentNode,"optgroup"))){if(t=_(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,r,n=e.options,o=_.makeArray(t),s=n.length;s--;)((r=n[s]).selected=_.inArray(_.valHooks.option.get(r),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},p.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),p.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(t,i,r,n){var o,s,a,l,c,h,d,p,y=[r||g],v=u.call(t,"type")?t.type:t,b=u.call(t,"namespace")?t.namespace.split("."):[];if(s=p=a=r=r||g,3!==r.nodeType&&8!==r.nodeType&&!bt.test(v+_.event.triggered)&&(v.indexOf(".")>-1&&(b=v.split("."),v=b.shift(),b.sort()),c=v.indexOf(":")<0&&"on"+v,(t=t[_.expando]?t:new _.Event(v,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),i=null==i?[t]:_.makeArray(i,[t]),d=_.event.special[v]||{},n||!d.trigger||!1!==d.trigger.apply(r,i))){if(!n&&!d.noBubble&&!m(r)){for(l=d.delegateType||v,bt.test(l+v)||(s=s.parentNode);s;s=s.parentNode)y.push(s),a=s;a===(r.ownerDocument||g)&&y.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=y[o++])&&!t.isPropagationStopped();)p=s,t.type=o>1?l:d.bindType||v,(h=(Z.get(s,"events")||Object.create(null))[t.type]&&Z.get(s,"handle"))&&h.apply(s,i),(h=c&&s[c])&&h.apply&&J(s)&&(t.result=h.apply(s,i),!1===t.result&&t.preventDefault());return t.type=v,n||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),i)||!J(r)||c&&f(r[v])&&!m(r)&&((a=r[c])&&(r[c]=null),_.event.triggered=v,t.isPropagationStopped()&&p.addEventListener(v,wt),r[v](),t.isPropagationStopped()&&p.removeEventListener(v,wt),_.event.triggered=void 0,a&&(r[c]=a)),t.result}},simulate:function(e,t,i){var r=_.extend(new _.Event,i,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each((function(){_.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return _.event.trigger(e,t,i,!0)}}),p.focusin||_.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,n=Z.access(r,t);n||r.addEventListener(e,i,!0),Z.access(r,t,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,n=Z.access(r,t)-1;n?Z.access(r,t,n):(r.removeEventListener(e,i,!0),Z.remove(r,t))}}}));var _t=e.location,xt={guid:Date.now()},St=/\?/;_.parseXML=function(t){var i,r;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){}return r=i&&i.getElementsByTagName("parsererror")[0],i&&!r||_.error("Invalid XML: "+(r?_.map(r.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var kt=/\[\]$/,Mt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,r){var n;if(Array.isArray(t))_.each(t,(function(t,n){i||kt.test(e)?r(e,n):It(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,r)}));else if(i||"object"!==b(t))r(e,t);else for(n in t)It(e+"["+n+"]",t[n],i,r)}_.param=function(e,t){var i,r=[],n=function(e,t){var i=f(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,(function(){n(this.name,this.value)}));else for(i in e)It(i,e[i],t,n);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&Et.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=_(this).val();return null==i?null:Array.isArray(i)?_.map(i,(function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}})):{name:t.name,value:i.replace(Mt,"\r\n")}})).get()}});var Ct=/%20/g,Ot=/#.*$/,At=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Dt={},Nt={},Ft="*/".concat("*"),jt=g.createElement("a");function $t(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,n=0,o=t.toLowerCase().match(N)||[];if(f(i))for(;r=o[n++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(i)):(e[r]=e[r]||[]).push(i)}}function Vt(e,t,i,r){var n={},o=e===Nt;function s(a){var l;return n[a]=!0,_.each(e[a]||[],(function(e,a){var c=a(t,i,r);return"string"!=typeof c||o||n[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!n["*"]&&s("*")}function zt(e,t){var i,r,n=_.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:r||(r={}))[i]=t[i]);return r&&_.extend(!0,e,r),e}jt.href=_t.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,_.ajaxSettings),t):zt(_.ajaxSettings,e)},ajaxPrefilter:$t(Dt),ajaxTransport:$t(Nt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,n,o,s,a,l,c,u,h,d,p=_.ajaxSetup({},i),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?_(f):_.event,y=_.Deferred(),v=_.Callbacks("once memory"),b=p.statusCode||{},w={},x={},S="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Pt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||S;return r&&r.abort(t),M(0,t),this}};if(y.promise(k),p.url=((t||p.url||_t.href)+"").replace(Lt,_t.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(N)||[""],null==p.crossDomain){l=g.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=jt.protocol+"//"+jt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=_.param(p.data,p.traditional)),Vt(Dt,p,i,k),c)return k;for(h in(u=_.event&&p.global)&&0==_.active++&&_.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Rt.test(p.type),n=p.url.replace(Ot,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ct,"+")):(d=p.url.slice(n.length),p.data&&(p.processData||"string"==typeof p.data)&&(n+=(St.test(n)?"&":"?")+p.data,delete p.data),!1===p.cache&&(n=n.replace(At,"$1"),d=(St.test(n)?"&":"?")+"_="+xt.guid+++d),p.url=n+d),p.ifModified&&(_.lastModified[n]&&k.setRequestHeader("If-Modified-Since",_.lastModified[n]),_.etag[n]&&k.setRequestHeader("If-None-Match",_.etag[n])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,k,p)||c))return k.abort();if(S="abort",v.add(p.complete),k.done(p.success),k.fail(p.error),r=Vt(Nt,p,i,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(a=e.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,r.send(w,M)}catch(e){if(c)throw e;M(-1,e)}}else M(-1,"No Transport");function M(t,i,s,l){var h,d,g,w,x,S=i;c||(c=!0,a&&e.clearTimeout(a),r=void 0,o=l||"",k.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(w=function(e,t,i){for(var r,n,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in a)if(a[n]&&a[n].test(r)){l.unshift(n);break}if(l[0]in i)o=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}(p,k,s)),!h&&_.inArray("script",p.dataTypes)>-1&&_.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(e,t,i,r){var n,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(n in c)if((a=n.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[n]:!0!==c[n]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,w,k,h),h?(p.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(_.lastModified[n]=x),(x=k.getResponseHeader("etag"))&&(_.etag[n]=x)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=w.state,d=w.data,h=!(g=w.error))):(g=S,!t&&S||(S="error",t<0&&(t=0))),k.status=t,k.statusText=(i||S)+"",h?y.resolveWith(f,[d,S,k]):y.rejectWith(f,[k,S,g]),k.statusCode(b),b=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[k,p,h?d:g]),v.fireWith(f,[k,S]),u&&(m.trigger("ajaxComplete",[k,p]),--_.active||_.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,i){return _.get(e,t,i,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],(function(e,t){_[t]=function(e,i,r,n){return f(i)&&(n=n||r,r=i,i=void 0),_.ajax(_.extend({url:e,type:t,dataType:n,data:i,success:r},_.isPlainObject(e)&&e))}})),_.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),_._evalUrl=function(e,t,i){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){_.globalEval(e,t,i)}})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return f(e)?this.each((function(t){_(this).wrapInner(e.call(this,t))})):this.each((function(){var t=_(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=f(e);return this.each((function(i){_(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){_(this).replaceWith(this.childNodes)})),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},qt=_.ajaxSettings.xhr();p.cors=!!qt&&"withCredentials"in qt,p.ajax=qt=!!qt,_.ajaxTransport((function(t){var i,r;if(p.cors||qt&&!t.crossDomain)return{send:function(n,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(s,n[s]);i=function(e){return function(){i&&(i=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),r=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout((function(){i&&r()}))},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}})),_.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),_.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(r,n){t=_("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Gt,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||_.expando+"_"+xt.guid++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",(function(t,i,r){var n,o,s,a=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Wt,"$1"+n):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||_.error(n+" was not called"),s[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){s=arguments},r.always((function(){void 0===o?_(e).removeProp(n):e[n]=o,t[n]&&(t.jsonpCallback=i.jsonpCallback,Bt.push(n)),s&&f(o)&&o(s[0]),s=o=void 0})),"script"})),p.createHTMLDocument=((Gt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Gt.childNodes.length),_.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(p.createHTMLDocument?((r=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(r)):t=g),o=!i&&[],(n=I.exec(e))?[t.createElement(n[1])]:(n=_e([e],t,o),o&&o.length&&_(o).remove(),_.merge([],n.childNodes)));var r,n,o},_.fn.load=function(e,t,i){var r,n,o,s=this,a=e.indexOf(" ");return a>-1&&(r=mt(e.slice(a)),e=e.slice(0,a)),f(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&_.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,o||[e.responseText,t,e])}))}),this},_.expr.pseudos.animated=function(e){return _.grep(_.timers,(function(t){return e===t.elem})).length},_.offset={setOffset:function(e,t,i){var r,n,o,s,a,l,c=_.css(e,"position"),u=_(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),o=_.css(e,"top"),l=_.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(s=(r=u.position()).top,n=r.left):(s=parseFloat(o)||0,n=parseFloat(l)||0),f(t)&&(t=t.call(e,i,_.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+n),"using"in t?t.using.call(e,h):u.css(h)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){_.offset.setOffset(this,e,t)}));var t,i,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,r=this[0],n={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),i=r.ownerDocument,e=r.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((n=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),n.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-_.css(r,"marginTop",!0),left:t.left-n.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||ne}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;_.fn[e]=function(r){return q(this,(function(e,r,n){var o;if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===n)return o?o[t]:e[r];o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):e[r]=n}),e,r,arguments.length)}})),_.each(["top","left"],(function(e,t){_.cssHooks[t]=qe(p.pixelPosition,(function(e,i){if(i)return i=Ue(e,t),je.test(i)?_(e).position()[t]+"px":i}))})),_.each({Height:"height",Width:"width"},(function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,r){_.fn[r]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===o?"margin":"border");return q(this,(function(t,i,n){var o;return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?_.css(t,i,a):_.style(t,i,n,a)}),t,s?n:void 0,s)}}))})),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){_.fn[t]=function(e){return this.on(t,e)}})),_.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){_.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var Ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(e,t){var i,r,o;if("string"==typeof t&&(i=e[t],t=e,e=i),f(e))return r=n.call(arguments,2),o=function(){return e.apply(t||this,r.concat(n.call(arguments)))},o.guid=e.guid=e.guid||_.guid++,o},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=E,_.isFunction=f,_.isWindow=m,_.camelCase=H,_.type=b,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},_.trim=function(e){return null==e?"":(e+"").replace(Ht,"")};var Jt=e.jQuery,Yt=e.$;return _.noConflict=function(t){return e.$===_&&(e.$=Yt),t&&e.jQuery===_&&(e.jQuery=Jt),_},void 0===t&&(e.jQuery=e.$=_),_}))}(ha);var da=ha.exports;const pa=ua(import.meta.url);var fa,ma,ga;let ya;var va,ba;function wa(e){return"function"==typeof ya[e]?ya[e]=ya[e](globalThis):ya[e]}fa=pa.origin+"/mk/",y.$resourcesUrl$=fa,customElements.define("calcite-button",$s),customElements.define("calcite-dropdown",Vs),customElements.define("calcite-dropdown-group",zs),customElements.define("calcite-dropdown-item",Us),window.$=window.jQuery=da,ya=null!=(ma=globalThis.dojoConfig)&&ma.has||null!=(ga=globalThis.esriConfig)&&ga.has?{...null==(va=globalThis.dojoConfig)?void 0:va.has,...null==(ba=globalThis.esriConfig)?void 0:ba.has}:{},wa.add=(e,t,i,r)=>((r||void 0===ya[e])&&(ya[e]=t),i&&wa(e)),wa.cache=ya,wa.add("esri-deprecation-warnings",!0),(()=>{var e;wa.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const t="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(wa.add("host-browser",t),wa.add("host-node","object"==typeof globalThis.process&&(null==(e=globalThis.process.versions)?void 0:e.node)&&globalThis.process.versions.v8),wa.add("dom",t),wa("host-browser")){const e=navigator,t=e.userAgent,i=e.appVersion,r=parseFloat(i);if(wa.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),wa.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),wa.add("khtml",i.includes("Konqueror")?r:void 0),wa.add("edge",parseFloat(t.split("Edge/")[1])||void 0),wa.add("opr",parseFloat(t.split("OPR/")[1])||void 0),wa.add("webkit",!wa("wp")&&!wa("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),wa.add("chrome",!wa("edge")&&!wa("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),wa.add("android",!wa("wp")&&parseFloat(t.split("Android ")[1])||void 0),wa.add("safari",!i.includes("Safari")||wa("wp")||wa("chrome")||wa("android")||wa("edge")||wa("opr")?void 0:parseFloat(i.split("Version/")[1])),wa.add("mac",i.includes("Macintosh")),!wa("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),i=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(i.replace(/_/,".").replace(/_/g,""));wa.add(e,r),wa.add("ios",r)}wa.add("trident",parseFloat(i.split("Trident/")[1])||void 0),wa("webkit")||(!t.includes("Gecko")||wa("wp")||wa("khtml")||wa("trident")||wa("edge")||wa.add("mozilla",r),wa("mozilla")&&wa.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&wa.add("esri-mobile",t),i&&wa.add("esri-iPhone",i),wa.add("esri-geolocation",!!navigator.geolocation)}wa.add("esri-canvas-svg-support",!wa("trident")),wa.add("esri-wasm","WebAssembly"in globalThis),wa.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=!1===globalThis.crossOriginIsolated;return e&&!t})),wa.add("esri-atomics","Atomics"in globalThis),wa.add("esri-workers","Worker"in globalThis),wa.add("web-feat:cache","caches"in globalThis),wa.add("esri-workers-arraybuffer-transfer",!wa("safari")||Number(wa("safari"))>=12),wa.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),wa.add("featurelayer-simplify-payload-size-factors",[1,1,4]),wa.add("featurelayer-snapshot-enabled",!0),wa.add("featurelayer-snapshot-point-min-threshold",8e4),wa.add("featurelayer-snapshot-point-max-threshold",4e5),wa.add("featurelayer-snapshot-point-coverage",.1),wa.add("featurelayer-advanced-symbols",!1),wa.add("featurelayer-pbf",!0),wa.add("featurelayer-pbf-statistics",!1),wa.add("feature-layers-workers",!0),wa.add("feature-polyline-generalization-factor",1),wa.add("mapview-transitions-duration",200),wa.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),wa.add("mapserver-pbf-enabled",!1),wa("host-webworker")||wa("host-browser")&&(wa.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),wa.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{wa.add("esri-image-decode",!0,!0,!0)})).catch((()=>{wa.add("esri-image-decode",!1,!0,!0)}))}return!1})),wa.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();function _a(e){return null!=e}function xa(e){return null==e}function Sa(e){return void 0===e}function ka(e,t){return _a(e)?t(e):null}function Ma(e){return e}function Ta(e,t){if(xa(e))throw new Error(t);return e}function Ea(e,t){return _a(e)?e:"function"==typeof t?t():t}function Ia(e,t){return _a(e)?e:t}function Ca(e){return _a(e)&&e.destroy(),null}function Oa(e){return _a(e)&&e.dispose(),null}function Aa(e){return _a(e)&&e.remove(),null}function Pa(e){return _a(e)&&e.abort(),null}function Ra(e){return _a(e)&&e.release(),null}function La(e,t){const i=new Array;for(const r of e)i.push(Na(r,null,t));return i}function Da(e,t){for(const i of e)ka(i,t)}function Na(e,t,i){return _a(e)?i(e):t}function Fa(e){return e.filter((e=>_a(e)))}function ja(e,...t){let i=e;for(let e=0;e<t.length&&i;++e)i=i[t[e]];return i}function $a(e){return e}class Va{constructor(e=1){this._seed=e}set seed(e){this._seed=null==e?Math.random()*Va._m:e}getInt(){return this._seed=(Va._a*this._seed+Va._c)%Va._m,this._seed}getFloat(){return this.getInt()/(Va._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){const i=t-e;return e+this.getInt()/Va._m*i}}function za(e,t,i){if(xa(e)&&xa(t))return!0;if(xa(e)||xa(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Ua(e){return e&&"number"==typeof e.length}Va._m=2147483647,Va._a=48271,Va._c=0;const qa=!!Array.prototype.fill;function Ga(e,t){if(qa)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function Ba(e,t){void 0===t&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class Wa{constructor(){this.last=0}}const Ha=new Wa;function Ja(e,t,i,r){r=r||Ha;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(e[o]===t)return r.last=o,o;const o=Math.min(n,i);for(let i=0;i<o;++i)if(e[i]===t)return r.last=i,i;return-1}function Ya(e,t,i,r){const n=null==i?e.length:i,o=Ja(e,t,n,r);if(-1!==o)return e[o]=e[n-1],null==i&&e.pop(),t}const Za=new Set;function Ka(e,t){const i=e.indexOf(t);return-1!==i?(e.splice(i,1),t):null}function Xa(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function Qa(e,t,i){if(e.slice)return e.slice(t,i);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===i?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),n=new e.constructor(r);for(let i=0;i<r;i++)n[i]=e[t+i];return n}function el(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function tl(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function il(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function rl(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function nl(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(void 0===e[i]?delete e[i]:e[i]instanceof Object&&nl(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&void 0===e[i]&&delete e[i];return e}function ol(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=ul(e);if(_a(t))return t;if(al(e))return e.clone();if(ll(e))return e.map(ol);if(cl(e))return e.clone();const i={};for(const t of Object.getOwnPropertyNames(e))i[t]=ol(e[t]);return i}function sl(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=ul(e);if(_a(t))return t;if(ll(e)){let t=!0;const i=e.map((e=>{const i=sl(e);return null!=e&&null==i&&(t=!1),i}));return t?i:null}if(al(e))return e.clone();if(!cl(e)){const t=new(Object.getPrototypeOf(e).constructor);for(const i of Object.getOwnPropertyNames(e)){const r=e[i],n=sl(r);if(null!=r&&null==n)return null;t[i]=n}return t}return null}function al(e){return"function"==typeof e.clone}function ll(e){return"function"==typeof e.map&&"function"==typeof e.forEach}function cl(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}function ul(e){if(function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}(e)||tl(e)||function(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}(e)||function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}(e)||il(e)||function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}(e)||rl(e)||function(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}(e)||function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}(e))return Qa(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach(((e,i)=>{t.set(i,ol(e))})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(ol(e))})),t}return null}function hl(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}function dl(e,t,i=!1){return gl(e,t,i)}function pl(e,t){if(null!=t)return t[e]||ml(e.split("."),!1,t)}function fl(e,t,i){const r=e.split("."),n=r.pop(),o=ml(r,!0,i);o&&n&&(o[n]=t)}function ml(e,t,i){let r=i;for(const i of e){if(null==r)return;if(!(i in r)){if(!t)return;r[i]={}}r=r[i]}return r}function gl(e,t,i){return t?Object.keys(t).reduce((function(e,r){let n=e[r],o=t[r];return n===o?e:void 0===n?(e[r]=ol(o),e):(Array.isArray(o)||Array.isArray(e)?(n=n?Array.isArray(n)?e[r]=n.concat():e[r]=[n]:e[r]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach((e=>{-1===n.indexOf(e)&&n.push(e)})):e[r]=o.concat())):o&&"object"==typeof o?e[r]=gl(n,o,i):e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[r]=o),e)}),e||{}):e}var yl;new Va;const vl={apiKey:void 0,applicationUrl:null==(yl=globalThis.location)?void 0:yl.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(dl(vl,globalThis.esriConfig,!0),delete vl.has),!vl.assetsPath){const e="4.23.7";vl.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}function bl(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}vl.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(vl,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),vl.request.corsEnabledServers=[],vl.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};class wl{constructor(e,t,i,r=1,n=0){if(this.ctor=e,this.acquireFunction=t,this.releaseFunction=i,this.allocationSize=r,this._pool=new Array(n),this._initialSize=n,this.ctor)for(let e=0;e<n;e++)this._pool[e]=new this.ctor;this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...e){let t;if(wl.test.disabled)t=new this.ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this.ctor}t=this._pool.pop()}return this.acquireFunction?this.acquireFunction(t,...e):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){e&&!wl.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(e){return e&&e.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}function _l(e){e.length=0}wl.test={disabled:!1};class xl{constructor(e=50,t=50){this._pool=new wl(Array,void 0,_l,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Sl.acquire()}static release(e){return Sl.release(e)}static prune(){Sl.prune()}}const Sl=new xl(100),kl=new Set;function Ml(e,t,i={}){if(wa("esri-deprecation-warnings")){const{moduleName:r}=i;El(e,"Function: "+((r?r+"::":"")+t+"()"),i)}}function Tl(e,t,i={}){if(wa("esri-deprecation-warnings")){const{moduleName:r}=i;El(e,"Property: "+((r?r+"::":"")+t),i)}}function El(e,t,i={}){if(wa("esri-deprecation-warnings")){const{replacement:r,version:n,see:o,warnOnce:s}=i;let a=t;r&&(a+=`\n\t Replacement: ${r}`),n&&(a+=`\n\t Version: ${n}`),o&&(a+=`\n\t See ${o} for more details.`),function(e,t,i=!1){i&&kl.has(t)||(i&&kl.add(t),e.warn(` DEPRECATED - ${t}`))}(e,a,s)}}const Il=/\{([^\}]+)\}/g;function Cl(e){return null==e?"":e}function Ol(e,t){return e.replace(Il,"object"==typeof t?(e,i)=>Cl(pl(i,t)):(e,i)=>Cl(t(i)))}function Al(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(e=>t&&-1!==t.indexOf(e)?e:`\\${e}`))}function Pl(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function Rl(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}const Ll={info:0,warn:1,error:2,none:3};class Dl{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,Dl._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=Dl.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=Dl._loggers;return Dl._loggers=e,t},set throttlingDisabled(e){Dl._throttlingDisabled=e}}}static getLogger(e){let t=Dl._loggers[e];return t||(t=new Dl({module:e})),t}_log(e,t,...i){if(this._matchLevel(e)){if("always"!==t&&!Dl._throttlingDisabled){const r=this._argsToKey(i),n=this._loggedMessages[e].get(r);if("once"===t&&null!=n||"oncePerTick"===t&&n&&n>=Dl._tickCounter)return;this._loggedMessages[e].set(r,Dl._tickCounter),Dl._scheduleTickCounterIncrement()}for(const t of vl.log.interceptors)if(t(e,this.module,...i))return;this._inheritedWriter()(e,this.module,...i)}}_parentWithMember(e,t){let i=this;for(;_a(i);){const t=i[e];if(_a(t))return t;i=i.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...i){console[e](`[${t}]`,...i)}_matchLevel(e){const t=vl.log.level?vl.log.level:"warn";return Ll[this._parentWithMember("level",t)]<=Ll[e]}_argsToKey(...e){return Pl(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){Dl._tickCounterScheduled||(Dl._tickCounterScheduled=!0,Promise.resolve().then((()=>{Dl._tickCounter++,Dl._tickCounterScheduled=!1})))}}function Nl(e){return Fl((()=>e.forEach((e=>_a(e)&&e.remove()))))}function Fl(e){return{remove:()=>{e&&(e(),e=void 0)}}}function jl(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function $l(e,t,i){return Vl(e,t,i?{policy:i,path:""}:null)}function Vl(e,t,i){return t?Object.keys(t).reduce((function(e,r){let n=null,o="merge";if(i&&(n=i.path?`${i.path}.${r}`:r,o=i.policy(n)),"replace"===o)return e[r]=t[r],e;if(void 0===e[r])return e[r]=ol(t[r]),e;let s=e[r],a=t[r];if(s===a)return e;if(Array.isArray(a)||Array.isArray(e))s=s?Array.isArray(s)?e[r]=s.concat():e[r]=[s]:e[r]=[],a&&(Array.isArray(a)||(a=[a]),a.forEach((e=>{-1===s.indexOf(e)&&s.push(e)})));else if(a&&"object"==typeof a)if(i){const t=i.path;i.path=n,e[r]=Vl(s,a,i),i.path=t}else e[r]=Vl(s,a,null);else e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[r]=a);return e}),e||{}):e}function zl(e){return Array.isArray(e)?e:e.split(".")}function Ul(e){return e.indexOf(",")>-1?e.split(",").map((e=>e.trim())):[e.trim()]}function ql(e,t,i,r){const n=function(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...Ul(i));return t}return Ul(e)}(t);if(1!==n.length){const t=n.map((t=>r(e,t,i)));return Nl(t)}return r(e,n[0],i)}function Gl(e){let t=!1;return()=>{t||(t=!0,e())}}function Bl(e,t){const i="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(i,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.getItemAt(e)}const r=jl(t);return function(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}(r,i)?r.get(i):t[i]}function Wl(e,t,i){if(null==e)return e;const r=Bl(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:Wl(r,t,i+1)}function Hl(e,t,i=0){return"string"==typeof t&&-1===t.indexOf(".")?Bl(t,e):Wl(e,zl(t),i)}function Jl(e,t){return Hl(e,t)}function Yl(e,t){return void 0!==Hl(t,e)}var Zl;Dl._loggers={},Dl._tickCounter=0,Dl._tickCounterScheduled=!1,Dl._throttlingDisabled=!1,function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"}(Zl||(Zl={}));class Kl{constructor(e){this.autoDestroy=!1,this.properties=e}}function Xl(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const i=Object.create(t.properties),r=t.autoDestroy;for(const e in i)i[e]=ol(i[e]);t=new Kl(i),t.autoDestroy=r,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Kl({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Ql(e,t){const i=function(e){return Xl(e).properties}(e);let r=i[t];return r||(r=i[t]={}),r}const ec=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function tc(e){return ec.test(e)?"replace":"merge"}var ic;!function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"}(ic||(ic={}));const rc=ic.USER+1;function nc(e){switch(e){case"defaults":return ic.DEFAULTS;case"service":return ic.SERVICE;case"portal-item":return ic.PORTAL_ITEM;case"web-scene":return ic.WEB_SCENE;case"web-map":return ic.WEB_MAP;case"user":return ic.USER}}function oc(e){switch(e){case ic.DEFAULTS:return"defaults";case ic.SERVICE:return"service";case ic.PORTAL_ITEM:return"portal-item";case ic.WEB_SCENE:return"web-scene";case ic.WEB_MAP:return"web-map";case ic.USER:return"user"}}function sc(e){return oc(e)}var ac;!function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"}(ac||(ac={}));let lc,cc=[];const uc=Dl.getLogger("esri.core.Accessor");function hc(e){void 0!==lc&&lc.onObservableAccessed(e)}let dc=!1,pc=!1;function fc(e,t,i){if(dc)return mc(e,t,i);gc(e);const r=t.call(i);return yc(),r}function mc(e,t,i){const r=dc;dc=!0,gc(e);let n=null;try{n=t.call(i)}catch(e){pc&&uc.error(e)}return yc(),dc=r,n}function gc(e){lc=e,cc.push(e)}function yc(){const e=cc.pop();lc=cc.length>0?cc[cc.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function vc(e,t){if(t.flags&ac.DepTrackingInitialized)return;const i=pc;pc=!1,t.flags&ac.AutoTracked?mc(t,t.metadata.get,e):wc(e,t),pc=i}const bc=[];function wc(e,t){t.flags&ac.ExplicitlyTracking||(t.flags|=ac.ExplicitlyTracking,mc(t,(()=>{const i=t.metadata.dependsOn||bc;for(const t of i)if("string"==typeof t&&-1===t.indexOf("."))_c(e,t,!1);else{const i=zl(t);for(let t=0,r=e;t<i.length&&null!=r&&"object"==typeof r;++t)r=_c(r,i[t],t!==i.length-1)}})),t.flags&=~ac.ExplicitlyTracking)}function _c(e,t,i){const r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const n=jl(e),o=null==n?void 0:n.properties.get(r);return o&&(hc(o),vc(e,o)),i?e[r]:void 0}class xc{constructor(e,t){this._observers=e,this._observer=t}remove(){Ka(this._observers,this._observer)}}class Sc{constructor(e,t,i){this.properties=e,this.propertyName=t,this.metadata=i,this._observers=null,this._accessed=null,this._handles=null,this.flags=ac.Dirty|(i.nonNullable?ac.NonNullable:0)|(i.hasOwnProperty("value")?ac.HasDefaultValue:0)|(void 0===i.get?ac.DepTrackingInitialized:0)|(void 0===i.dependsOn?ac.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){hc(this);const e=this.properties.store,t=this.propertyName,i=this.flags,r=e.get(t);if(i&ac.Computing)return r;if(~i&ac.Dirty&&e.has(t))return r;this.flags|=ac.Computing;const n=this.properties.host;let o;i&ac.AutoTracked?o=fc(this,this.metadata.get,n):(wc(n,this),o=this.metadata.get.call(n)),e.set(t,o,ic.COMPUTED);const s=e.get(t);return s===r?this.flags&=~ac.Dirty:function(e,t){fc(void 0,e,t)}(this.commit,this),this.flags&=~ac.Computing,s}onObservableAccessed(e){e!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=ac.DepTrackingInitialized;const e=this._accessed;if(null===e)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let i=0;i<e.length;++i)t.push(e[i].observe(this));e.length=0}observe(e){return null===this._observers&&(this._observers=[]),this._observers.includes(e)||this._observers.push(e),new xc(this._observers,e)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&ac.Overriden&&(this.flags|=ac.Dirty);const e=this._observers;if(null!==e)for(let t=0;t<e.length;++t)e[t].onInvalidated()}commit(){this.flags&=~ac.Dirty,this.onCommitted()}onCommitted(){if(null===this._observers)return;const e=this._observers.slice();for(let t=0;t<e.length;++t)e[t].onCommitted()}_clearObservationHandles(){const e=this._handles;if(null!==e){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}}class kc{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const t=new kc;return this._values.forEach(((i,r)=>{e&&e.has(r)||t.set(r,ol(i))})),t}get(e){return this._values.get(e)}originOf(){return ic.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}function Mc(e,t,i){return void 0!==e}function Tc(e,t,i,r){return!(void 0===e||null==i&&e.flags&ac.NonNullable&&(r.lifecycle,Zl.INITIALIZING,1))}function Ec(e){return e&&"function"==typeof e.destroy}Dl.getLogger("esri.core.accessorSupport.Properties");class Ic{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Zl.INITIALIZING,this.store=new kc,this._origin=ic.USER;const t=this.host.constructor.__accessorMetadata__,i=t.properties;for(const e in i){const t=new Sc(this,e,i[e]);this.properties.set(e,t)}this.metadatas=i,this._autoDestroy=t.autoDestroy}initialize(){this.lifecycle=Zl.CONSTRUCTING}constructed(){this.lifecycle=Zl.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[e,t]of this.properties){const i=this.internalGet(e);i&&Ec(i)&&(i.destroy(),~t.flags&ac.NonNullable&&this._internalSet(t,null)),t.destroy()}else for(const[e,t]of this.properties)t.destroy()}get initialized(){return this.lifecycle!==Zl.INITIALIZING}get(e){const t=this.properties.get(e);if(t.metadata.get)return t.getComputed();hc(t);const i=this.store;return i.has(e)?i.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.properties.get(e);if(void 0!==t&&t.flags&ac.HasDefaultValue)return"defaults"}return oc(t)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const t=this.properties.get(e);if(Mc(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const i=this.properties.get(e);Mc(i)&&this._internalSet(i,t)}getDependsInfo(e,t,i){const r=this.properties.get(t);if(!Mc(r))return"";const n=new Set,o=fc({onObservableAccessed:e=>n.add(e),onTrackingEnd:()=>{}},(()=>{var t;return null==(t=r.metadata.get)?void 0:t.call(e)}));let s=`${i}${e.declaredClass.split(".").pop()}.${t}: ${o}\n`;if(0===n.size)return s;i+="  ";for(const e of n){if(!(e instanceof Sc))continue;const t=e.properties.host,r=e.propertyName,n=jl(t);s+=n?n.getDependsInfo(t,r,i):`${i}${r}: undefined\n`}return s}setAtOrigin(e,t,i){const r=this.properties.get(e);if(Mc(r))return this._setAtOrigin(r,t,i)}isOverridden(e){const t=this.properties.get(e);return void 0!==t&&!!(t.flags&ac.Overriden)}clearOverride(e){const t=this.properties.get(e);void 0!==t&&t.flags&ac.Overriden&&(t.flags&=~ac.Overriden,t.notifyChange())}override(e,t){const i=this.properties.get(e);if(!Tc(i,0,t,this))return;const r=i.metadata.cast;if(r){const e=this._cast(r,t),{valid:i,value:n}=e;if(Cc.release(e),!i)return;t=n}i.flags|=ac.Overriden,this._internalSet(i,t)}set(e,t){const i=this.properties.get(e);if(!Tc(i,0,t,this))return;const r=i.metadata.cast;if(r){const e=this._cast(r,t),{valid:i,value:n}=e;if(Cc.release(e),!i)return;t=n}const n=i.metadata.set;n?n.call(this.host,t):this._internalSet(i,t)}setDefaultOrigin(e){this._origin=nc(e)}getDefaultOrigin(){return oc(this._origin)}notifyChange(e){const t=this.properties.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.properties.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.properties.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const i=this.lifecycle!==Zl.INITIALIZING?this._origin:ic.DEFAULTS;this._setAtOrigin(e,t,i)}_setAtOrigin(e,t,i){const r=this.store,n=e.propertyName;r.has(n,i)&&hl(t,r.get(n))&&~e.flags&ac.Overriden&&i===r.originOf(n)||(e.invalidate(),r.set(n,t,i),e.commit(),vc(this.host,e))}_cast(e,t){const i=Cc.acquire();return i.valid=!0,i.value=t,e&&(i.value=e.call(this.host,t,i)),i}}const Cc=new wl(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});class Oc{constructor(e,t,i){this.name=e,this.details=i,this.message=void 0,this instanceof Oc&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,i){if(""===i)return"$";const r=pl(i,t),n=null==r?"":r;if(void 0===n)throw new Error(`could not find key "${i}" in template`);return n.toString()}))}(t,i)||"")}toString(){return"["+this.name+"]: "+this.message}}class Ac extends Oc{constructor(e,t,i){if(super(e,t,i),!(this instanceof Ac))return new Ac(e,t,i)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return ol(t)}catch(e){return"[object]"}})))}}catch(e){throw Dl.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Ac(e.name,e.message,e.details)}}function Pc(e,t,i){if(e&&t)if("object"==typeof t)for(const i of Object.getOwnPropertyNames(t))Pc(e,i,t[i]);else{if(-1!==t.indexOf(".")){const r=t.split("."),n=r.splice(r.length-1,1)[0];return void Pc(Jl(e,r),n,i)}const r=e.__accessor__;null!=r&&function(e,t){if(wa("esri-unknown-property-errors")&&!function(e,t){return null!=t.metadatas[e]}(e,t))throw new Ac("set:unknown-property",function(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}(e,t))}(t,r),e[t]=i}}Ac.prototype.type="error",Dl.getLogger("esri.core.accessorSupport.set");const Rc=[];function Lc(e){Rc.push(e),1===Rc.length&&queueMicrotask((()=>{const e=Rc.slice();Rc.length=0;for(const t of e)t()}))}class Dc{constructor(e,t=29){this.name=e,this._counter=0,this._items=new Array(t)}record(e){this._items[++this._counter%this._items.length]=e}get median(){return this._items.slice().sort(((e,t)=>e-t))[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((e,t)=>e+t),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var Nc;!function(e){const t=(e,t,i,r)=>{let n=t,o=t;const s=i>>>1,a=e[n-1];for(;o<=s;){o=n<<1,o<i&&r(e[o-1],e[o])<0&&++o;const t=e[o-1];if(r(t,a)<=0)break;e[n-1]=t,n=o}e[n-1]=a},i=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,r,n,o){void 0===r&&(r=0),void 0===n&&(n=e.length),void 0===o&&(o=i);for(let i=n>>>1;i>r;i--)t(e,i,n,o);const s=r+1;for(let i=n-1;i>r;i--){const n=e[r];e[r]=e[i],e[i]=n,t(e,s,i,o)}},e.iterableSort=function*(e,r,n,o){void 0===r&&(r=0),void 0===n&&(n=e.length),void 0===o&&(o=i);for(let i=n>>>1;i>r;i--)t(e,i,n,o),yield;const s=r+1;for(let i=n-1;i>r;i--){const n=e[r];e[r]=e[i],e[i]=n,t(e,s,i,o),yield}}}(Nc||(Nc={}));const Fc=Nc;class jc{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Wa,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>$c(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const t=new Array;for(let i=0;i<this._length;i++){const r=this.data[i];e(r)&&t.push(r)}return t}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let i=0;i<t;i++)this.data[this._length++]=e[i]}fill(e,t){for(let i=0;i<t;i++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,$c(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=Ja(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){const t=Ya(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,i){this.length=function(e,t,i=e.length,r=t.length,n,o){if(0===r||0===i)return i;Za.clear();for(let e=0;e<r;++e)Za.add(t[e]);n=n||Ha;const s=Math.max(0,n.last-10);for(let t=s;t<i;++t)if(Za.has(e[t])&&(o&&o.push(e[t]),Za.delete(e[t]),e[t]=e[i-1],--i,--t,0===Za.size||0===i))return Za.clear(),i;for(let t=0;t<s;++t)if(Za.has(e[t])&&(o&&o.push(e[t]),Za.delete(e[t]),e[t]=e[i-1],--i,--t,0===Za.size||0===i))return Za.clear(),i;return Za.clear(),i}(this.data,e,this.length,t,this._hint,i),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){e>=this.length||t>=this.length||e===t||([this.data[e],this.data[t]]=[this.data[t],this.data[e]])}sort(e){Fc.sort(this.data,0,this.length,e)}iterableSort(e){return Fc.iterableSort(this.data,0,this.length,e)}some(e,t){for(let i=0;i<this.length;++i)if(e.call(t,this.data[i],i,this.data))return!0;return!1}filterInPlace(e,t){let i=0;for(let r=0;r<this._length;++r){const n=this.data[r];e.call(t,n,r,this.data)&&(this.data[r]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let e=i;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=i,this._shrink(),this}forAll(e,t){const i=this.length,r=this.data;for(let n=0;n<i;++n)e.call(t,r[n],n,r)}forEach(e,t){for(let i=0;i<this.length;++i)e.call(t,this.data[i],i,this.data)}map(e,t){const i=new Array(this.length);for(let r=0;r<this.length;++r)i[r]=e.call(t,this.data[r],r,this.data);return i}reduce(e,t){let i=t;for(let t=0;t<this.length;++t)i=e(i,this.data[t],t,this.data);return i}has(e){const t=this.length,i=this.data;for(let r=0;r<t;++r)if(i[r]===e)return!0;return!1}}function $c(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}const Vc=function(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}(globalThis);function zc(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function Uc(e,t,i){if(!zc(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const t of r)e.addEventListener(t,i);return{remove(){for(const t of r)e.removeEventListener(t,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function qc(e,t,i){if(!zc(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=Uc(e,t,(t=>{r.remove(),i.call(e,t)}));return{remove(){r.remove()}}}const Gc={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Bc({key:e}){return Gc[e]||e}function Wc(e){return Promise.all(e)}function Hc(e){return new Promise(((t,i)=>{try{e(t,i)}catch(e){Promise.resolve().then((()=>i(e)))}}))}function Jc(e="Aborted"){return new Ac("AbortError",e)}function Yc(e,t="Aborted"){if(Kc(e))throw Jc(t)}function Zc(e){return _a(e)?"aborted"in e?e:e.signal:e}function Kc(e){const t=Zc(e);return _a(t)&&t.aborted}function Xc(e){if(ru(e))throw e}function Qc(e){if(!ru(e))throw e}function eu(e,t){const i=Zc(e);if(!xa(i)){if(!i.aborted)return qc(i,"abort",(()=>t()));t()}}function tu(e,t){const i=Zc(e);if(!xa(i))return Yc(i),qc(i,"abort",(()=>t(Jc())))}function iu(e,t){return xa(Zc(t))?e:new Promise(((i,r)=>{let n=eu(t,(()=>r(Jc())));const o=()=>n=Aa(n);e.then(o,o),e.then(i,r)}))}function ru(e){return e&&"AbortError"===e.name}function nu(e){return e.catch((e=>{if(!ru(e))throw e}))}function ou(){let e=null;const t=new Promise(((t,i)=>{e={promise:void 0,resolve:t,reject:i}}));return e.promise=t,e}function su(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return su(t.map((t=>e[t]))).then((e=>{const i={};return t.forEach(((t,r)=>i[t]=e[r])),i}))}const t=e;return Hc((e=>{const i=[];let r=t.length;0===r&&e(i),t.forEach((t=>{const n={promise:t||Promise.resolve(t)};i.push(n),n.promise.then((e=>{n.value=e})).catch((e=>{n.error=e})).then((()=>{--r,0===r&&e(i)}))}))}))}function au(e){return su(e).then((e=>e.filter((e=>!!e.value)).map((e=>e.value))))}function lu(e){return Promise.reject(e)}function cu(e){return Promise.resolve(e)}function uu(e,t,i){const r=new AbortController;return eu(i,(()=>r.abort())),new Promise(((i,n)=>{let o=setTimeout((()=>{o=0,i(t)}),e);eu(r,(()=>{o&&(clearTimeout(o),n(Jc()))}))}))}function hu(e){return e&&"function"==typeof e.then}function du(e){return hu(e)?e:Promise.resolve(e)}function pu(e,t=-1){let i,r,n,o,s=null;const a=(...l)=>{if(i){r=l,o&&o.reject(Jc()),o=ou();const e=o.promise;if(s){const e=s;s=null,e.abort()}return e}if(n=o||ou(),o=null,t>0){const r=new AbortController;i=du(e(...l,r.signal));const n=i;uu(t).then((()=>{i===n&&(o?r.abort():s=r)}))}else i=1,i=du(e(...l));const c=()=>{const e=r;r=n=i=s=null,null!=e&&a(...e)},u=i,h=n;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function fu(){let e,t;const i=new Promise(((i,r)=>{e=i,t=r})),r=t=>{e(t)};return r.resolve=t=>e(t),r.reject=e=>t(e),r.timeout=(e,t)=>Vc.setTimeout((()=>r.reject(t)),e),r.promise=i,r}function mu(e,t){let i,r=new AbortController;const n=e(r.signal);let o={promise:n,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const s=()=>{o&&(o.finished=!0,o=null),_a(i)&&(i.remove(),i=null),r=null};return n.then(s,s),i=eu(t,(()=>{_a(o)&&o.abort()})),o}function gu(e){return Promise.resolve().then((()=>{Yc(e)}))}function yu(e){return e}class vu{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class bu{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let wu=0;const _u={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},xu=["prepare","preRender","render","postRender","update","finish"],Su=[],ku=new jc;class Mu{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const Tu={frameTasks:ku,willDispatch:!1,clearFrameTasks:function(e=!1){ku.forAll((e=>{e.removed=!0})),e&&Pu()},dispatch:Ru,executeFrameTasks:function(e){const t=e-wu;wu=e;const i=1e3/60,r=Math.max(0,t-i);for(let n=0;n<xu.length;n++){const o=performance.now(),s=xu[n];ku.forAll((o=>{var a;o.paused||o.removed||(0===n&&o.ticks++,o.phases[s]&&(_u.time=e,_u.deltaTime=0===o.ticks?0:t,_u.elapsedFrameTime=performance.now()-e,_u.frameDuration=i-r,null==(a=o.phases[s])||a.call(o,_u)))})),Du[n].record(performance.now()-o)}Pu(),Nu.record(performance.now()-e)}};function Eu(e){const t=new bu(e);return Su.push(t),Tu.willDispatch||(Tu.willDispatch=!0,Lc(Ru)),t}function Iu(e){const t=new vu(e);return ku.push(t),null==Cu&&(wu=performance.now(),Cu=requestAnimationFrame(Ou)),new Mu(t)}let Cu=null;function Ou(){const e=performance.now();Cu=null,Cu=ku.length>0?requestAnimationFrame(Ou):null,Tu.executeFrameTasks(e)}const Au=new jc;function Pu(){ku.forAll((e=>{e.removed&&Au.push(e)})),ku.removeUnorderedMany(Au.data,Au.length),Au.clear()}function Ru(){for(;Su.length;){const e=Su.shift();e.isActive&&e.callback()}Tu.willDispatch=!1}function Lu(e=1,t){const i=fu(),r=()=>{Kc(t)?i.reject(Jc()):0===e?i():(--e,Lc((()=>r())))};return r(),i.promise}const Du=xu.map((e=>new Dc(e))),Nu=new Dc("total");let Fu=0;function ju(){return++Fu}class $u{constructor(e){this._notify=e,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}onObservableAccessed(e){this._accessed.includes(e)||this._accessed.push(e)}onTrackingEnd(){const e=this._handles,t=this._accessed;for(let i=0;i<t.length;++i)e.push(t[i].observe(this));t.length=0}clear(){const e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}let Vu=!1;const zu=[];function Uu(e,t){let i=new $u((function o(){if(!i||n)return;if(Vu)return void Bu(o);const s=r;i.clear(),Vu=!0,n=!0,r=fc(i,e),n=!1,Vu=!1,t(r,s),Wu()})),r=null,n=!1;return n=!0,r=fc(i,e),n=!1,{remove:function(){i&&(i.destroy(),i=null,r=null)}}}function qu(e,t){let i=new $u((function(){t(r,n)})),r=null;function n(){return i?(i.clear(),r=fc(i,e),r):null}return n(),{remove:function(){i&&(i.destroy(),i=null),r=null}}}function Gu(e){let t=new $u((function r(){t&&!i&&(Vu?Bu(r):(t.clear(),Vu=!0,i=!0,fc(t,e),i=!1,Vu=!1,Wu()))})),i=!1;return i=!0,fc(t,e),i=!1,{remove:function(){t&&(t.destroy(),t=null)}}}function Bu(e){zu.includes(e)||zu.unshift(e)}function Wu(){for(;zu.length;)zu.pop()()}var Hu;!function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"}(Hu||(Hu={}));class Ju{constructor(){this.uid=ju(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,i,r,n){return this.pool.acquire(Hu.Untracked,e,t,i,r,n,hl)}static acquireTracked(e,t,i,r){return this.pool.acquire(Hu.Tracked,e,t,i,null,null,r)}notify(e,t){this.type===Hu.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t)}acquire(e,t,i,r,n,o,s){this.uid=ju(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=i,this.getValue=r,this.target=n,this.path=o,this.equals=s}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=ju(),this.removed=!0}}Ju.pool=new class extends wl{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(this._set,null)}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}(Ju);const Yu=new xl,Zu=new Set;let Ku;function Xu(e){Zu.delete(e),Zu.add(e),Ku||(Ku=Eu(eh))}function Qu(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function eh(){let e=10;for(;Ku&&e--;){Ku=null;const e=th(),t=Yu.acquire();for(const i of e){const e=i.uid;Qu(i),e===i.uid&&i.removed&&t.push(i)}for(const e of Zu)e.removed&&(t.push(e),Zu.delete(e));for(const e of t)Ju.pool.release(e);Yu.release(t),Yu.release(e),ih.forEach((e=>e()))}}function th(){const e=Yu.acquire();e.length=Zu.size;let t=0;for(const i of Zu)e[t]=i,++t;return Zu.clear(),e}const ih=new Set;function rh(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?function(e,t,i){const r=ql(e,t,i,((e,t,i)=>{let n=!1;return Uu((()=>Hl(e,t)),((o,s)=>{e.__accessor__.destroyed?r.remove():n||(n=!0,hl(s,o)||i.call(e,o,s,t,e),n=!1)}))}));return r}(e,t,i):function(e,t,i){let r=ql(e,t,i,((e,t,i)=>{let n,o,s=qu((()=>Hl(e,t)),((s,a)=>{e.__accessor__.destroyed||n&&n.uid!==o?r.remove():(n||(n=Ju.acquireUntracked(s,i,a,e,t),o=n.uid),Xu(n))}));return{remove:Gl((()=>{s.remove(),n&&(n.uid!==o||n.removed||(n.removed=!0,Xu(n)),n=null),r=s=null}))}}));return r}(e,t,i)}function nh(e,t,i=!1,r=hl){return i?function(e,t,i){let r=!1;return Uu(e,((e,n)=>{r||(r=!0,i(n,e)||t(e,n),r=!1)}))}(e,t,r):function(e,t,i){let r,n,o=qu(e,((e,s)=>{r&&r.uid!==n?o.remove():(r||(r=Ju.acquireTracked(e,t,s,i),n=r.uid),Xu(r))}));return{remove:Gl((()=>{o.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,Xu(r)),r=null),o=null}))}}(e,t,r)}function oh(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function sh(e,t,i){const r=e.get(t);if(void 0!==r)return r;const n=i();return e.set(t,n),n}const ah=Dl.getLogger("esri.core.Accessor");function lh(e){return null==e?e:new Date(e)}function ch(e){return null==e?e:!!e}function uh(e){return null==e?e:e.toString()}function hh(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function dh(e){return null==e?e:Math.round(parseFloat(e))}function ph(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function fh(e,t){return null!=t&&e&&!(t instanceof e)}function mh(e){return e&&"isCollection"in e}function gh(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function yh(e,t){return!!ph(t)&&(ah.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+bh(e)+"'"),!0)}function vh(e,t){return null==t?t:mh(e)?function(e,t){if(!t||!t.constructor||!mh(t.constructor))return yh(e,t)?t:new e(t);const i=gh(e.prototype.itemType),r=gh(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(yh(e,t),t):new e(t):t}(e,t):fh(e,t)?yh(e,t)?t:new e(t):t}function bh(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const wh=new WeakMap;function _h(e){switch(e){case Number:return hh;case Ch:return dh;case Boolean:return ch;case String:return uh;case Date:return lh;default:return sh(wh,e,(()=>vh.bind(null,e)))}}function xh(e,t){const i=_h(e);return 1===arguments.length?i:i(t)}function Sh(e,t,i){return 1===arguments.length?Sh.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,i))):[e(t,i)]:t}function kh(e,t,i){return 0!==t&&Array.isArray(i)?i.map((i=>kh(e,t-1,i))):e(i)}function Mh(e,t,i){if(2===arguments.length)return Mh.bind(null,e,t);if(!i)return i;let r=t,n=i=kh(e,t,i);for(;r>0&&Array.isArray(n);)r--,n=n[0];if(void 0!==n)for(let e=0;e<r;e++)i=[i];return i}function Th(e){return!!Array.isArray(e)&&!e.some((t=>{const i=typeof t;return!("string"===i||"number"===i||"function"===i&&e.length>1)}))}function Eh(e,t){if(2===arguments.length)return Eh(e).call(null,t);const i=new Set,r=e.filter((e=>"function"!=typeof e)),n=e.filter((e=>"function"==typeof e));for(const t of e)"string"!=typeof t&&"number"!=typeof t||i.add(t);let o=null,s=null;return(e,t)=>{if(null==e)return e;const a=typeof e,l="string"===a||"number"===a;return l&&(i.has(e)||n.some((e=>"string"===a&&e===String||"number"===a&&e===Number)))||"object"===a&&n.some((t=>!fh(e,t)))?e:(l&&r.length?(o||(o=r.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),ah.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${o}`)):"object"==typeof e&&n.length?(s||(s=n.map((e=>bh(e))).join(", ")),ah.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${s}`)):ah.error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function Ih(e,t){if(2===arguments.length)return Ih(e).call(null,t);const i={},r=[],n=[];for(const t in e.typeMap){const o=e.typeMap[t];i[t]=xh(o),r.push(bh(o)),n.push(t)}const o=()=>`'${r.join("', '")}'`,s=()=>`'${n.join("', '")}'`,a="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!fh(e.base,t))return t;if(null==t)return t;const r=a(t)||e.defaultKeyValue,n=i[r];if(!n)return ah.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!fh(e.typeMap[r],t))return t;if("string"==typeof e.key&&!ph(t)){const i={};for(const r in t)r!==e.key&&(i[r]=t[r]);return n(i)}return n(t)}}class Ch{}const Oh={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Ah(e){switch(e.type){case"native":return xh(e.value);case"array":return Sh(Ah(e.value));case"one-of":return function(e){let t=null;return(i,r)=>Rh(i,e)?i:(null==t&&(t=Ph(e)),ah.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}(e);default:return null}}function Ph(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ch:return"integer";case Date:return"date";default:return bh(e.value)}case"array":return`array of ${Ph(e.value)}`;case"one-of":{const t=e.values.map((e=>Ph(e)));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function Rh(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ch:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!Rh(e,t.value)));case"one-of":return t.values.some((t=>Rh(e,t)))}}function Lh(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),n=Ql(t,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in e&&Dl.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=r.value)),null!=e.readOnly&&(n.readOnly=e.readOnly);const o=e.aliasOf;if(o){const e="string"==typeof o?o:o.source,t="string"==typeof o?null:!0===o.overridable;let r;n.dependsOn=[e],n.get=function(){let t=Jl(this,e);if("function"==typeof t){r||(r=e.split(".").slice(0,-1).join("."));const i=Jl(this,r);i&&(t=t.bind(i))}return t},n.readOnly||(n.set=t?function(e){void 0!==e?this._override(i,e):this._clearOverride(i)}:function(t){Pc(this,e,t)})}const s=e.type,a=e.types;n.cast||(s?n.cast=function(e){let t=0,i=e;if(function(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}(e))return Ah(e);for(;Array.isArray(i)&&1===i.length&&"string"!=typeof i[0]&&"number"!=typeof i[0];)i=i[0],t++;const r=i;if(Th(r))return 0===t?Eh(r):Mh(Eh(r),t);if(1===t)return function(e,t){return 1===arguments.length?Sh(xh.bind(null,e)):Sh(xh.bind(null,e),t)}(r);if(t>1)return function(e,t,i){return 2===arguments.length?Mh(xh.bind(null,e),t):Mh(xh.bind(null,e),t,i)}(r,t);const n=e;return n.from?n.from:xh(n)}(s):a&&(Array.isArray(a)?n.cast=Sh(Ih(a[0])):n.cast=Ih(a))),e.range&&(n.cast=Nh(n.cast,e.range)),function(e,t){$l(e,t,tc)}(n,e)}}function Dh(e,t,i){const r=Ql(e,i);r.json||(r.json={});let n=r.json;return void 0!==t&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Nh(e,t){return i=>{let r=+e(i);return null!=t.step&&(r=Math.round(r/t.step)*t.step),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}class Fh extends Oc{constructor(e,t,i){if(super(e,t,i),!(this instanceof Fh))return new Fh(e,t,i)}}function jh(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}Fh.prototype.type="warning";const $h=Dl.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Vh(e,t,i){var r,n;e&&(!i&&!t.read||null!=(r=t.read)&&r.reader||!1===(null==(n=t.read)?void 0:n.enabled)||function(e){return"types"in e?Hh(e.types):Wh(e.type)}(e)&&fl("read.reader",zh(e),t))}function zh(e){var t;const i=null!=(t=e.ndimArray)?t:0;if(i>1)return function(e){var t;const i=Uh(e),r=qh.bind(null,i),n=null!=(t=e.ndimArray)?t:0;return(e,t,i)=>{if(null==e)return e;e=r(e,i,n);let o=n,s=e;for(;o>0&&Array.isArray(s);)o--,s=s[0];if(void 0!==s)for(let t=0;t<o;t++)e=[e];return e}}(e);if(1===i)return Gh(e);if("type"in e&&Bh(e.type)){var r,n;const t=null==(r=e.type.prototype)||null==(n=r.itemType)?void 0:n.Type,i=Gh("function"==typeof t?{type:t}:{types:t});return(t,r,n)=>{const o=i(t,r,n);return o?new e.type(o):o}}return Uh(e)}function Uh(e){return"type"in e?function(e){return e.prototype.read?(t,i,r)=>{if(null==t)return t;const n=typeof t;if("object"!==n)return void $h.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}(e.type):function(e){var t;let i=null;const r=null!=(t=e.errorContext)?t:"type";return(t,n,o)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void $h.error(`Expected JSON value of type 'object' to deserialize, but got '${s}'`);i||(i=function(e){const t={};for(const n in e.typeMap){var i,r;const o=e.typeMap[n],s=Xl(o.prototype);if("function"==typeof e.key)continue;const a=s.properties[e.key];if(!a)continue;null!=(i=a.json)&&i.type&&Array.isArray(a.json.type)&&1===a.json.type.length&&"string"==typeof a.json.type[0]&&(t[a.json.type[0]]=o);const l=null==(r=a.json)?void 0:r.write;if(!l||!l.writer){t[n]=o;continue}const c=l.target,u="string"==typeof c?c:e.key,h={};l.writer(n,h,u),h[u]&&(t[h[u]]=o)}return t}(e));const a=e.key;if("string"!=typeof a)return;const l=t[a],c=l?i[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!c){const e=`Type '${l||"unknown"}' is not supported`;return o&&o.messages&&t&&o.messages.push(new Fh(`${r}:unsupported`,e,{definition:t,context:o})),void $h.error(e)}const u=new c;return u.read(t,o),u}}(e.types)}function qh(e,t,i,r){return 0!==r&&Array.isArray(t)?t.map((t=>qh(e,t,i,r-1))):e(t,void 0,i)}function Gh(e){const t=Uh(e);return(e,i,r)=>{if(null==e)return e;if(Array.isArray(e)){const i=[];for(const n of e){const e=t(n,void 0,r);void 0!==e&&i.push(e)}return i}const n=t(e,void 0,r);return void 0!==n?[n]:void 0}}function Bh(e){if(!jh(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?Wh(t.Type):Hh(t.Type))}function Wh(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Bh(e))}function Hh(e){for(const t in e.typeMap)if(!Wh(e.typeMap[t]))return!1;return!0}function Jh(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function Yh(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function Zh(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}const Kh=Dl.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function Xh(e,t){var i;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const r=null!=(i=null==e?void 0:e.ndimArray)?i:0;e&&(1===r||"type"in e&&jh(e.type))?t.write.writer=rd:r>1?t.write.writer=function(e){return function(t,i,r,n){let o;if(null===t)o=null;else{o=nd(t,n,e);let i=e,r=o;for(;i>0&&Array.isArray(r);)i--,r=r[0];if(void 0!==r)for(let e=0;e<i;e++)o=[o]}fl(r,o,i)}}(r):t.types?Array.isArray(t.types)?t.write.writer=function(e){return(t,i,r,n)=>t&&Array.isArray(t)?ed(t.filter((t=>Qh(t,e,n))),i,r,n):ed(t,i,r,n)}(t.types[0]):t.write.writer=function(e){return(t,i,r,n)=>t?Qh(t,e,n)?ed(t,i,r,n):void 0:ed(t,i,r,n)}(t.types):t.write.writer=ed}function Qh(e,t,i){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(null!=i&&i.messages){var r,n;const o=null!=(r=t.errorContext)?r:"type",s=`Values of type '${null!=(n="function"!=typeof t.key?e[t.key]:e.declaredClass)?n:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new Ac(`${o}:unsupported`,s,{definition:e,context:i})),Kh.error(s)}return!1}function ed(e,t,i,r){fl(i,td(e,r),t)}function td(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?id(e):e}function id(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function rd(e,t,i,r){let n;null===e?n=null:e&&"function"==typeof e.map?(n=e.map((e=>td(e,r))),"function"==typeof n.toArray&&(n=n.toArray())):n=[td(e,r)],fl(i,n,t)}function nd(e,t,i){return 0!==i&&Array.isArray(e)?e.map((e=>nd(e,t,i-1))):td(e,t)}function od(e,t){return ad(e,"read",t)}function sd(e,t){return ad(e,"write",t)}function ad(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const n=e.json.origins[i.origin];n&&("any"===t||t in n)&&(r=n)}return r}function ld(e){const t=function(e){return e.json.types?hd(e.json):e.type?ud(e):hd(e)}(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],n=r.types?cd(r):t;Vh(n,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),Xh(n,r)}Vh(t,e.json,!0),Xh(t,e.json)}function cd(e){return e.type?ud(e):hd(e)}function ud(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!Th(i);)i=i[0],t++;return{type:i,ndimArray:t}}function hd(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function dd(e){(function(e){if(e.json||(e.json={}),Yh(e.json),Zh(e.json),Jh(e.json),e.json.origins)for(const t in e.json.origins)Yh(e.json.origins[t]),Zh(e.json.origins[t]),Jh(e.json.origins[t]);return!0})(e)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const e in i)if(t[e]){const r=t[e];i[e].forEach((e=>{t[e]=r})),delete t[e]}}}(e),ld(e))}const pd=new Set,fd=new Set;function md(e){return t=>{t.prototype.declaredClass=e,function(e){const t=Xl(e.prototype).properties,i={};for(const e of Object.getOwnPropertyNames(t)){const r=t[e];dd(r),i[e]={enumerable:!0,configurable:!0,get:gd(e,r),set(t){const i=this.__accessor__;if(void 0!==i){if(!Object.isFrozen(this)){if(i.initialized&&r.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(i.lifecycle===Zl.CONSTRUCTED&&r.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);i.set(e,t)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}}}Object.defineProperties(e.prototype,i)}(t);const i=[],r=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!pd.has(n.initialize)&&(pd.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!fd.has(n.destroy)&&(fd.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);pd.clear(),fd.clear();class o extends t{constructor(...e){if(super(...e),this.constructor===o&&"function"==typeof this.postscript){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=i.length-1;e>=0;e--)i[e].call(this)}}),r.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<r.length;e++)r[e].call(this)}}})}this.postscript(...e)}}}return o.__accessorMetadata__=Xl(t.prototype),o.prototype.declaredClass=e,o}}function gd(e,t){return null==t.get?function(){const t=this.__accessor__.properties.get(e);if(void 0===t)return;hc(t);const i=this.__accessor__.store;return i.has(e)?i.get(e):t.metadata.value}:function(){const t=this.__accessor__.properties.get(e);if(void 0!==t)return t.getComputed()}}function yd(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class vd{constructor(...e){if(this.constructor===vd)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Ic(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:i,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...e){super(...e),this.inherited=null,r&&r.apply(this,e)}}Xl(o.prototype);for(const t in e){const i=e[t];o.prototype[t]="function"==typeof i?function(...e){const r=this.inherited;let o;this.inherited=function(...e){if(n.prototype[t])return n.prototype[t].apply(this,e)};try{o=i.apply(this,e)}catch(e){throw this.inherited=r,e}return this.inherited=r,o}:e[t]}for(const e in t){Lh(yd(t[e]))(o.prototype,e)}return md(i)(o)}postscript(e){const t=this.__accessor__,i=t.ctorArgs||e;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(function(e){for(const t of Zu.values())t.target===e&&(t.removed=!0)}(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Zl.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Jl(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}isInstanceOf(e){return Ml(Dl.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return Pc(this,e,t),this}watch(e,t,i){return rh(this,e,t,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_override(e,t){return this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}class bd{constructor(){this._emitter=new bd.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(e){class t{constructor(e=null){this.target=e,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(e,t){const i=this._listenersMap&&this._listenersMap.get(e);if(!i)return!1;const r=this.target||this;return[...i].forEach((e=>{e.call(r,t)})),i.length>0}on(e,t){if(Array.isArray(e)){return Nl(e.map((e=>this.on(e,t))))}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const i=this._listenersMap.get(e)||[];return i.push(t),this._listenersMap.set(e,i),{remove:()=>{const i=this._listenersMap&&this._listenersMap.get(e)||[],r=i.indexOf(t);r>=0&&i.splice(r,1)}}}once(e,t){const i=this.on(e,(e=>{i.remove(),t.call(null,e)}));return i}hasEventListener(e){const t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let i=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return i=bl([md("esri.core.Evented")],i),i};let i=class extends vd{constructor(){super(...arguments),this._emitter=new bd.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};i=bl([md("esri.core.Evented")],i),e.EventedAccessor=i}(bd||(bd={}));const wd=bd;var _d,xd;function Sd(e){return(t,i)=>{t[i]=e}}!function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"}(_d||(_d={}));class kd{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new xc(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const i=e[t];i.onInvalidated(),i.onCommitted()}}}const Md=new wl(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),Td=()=>{};function Ed(e){return e?e instanceof Nd?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Id(e){if(e&&e.length)return e[0]}function Cd(e,t,i,r){const n=Math.min(e.length-i,t.length-r);let o=0;for(;o<n&&e[i+o]===t[r+o];)o++;return o}function Od(e,t,i,r){t&&t.forEach(((t,n,o)=>{e.push(t),Od(e,i.call(r,t,n,o),i,r)}))}const Ad=new Set,Pd=new Set,Rd=new Set,Ld=new Map;let Dd=0,Nd=xd=class extends wd.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new kd,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Dd++})}static isCollection(e){return null!=e&&e instanceof xd}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof xd?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return hc(this._observable),this._items}set items(e){this._emitBeforeChanges(_d.ADD)||(this._splice(0,this.length,Ed(e)),this._emitAfterChanges(_d.ADD))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,i={removed:!1,callback:t};return e.push(i),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Td,i.removed=!0,e.splice(e.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(hc(this._observable),this._emitBeforeChanges(_d.ADD))return this;const i=this.getNextIndex(null!=t?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(_d.ADD),this}addMany(e,t=this._items.length){if(hc(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(_d.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,Ed(e)),this._emitAfterChanges(_d.ADD),this}at(e){if(hc(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(hc(this._observable),!this.length||this._emitBeforeChanges(_d.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(_d.REMOVE),e}clone(){return hc(this._observable),this._createNewInstance({items:this._items.map(ol)})}concat(...e){hc(this._observable);const t=e.map(Ed);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(hc(this._observable),!this.length||this._emitBeforeChanges(_d.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)e.call(t,i[n],n,i);this._emitAfterChanges(_d.REMOVE)}every(e,t){return hc(this._observable),this._items.every(e,t)}filter(e,t){let i;return hc(this._observable),i=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return hc(this._observable),this._items.find(e,t)}findIndex(e,t){return hc(this._observable),this._items.findIndex(e,t)}flatten(e,t){hc(this._observable);const i=[];return Od(i,this,e,t),new xd(i)}forEach(e,t){return hc(this._observable),this._items.forEach(e,t)}getItemAt(e){return hc(this._observable),this._items[e]}getNextIndex(e){hc(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return hc(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return hc(this._observable),this._items.indexOf(e,t)}join(e=","){return hc(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return hc(this._observable),this._items.lastIndexOf(e,t)}map(e,t){hc(this._observable);const i=this._items.map(e,t);return new xd({items:i})}reorder(e,t=this.length-1){hc(this._observable);const i=this.indexOf(e);if(-1!==i){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(_d.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(_d.MOVE)}return e}}pop(){if(hc(this._observable),!this.length||this._emitBeforeChanges(_d.REMOVE))return;const e=Id(this._splice(this.length-1,1));return this._emitAfterChanges(_d.REMOVE),e}push(...e){return hc(this._observable),this._emitBeforeChanges(_d.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(_d.ADD)),this.length}reduce(e,t){hc(this._observable);const i=this._items;return 2===arguments.length?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){hc(this._observable);const i=this._items;return 2===arguments.length?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return hc(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(hc(this._observable),e<0||e>=this.length||this._emitBeforeChanges(_d.REMOVE))return;const t=Id(this._splice(e,1));return this._emitAfterChanges(_d.REMOVE),t}removeMany(e){if(hc(this._observable),!e||!e.length||this._emitBeforeChanges(_d.REMOVE))return[];const t=e instanceof xd?e.toArray():e,i=this._items,r=[],n=t.length;for(let e=0;e<n;e++){const n=t[e],o=i.indexOf(n);if(o>-1){const n=1+Cd(t,i,e+1,o+1),s=this._splice(o,n);s&&s.length>0&&r.push.apply(r,s),e+=n-1}}return this._emitAfterChanges(_d.REMOVE),r}reverse(){if(hc(this._observable),this._emitBeforeChanges(_d.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(_d.MOVE),this}shift(){if(hc(this._observable),!this.length||this._emitBeforeChanges(_d.REMOVE))return;const e=Id(this._splice(0,1));return this._emitAfterChanges(_d.REMOVE),e}slice(e=0,t=this.length){return hc(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return hc(this._observable),this._items.some(e,t)}sort(e){if(hc(this._observable),!this.length||this._emitBeforeChanges(_d.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(_d.MOVE),this}splice(e,t,...i){hc(this._observable);const r=(t?_d.REMOVE:0)|(i.length?_d.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(r),n}toArray(){return hc(this._observable),this._items.slice()}toJSON(){return hc(this._observable),this.toArray()}toLocaleString(){return hc(this._observable),this._items.toLocaleString()}toString(){return hc(this._observable),this._items.toString()}unshift(...e){return hc(this._observable),!e.length||this._emitBeforeChanges(_d.ADD)||(this._splice(0,0,e),this._emitAfterChanges(_d.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,n=this.itemType;let o,s;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Eu((()=>this._dispatchChange()))),t){if(s=r.splice(e,t),this.hasEventListener("before-remove")){const t=Md.acquire();t.target=this,t.cancellable=!0;for(let i=0,n=s.length;i<n;i++)o=s[i],t.reset(o),this.emit("before-remove",t),t.defaultPrevented&&(s.splice(i,1),r.splice(e,0,o),e+=1,i-=1,n-=1);Md.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=Md.acquire();e.target=this,e.cancellable=!1;const t=s.length;for(let i=0;i<t;i++)e.reset(s[i]),this.emit("after-remove",e);Md.release(e)}}if(i&&i.length){if(n){const e=[];for(const t of i){const i=n.ensureType(t);null==i&&null!=t||e.push(i)}i=e}const t=this.hasEventListener("before-add"),o=this.hasEventListener("after-add"),s=e===this.length;if(t||o){const n=Md.acquire();n.target=this,n.cancellable=!0;const a=Md.acquire();a.target=this,a.cancellable=!1;for(const l of i)t?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(s?r.push(l):r.splice(e++,0,l),this._set("length",r.length),o&&(a.reset(l),this.emit("after-add",a)))):(s?r.push(l):r.splice(e++,0,l),this._set("length",r.length),a.reset(l),this.emit("after-add",a));Md.release(a),Md.release(n)}else{if(s)for(const e of i)r.push(e);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||s&&s.length)&&this._notifyChangeEvent(i,s),s}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Md.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Md.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Md.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Md.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;Ad.clear(),Pd.clear(),Rd.clear();for(const{added:t,removed:i}of e){if(t)if(0===Rd.size&&0===Pd.size)for(const e of t)Ad.add(e);else for(const e of t)Pd.has(e)?(Rd.add(e),Pd.delete(e)):Rd.has(e)||Ad.add(e);if(i)if(0===Rd.size&&0===Ad.size)for(const e of i)Pd.add(e);else for(const e of i)Ad.has(e)?Ad.delete(e):(Rd.delete(e),Pd.add(e))}const i=xl.acquire();Ad.forEach((e=>{i.push(e)}));const r=xl.acquire();Pd.forEach((e=>{r.push(e)}));const n=this._items,o=t.items,s=xl.acquire();if(Rd.forEach((e=>{o.indexOf(e)!==n.indexOf(e)&&s.push(e)})),t.listeners&&(i.length||r.length||s.length)){const e={target:this,added:i,removed:r,moved:s},n=t.listeners.length;for(let i=0;i<n;i++){const r=t.listeners[i];r.removed||r.callback.call(this,e)}}xl.release(i),xl.release(r),xl.release(s)}Ad.clear(),Pd.clear(),Rd.clear()}};Nd.ofType=e=>{if(!e)return xd;if(Ld.has(e))return Ld.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const r=e.typeMap[i].prototype.declaredClass;t?t+=` | ${r}`:t=r}let i=class extends xd{};return bl([Sd({Type:e,ensureType:"function"==typeof e?xh(e):Ih(e)})],i.prototype,"itemType",void 0),i=bl([md(`esri.core.Collection<${t}>`)],i),Ld.set(e,i),i},bl([Lh()],Nd.prototype,"length",void 0),bl([Lh()],Nd.prototype,"items",null),Nd=xd=bl([md("esri.core.Collection")],Nd);const Fd=Nd;function jd(e,t,i=Fd){return t||(t=new i),t===e||(t.removeAll(),function(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}(e)?t.addMany(e):e&&t.add(e)),t}function $d(e){return e}class Vd{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const t=new Vd;return this._values.forEach(((i,r)=>{e&&e.has(r)||t.set(r,ol(i.value),i.origin)})),t}get(e,t){t=this._normalizeOrigin(t);const i=this._values.get(e);return null==t||(null==i?void 0:i.origin)===t?null==i?void 0:i.value:void 0}originOf(e){var t,i;return null!=(t=null==(i=this._values.get(e))?void 0:i.origin)?t:ic.USER}keys(e){e=this._normalizeOrigin(e);const t=[...this._values.keys()];return null==e?t:t.filter((t=>{var i;return(null==(i=this._values.get(t))?void 0:i.origin)===e}))}set(e,t,i){if((i=this._normalizeOrigin(i))===ic.DEFAULTS){const t=this._values.get(e);if(t&&null!=t.origin&&t.origin>i)return}this._values.set(e,new zd(t,i))}delete(e,t){var i;null!=(t=this._normalizeOrigin(t))&&(null==(i=this._values.get(e))?void 0:i.origin)!==t||this._values.delete(e)}has(e,t){var i;return null!=(t=this._normalizeOrigin(t))?(null==(i=this._values.get(e))?void 0:i.origin)===t:this._values.has(e)}forEach(e){this._values.forEach((({value:t},i)=>e(t,i)))}_normalizeOrigin(e){if(null!=e)return e===ic.DEFAULTS?e:ic.USER}}class zd{constructor(e,t){this.value=e,this.origin=t}}function Ud(e,t,i){t.keys().forEach((e=>{i.set(e,t.get(e),ic.DEFAULTS)}));const r=e.metadatas;Object.keys(r).forEach((t=>{e.internalGet(t)&&i.set(t,e.internalGet(t),ic.DEFAULTS)}))}function qd(e,t,i){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const r=e.read.source;if("string"==typeof r){if(r===t)return!0;if(r.indexOf(".")>-1&&0===r.indexOf(t)&&Yl(r,i))return!0}else for(const e of r){if(e===t)return!0;if(e.indexOf(".")>-1&&0===e.indexOf(t)&&Yl(e,i))return!0}return!1}function Gd(e,t,i,r,n){let o=od(t[i],n);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(o)&&(e[i]=!0);for(const s of Object.getOwnPropertyNames(t))o=od(t[s],n),qd(o,i,r)&&(e[s]=!0)}function Bd(e,t,i,r){const n=ad(i.metadatas[t],"any",r),o=n&&n.default;if(void 0===o)return;const s="function"==typeof o?o.call(e,t,r):o;void 0!==s&&i.set(t,s)}const Wd={origin:"service"};function Hd(e,t,i=Wd){if(!t||"object"!=typeof t)return;const r=jl(e),n=r.metadatas,o={};for(const e of Object.getOwnPropertyNames(t))Gd(o,n,e,t,i);r.setDefaultOrigin(i.origin);for(const s of Object.getOwnPropertyNames(o)){const o=od(n[s],i).read,a=o&&o.source;let l;l=a&&"string"==typeof a?Hl(t,a):t[s],o&&o.reader&&(l=o.reader.call(e,l,t,i)),void 0!==l&&r.set(s,l)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const t of Object.getOwnPropertyNames(n))o[t]||Bd(e,t,r,i)}r.setDefaultOrigin("user")}const Jd=Dl.getLogger("esri.core.accessorSupport.write");function Yd(e,t,i,r,n){var o,s;const a={};return null==(o=t.write)||null==(s=o.writer)||s.call(e,r,a,i,n),a}function Zd(e,t,i,r,n,o){if(!r||!r.write)return!1;const s=e.get(i);if(!n&&r.write.overridePolicy){const t=r.write.overridePolicy.call(e,s,i,o);void 0!==t&&(n=t)}if(n||(n=r.write),!n||!1===n.enabled)return!1;if((null===s&&!n.allowNull&&!n.writerEnsuresNonNull||void 0===s)&&n.isRequired){const t=new Ac("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return t&&o&&o.messages?o.messages.push(t):t&&!o&&Jd.error(t.name,t.message),!1}return void 0!==s&&(!(null===s&&!n.allowNull&&!n.writerEnsuresNonNull)&&(!((!t.store.multipleOriginsSupported||t.store.originOf(i)===ic.DEFAULTS)&&function(e,t,i,r,n){const o=r.default;if(void 0===o)return!1;if(null!=r.defaultEquals)return r.defaultEquals(n);if("function"==typeof o){if(Array.isArray(n)){return za(o.call(e,t,i),n)}return!1}return o===n}(e,i,o,r,s))&&!(!n.ignoreOrigin&&o&&o.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<nc(o.origin))))}function Kd(e,t,i,r){const n=jl(e),o=sd(n.metadatas[t],r);return!!o&&Zd(e,n,t,o,i,r)}function Xd(e,t,i){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return $l(t,e.toJSON());const r=jl(e),n=r.metadatas;for(const a in n){const l=sd(n[a],i);if(!Zd(e,r,a,l,void 0,i))continue;const c=e.get(a),u=Yd(e,l,l.write&&"string"==typeof l.write.target?l.write.target:a,c,i);var o,s;Object.keys(u).length>0&&(t=$l(t,u),null!=i&&null!=(o=i.resources)&&null!=(s=o.pendingOperations)&&s.length&&Promise.all(i.resources.pendingOperations).then((()=>$l(t,u))),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:a,oldOrigin:sc(r.store.originOf(a)),newOrigin:i.origin}))}return t}const Qd=e=>{let t=class extends e{constructor(...e){super(...e);const t=jl(this),i=t.store,r=new Vd;t.store=r,Ud(t,i,r)}read(e,t){Hd(this,e,t)}write(e={},t){return Xd(this,e,t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return ep.call(this,e,t)}};return t=bl([md("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ep(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let tp=class extends(Qd(vd)){};var ip;tp=bl([md("esri.core.JSONSupport")],tp),function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(ip||(ip={}));class rp{constructor(e){this.instance=e,this._resolver=ou(),this._status=ip.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=ip.RESOLVED,this._cleanUp()}),(()=>{this._status=ip.REJECTED,this._cleanUp()}))}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===ip.RESOLVED}isRejected(){return this._status===ip.REJECTED}isFulfilled(){return this._status!==ip.PENDING}abort(){this._resolver.reject(Jc())}when(e,t){return this._resolver.promise.then(e,t)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=ou(),t=[...this._resolvingPromises,e.promise],i=this._allPromise=Promise.all(t);i.then((()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)}),(e=>{this.isFulfilled()||this._allPromise!==i||ru(e)||this._resolver.reject(e)})),e.resolve()}}const np=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new rp(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return new Promise(((e,t)=>{this._promiseProps.when(e,t)})).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=bl([md("esri.core.Promise")],t),t};let op=class extends(np(vd)){};op=bl([md("esri.core.Promise")],op);const sp=e=>{let t=class extends e{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((e=>{const t=this.load.bind(this);this.load=i=>{const r=new Promise(((e,t)=>{const r=tu(i,t);this.destroyed&&t(new Ac("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(e,t).finally((()=>{r&&r.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const e=this._loadController=new AbortController;t({signal:e.signal}),eu(e.signal,(()=>{this._promiseProps.abort()}))}return e(),r}}))),this.when((()=>{this._set("loadStatus","loaded"),this._loadController=null}),(e=>{this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null}))}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var e;return this.isFulfilled()||(this._set("loadError",new Ac("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}};return bl([Lh({readOnly:!0})],t.prototype,"loaded",null),bl([Lh({readOnly:!0})],t.prototype,"loadError",void 0),bl([Lh({clonable:!1})],t.prototype,"loadStatus",void 0),bl([Lh({type:[Fh],readOnly:!0})],t.prototype,"loadWarnings",null),t=bl([md("esri.core.Loadable")],t),t};let ap=class extends(sp(op)){};ap=bl([md("esri.core.Loadable")],ap),function(e){e.LoadableMixin=sp,e.isLoadable=function(e){return!(!e||!e.load)}}(ap||(ap={}));const lp=ap;function cp(e){return xa(e)?cu():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function up(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>(Xc(e),{ok:!1,error:e})))}async function hp(e,t){return await e.load(),dp(e,t)}async function dp(e,t){const i=[],r=(...e)=>{for(const t of e)xa(t)||(Array.isArray(t)?r(...t):Fd.isCollection(t)?t.forEach((e=>r(e))):lp.isLoadable(t)&&i.push(t))};t(r);let n=null;if(await function(e,t,i){return su(e.map(((e,r)=>t.apply(i,[e,r])))).then((e=>e.map((e=>e.value))))}(i,(async e=>{!1!==(await cp(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||n||(n=e)})),n)throw n.loadError;return e}const pp=Dl.getLogger("esri.core.urlUtils"),fp=vl.request,mp="esri/config: esriConfig.request.proxyUrl is not set.",gp=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,yp=/^\s*http:/i,vp=/^\s*https:/i,bp=/^\s*file:/i,wp=/:\d+$/,_p=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,xp=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Sp=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class kp{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(xp);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=this.authority.match(Sp),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const Mp={};let Tp=new kp(vl.applicationUrl);const Ep=function(){const e=Tp.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${Tp.scheme}://${Tp.host}${null!=Tp.port?`:${Tp.port}`:""}${t}`}();let Ip=Ep;const Cp=()=>Tp,Op=()=>Ip;function Ap(e){const t={path:null,query:null},i=new kp(e),r=e.indexOf("?");return null===i.query?t.path=e:(t.path=e.substring(0,r),t.query=Pp(i.query)),i.fragment&&(t.hash=i.fragment,null===i.query&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function Pp(e){const t=e.split("&"),i={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let r,n;t<0?(r=decodeURIComponent(e),n=""):(r=decodeURIComponent(e.slice(0,t)),n=decodeURIComponent(e.slice(t+1)));let o=i[r];"string"==typeof o&&(o=i[r]=[o]),Array.isArray(o)?o.push(n):i[r]=n}return i}function Rp(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function Lp(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i])))).join("&"):Object.keys(e).map((i=>{const r=e[i];if(null==r)return"";const n=encodeURIComponent(i)+"=",o=t&&t[i];return o?n+encodeURIComponent(o(r)):Array.isArray(r)?r.map((e=>Rp(e)?n+encodeURIComponent(JSON.stringify(e)):n+encodeURIComponent(e))).join("&"):Rp(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)})).filter((e=>e)).join("&"):""}function Dp(e){const t=$p(e);let i,r;if(t){const e=Fp(t.proxyUrl);i=e.path,r=e.query?Pp(e.query):null}if(i){const t=Ap(e);e=i+"?"+t.path;const n=Lp({...r,...t.query});n&&(e=`${e}?${n}`)}return e}const Np={path:"",query:""};function Fp(e){const t=e.indexOf("?");return-1!==t?(Np.path=e.slice(0,t),Np.query=e.slice(t+1)):(Np.path=e,Np.query=null),Np}function jp(e){return(e=df(e=function(e){return e&&"/"===e[e.length-1]?e:`${e}/`}(e=Fp(e).path),!0)).toLowerCase()}function $p(e){const t=fp.proxyRules,i=jp(e);for(let e=0;e<t.length;e++)if(0===i.indexOf(t[e].urlPrefix))return t[e]}function Vp(e,t){return e=zp(e),t=zp(t),df(e)===df(t)}function zp(e){const t=(e=Jp(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function Up(e){const t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),i=fp.interceptors;if(i)for(const e of i)if(Array.isArray(e.urls)){if(e.urls.some(t))return e}else if(t(e.urls))return e;return null}function qp(e,t,i=!1){const r=yf(e),n=yf(t);return!(!i&&r.scheme!==n.scheme)&&null!=r.host&&null!=n.host&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function Gp(e){if("string"==typeof e){if(!Kp(e))return!0;e=yf(e)}if(qp(e,Tp))return!0;const t=fp.trustedServers||[];for(let i=0;i<t.length;i++){const r=Bp(t[i]);for(let t=0;t<r.length;t++)if(qp(e,r[t]))return!0}return!1}function Bp(e){return Mp[e]||(lf(e)||af(e)?Mp[e]=[new kp(Wp(e))]:Mp[e]=[new kp(`http://${e}`),new kp(`https://${e}`)]),Mp[e]}function Wp(e,t=Ip,i){return af(e)?i&&i.preserveProtocolRelative?e:"http"===Tp.scheme&&Tp.authority===Zp(e).slice(2)?`http:${e}`:`https:${e}`:lf(e)?e:Yp("/"===e[0]?function(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return-1===i?e:e.slice(0,i)}(t):t,e)}function Hp(e,t=Ip,i){if(!Kp(e))return e;const r=Jp(e),n=r.toLowerCase(),o=Jp(t).toLowerCase().replace(/\/+$/,""),s=i?Jp(i).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==o.indexOf(s))return e;const a=(e,t,i)=>-1===(i=e.indexOf(t,i))?e.length:i;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===o.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(-1===c)return e;if(s&&c<s.length)return e;e=r.slice(c);const u=o.slice(c-1).replace(/[^/]+/g,"").length;if(u>0)for(let t=0;t<u;t++)e=`../${e}`;else e=`./${e}`;return e}function Jp(e){return function(e){const t=fp.httpsDomains;if(!function(e){return yp.test(e)||"http"===Tp.scheme&&af(e)}(e))return e;const i=e.indexOf("/",7);let r;if(r=-1===i?e:e.slice(0,i),r=r.toLowerCase().slice(7),wp.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return"http"===Tp.scheme&&r===Tp.authority&&!_p.test(e)||(hf()&&r===Tp.authority||t&&t.some((e=>r===e||r.endsWith(`.${e}`)))||hf()&&!$p(e))&&(e=uf(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=Fp(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=Wp(e=e.trim()))))}function Yp(...e){const t=e.filter(_a);if(!t||!t.length)return;const i=[];if(Kp(t[0])){const e=t[0],r=e.indexOf("//");-1!==r&&(i.push(e.slice(0,r+1)),function(e){return bp.test(e)}(t[0])&&(i[0]+="/"),t[0]=e.slice(r+2))}else"/"===t[0][0]&&i.push("");const r=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let e=0;e<r.length;e++){const t=r[e];".."===t&&i.length>0&&".."!==i[i.length-1]?i.pop():(!t&&e===r.length-1||t&&("."!==t||0===i.length))&&i.push(t)}return i.join("/")}function Zp(e,t=!1){if(Xp(e)||Qp(e))return null;let i=e.indexOf("://");if(-1===i&&af(e))i=2;else{if(-1===i)return null;i+=3}const r=e.indexOf("/",i);return-1!==r&&(e=e.slice(0,r)),t&&(e=df(e,!0)),e}function Kp(e){return af(e)||lf(e)}function Xp(e){return null!=e&&"blob:"===e.slice(0,5)}function Qp(e){return"data:"===e.slice(0,5)}function ef(e){const t=nf(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);return r.buffer}function tf(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const rf=/^data:(.*?)(;base64)?,(.*)$/;function nf(e){const t=e.match(rf);if(!t)return null;const[,i,r,n]=t;return{mediaType:i,isBase64:!!r,data:n}}function of(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function sf(e,t){(function(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0})(e,t)||function(e,t){!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}(e,t)}function af(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function lf(e){return gp.test(e)}function cf(e){return vp.test(e)||"https"===Tp.scheme&&af(e)}function uf(e){return af(e)?`https:${e}`:e.replace(yp,"https:")}function hf(){return"https"===Tp.scheme}function df(e,t=!1){return af(e)?e.slice(2):(e=e.replace(gp,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function pf(e){let t=0;if(Kp(e)){const i=e.indexOf("//");-1!==i&&(t=i+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function ff(e,t){if(!e)return"";const i=Ap(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(null==t||!t.length)return r;const n=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(n,"")}function mf(e){return e.replace(/\/+$/,"")}function gf(e,t,i){if(!(t&&i&&e&&Kp(e)))return e;const r=e.indexOf("//"),n=e.indexOf("/",r+2),o=e.indexOf(":",r+2),s=Math.min(n<0?e.length:n,o<0?e.length:o);return e.slice(r+2,s).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(s)}`}function yf(e){return"string"==typeof e?new kp(Wp(e)):(e.scheme||(e.scheme=Tp.scheme),e)}function vf(e){return kf.test(e)}function bf(e,t){const i=Ap(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function wf(e,t,i){const r=Ap(e),n=r.query||{};return n[t]=String(i),`${r.path}?${Lp(n)}`}function _f(e,t){const i=Ap(e),r=i.query||{};for(const e in t)r[e]=t[e];const n=Lp(r);return n?`${i.path}?${n}`:i.path}function xf(e){if(xa(e))return null;const t=e.match(Sf);return t?t[1]:null}const Sf=/.*?\.([^\/]*)$/,kf=/(^data:image\/svg|\.svg$)/i;function Mf(e,t,i){let r,n;return void 0===t?(n=e,r=[void 0]):"string"!=typeof t?(n=e,r=[void 0],i=t):(n=t,r=Array.isArray(e)?e:[e]),(e,t)=>{const o=e.constructor.prototype;for(const s of r){const r=Dh(e,s,n);r.write&&"object"==typeof r.write||(r.write={}),i&&(r.write.target=i),r.write.writer=o[t]}}}var Tf;let Ef;!function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"}(Tf||(Tf={}));const If={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(Ef=2e3;Ef<=2045;Ef++)If[Ef]=0;for(Ef=2056;Ef<=2065;Ef++)If[Ef]=0;for(Ef=2067;Ef<=2135;Ef++)If[Ef]=0;for(Ef=2137;Ef<=2154;Ef++)If[Ef]=0;for(Ef=2161;Ef<=2170;Ef++)If[Ef]=0;for(Ef=2172;Ef<=2193;Ef++)If[Ef]=0;for(Ef=2195;Ef<=2198;Ef++)If[Ef]=0;for(Ef=2200;Ef<=2203;Ef++)If[Ef]=0;for(Ef=2205;Ef<=2217;Ef++)If[Ef]=0;for(Ef=2222;Ef<=2224;Ef++)If[Ef]=1;for(Ef=2225;Ef<=2250;Ef++)If[Ef]=2;for(Ef=2251;Ef<=2253;Ef++)If[Ef]=1;for(Ef=2257;Ef<=2264;Ef++)If[Ef]=2;for(Ef=2274;Ef<=2279;Ef++)If[Ef]=2;for(Ef=2280;Ef<=2282;Ef++)If[Ef]=1;for(Ef=2283;Ef<=2289;Ef++)If[Ef]=2;for(Ef=2290;Ef<=2292;Ef++)If[Ef]=0;for(Ef=2308;Ef<=2313;Ef++)If[Ef]=0;for(Ef=2315;Ef<=2491;Ef++)If[Ef]=0;for(Ef=2494;Ef<=2866;Ef++)If[Ef]=0;for(Ef=2867;Ef<=2869;Ef++)If[Ef]=1;for(Ef=2870;Ef<=2888;Ef++)If[Ef]=2;for(Ef=2891;Ef<=2895;Ef++)If[Ef]=2;for(Ef=2896;Ef<=2898;Ef++)If[Ef]=1;for(Ef=2902;Ef<=2908;Ef++)If[Ef]=2;for(Ef=2915;Ef<=2920;Ef++)If[Ef]=2;for(Ef=2921;Ef<=2923;Ef++)If[Ef]=1;for(Ef=2924;Ef<=2930;Ef++)If[Ef]=2;for(Ef=2931;Ef<=2962;Ef++)If[Ef]=0;for(Ef=2964;Ef<=2968;Ef++)If[Ef]=2;for(Ef=2969;Ef<=2973;Ef++)If[Ef]=0;for(Ef=2975;Ef<=2991;Ef++)If[Ef]=0;for(Ef=2995;Ef<=3051;Ef++)If[Ef]=0;for(Ef=3054;Ef<=3079;Ef++)If[Ef]=0;for(Ef=3081;Ef<=3088;Ef++)If[Ef]=0;for(Ef=3092;Ef<=3101;Ef++)If[Ef]=0;for(Ef=3106;Ef<=3138;Ef++)If[Ef]=0;for(Ef=3146;Ef<=3151;Ef++)If[Ef]=0;for(Ef=3153;Ef<=3166;Ef++)If[Ef]=0;for(Ef=3168;Ef<=3172;Ef++)If[Ef]=0;for(Ef=3174;Ef<=3203;Ef++)If[Ef]=0;for(Ef=3294;Ef<=3358;Ef++)If[Ef]=0;for(Ef=3367;Ef<=3403;Ef++)If[Ef]=0;for(Ef=3408;Ef<=3416;Ef++)If[Ef]=0;for(Ef=3417;Ef<=3438;Ef++)If[Ef]=2;for(Ef=3441;Ef<=3446;Ef++)If[Ef]=2;for(Ef=3447;Ef<=3450;Ef++)If[Ef]=0;for(Ef=3451;Ef<=3459;Ef++)If[Ef]=2;for(Ef=3460;Ef<=3478;Ef++)If[Ef]=0;for(Ef=3554;Ef<=3559;Ef++)If[Ef]=0;for(Ef=3560;Ef<=3570;Ef++)If[Ef]=2;for(Ef=3571;Ef<=3581;Ef++)If[Ef]=0;for(Ef=3594;Ef<=3597;Ef++)If[Ef]=0;for(Ef=3601;Ef<=3604;Ef++)If[Ef]=0;for(Ef=3637;Ef<=3639;Ef++)If[Ef]=0;for(Ef=3665;Ef<=3667;Ef++)If[Ef]=0;for(Ef=3693;Ef<=3695;Ef++)If[Ef]=0;for(Ef=3701;Ef<=3727;Ef++)If[Ef]=0;for(Ef=3728;Ef<=3739;Ef++)If[Ef]=2;for(Ef=3740;Ef<=3751;Ef++)If[Ef]=0;for(Ef=3753;Ef<=3760;Ef++)If[Ef]=2;for(Ef=3761;Ef<=3773;Ef++)If[Ef]=0;for(Ef=3775;Ef<=3777;Ef++)If[Ef]=0;for(Ef=3779;Ef<=3781;Ef++)If[Ef]=0;for(Ef=3783;Ef<=3785;Ef++)If[Ef]=0;for(Ef=3788;Ef<=3791;Ef++)If[Ef]=0;for(Ef=3797;Ef<=3802;Ef++)If[Ef]=0;for(Ef=3814;Ef<=3816;Ef++)If[Ef]=0;for(Ef=3825;Ef<=3829;Ef++)If[Ef]=0;for(Ef=3832;Ef<=3841;Ef++)If[Ef]=0;for(Ef=3844;Ef<=3852;Ef++)If[Ef]=0;for(Ef=3873;Ef<=3885;Ef++)If[Ef]=0;for(Ef=3890;Ef<=3893;Ef++)If[Ef]=0;for(Ef=3907;Ef<=3912;Ef++)If[Ef]=0;for(Ef=3942;Ef<=3950;Ef++)If[Ef]=0;for(Ef=3968;Ef<=3970;Ef++)If[Ef]=0;for(Ef=3973;Ef<=3976;Ef++)If[Ef]=0;for(Ef=3986;Ef<=3989;Ef++)If[Ef]=0;for(Ef=3994;Ef<=3997;Ef++)If[Ef]=0;for(Ef=4048;Ef<=4051;Ef++)If[Ef]=0;for(Ef=4056;Ef<=4063;Ef++)If[Ef]=0;for(Ef=4093;Ef<=4096;Ef++)If[Ef]=0;for(Ef=4390;Ef<=4398;Ef++)If[Ef]=0;for(Ef=4399;Ef<=4413;Ef++)If[Ef]=2;for(Ef=4418;Ef<=4433;Ef++)If[Ef]=2;for(Ef=4455;Ef<=4457;Ef++)If[Ef]=2;for(Ef=4484;Ef<=4489;Ef++)If[Ef]=0;for(Ef=4491;Ef<=4554;Ef++)If[Ef]=0;for(Ef=4568;Ef<=4589;Ef++)If[Ef]=0;for(Ef=4652;Ef<=4656;Ef++)If[Ef]=0;for(Ef=4766;Ef<=4800;Ef++)If[Ef]=0;for(Ef=5014;Ef<=5016;Ef++)If[Ef]=0;for(Ef=5069;Ef<=5072;Ef++)If[Ef]=0;for(Ef=5105;Ef<=5130;Ef++)If[Ef]=0;for(Ef=5173;Ef<=5188;Ef++)If[Ef]=0;for(Ef=5253;Ef<=5259;Ef++)If[Ef]=0;for(Ef=5269;Ef<=5275;Ef++)If[Ef]=0;for(Ef=5292;Ef<=5311;Ef++)If[Ef]=0;for(Ef=5329;Ef<=5331;Ef++)If[Ef]=0;for(Ef=5343;Ef<=5349;Ef++)If[Ef]=0;for(Ef=5355;Ef<=5357;Ef++)If[Ef]=0;for(Ef=5387;Ef<=5389;Ef++)If[Ef]=0;for(Ef=5459;Ef<=5463;Ef++)If[Ef]=0;for(Ef=5479;Ef<=5482;Ef++)If[Ef]=0;for(Ef=5518;Ef<=5520;Ef++)If[Ef]=0;for(Ef=5530;Ef<=5539;Ef++)If[Ef]=0;for(Ef=5550;Ef<=5552;Ef++)If[Ef]=0;for(Ef=5562;Ef<=5583;Ef++)If[Ef]=0;for(Ef=5623;Ef<=5625;Ef++)If[Ef]=2;for(Ef=5631;Ef<=5639;Ef++)If[Ef]=0;for(Ef=5649;Ef<=5653;Ef++)If[Ef]=0;for(Ef=5663;Ef<=5680;Ef++)If[Ef]=0;for(Ef=5682;Ef<=5685;Ef++)If[Ef]=0;for(Ef=5875;Ef<=5877;Ef++)If[Ef]=0;for(Ef=5896;Ef<=5899;Ef++)If[Ef]=0;for(Ef=5921;Ef<=5940;Ef++)If[Ef]=0;for(Ef=6050;Ef<=6125;Ef++)If[Ef]=0;for(Ef=6244;Ef<=6275;Ef++)If[Ef]=0;for(Ef=6328;Ef<=6348;Ef++)If[Ef]=0;for(Ef=6350;Ef<=6356;Ef++)If[Ef]=0;for(Ef=6366;Ef<=6372;Ef++)If[Ef]=0;for(Ef=6381;Ef<=6387;Ef++)If[Ef]=0;for(Ef=6393;Ef<=6404;Ef++)If[Ef]=0;for(Ef=6480;Ef<=6483;Ef++)If[Ef]=0;for(Ef=6511;Ef<=6514;Ef++)If[Ef]=0;for(Ef=6579;Ef<=6581;Ef++)If[Ef]=0;for(Ef=6619;Ef<=6624;Ef++)If[Ef]=0;for(Ef=6625;Ef<=6627;Ef++)If[Ef]=2;for(Ef=6628;Ef<=6632;Ef++)If[Ef]=0;for(Ef=6634;Ef<=6637;Ef++)If[Ef]=0;for(Ef=6669;Ef<=6692;Ef++)If[Ef]=0;for(Ef=6707;Ef<=6709;Ef++)If[Ef]=0;for(Ef=6720;Ef<=6723;Ef++)If[Ef]=0;for(Ef=6732;Ef<=6738;Ef++)If[Ef]=0;for(Ef=6931;Ef<=6933;Ef++)If[Ef]=0;for(Ef=6956;Ef<=6959;Ef++)If[Ef]=0;for(Ef=7005;Ef<=7007;Ef++)If[Ef]=0;for(Ef=7057;Ef<=7070;Ef++)If[Ef]=2;for(Ef=7074;Ef<=7082;Ef++)If[Ef]=0;for(Ef=7109;Ef<=7118;Ef++)If[Ef]=0;for(Ef=7119;Ef<=7127;Ef++)If[Ef]=1;for(Ef=7374;Ef<=7376;Ef++)If[Ef]=0;for(Ef=7528;Ef<=7586;Ef++)If[Ef]=0;for(Ef=7587;Ef<=7645;Ef++)If[Ef]=2;for(Ef=7692;Ef<=7696;Ef++)If[Ef]=0;for(Ef=7755;Ef<=7787;Ef++)If[Ef]=0;for(Ef=7791;Ef<=7795;Ef++)If[Ef]=0;for(Ef=7799;Ef<=7801;Ef++)If[Ef]=0;for(Ef=7803;Ef<=7805;Ef++)If[Ef]=0;for(Ef=7825;Ef<=7831;Ef++)If[Ef]=0;for(Ef=7845;Ef<=7859;Ef++)If[Ef]=0;for(Ef=8013;Ef<=8032;Ef++)If[Ef]=0;for(Ef=8065;Ef<=8068;Ef++)If[Ef]=1;for(Ef=8518;Ef<=8529;Ef++)If[Ef]=2;for(Ef=8533;Ef<=8536;Ef++)If[Ef]=2;for(Ef=8538;Ef<=8540;Ef++)If[Ef]=2;for(Ef=8677;Ef<=8679;Ef++)If[Ef]=0;for(Ef=8836;Ef<=8840;Ef++)If[Ef]=0;for(Ef=8857;Ef<=8859;Ef++)If[Ef]=0;for(Ef=8908;Ef<=8910;Ef++)If[Ef]=0;for(Ef=9154;Ef<=9159;Ef++)If[Ef]=0;for(Ef=9205;Ef<=9218;Ef++)If[Ef]=0;for(Ef=9271;Ef<=9273;Ef++)If[Ef]=0;for(Ef=9295;Ef<=9297;Ef++)If[Ef]=0;for(Ef=9356;Ef<=9360;Ef++)If[Ef]=0;for(Ef=9404;Ef<=9407;Ef++)If[Ef]=0;for(Ef=9476;Ef<=9482;Ef++)If[Ef]=0;for(Ef=9487;Ef<=9494;Ef++)If[Ef]=0;for(Ef=9697;Ef<=9699;Ef++)If[Ef]=0;for(Ef=20002;Ef<=20032;Ef++)If[Ef]=0;for(Ef=20062;Ef<=20092;Ef++)If[Ef]=0;for(Ef=20135;Ef<=20138;Ef++)If[Ef]=0;for(Ef=20248;Ef<=20258;Ef++)If[Ef]=0;for(Ef=20348;Ef<=20358;Ef++)If[Ef]=0;for(Ef=20436;Ef<=20440;Ef++)If[Ef]=0;for(Ef=20822;Ef<=20824;Ef++)If[Ef]=0;for(Ef=20904;Ef<=20932;Ef++)If[Ef]=0;for(Ef=20934;Ef<=20936;Ef++)If[Ef]=0;for(Ef=21004;Ef<=21032;Ef++)If[Ef]=0;for(Ef=21035;Ef<=21037;Ef++)If[Ef]=0;for(Ef=21095;Ef<=21097;Ef++)If[Ef]=0;for(Ef=21148;Ef<=21150;Ef++)If[Ef]=0;for(Ef=21207;Ef<=21264;Ef++)If[Ef]=0;for(Ef=21307;Ef<=21364;Ef++)If[Ef]=0;for(Ef=21413;Ef<=21423;Ef++)If[Ef]=0;for(Ef=21453;Ef<=21463;Ef++)If[Ef]=0;for(Ef=21473;Ef<=21483;Ef++)If[Ef]=0;for(Ef=21780;Ef<=21782;Ef++)If[Ef]=0;for(Ef=21891;Ef<=21894;Ef++)If[Ef]=0;for(Ef=21896;Ef<=21899;Ef++)If[Ef]=0;for(Ef=22171;Ef<=22177;Ef++)If[Ef]=0;for(Ef=22181;Ef<=22187;Ef++)If[Ef]=0;for(Ef=22191;Ef<=22197;Ef++)If[Ef]=0;for(Ef=22234;Ef<=22236;Ef++)If[Ef]=0;for(Ef=22521;Ef<=22525;Ef++)If[Ef]=0;for(Ef=22991;Ef<=22994;Ef++)If[Ef]=0;for(Ef=23028;Ef<=23038;Ef++)If[Ef]=0;for(Ef=23830;Ef<=23853;Ef++)If[Ef]=0;for(Ef=23866;Ef<=23872;Ef++)If[Ef]=0;for(Ef=23877;Ef<=23884;Ef++)If[Ef]=0;for(Ef=23886;Ef<=23894;Ef++)If[Ef]=0;for(Ef=23946;Ef<=23948;Ef++)If[Ef]=0;for(Ef=24311;Ef<=24313;Ef++)If[Ef]=0;for(Ef=24342;Ef<=24347;Ef++)If[Ef]=0;for(Ef=24370;Ef<=24374;Ef++)If[Ef]=10;for(Ef=24375;Ef<=24381;Ef++)If[Ef]=0;for(Ef=24718;Ef<=24721;Ef++)If[Ef]=0;for(Ef=24817;Ef<=24821;Ef++)If[Ef]=0;for(Ef=24877;Ef<=24882;Ef++)If[Ef]=0;for(Ef=24891;Ef<=24893;Ef++)If[Ef]=0;for(Ef=25391;Ef<=25395;Ef++)If[Ef]=0;for(Ef=25828;Ef<=25838;Ef++)If[Ef]=0;for(Ef=26191;Ef<=26195;Ef++)If[Ef]=0;for(Ef=26391;Ef<=26393;Ef++)If[Ef]=0;for(Ef=26701;Ef<=26722;Ef++)If[Ef]=0;for(Ef=26729;Ef<=26799;Ef++)If[Ef]=2;for(Ef=26801;Ef<=26803;Ef++)If[Ef]=2;for(Ef=26811;Ef<=26813;Ef++)If[Ef]=2;for(Ef=26847;Ef<=26870;Ef++)If[Ef]=2;for(Ef=26891;Ef<=26899;Ef++)If[Ef]=0;for(Ef=26901;Ef<=26923;Ef++)If[Ef]=0;for(Ef=26929;Ef<=26946;Ef++)If[Ef]=0;for(Ef=26948;Ef<=26998;Ef++)If[Ef]=0;for(Ef=27037;Ef<=27040;Ef++)If[Ef]=0;for(Ef=27205;Ef<=27232;Ef++)If[Ef]=0;for(Ef=27258;Ef<=27260;Ef++)If[Ef]=0;for(Ef=27391;Ef<=27398;Ef++)If[Ef]=0;for(Ef=27561;Ef<=27564;Ef++)If[Ef]=0;for(Ef=27571;Ef<=27574;Ef++)If[Ef]=0;for(Ef=27581;Ef<=27584;Ef++)If[Ef]=0;for(Ef=27591;Ef<=27594;Ef++)If[Ef]=0;for(Ef=28191;Ef<=28193;Ef++)If[Ef]=0;for(Ef=28348;Ef<=28358;Ef++)If[Ef]=0;for(Ef=28402;Ef<=28432;Ef++)If[Ef]=0;for(Ef=28462;Ef<=28492;Ef++)If[Ef]=0;for(Ef=29118;Ef<=29122;Ef++)If[Ef]=0;for(Ef=29168;Ef<=29172;Ef++)If[Ef]=0;for(Ef=29177;Ef<=29185;Ef++)If[Ef]=0;for(Ef=29187;Ef<=29195;Ef++)If[Ef]=0;for(Ef=29900;Ef<=29903;Ef++)If[Ef]=0;for(Ef=30161;Ef<=30179;Ef++)If[Ef]=0;for(Ef=30491;Ef<=30494;Ef++)If[Ef]=0;for(Ef=30729;Ef<=30732;Ef++)If[Ef]=0;for(Ef=31251;Ef<=31259;Ef++)If[Ef]=0;for(Ef=31265;Ef<=31268;Ef++)If[Ef]=0;for(Ef=31275;Ef<=31279;Ef++)If[Ef]=0;for(Ef=31281;Ef<=31297;Ef++)If[Ef]=0;for(Ef=31461;Ef<=31469;Ef++)If[Ef]=0;for(Ef=31491;Ef<=31495;Ef++)If[Ef]=0;for(Ef=31917;Ef<=31922;Ef++)If[Ef]=0;for(Ef=31965;Ef<=32e3;Ef++)If[Ef]=0;for(Ef=32001;Ef<=32003;Ef++)If[Ef]=2;for(Ef=32005;Ef<=32031;Ef++)If[Ef]=2;for(Ef=32033;Ef<=32060;Ef++)If[Ef]=2;for(Ef=32064;Ef<=32067;Ef++)If[Ef]=2;for(Ef=32074;Ef<=32077;Ef++)If[Ef]=2;for(Ef=32081;Ef<=32086;Ef++)If[Ef]=0;for(Ef=32107;Ef<=32130;Ef++)If[Ef]=0;for(Ef=32133;Ef<=32158;Ef++)If[Ef]=0;for(Ef=32164;Ef<=32167;Ef++)If[Ef]=2;for(Ef=32180;Ef<=32199;Ef++)If[Ef]=0;for(Ef=32201;Ef<=32260;Ef++)If[Ef]=0;for(Ef=32301;Ef<=32360;Ef++)If[Ef]=0;for(Ef=32601;Ef<=32662;Ef++)If[Ef]=0;for(Ef=32664;Ef<=32667;Ef++)If[Ef]=2;for(Ef=32701;Ef<=32761;Ef++)If[Ef]=0;for(Ef=53001;Ef<=53004;Ef++)If[Ef]=0;for(Ef=53008;Ef<=53019;Ef++)If[Ef]=0;for(Ef=53021;Ef<=53032;Ef++)If[Ef]=0;for(Ef=53034;Ef<=53037;Ef++)If[Ef]=0;for(Ef=53042;Ef<=53046;Ef++)If[Ef]=0;for(Ef=53074;Ef<=53080;Ef++)If[Ef]=0;for(Ef=54001;Ef<=54004;Ef++)If[Ef]=0;for(Ef=54008;Ef<=54019;Ef++)If[Ef]=0;for(Ef=54021;Ef<=54032;Ef++)If[Ef]=0;for(Ef=54034;Ef<=54037;Ef++)If[Ef]=0;for(Ef=54042;Ef<=54046;Ef++)If[Ef]=0;for(Ef=54048;Ef<=54053;Ef++)If[Ef]=0;for(Ef=54074;Ef<=54080;Ef++)If[Ef]=0;for(Ef=54098;Ef<=54101;Ef++)If[Ef]=0;for(Ef=102001;Ef<=102040;Ef++)If[Ef]=0;for(Ef=102042;Ef<=102063;Ef++)If[Ef]=0;for(Ef=102065;Ef<=102067;Ef++)If[Ef]=0;for(Ef=102070;Ef<=102117;Ef++)If[Ef]=0;for(Ef=102122;Ef<=102216;Ef++)If[Ef]=0;for(Ef=102221;Ef<=102377;Ef++)If[Ef]=0;for(Ef=102382;Ef<=102388;Ef++)If[Ef]=0;for(Ef=102389;Ef<=102398;Ef++)If[Ef]=2;for(Ef=102399;Ef<=102444;Ef++)If[Ef]=0;for(Ef=102445;Ef<=102447;Ef++)If[Ef]=2;for(Ef=102448;Ef<=102458;Ef++)If[Ef]=0;for(Ef=102459;Ef<=102468;Ef++)If[Ef]=2;for(Ef=102469;Ef<=102499;Ef++)If[Ef]=0;for(Ef=102500;Ef<=102519;Ef++)If[Ef]=1;for(Ef=102520;Ef<=102524;Ef++)If[Ef]=0;for(Ef=102525;Ef<=102529;Ef++)If[Ef]=2;for(Ef=102530;Ef<=102588;Ef++)If[Ef]=0;for(Ef=102590;Ef<=102598;Ef++)If[Ef]=0;for(Ef=102601;Ef<=102603;Ef++)If[Ef]=0;for(Ef=102605;Ef<=102628;Ef++)If[Ef]=0;for(Ef=102629;Ef<=102646;Ef++)If[Ef]=2;for(Ef=102648;Ef<=102700;Ef++)If[Ef]=2;for(Ef=102701;Ef<=102703;Ef++)If[Ef]=0;for(Ef=102707;Ef<=102730;Ef++)If[Ef]=2;for(Ef=102733;Ef<=102758;Ef++)If[Ef]=2;for(Ef=102767;Ef<=102900;Ef++)If[Ef]=0;for(Ef=102901;Ef<=102933;Ef++)If[Ef]=2;for(Ef=102934;Ef<=102950;Ef++)If[Ef]=13;for(Ef=102951;Ef<=102960;Ef++)If[Ef]=0;for(Ef=102965;Ef<=102969;Ef++)If[Ef]=0;for(Ef=102971;Ef<=102973;Ef++)If[Ef]=0;for(Ef=102975;Ef<=102989;Ef++)If[Ef]=0;for(Ef=102990;Ef<=102992;Ef++)If[Ef]=1;for(Ef=102997;Ef<=103002;Ef++)If[Ef]=0;for(Ef=103003;Ef<=103008;Ef++)If[Ef]=2;for(Ef=103009;Ef<=103011;Ef++)If[Ef]=0;for(Ef=103012;Ef<=103014;Ef++)If[Ef]=2;for(Ef=103019;Ef<=103021;Ef++)If[Ef]=0;for(Ef=103022;Ef<=103024;Ef++)If[Ef]=2;for(Ef=103029;Ef<=103031;Ef++)If[Ef]=0;for(Ef=103032;Ef<=103034;Ef++)If[Ef]=2;for(Ef=103065;Ef<=103068;Ef++)If[Ef]=0;for(Ef=103074;Ef<=103076;Ef++)If[Ef]=0;for(Ef=103077;Ef<=103079;Ef++)If[Ef]=1;for(Ef=103080;Ef<=103082;Ef++)If[Ef]=0;for(Ef=103083;Ef<=103085;Ef++)If[Ef]=2;for(Ef=103090;Ef<=103093;Ef++)If[Ef]=0;for(Ef=103097;Ef<=103099;Ef++)If[Ef]=0;for(Ef=103100;Ef<=103102;Ef++)If[Ef]=2;for(Ef=103107;Ef<=103109;Ef++)If[Ef]=0;for(Ef=103110;Ef<=103112;Ef++)If[Ef]=2;for(Ef=103113;Ef<=103116;Ef++)If[Ef]=0;for(Ef=103117;Ef<=103120;Ef++)If[Ef]=2;for(Ef=103153;Ef<=103157;Ef++)If[Ef]=0;for(Ef=103158;Ef<=103162;Ef++)If[Ef]=2;for(Ef=103163;Ef<=103165;Ef++)If[Ef]=0;for(Ef=103166;Ef<=103168;Ef++)If[Ef]=1;for(Ef=103169;Ef<=103171;Ef++)If[Ef]=2;for(Ef=103186;Ef<=103188;Ef++)If[Ef]=0;for(Ef=103189;Ef<=103191;Ef++)If[Ef]=2;for(Ef=103192;Ef<=103195;Ef++)If[Ef]=0;for(Ef=103196;Ef<=103199;Ef++)If[Ef]=2;for(Ef=103200;Ef<=103224;Ef++)If[Ef]=0;for(Ef=103225;Ef<=103227;Ef++)If[Ef]=1;for(Ef=103232;Ef<=103237;Ef++)If[Ef]=0;for(Ef=103238;Ef<=103243;Ef++)If[Ef]=2;for(Ef=103244;Ef<=103246;Ef++)If[Ef]=0;for(Ef=103247;Ef<=103249;Ef++)If[Ef]=2;for(Ef=103254;Ef<=103256;Ef++)If[Ef]=0;for(Ef=103257;Ef<=103259;Ef++)If[Ef]=2;for(Ef=103264;Ef<=103266;Ef++)If[Ef]=0;for(Ef=103267;Ef<=103269;Ef++)If[Ef]=2;for(Ef=103300;Ef<=103375;Ef++)If[Ef]=0;for(Ef=103381;Ef<=103383;Ef++)If[Ef]=0;for(Ef=103384;Ef<=103386;Ef++)If[Ef]=1;for(Ef=103387;Ef<=103389;Ef++)If[Ef]=0;for(Ef=103390;Ef<=103392;Ef++)If[Ef]=2;for(Ef=103397;Ef<=103399;Ef++)If[Ef]=0;for(Ef=103400;Ef<=103471;Ef++)If[Ef]=2;for(Ef=103476;Ef<=103478;Ef++)If[Ef]=0;for(Ef=103479;Ef<=103481;Ef++)If[Ef]=2;for(Ef=103486;Ef<=103488;Ef++)If[Ef]=0;for(Ef=103489;Ef<=103491;Ef++)If[Ef]=2;for(Ef=103492;Ef<=103495;Ef++)If[Ef]=0;for(Ef=103496;Ef<=103499;Ef++)If[Ef]=2;for(Ef=103528;Ef<=103543;Ef++)If[Ef]=0;for(Ef=103544;Ef<=103548;Ef++)If[Ef]=2;for(Ef=103549;Ef<=103551;Ef++)If[Ef]=0;for(Ef=103552;Ef<=103554;Ef++)If[Ef]=1;for(Ef=103555;Ef<=103557;Ef++)If[Ef]=2;for(Ef=103558;Ef<=103560;Ef++)If[Ef]=0;for(Ef=103571;Ef<=103573;Ef++)If[Ef]=0;for(Ef=103574;Ef<=103576;Ef++)If[Ef]=2;for(Ef=103577;Ef<=103580;Ef++)If[Ef]=0;for(Ef=103581;Ef<=103583;Ef++)If[Ef]=2;for(Ef=103595;Ef<=103694;Ef++)If[Ef]=0;for(Ef=103696;Ef<=103699;Ef++)If[Ef]=0;for(Ef=103700;Ef<=103793;Ef++)If[Ef]=2;for(Ef=103794;Ef<=103872;Ef++)If[Ef]=0;for(Ef=103900;Ef<=103971;Ef++)If[Ef]=2;const Cf={102113:!0,102100:!0,3857:!0,3785:!0},Of={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},Af='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Pf=[-20037508.342788905,20037508.342788905],Rf=[-20037508.342787,20037508.342787],Lf={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Pf,origin:Rf,dx:1e-5},102100:{wkTemplate:Af,valid:Pf,origin:Rf,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Pf,origin:Rf,dx:1e-5},3857:{wkTemplate:Af,valid:Pf,origin:Rf,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Df(e,t){return!xa(e)&&!xa(t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||Vf(e)&&Vf(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function Nf(e){return Bf(e)&&e.wkid?Lf[e.wkid]:null}function Ff(e){return!!Bf(e)&&(e.wkid?null==If[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function jf(e){return Bf(e)&&4326===e.wkid}function $f(e){return Bf(e)&&e.wkid===Tf.CGCS2000}function Vf(e){return Bf(e)&&null!=e.wkid&&!0===Cf[e.wkid]}function zf(e){return e===Tf.GCSMARS2000||e===Tf.GCSMARS2000_SPHERE}function Uf(e){return Bf(e)&&null!=e.wkid&&zf(e.wkid)}function qf(e){return e===Tf.GCSMOON2000}function Gf(e){return Bf(e)&&null!=e.wkid&&qf(e.wkid)}function Bf(e){return _a(e)&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}const Wf={wkid:4326,wkt:Ol(Lf[4326].wkTemplate,{Central_Meridian:"0.0"})};var Hf;let Jf=Hf=class extends tp{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return Hf.WebMercator;if(4326===e.wkid)return Hf.WGS84}const t=new Hf;return t.read(e),t}normalizeCtorArgs(e){return e&&"object"==typeof e?e:{["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return jf(this)}get isWebMercator(){return Vf(this)}get isGeographic(){return Ff(this)}get isWrappable(){return function(e){return Bf(e)&&null!=e.wkid&&!0===Of[e.wkid]}(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Hf.WGS84)return Hf.WGS84;if(this===Hf.WebMercator)return Hf.WebMercator;const e=new Hf;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ol(this.imageCoordinateSystem)),e}equals(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return null==t||r?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return Df(this,e)}toJSON(e){return this.write(void 0,e)}};Jf.GCS_NAD_1927=null,Jf.WGS84=null,Jf.WebMercator=null,Jf.PlateCarree=null,bl([Lh({readOnly:!0})],Jf.prototype,"isWGS84",null),bl([Lh({readOnly:!0})],Jf.prototype,"isWebMercator",null),bl([Lh({readOnly:!0})],Jf.prototype,"isGeographic",null),bl([Lh({readOnly:!0})],Jf.prototype,"isWrappable",null),bl([Lh({type:Ch,json:{write:!0}})],Jf.prototype,"latestWkid",void 0),bl([Lh({type:Ch,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],Jf.prototype,"wkid",void 0),bl([Lh({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],Jf.prototype,"wkt",void 0),bl([Mf("wkt"),Mf("web-scene","wkt")],Jf.prototype,"writeWkt",null),bl([Lh({type:Ch,json:{write:!0}})],Jf.prototype,"vcsWkid",void 0),bl([Lh({type:Ch,json:{write:!0}})],Jf.prototype,"latestVcsWkid",void 0),bl([Lh()],Jf.prototype,"imageCoordinateSystem",void 0),Jf=Hf=bl([md("esri.geometry.SpatialReference")],Jf),Jf.prototype.toJSON.isDefaultToJSON=!0,Jf.GCS_NAD_1927=new Jf({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Jf.WGS84=new Jf(Wf),Jf.WebMercator=new Jf({wkid:102100,latestWkid:3857}),Jf.PlateCarree=new Jf({wkid:32662}),Object.freeze&&(Object.freeze(Jf.GCS_NAD_1927),Object.freeze(Jf.WGS84),Object.freeze(Jf.WebMercator));const Yf=Jf,Zf="20220404",Kf="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b",Xf="4.23",Qf={async request(e,t){var i;const{default:r}=await Promise.resolve().then((function(){return km})),n=e.options,o=n.responseType;n.signal=null==t?void 0:t.signal,n.responseType="native"===o||"native-request-init"===o?"native-request-init":["blob","json","text"].includes(o)&&null!=(i=Up(e.url))&&i.after?o:"array-buffer";const s=await r(e.url,n),a={data:s.data,ssl:s.ssl};switch(s.requestOptions.responseType){case"native-request-init":return delete a.data.signal,a;case"blob":a.data=await a.data.arrayBuffer();break;case"json":a.data=(new TextEncoder).encode(JSON.stringify(a.data)).buffer;break;case"text":a.data=(new TextEncoder).encode(a.data).buffer}return{result:a,transferList:[a.data]}}};let em;function tm(e){em=e}function im(e){const t=em&&em.findCredential(e);return t&&t.token?wf(e,"token",t.token):e}wa("host-webworker")||(wa("edge")||wa("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const rm=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function nm(e){const t=Zp(e,!0);return t&&t.endsWith(".arcgis.com")&&!rm.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function om(e,t,i=!1,r){return new Promise(((n,o)=>{if(Kc(r))return void o(sm());let s=()=>{c(),o(new Error(`Unable to load ${t}`))},a=()=>{const t=e;c(),n(t)},l=()=>{if(!e)return;const t=e;c(),t.src="",o(sm())};const c=()=>{wa("esri-image-decode")||(e.removeEventListener("error",s),e.removeEventListener("load",a)),s=null,a=null,e=null,_a(r)&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(t)};_a(r)&&r.addEventListener("abort",l),wa("esri-image-decode")?e.decode().then(a,s):(e.addEventListener("error",s),e.addEventListener("load",a))}))}function sm(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function am(e,t){var i;const r=Qp(e),n=Xp(e);n||r||(e=Jp(e));const o={url:e,requestOptions:{...t}};let s=Up(e);if(s){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(e){i=ym("request:interceptor",e,t)}if((r instanceof Error||r instanceof Ac)&&(i=ym("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}(s,o);if(null!=e)return{data:e,getHeader:fm,requestOptions:o.requestOptions,url:o.url};s.after||s.error||(s=null)}if(e=o.url,"image"===(t=o.requestOptions).responseType){if(wa("host-webworker")||wa("host-node"))throw ym("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),o)}else if(r)throw ym("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),o);if("head"===t.method){if(t.body)throw ym("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),o);if(r||n)throw ym("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),o)}if(await async function(){wa("host-webworker")?lm||(lm=await import("./chunks/request-31fd1b47.js")):am._abortableFetch||(am._abortableFetch=globalThis.fetch.bind(globalThis))}(),lm)return lm.execute(e,t);const a=new AbortController;eu(t,(()=>a.abort()));const l={controller:a,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:s,params:o,redoRequest:!1,useIdentity:cm.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},c=await async function(e){var t,i;let r,n;await async function(e){const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,n=i.body;let o=null,s=null,a=null;if(um&&"HTMLFormElement"in globalThis&&(n instanceof FormData?o=n:n instanceof HTMLFormElement&&(s=n,o=new FormData(s))),"string"==typeof n&&(a=n),e.fetchOptions={cache:i.cacheBust&&!am._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:"head"===i.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:r},(o||a)&&(e.fetchOptions.body=o||a),"anonymous"===i.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query&&i.query.token||o&&o.get&&o.get("token")||s&&s.elements.token),!e.hasToken&&vl.apiKey&&nm(t)&&(i.query||(i.query={}),i.query.token=vl.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!bm(t)&&!Kc(r)){let n;"immediate"===i.authMode?(await vm(),n=await em.getCredential(t,{signal:r}),e.credential=n):"no-prompt"===i.authMode?(await vm(),n=await em.getCredential(t,{prompt:!1,signal:r}).catch((()=>{})),e.credential=n):em&&(n=em.findCredential(t)),n&&(e.credentialToken=n.token,e.useSSL=!!n.ssl)}}(e);try{do{[r,n]=await wm(e)}while(!await xm(e,r,n))}catch(t){const i=ym("request:server",t,e.params,r);throw i.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(i),i}const o=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(o)&&!e.hasToken&&!e.credentialToken&&null!=(t=n)&&null!=(i=t.user)&&i.username&&!Gp(o)){const e=Zp(o,!0);e&&cm.trustedServers.push(e)}const s=e.credential;if(s&&em){const e=em.findServerInfo(s.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=em.findCredential(t,s.userId);e&&-1===em._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:n,getHeader:r?e=>r.headers.get(e):fm,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(l);return null==(i=s)||null==i.after||i.after(c),c}let lm;const cm=vl.request,um="FormData"in globalThis,hm=[499,498,403,401],dm=["COM_0056","COM_0057","SB_0008"],pm=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],fm=()=>null,mm=Symbol();function gm(e){const t=Zp(e);return!t||t.endsWith(".arcgis.com")||am._corsServers.includes(t)||Gp(t)}function ym(e,t,i,r){let n="Error";const o={url:i.url,requestOptions:i.requestOptions,getHeader:fm,ssl:!1};if(t instanceof Ac)return t.details?(t.details=ol(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const e=r&&(e=>r.headers.get(e)),i=r&&r.status,s=t.message;s&&(n=s),e&&(o.getHeader=e),o.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||i||0,o.subCode=t.subcode,o.messageCode=t.messageCode,"string"==typeof t.details?o.messages=[t.details]:o.messages=t.details,o.raw=mm in t?t[mm]:t}return ru(t)?Jc():new Ac(e,n,o)}async function vm(){em||await import("./chunks/IdentityManager-8059aeae.js")}function bm(e){return pm.some((t=>t.test(e)))}async function wm(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,n=Xp(t)||Qp(t),o=i.responseType||"json",s=n?0:null!=i.timeout?i.timeout:cm.timeout;let a=!1;if(!n){e.useSSL&&(t=uf(t)),i.cacheBust&&"default"===r.cache&&(t=wf(t,"request.preventCache",Date.now()));let n={...i.query};e.credentialToken&&(n.token=e.credentialToken);let o=Lp(n);wa("esri-url-encodes-apostrophe")&&(o=o.replace(/'/g,"%27"));const s=t.length+1+o.length;let l;a="delete"===i.method||"post"===i.method||"put"===i.method||!!i.body||s>cm.maxUrlLength;const c=i.useProxy||!!$p(t);if(c){const e=function(e=!1){let t,i=fp.proxyUrl;if("string"==typeof e){t=cf(e);const r=$p(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw pp.warn(mp),new Ac("urlutils:proxy-not-set",mp);return t&&hf()&&(i=uf(i)),Ap(i)}(t);l=e.path,!a&&l.length+1+s>cm.maxUrlLength&&(a=!0),e.query&&(n={...e.query,...n})}if("HEAD"===r.method&&(a||c)){if(a){if(s>cm.maxUrlLength)throw ym("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw ym("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(c)throw ym("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method="delete"===i.method?"DELETE":"put"===i.method?"PUT":"POST",i.body?t=_f(t,n):(r.body=Lp(n),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=_f(t,n),c&&(e.useProxy=!0,t=`${l}?${t}`),n.token&&um&&r.body instanceof FormData){const e=r.body;e.set?e.set("token",n.token):e.append("token",n.token)}if(i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!qp(t,Cp()))if(Gp(t))e.withCredentials=!0;else if(em){const i=em.findServerInfo(t);i&&i.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(r.credentials="include")}let l,c,u=0,h=!1;s>0&&(u=setTimeout((()=>{h=!0,e.controller.abort()}),s));try{if("native-request-init"===i.responseType)c=r,c.url=t;else if("image"!==i.responseType||"default"!==r.cache||"GET"!==r.method||a||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(i.headers)||!n&&!e.useProxy&&cm.proxyUrl&&!gm(t)){if(l=await am._abortableFetch(t,r),e.useProxy||function(e){const t=Zp(e);t&&!am._corsServers.includes(t)&&am._corsServers.push(t)}(t),"native"===i.responseType)c=l;else if("HEAD"!==r.method)if(l.ok){switch(o){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(u&&(clearTimeout(u),u=0),"json"===o||"xml"===o||"document"===o)if(c)switch(o){case"json":c=JSON.parse(c);break;case"xml":c=_m(c,"application/xml");break;case"document":c=_m(c,"text/html")}else c=null;if(c){if("array-buffer"===o||"blob"===o){const e=l.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&c["blob"===o?"size":"byteLength"]<=750)try{const e=await new Response(c).json();e.error&&(c=e)}catch{}}"image"===o&&c instanceof Blob&&(c=await Sm(URL.createObjectURL(c),e,!0))}}else c=await l.text()}else c=await Sm(t,e)}catch(r){if("AbortError"===r.name){if(h)throw new Error("Timeout exceeded");throw Jc("Request canceled")}if(!(!l&&r instanceof TypeError&&cm.proxyUrl)||i.body||"delete"===i.method||"head"===i.method||"post"===i.method||"put"===i.method||e.useProxy||gm(t))throw r;e.redoRequest=!0,function(e){const t={proxyUrl:e.proxyUrl,urlPrefix:jp(e.urlPrefix)},i=fp.proxyRules,r=t.urlPrefix;let n=i.length;for(let e=0;e<i.length;e++){const t=i[e].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return-1;n=e;break}0===t.indexOf(r)&&(n=e+1)}i.splice(n,0,t)}({proxyUrl:cm.proxyUrl,urlPrefix:Zp(t)})}finally{u&&clearTimeout(u)}return[l,c]}function _m(e,t){let i;try{i=(new DOMParser).parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function xm(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||"native"===r.responseType||"native-request-init"===r.responseType)return!0;let n,o,s,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[mm]=i,n;null!=i&&i.error&&(n=i.error),n&&(o=Number(n.code),s=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const l=r.authMode;if(403===o&&(4===s||n.message&&n.message.toLowerCase().indexOf("ssl")>-1&&-1===n.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==l||498===o)&&-1!==hm.indexOf(o)&&!bm(e.params.url)&&(403!==o||-1===dm.indexOf(a)&&(null==s||2===s&&e.credentialToken))){await vm();try{const t=await em.getCredential(e.params.url,{error:ym("request:server",n,e.params),prompt:"no-prompt"!==l,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===l)return e.credential=null,e.credentialToken=null,!1;n=t}}if(n)throw n;return!0}function Sm(e,t,i=!1){const r=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.src=e,om(n,e,i,r)}am._abortableFetch=null,am._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var km=Object.freeze({__proto__:null,default:am});function Mm(e,t,i){let r,n;return void 0===t||Array.isArray(t)?(n=e,i=t,r=[void 0]):(n=t,r=Array.isArray(e)?e:[e]),(e,t)=>{const o=e.constructor.prototype;r.forEach((r=>{const s=Dh(e,r,n);s.read&&"object"==typeof s.read||(s.read={}),s.read.reader=o[t],i&&(s.read.source=(s.read.source||[]).concat(i))}))}}let Tm=class extends tp{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Yf.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Yf)return e;if(null!=e){const i=new Yf;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};bl([Lh()],Tm.prototype,"type",void 0),bl([Lh({readOnly:!0})],Tm.prototype,"cache",null),bl([Lh({readOnly:!0})],Tm.prototype,"extent",null),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Tm.prototype,"hasM",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Tm.prototype,"hasZ",void 0),bl([Lh({type:Yf,json:{write:!0}})],Tm.prototype,"spatialReference",void 0),bl([Mm("spatialReference")],Tm.prototype,"readSpatialReference",null),Tm=bl([md("esri.geometry.Geometry")],Tm);const Em=Tm,Im=Object.prototype.toString;function Cm(e){const t="__accessorMetadata__"in e?xh(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Om.apply(this,e)}}function Om(e,t,i,r){Ql(e,t).cast=r}function Am(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===Im.call(e[0])?Cm(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return function(t,i){Ql(t,e).cast=t[i]}}(e[0]):void 0}class Pm{constructor(e,t,i,r){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=i;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=r||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Rm=new Pm(6378137,1/298.257223563,3e5,.006694379990137799),Lm=new Pm(3396190,1/169.8944472236118,23e4),Dm=new Pm(1737400,0,0);function Nm(e){return 57.29577951308232*e}function Fm(e){return.017453292519943*e}function jm(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Rm.radius))}function $m(e){return null!=e.wkid||null!=e.wkt}const Vm=[0,0];function zm(e,t,i,r,n){const o=e,s=n;if(s.spatialReference=i,"x"in o&&"x"in s)[s.x,s.y]=t(o.x,o.y,Vm,r);else if("xmin"in o&&"xmin"in s)[s.xmin,s.ymin]=t(o.xmin,o.ymin,Vm,r),[s.xmax,s.ymax]=t(o.xmax,o.ymax,Vm,r);else if("paths"in o&&"paths"in s||"rings"in o&&"rings"in s){const e="paths"in o?o.paths:o.rings,i=[];let n;for(let o=0;o<e.length;o++){const s=e[o];n=[],i.push(n);for(let e=0;e<s.length;e++)n.push(t(s[e][0],s[e][1],[0,0],r)),s[e].length>2&&n[e].push(s[e][2]),s[e].length>3&&n[e].push(s[e][3])}"paths"in s?s.paths=i:s.rings=i}else if("points"in o&&"points"in s){const e=o.points,i=[];for(let n=0;n<e.length;n++)i[n]=t(e[n][0],e[n][1],[0,0],r),e[n].length>2&&i[n].push(e[n][2]),e[n].length>3&&i[n].push(e[n][3]);s.points=i}return n}function Um(e,t){const i=e&&($m(e)?e:e.spatialReference),r=t&&($m(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!i||!r)&&(!!Df(r,i)||Vf(r)&&jf(i)||Vf(i)&&jf(r))}function qm(e,t){if(xa(e))return null;const i=e.spatialReference,r=t&&($m(t)?t:t.spatialReference);return Um(i,r)?Df(i,r)?ol(e):Vf(r)?zm(e,Gm,Yf.WebMercator,!1,ol(e)):jf(r)?zm(e,Bm,Yf.WGS84,!1,ol(e)):null:null}function Gm(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=Fm(t);return i[0]=Fm(e)*Rm.radius,i[1]=Rm.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Bm(e,t,i=[0,0],r=!1){const n=Nm(e/Rm.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=Nm(Math.PI/2-2*Math.atan(Math.exp(-t/Rm.radius))),i}function Wm(e,t=!1,i=ol(e)){return zm(e,Gm,Yf.WebMercator,t,i)}function Hm(e,t=!1,i=ol(e)){return zm(e,Bm,Yf.WGS84,t,i)}var Jm;const Ym=[0,0];function Zm(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const Km=Dl.getLogger("esri.geometry.Point");let Xm=Jm=class extends Em{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,n){let o;if(Array.isArray(e))o=e,n=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,i=o.z,r=o.m,(n=o.spatialReference)&&"esri.geometry.SpatialReference"!==n.declaredClass&&(n=new Yf(n)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)Km.warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)Km.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&n&&n.isWebMercator){const i=Gm(o.longitude,o.latitude,Ym);e=i[0],t=i[1]}}else Zm(i)?(n=i,i=null):Zm(r)&&(n=r,r=null);const s={x:e,y:t};return null==s.x&&null!=s.y?Km.warn(".y=","Y coordinate was defined without an X coordinate"):null==s.y&&null!=s.x&&Km.warn(".x=","X coordinate was defined without a Y coordinate"),null!=n&&(s.spatialReference=n),null!=i&&(s.z=i),null!=r&&(s.m=r),s}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return Bm(t,i,Ym)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Gm(i,e,Ym)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return Bm(e,t,Ym)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Gm(e,t,Ym)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return"string"==typeof e?NaN:e}clone(){const e=new Jm;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Jm.copy(e,this),this}equals(e){if(xa(e))return!1;const{x:t,y:i,z:r,m:n,spatialReference:o}=this,{z:s,m:a}=e;let{x:l,y:c,spatialReference:u}=e;if(!o.equals(u))if(o.isWebMercator&&u.isWGS84)[l,c]=Gm(l,c),u=o;else{if(!o.isWGS84||!u.isWebMercator)return!1;[l,c]=Bm(l,c),u=o}return t===l&&i===c&&r===s&&n===a&&o.wkid===u.wkid}offset(e,t,i){return function(e,t,i,r){var n;return e.x=e.x+t,e.y=e.y+i,null!=r&&(e.z=(null!=(n=e.z)?n:0)+r),e}(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=Nf(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,n=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/n),t-=o*n):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n),this._set("x",t),this}distance(e){return function(e,t){const i=e.x-t.x,r=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+n*n)}(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};bl([Lh({readOnly:!0})],Xm.prototype,"cache",null),bl([Lh({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xm.prototype,"hasM",null),bl([Lh({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xm.prototype,"hasZ",null),bl([Lh({type:Number})],Xm.prototype,"latitude",null),bl([Lh({type:Number})],Xm.prototype,"longitude",null),bl([Lh({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Am((e=>isNaN(e)?e:hh(e)))],Xm.prototype,"x",void 0),bl([Mf("x")],Xm.prototype,"writeX",null),bl([Mm("x")],Xm.prototype,"readX",null),bl([Lh({type:Number,json:{write:!0}})],Xm.prototype,"y",void 0),bl([Lh({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xm.prototype,"z",void 0),bl([Lh({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xm.prototype,"m",void 0),Xm=Jm=bl([md("esri.geometry.Point")],Xm),Xm.prototype.toJSON.isDefaultToJSON=!0;const Qm=Xm,eg=[0,0];function tg(e,t){return!!_a(t)&&og(e,t.x,t.y,t.z)}function ig(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!rg(e,i))return!1;return!0}function rg(e,t){return og(e,t[0],t[1])}function ng(e,t){return og(e,t[0],t[1],t[2])}function og(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(null==r||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function sg(e,t){return eg[1]=t.y,eg[0]=t.x,ag(e,eg)}function ag(e,t){return function(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return lg(!1,e,t);let i=!1;for(let r=0,n=e.length;r<n;r++)i=lg(i,e[r],t);return i}(e.rings,t)}function lg(e,t,i){const[r,n]=i;let o=e,s=0;for(let e=0,i=t.length;e<i;e++){s++,s===i&&(s=0);const[a,l]=t[e],[c,u]=t[s];(l<n&&u>=n||u<n&&l>=n)&&a+(n-l)/(u-l)*(c-a)<r&&(o=!o)}return o}function cg(e,t){return tg(e,t)}function ug(e,t){const i=e.hasZ&&t.hasZ;let r,n,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ)if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1;return!0}function hg(e,t){const{points:i,hasZ:r}=t,n=r?ng:rg;for(const t of i)if(n(e,t))return!0;return!1}const dg=[0,0],pg=[0,0],fg=[0,0],mg=[0,0],gg=[dg,pg,fg,mg],yg=[[fg,dg],[dg,pg],[pg,mg],[mg,fg]];function vg(e,t){dg[0]=e.xmin,dg[1]=e.ymax,pg[0]=e.xmax,pg[1]=e.ymax,fg[0]=e.xmin,fg[1]=e.ymin,mg[0]=e.xmax,mg[1]=e.ymin;for(const e of gg)if(ag(t,e))return!0;for(const i of t.rings){if(!i.length)continue;let t=i[0];if(rg(e,t))return!0;for(let r=1;r<i.length;r++){const n=i[r];if(rg(e,n)||_g(t,n,yg))return!0;t=n}}return!1}function bg(e,t){dg[0]=e.xmin,dg[1]=e.ymax,pg[0]=e.xmax,pg[1]=e.ymax,fg[0]=e.xmin,fg[1]=e.ymin,mg[0]=e.xmax,mg[1]=e.ymin;const i=t.paths;for(const t of i){if(!i.length)continue;let r=t[0];if(rg(e,r))return!0;for(let i=1;i<t.length;i++){const n=t[i];if(rg(e,n)||_g(r,n,yg))return!0;r=n}}return!1}const wg=[0,0];function _g(e,t,i){for(let r=0;r<i.length;r++)if(xg(e,t,i[r][0],i[r][1]))return!0;return!1}function xg(e,t,i,r,n){const[o,s]=e,[a,l]=t,[c,u]=i,[h,d]=r,p=h-c,f=o-c,m=a-o,g=d-u,y=s-u,v=l-s,b=g*m-p*v;if(0===b)return!1;const w=(p*y-g*f)/b,_=(m*y-v*f)/b;return w>=0&&w<=1&&_>=0&&_<=1&&(n&&(n[0]=o+w*(a-o),n[1]=s+w*(l-s)),!0)}function Sg(e){switch(e){case"esriGeometryEnvelope":case"extent":return ug;case"esriGeometryMultipoint":case"multipoint":return hg;case"esriGeometryPoint":case"point":return cg;case"esriGeometryPolygon":case"polygon":return vg;case"esriGeometryPolyline":case"polyline":return bg}}var kg;function Mg(e,t,i){return null==t?i:null==i?t:e(t,i)}let Tg=kg=class extends Em{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,n){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?Yf.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:null==n?Yf.WGS84:n}}static fromBounds(e,t){return new kg({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new kg({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Qm({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new kg;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Um(t,i)&&(e=t.isWebMercator?Wm(e):Hm(e,!0)),"point"===e.type?tg(this,e):"extent"===e.type&&function(e,t){const{xmin:i,ymin:r,zmin:n,xmax:o,ymax:s,zmax:a}=t;return e.hasZ&&t.hasZ?og(e,i,r,n)&&og(e,i,s,n)&&og(e,o,s,n)&&og(e,o,r,n)&&og(e,i,r,a)&&og(e,i,s,a)&&og(e,o,s,a)&&og(e,o,r,a):og(e,i,r)&&og(e,i,s)&&og(e,o,s)&&og(e,o,r)}(this,e)}equals(e){if(this===e)return!0;if(xa(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Um(t,i)&&(e=t.isWebMercator?Wm(e):Hm(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const e=(this.zmax-this.zmin)*t;this.zmin+=e,this.zmax-=e}if(this.hasM){const e=(this.mmax-this.mmin)*t;this.mmin+=e,this.mmax-=e}return this}intersects(e){if(xa(e))return!1;"mesh"===e.type&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Um(t,i)&&(e=t.isWebMercator?Wm(e):Hm(e,!0)),Sg(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=i&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mg(Math.min,this.zmin,e.zmin),this.zmax=Mg(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mg(Math.min,this.mmin,e.mmin),this.mmax=Mg(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:xa(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mg(Math.max,this.zmin,e.zmin),this.zmax=Mg(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mg(Math.max,this.mmin,e.mmin),this.mmax=Mg(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Nf(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?Hm(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new Yf(Ol(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||Nf(r)))return this;const n=this._getParts(i).map((e=>e.extent));if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return n;let o=!0,s=!0;return n.forEach((e=>{e.hasZ||(o=!1),e.hasM||(s=!1)})),{rings:n.map((e=>{const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(o){const i=(e.zmax-e.zmin)/2;for(let e=0;e<t.length;e++)t[e].push(i)}if(s){const i=(e.mmax-e.mmin)/2;for(let e=0;e<t.length;e++)t[e].push(i)}return t})),hasZ:o,hasM:s,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:r,spatialReference:n}=this,o=this.width,s=this.xmin,a=this.xmax;let l;e=e||Nf(n);const[c,u]=e.valid;l=this._normalizeX(this.xmin,e);const h=l.x,d=l.frameId;l=this._normalizeX(this.xmax,e);const p=l.x,f=l.frameId,m=h===p&&o>0;if(o>2*u){const e=new kg(s<a?h:p,i,u,r,n),o=new kg(c,i,s<a?p:h,r,n),l=new kg(0,i,u,r,n),m=new kg(c,i,0,r,n),g=[],y=[];e.contains(l)&&g.push(d),e.contains(m)&&y.push(d),o.contains(l)&&g.push(f),o.contains(m)&&y.push(f);for(let e=d+1;e<f;e++)g.push(e),y.push(e);t.push({extent:e,frameIds:[d]},{extent:o,frameIds:[f]},{extent:l,frameIds:g},{extent:m,frameIds:y})}else h>p||m?t.push({extent:new kg(h,i,u,r,n),frameIds:[d]},{extent:new kg(c,i,p,r,n),frameIds:[f]}):t.push({extent:new kg(h,i,p,r,n),frameIds:[d]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const e={};i&&(e.zmin=this.zmin,e.zmax=this.zmax),r&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let i=0;i<t.length;i++)t[i].extent.set(e)}return t}_normalizeX(e,t){const[i,r]=t.valid,n=2*r;let o,s=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,s=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,s=-o),{x:e,frameId:s}}};bl([Lh({readOnly:!0})],Tg.prototype,"cache",null),bl([Lh({readOnly:!0})],Tg.prototype,"center",null),bl([Lh({readOnly:!0})],Tg.prototype,"extent",null),bl([Lh({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Tg.prototype,"hasM",null),bl([Lh({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Tg.prototype,"hasZ",null),bl([Lh({readOnly:!0})],Tg.prototype,"height",null),bl([Lh({readOnly:!0})],Tg.prototype,"width",null),bl([Lh({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Tg.prototype,"xmin",void 0),bl([Lh({type:Number,json:{write:!0}})],Tg.prototype,"ymin",void 0),bl([Lh({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Tg.prototype,"mmin",void 0),bl([Lh({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Tg.prototype,"zmin",void 0),bl([Lh({type:Number,json:{write:!0}})],Tg.prototype,"xmax",void 0),bl([Lh({type:Number,json:{write:!0}})],Tg.prototype,"ymax",void 0),bl([Lh({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Tg.prototype,"mmax",void 0),bl([Lh({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Tg.prototype,"zmax",void 0),Tg=kg=bl([md("esri.geometry.Extent")],Tg),Tg.prototype.toJSON.isDefaultToJSON=!0;const Eg=Tg;var Ig,Cg,Og;let Ag;const Pg=null!=(Ig=null==(Cg=globalThis.esriConfig)?void 0:Cg.locale)?Ig:null==(Og=globalThis.dojoConfig)?void 0:Og.locale;function Rg(){var e,t;return null!=(e=null!=Pg?Pg:null==(t=globalThis.navigator)?void 0:t.language)?e:"en"}function Lg(){return void 0===Ag&&(Ag=Rg()),Ag}const Dg=[];function Ng(e){return Dg.push(e),{remove(){Dg.splice(Dg.indexOf(e),1)}}}const Fg=[];function jg(e){return Fg.push(e),{remove(){Dg.splice(Fg.indexOf(e),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",(function(){const e=null!=undefined?undefined:Rg();Ag!==e&&(Ag=e,[...Fg].forEach((t=>{t.call(null,e)})),[...Dg].forEach((t=>{t.call(null,e)})))}));class $g{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=e,this.options=t,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,i)=>{const r=this.toJSON(e);void 0!==r&&fl(i,r,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(this.apiToJSON.hasOwnProperty(e)){const t=this.apiToJSON[e];return this.options.useNumericKeys?+t:t}return this.options.ignoreUnknown?void 0:e}fromJSON(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}_invertMap(e){const t={};for(const i in e)t[e[i]]=i;return t}_getKeysSorted(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}}function Vg(){return function(e,t){return new $g(e,{ignoreUnknown:!0,...t})}}var zg;const Ug=new $g({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let qg=zg=class extends vd{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}clone(){return new zg({categories:this.categories?ol(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map((e=>Array.isArray(e)?JSON.stringify(e):e))),this.extent){const e=qm(this.extent,Yf.WGS84);_a(e)&&(r=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const o={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map((e=>Ug.toJSON(e.trim()))).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};bl([Lh()],qg.prototype,"categories",void 0),bl([Lh()],qg.prototype,"disableExtraQuery",void 0),bl([Lh({type:Eg})],qg.prototype,"extent",void 0),bl([Lh()],qg.prototype,"filter",void 0),bl([Lh()],qg.prototype,"num",void 0),bl([Lh()],qg.prototype,"query",void 0),bl([Lh()],qg.prototype,"sortField",void 0),bl([Lh()],qg.prototype,"sortOrder",null),bl([Lh()],qg.prototype,"start",void 0),qg=zg=bl([md("esri.portal.PortalQueryParams")],qg);const Gg=qg;let Bg=class extends vd{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};bl([Lh()],Bg.prototype,"nextQueryParams",void 0),bl([Lh()],Bg.prototype,"queryParams",void 0),bl([Lh()],Bg.prototype,"results",void 0),bl([Lh()],Bg.prototype,"total",void 0),Bg=bl([md("esri.portal.PortalQueryResult")],Bg);const Wg=Bg;let Hg=class extends tp{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Ac("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};bl([Lh({type:Date})],Hg.prototype,"created",void 0),bl([Lh()],Hg.prototype,"id",void 0),bl([Lh()],Hg.prototype,"portal",void 0),bl([Lh()],Hg.prototype,"title",void 0),bl([Lh({readOnly:!0})],Hg.prototype,"url",null),bl([Lh()],Hg.prototype,"username",void 0),Hg=bl([md("esri.portal.PortalFolder")],Hg);const Jg=Hg;let Yg=class extends tp{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then((t=>{const i=t.categorySchema||[];return i.some((e=>"contentCategorySetsGroupQuery.LivingAtlas"===e.source))?this._fetchCategorySchemaSet("LivingAtlas",e):i}))}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Ac("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=xh(Gg,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new Gg,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Gg,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then((e=>{const i=e.contentCategorySetsGroupQuery;if(i){const e=new Gg;return e.disableExtraQuery=!0,e.num=1,e.query=i,this.portal.queryGroups(e,t)}throw new Ac("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((i=>{if(i.total){const r=i.results[0],n=new Gg;return n.num=1,n.query=`typekeywords:"${e}"`,r.queryItems(n,t)}throw new Ac("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((e=>e.total?e.results[0].fetchData("json",t).then((e=>{const t=e&&e.categorySchema;return t&&t.length?t:[]})):[]))}};bl([Lh()],Yg.prototype,"access",void 0),bl([Lh({type:Date})],Yg.prototype,"created",void 0),bl([Lh()],Yg.prototype,"description",void 0),bl([Lh()],Yg.prototype,"id",void 0),bl([Lh()],Yg.prototype,"isInvitationOnly",void 0),bl([Lh({type:Date})],Yg.prototype,"modified",void 0),bl([Lh()],Yg.prototype,"owner",void 0),bl([Lh()],Yg.prototype,"portal",void 0),bl([Lh()],Yg.prototype,"snippet",void 0),bl([Lh()],Yg.prototype,"sortField",void 0),bl([Lh()],Yg.prototype,"sortOrder",void 0),bl([Lh()],Yg.prototype,"tags",void 0),bl([Lh()],Yg.prototype,"thumbnail",void 0),bl([Lh({readOnly:!0})],Yg.prototype,"thumbnailUrl",null),bl([Lh()],Yg.prototype,"title",void 0),bl([Lh({readOnly:!0})],Yg.prototype,"url",null),Yg=bl([md("esri.portal.PortalGroup")],Yg);const Zg=Yg;var Kg,Xg=Object.freeze({__proto__:null,default:Zg});let Qg=Kg=class extends tp{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),null!=i&&("string"==typeof i?n.query.text=i:"object"==typeof i&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+("string"==typeof r?r:r.id)),this.portal._request(o+"/addItem",n).then((e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load())))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then((()=>{e.id=null,e.portal=null}))}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map((e=>e.id));if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then((()=>{e.forEach((e=>{e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then((e=>{let t;return t=e&&e.folders?e.folders.map((e=>{const t=Jg.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchGroups(){return this.portal._request(this.url).then((e=>{let t;return t=e&&e.groups?e.groups.map((e=>{const t=Zg.fromJSON(e);return t.portal=this.portal,t})):[],t}))}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Promise.resolve().then((function(){return yy})).then((({default:r})=>{t=r;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:n})})).then((e=>{let i;return e&&e.items?(i=e.items.map((e=>{const i=t.fromJSON(e);return i.portal=this.portal,i})),Promise.all(i.map((e=>e.load()))).catch((e=>e)).then((()=>({items:i,nextStart:e.nextStart,total:e.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((e=>e.tags))}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new Zg({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Ac("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new Ac("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Kg;return t.sourceJSON=e,t.read(e),t}};bl([Lh()],Qg.prototype,"access",void 0),bl([Lh({type:Date})],Qg.prototype,"created",void 0),bl([Lh()],Qg.prototype,"culture",void 0),bl([Lh()],Qg.prototype,"description",void 0),bl([Lh()],Qg.prototype,"email",void 0),bl([Lh()],Qg.prototype,"favGroupId",void 0),bl([Lh()],Qg.prototype,"fullName",void 0),bl([Lh({type:Date})],Qg.prototype,"modified",void 0),bl([Lh()],Qg.prototype,"orgId",void 0),bl([Lh()],Qg.prototype,"portal",void 0),bl([Lh()],Qg.prototype,"preferredView",void 0),bl([Lh()],Qg.prototype,"privileges",void 0),bl([Lh()],Qg.prototype,"region",void 0),bl([Lh()],Qg.prototype,"role",void 0),bl([Lh()],Qg.prototype,"roleId",void 0),bl([Lh()],Qg.prototype,"sourceJSON",void 0),bl([Lh()],Qg.prototype,"thumbnail",void 0),bl([Lh({readOnly:!0})],Qg.prototype,"thumbnailUrl",null),bl([Lh()],Qg.prototype,"units",void 0),bl([Lh({readOnly:!0})],Qg.prototype,"userContentUrl",null),bl([Lh({readOnly:!0})],Qg.prototype,"url",null),bl([Lh()],Qg.prototype,"username",void 0),bl([Lh()],Qg.prototype,"userType",void 0),Qg=Kg=bl([md("esri.portal.PortalUser")],Qg);const ey=Qg;var ty,iy=Object.freeze({__proto__:null,default:ey});let ry;const ny={PortalGroup:()=>Promise.resolve().then((function(){return Xg})),PortalItem:()=>Promise.resolve().then((function(){return yy})),PortalUser:()=>Promise.resolve().then((function(){return iy}))};let oy=ty=class extends(Qd(lp)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=vl.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)-1===vl.request.trustedServers.indexOf(t)&&vl.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return Tl(Dl.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=ey.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then((function(){return Vy})).then((({default:t})=>{Yc(e),ry=t})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(em){const e=em;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==ty.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on("credential-create",(()=>{e.findCredential(this.restUrl)&&this._signIn()})))}this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){Ml(Dl.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new((await import("./chunks/ClosestFacilityTask-3a491625.js")).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import("./chunks/ElevationLayer-ed1c70cc.js")).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){Ml(Dl.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new((await import("./chunks/GeometryService-8b4726a2.js")).default)({url:e})}async createPrintTask(){Ml(Dl.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new((await import("./chunks/PrintTask-e3048a33.js")).default)(e)}async createRouteTask(){Ml(Dl.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new((await import("./chunks/RouteTask-8828700a.js")).default)(e)}async createServiceAreaTask(){Ml(Dl.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new((await import("./chunks/ServiceAreaTask-b9a2c9af.js")).default)(e)}fetchBasemaps(e,t){const i=new Gg;return i.query=e||(vl.apiKey&&nm(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then((e=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',e.total){const r=e.results[0];return i.sortField=r.sortField||"name",i.sortOrder=r.sortOrder||"desc",r.queryItems(i,t)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new ry({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):Kc(e)?Promise.reject(Jc()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Gg;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const e of t)r.push(`(title:"${e.title}" AND owner:${e.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then((e=>e.results))}return Kc(e)?Promise.reject(Jc()):Promise.resolve([])}fetchRegions(e){var t;const i=(null==(t=this.user)?void 0:t.culture)||this.culture||Lg();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var t;const i=(null==(t=this.user)?void 0:t.culture)||this.culture||Lg();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return ty._default&&!ty._default.destroyed||(ty._default=new ty),ty._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new Ac("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ty({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Ac("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new Ac("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Lg().toLowerCase()},...i};return"auto"===n.authMode&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(r,n)}_queryPortal(e,t,i,r){const n=xh(Gg,t),o=t=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...r}).then((e=>{const i=n.clone();return i.start=e.nextStart,new Wg({nextQueryParams:i,queryParams:n,total:e.total,results:ty._resultsToTypedArray(t,{portal:this},e,r)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>(Xc(t),e)))));return i&&ny[i]?ny[i]().then((({default:e})=>(Yc(r),o(e)))):o()}_signIn(){if(this.authMode===ty.AUTH_MODE_ANONYMOUS)return Promise.reject(new Ac("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e))}));return em?em.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then((e=>{const t=ty._resultsToTypedArray(i,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_readBasemap(e){if(e){const t=ry.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=(this.authMode===ty.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:n=null,cacheBust:o=!1,method:s="auto",responseType:a="json",signal:l}=t,c={authMode:r,body:n,cacheBust:o,method:s,query:i,responseType:a,timeout:0,signal:l};return am(this._normalizeSSL(e),c).then((e=>e.data))}static _resultsToTypedArray(e,t,i,r){let n;if(i){const o=_a(r)?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map((i=>{const r=Object.assign(e?e.fromJSON(i):i,t);return"function"==typeof r.load&&r.load(o),r})))}else n=[];return n}};oy.AUTH_MODE_ANONYMOUS="anonymous",oy.AUTH_MODE_AUTO="auto",oy.AUTH_MODE_IMMEDIATE="immediate",bl([Lh()],oy.prototype,"access",void 0),bl([Lh()],oy.prototype,"allSSL",void 0),bl([Lh()],oy.prototype,"authMode",void 0),bl([Lh()],oy.prototype,"authorizedCrossOriginDomains",void 0),bl([Mm("authorizedCrossOriginDomains")],oy.prototype,"readAuthorizedCrossOriginDomains",null),bl([Lh()],oy.prototype,"basemapGalleryGroupQuery",void 0),bl([Lh()],oy.prototype,"bingKey",void 0),bl([Lh()],oy.prototype,"canListApps",void 0),bl([Lh()],oy.prototype,"canListData",void 0),bl([Lh()],oy.prototype,"canListPreProvisionedItems",void 0),bl([Lh()],oy.prototype,"canProvisionDirectPurchase",void 0),bl([Lh()],oy.prototype,"canSearchPublic",void 0),bl([Lh()],oy.prototype,"canShareBingPublic",void 0),bl([Lh()],oy.prototype,"canSharePublic",void 0),bl([Lh()],oy.prototype,"canSignInArcGIS",void 0),bl([Lh()],oy.prototype,"canSignInIDP",void 0),bl([Lh()],oy.prototype,"colorSetsGroupQuery",void 0),bl([Lh()],oy.prototype,"commentsEnabled",void 0),bl([Lh({type:Date})],oy.prototype,"created",void 0),bl([Lh()],oy.prototype,"credential",void 0),bl([Lh()],oy.prototype,"culture",void 0),bl([Lh()],oy.prototype,"currentVersion",void 0),bl([Lh()],oy.prototype,"customBaseUrl",void 0),bl([Lh()],oy.prototype,"defaultBasemap",void 0),bl([Mm("defaultBasemap")],oy.prototype,"readDefaultBasemap",null),bl([Lh()],oy.prototype,"defaultDevBasemap",void 0),bl([Mm("defaultDevBasemap")],oy.prototype,"readDefaultDevBasemap",null),bl([Lh({type:Eg})],oy.prototype,"defaultExtent",void 0),bl([Lh()],oy.prototype,"defaultVectorBasemap",void 0),bl([Mm("defaultVectorBasemap")],oy.prototype,"readDefaultVectorBasemap",null),bl([Lh()],oy.prototype,"description",void 0),bl([Lh()],oy.prototype,"devBasemapGalleryGroupQuery",void 0),bl([Lh()],oy.prototype,"eueiEnabled",void 0),bl([Lh({readOnly:!0})],oy.prototype,"extraQuery",null),bl([Lh()],oy.prototype,"featuredGroups",void 0),bl([Lh()],oy.prototype,"featuredItemsGroupQuery",void 0),bl([Lh()],oy.prototype,"galleryTemplatesGroupQuery",void 0),bl([Lh()],oy.prototype,"livingAtlasGroupQuery",void 0),bl([Lh()],oy.prototype,"hasCategorySchema",void 0),bl([Lh()],oy.prototype,"helpBase",void 0),bl([Lh()],oy.prototype,"helperServices",void 0),bl([Lh()],oy.prototype,"helpMap",void 0),bl([Lh()],oy.prototype,"homePageFeaturedContent",void 0),bl([Lh()],oy.prototype,"homePageFeaturedContentCount",void 0),bl([Lh()],oy.prototype,"httpPort",void 0),bl([Lh()],oy.prototype,"httpsPort",void 0),bl([Lh()],oy.prototype,"id",void 0),bl([Lh()],oy.prototype,"ipCntryCode",void 0),bl([Lh({readOnly:!0})],oy.prototype,"isOrganization",null),bl([Lh()],oy.prototype,"isPortal",void 0),bl([Lh()],oy.prototype,"isReadOnly",void 0),bl([Lh()],oy.prototype,"layerTemplatesGroupQuery",void 0),bl([Lh()],oy.prototype,"maxTokenExpirationMinutes",void 0),bl([Lh({type:Date})],oy.prototype,"modified",void 0),bl([Lh()],oy.prototype,"name",void 0),bl([Lh()],oy.prototype,"portalHostname",void 0),bl([Lh()],oy.prototype,"portalMode",void 0),bl([Lh()],oy.prototype,"portalProperties",void 0),bl([Lh()],oy.prototype,"region",void 0),bl([Lh({readOnly:!0})],oy.prototype,"restUrl",null),bl([Lh()],oy.prototype,"rotatorPanels",void 0),bl([Lh()],oy.prototype,"showHomePageDescription",void 0),bl([Lh()],oy.prototype,"sourceJSON",void 0),bl([Lh()],oy.prototype,"staticImagesUrl",void 0),bl([Lh({readOnly:!0,json:{read:!1}})],oy.prototype,"stylesGroupQuery",null),bl([Lh({json:{name:"2DStylesGroupQuery"}})],oy.prototype,"stylesGroupQuery2d",void 0),bl([Lh({json:{name:"stylesGroupQuery"}})],oy.prototype,"stylesGroupQuery3d",void 0),bl([Lh()],oy.prototype,"supportsHostedServices",void 0),bl([Lh()],oy.prototype,"symbolSetsGroupQuery",void 0),bl([Lh()],oy.prototype,"templatesGroupQuery",void 0),bl([Lh()],oy.prototype,"thumbnail",void 0),bl([Lh({readOnly:!0})],oy.prototype,"thumbnailUrl",null),bl([Lh()],oy.prototype,"units",void 0),bl([Lh()],oy.prototype,"url",void 0),bl([Lh()],oy.prototype,"urlKey",void 0),bl([Mm("urlKey")],oy.prototype,"readUrlKey",null),bl([Lh()],oy.prototype,"user",void 0),bl([Mm("user")],oy.prototype,"readUser",null),bl([Lh()],oy.prototype,"useStandardizedQuery",void 0),bl([Lh()],oy.prototype,"useVectorBasemaps",void 0),bl([Lh()],oy.prototype,"vectorBasemapGalleryGroupQuery",void 0),oy=ty=bl([md("esri.portal.Portal")],oy);const sy=oy,ay=Dl.getLogger("esri.assets");function ly(e){if(!vl.assetsPath)throw ay.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Ac("assets:path-not-set","config.assetsPath is not set");return Yp(vl.assetsPath,e)}const cy=Dl.getLogger("esri.portal.PortalItemResource");let uy=class extends vd{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){_a(e)&&Kp(e)?cy.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(xa(i))throw new Ac("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:ja(t,"signal")})}async update(e,t){return(await import("./chunks/resourceUtils-8870aea9.js")).addOrUpdateResource(this,"update",e,t)}hasPath(){return _a(this.path)}_normalizePath(e,t){return xa(e)?e:(e=e.replace(/^\/+/,""),_a(t)&&Kp(e)&&(e=Hp(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};bl([Lh()],uy.prototype,"portalItem",void 0),bl([Lh({type:String,value:null})],uy.prototype,"path",null),bl([Am("path")],uy.prototype,"_castPath",null),bl([Lh({type:String,readOnly:!0})],uy.prototype,"url",null),bl([Lh({type:String,readOnly:!0})],uy.prototype,"itemRelativeUrl",null),uy=bl([md("esri.portal.PortalItemResource")],uy);const hy=uy;let dy=class extends vd{constructor(e){super(e),this.created=null,this.rating=null}};bl([Lh()],dy.prototype,"created",void 0),bl([Lh()],dy.prototype,"rating",void 0),dy=bl([md("esri.portal.PortalRating")],dy);const py=dy;var fy;let my=fy=class extends(Qd(lp)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return vh(fy,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return"Feature Service"===e||"Feature Collection"===e?i=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?i=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?i="Scene Layer":"Media Service"===e?i="Media Layer":"Scene Package"===e?i="Scene Layer Package":"Stream Service"===e?i="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?i=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?i="Locator":"Geoenrichment Service"===e?i="GeoEnrichment Service":"Microsoft Powerpoint"===e?i="Microsoft PowerPoint":"GeoJson"===e?i="GeoJSON":"Globe Service"===e?i="Globe Layer":"Vector Tile Service"===e?i="Tile Layer":"netCDF"===e?i="NetCDF":"Map Service"===e?i=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?i=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?i="Big Data File Share":"Compact Tile Package"===e?i="Tile Package (tpkx)":"OGCFeatureServer"===e?i="OGC Feature Layer":"web mapping application"===e&&t.indexOf("configurableApp")>-1&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Eg(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let i,r=!1,n=!1,o=!1,s=!1,a=!1,l=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(r=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(n=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,s=t.indexOf("Markup")>-1,a=-1!==t.indexOf("Spatiotemporal"),l=-1!==t.indexOf("UtilityNetwork"),i=a&&n?"spatiotemporaltable":n?"table":o?"routelayer":s?"markup":a?"spatiotemporal":r?"featureshosted":l?"utilitynetwork":"features"):i="map service"===e||"wms"===e||"wmts"===e?r||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"media service"===e?"mediaservice":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):i="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e&&t.indexOf("configurableApp")>-1?"instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"hub project"===e?"hubproject":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"experience builder widget"===e?"experiencebuilderwidget":"experience builder widget package"===e?"experiencebuilderwidgetpackage":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",i?ly("esri/images/portal/"+i+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=sy.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:_a(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof py&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new py({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ol(this.applicationProxies),avgRating:this.avgRating,categories:ol(this.categories),created:ol(this.created),culture:this.culture,description:this.description,extent:ol(this.extent),groupCategories:ol(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ol(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ol(this.screenshots),size:this.size,snippet:this.snippet,tags:ol(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ol(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new fy({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new py(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},fy)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const e in i.query)null===i.query[e]&&(i.query[e]="");return i.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?i.query.text=t:"object"==typeof t&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new Ac("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if("string"==typeof t)Qp(t)?r.query={data:t}:r.query={url:Wp(t)},_a(i)&&(r.query.filename=i);else{const e=new FormData;_a(i)?e.append("file",t,i):e.append("file",t),r.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new Ac("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await import("./chunks/resourceUtils-8870aea9.js")).fetchResources(this,e,t)}async addResource(e,t,i){const r=await import("./chunks/resourceUtils-8870aea9.js");return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await import("./chunks/resourceUtils-8870aea9.js");if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Ac("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await import("./chunks/resourceUtils-8870aea9.js")).removeAllResources(this,e)}resourceFromPath(e){return new hy({portalItem:this,path:e})}toJSON(){const e=this.extent;return nl({created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url})}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new fy({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};bl([Lh({type:["private","shared","org","public"]})],my.prototype,"access",void 0),bl([Lh()],my.prototype,"accessInformation",void 0),bl([Lh({type:String})],my.prototype,"apiKey",void 0),bl([Lh({json:{read:{source:"appProxies"}}})],my.prototype,"applicationProxies",void 0),bl([Lh()],my.prototype,"avgRating",void 0),bl([Lh()],my.prototype,"categories",void 0),bl([Lh({type:Date})],my.prototype,"created",void 0),bl([Lh()],my.prototype,"culture",void 0),bl([Lh()],my.prototype,"description",void 0),bl([Lh({readOnly:!0})],my.prototype,"displayName",null),bl([Lh({type:Eg})],my.prototype,"extent",void 0),bl([Mm("extent")],my.prototype,"readExtent",null),bl([Lh()],my.prototype,"groupCategories",void 0),bl([Lh({readOnly:!0})],my.prototype,"iconUrl",null),bl([Lh()],my.prototype,"id",void 0),bl([Lh({readOnly:!0})],my.prototype,"isLayer",null),bl([Lh()],my.prototype,"itemControl",void 0),bl([Lh({readOnly:!0})],my.prototype,"itemUrl",null),bl([Lh()],my.prototype,"licenseInfo",void 0),bl([Lh({type:Date})],my.prototype,"modified",void 0),bl([Lh()],my.prototype,"name",void 0),bl([Lh()],my.prototype,"numComments",void 0),bl([Lh()],my.prototype,"numRatings",void 0),bl([Lh()],my.prototype,"numViews",void 0),bl([Lh()],my.prototype,"owner",void 0),bl([Lh()],my.prototype,"ownerFolder",void 0),bl([Lh({type:sy})],my.prototype,"portal",void 0),bl([Lh()],my.prototype,"screenshots",void 0),bl([Lh()],my.prototype,"size",void 0),bl([Lh()],my.prototype,"snippet",void 0),bl([Lh()],my.prototype,"sourceJSON",void 0),bl([Lh()],my.prototype,"tags",void 0),bl([Lh()],my.prototype,"thumbnail",void 0),bl([Lh({readOnly:!0})],my.prototype,"thumbnailUrl",null),bl([Lh()],my.prototype,"title",void 0),bl([Lh()],my.prototype,"type",void 0),bl([Lh()],my.prototype,"typeKeywords",void 0),bl([Lh()],my.prototype,"url",void 0),bl([Lh({readOnly:!0})],my.prototype,"userItemUrl",null),my=fy=bl([md("esri.portal.PortalItem")],my);const gy=my;var yy=Object.freeze({__proto__:null,default:gy});const vy=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,by={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function wy(e){var t;return null!=(t=by[e])&&t}const _y=[],xy=new Map;function Sy(e){for(const t of xy.keys())My(e.pattern,t)&&xy.delete(t)}async function ky(e){const t=Lg();xy.has(e)||xy.set(e,async function(e,t){const i=[];for(const r of _y)if(My(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(e){i.push(e)}if(i.length)throw new Ac("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i});throw new Ac("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const i=xy.get(e);return await Ty.add(i),i}function My(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}jg((()=>{xy.clear()}));const Ty=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ou())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}};const Ey={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return ly("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return ly("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ly("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ly("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return ly("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ly("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return ly("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return ly("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return ly("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return ly("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return ly("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return ly("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return ly("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return ly("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return ly("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return ly("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}},Iy=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Cy=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Oy(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function Ay(e,t){if(t.restrictedWebMapWriting){const i=function(e){return"basemap"===e.layerContainerType?Iy:"operational-layers"===e.layerContainerType?Cy:null}(t);return!_a(i)||i.has(e.type)&&!Oy(e)}return!0}function Py(e,t){"maxScale"in e&&(t.maxScale=id(e.maxScale)),"minScale"in e&&(t.minScale=id(e.minScale))}function Ry(e,t){if(function(e,t){if(Oy(e)){const i=pl("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&Py(e,r)}else"stream"===e.type?Py(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&Py(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=id(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(Oy(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function Ly(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new Ac("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Ay(e,i)){const t={};return e.write(t,i)?t:null}return _a(t)&&Ry(e,t=ol(t)),t}var Dy;let Ny=0;const Fy=Dl.getLogger("esri.Basemap");let jy=Dy=class extends(Qd(lp)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Ny++,this.baseLayers=new Fd,this.referenceLayers=new Fd;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&Fy.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=e=>{e.parent=null};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>i(e.item))),this.referenceLayers.on("after-remove",(e=>i(e.item)))}initialize(){this.when().catch((e=>{Fy.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const e of t)e.destroy();const i=this.referenceLayers.removeAll();for(const e of i)e.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",jd(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e?(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const t=Ly(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);_a(t)&&r.push(t)})),this.referenceLayers.forEach((e=>{const t=Ly(e,i.webmap?i.webmap.getLayerJSONFromResourceInfo(e):null,i);_a(t)&&(t.isReference=!0,r.push(t))})),t.baseMapLayers=r):t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",jd(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return hp(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Dy({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const t=ol(e);return t.url&&af(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&af(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t}))),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;Yc(e);const r=[];if(t){const i=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,i,e)),t.data.id&&!t.data.title){const e=t.data.id;r.push(async function(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,i=await ky("esri/t9n/basemaps");return i[e]||i[t]}(e).then((e=>{e&&this.read({title:e},t.context)})))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||r&&r.portal||null,o=r&&"web-scene"===r.origin?"web-scene":"web-map",{populateOperationalLayers:s}=await import("./chunks/layersCreator-ba6b8e6f.js"),a=[];if(Yc(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const i={context:{origin:o,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},r=s(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),i);a.push(r);const l=s(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),i);a.push(l)}await su(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),n=Ap(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||sy.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||sy.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=Ey[e];if(t){if(t.deprecated){let t=null;"dark-gray"===e?t="dark-gray-vector":"gray"===e?t="gray-vector":"streets"===e?t="streets-vector":"topo"===e&&(t="topo-vector"),El(Fy,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:t,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Dy.fromJSON(t)}return null}};bl([Lh({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Fd}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],jy.prototype,"baseLayers",null),bl([Lh({type:String,json:{origins:{"web-scene":{write:!0}}}})],jy.prototype,"id",void 0),bl([Lh({type:gy})],jy.prototype,"portalItem",void 0),bl([Lh()],jy.prototype,"referenceLayers",null),bl([Lh({readOnly:!0})],jy.prototype,"resourceInfo",void 0),bl([Lh({type:Yf})],jy.prototype,"spatialReference",void 0),bl([Lh()],jy.prototype,"thumbnailUrl",void 0),bl([Lh({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],jy.prototype,"title",void 0),bl([Mf("title")],jy.prototype,"writeTitle",null),jy=Dy=bl([md("esri.Basemap")],jy);const $y=jy;var Vy=Object.freeze({__proto__:null,default:$y});const zy={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Uy(e){return zy[e]||zy[e.toLowerCase()]}function qy(e){var t;return null!=(t=zy[e])?t:zy[e.toLowerCase()]}function Gy(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function By(e,t,i,r=1){const n=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,s=2*i-o;return[Math.round(255*Gy(s,o,n+1/3)),Math.round(255*Gy(s,o,n)),Math.round(255*Gy(s,o,n-1/3)),r]}function Wy(){return[0,0,0]}function Hy(e){return[e[0],e[1],e[2]]}function Jy(e,t,i){return[e,t,i]}function Yy(e){const t=[0,0,0],i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Zy(e,t){return new Float64Array(e,t,3)}function Ky(){return[0,0,0]}function Xy(){return Jy(1,1,1)}function Qy(){return Jy(1,0,0)}function ev(){return Jy(0,1,0)}function tv(){return Jy(0,0,1)}const iv=[0,0,0],rv=Xy(),nv=Qy(),ov=ev(),sv=tv();Object.freeze({__proto__:null,create:Wy,clone:Hy,fromValues:Jy,fromArray:Yy,createView:Zy,zeros:Ky,ones:Xy,unitX:Qy,unitY:ev,unitZ:tv,ZEROS:iv,ONES:rv,UNIT_X:nv,UNIT_Y:ov,UNIT_Z:sv});const av=1e-6,lv=Math.random,cv=Math.PI/180,uv=180/Math.PI;function hv(e){return e*cv}function dv(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function pv(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function fv(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function mv(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function gv(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function yv(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function vv(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function bv(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function wv(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}function _v(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function xv(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function Sv(e,t){const i=t[0],r=t[1],n=t[2];let o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function kv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Mv(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],l=i[2];return e[0]=n*l-o*a,e[1]=o*s-r*l,e[2]=r*a-n*s,e}function Tv(e,t,i,r){const n=t[0],o=t[1],s=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e}function Ev(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12],e[1]=i[1]*r+i[5]*n+i[9]*o+i[13],e[2]=i[2]*r+i[6]*n+i[10]*o+i[14],e}function Iv(e,t,i){const r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function Cv(e,t,i){const r=i[0],n=i[1],o=i[2],s=i[3],a=t[0],l=t[1],c=t[2];let u=n*c-o*l,h=o*a-r*c,d=r*l-n*a,p=n*d-o*h,f=o*u-r*d,m=r*h-n*u;const g=2*s;return u*=g,h*=g,d*=g,p*=2,f*=2,m*=2,e[0]=a+u+p,e[1]=l+h+f,e[2]=c+d+m,e}Object.freeze({__proto__:null,EPSILON:av,RANDOM:lv,toRadian:hv,toDegree:function(e){return e*uv},equals:function(e,t){return Math.abs(e-t)<=av*Math.max(1,Math.abs(e),Math.abs(t))}});const Ov=[0,0,0],Av=[0,0,0];function Pv(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Rv(e,t,i){const r=i[0]-t[0],n=i[1]-t[1],o=i[2]-t[2];let s=r*r+n*n+o*o;return s>0?(s=1/Math.sqrt(s),e[0]=r*s,e[1]=n*s,e[2]=o*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Lv=gv,Dv=yv,Nv=vv,Fv=wv,jv=_v,$v=dv,Vv=xv;function zv(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Uv(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function qv(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Gv(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Bv(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Wv(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Hv(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Jv(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+n*n+o*o)}function Yv(e,t){const i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+n*n+o*o}function Zv(e){const t=e[0],i=e[1],r=e[2],n=e[3];return Math.sqrt(t*t+i*i+r*r+n*n)}function Kv(e){const t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function Xv(e,t){const i=t[0],r=t[1],n=t[2],o=t[3];let s=i*i+r*r+n*n+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=i*s,e[1]=r*s,e[2]=n*s,e[3]=o*s),e}function Qv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function eb(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=s+r*(i[2]-s),e[3]=a+r*(i[3]-a),e}function tb(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ib(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=t[0],a=t[1],l=t[2],c=t[3];return Math.abs(i-s)<=av*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=av*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=av*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=av*Math.max(1,Math.abs(o),Math.abs(c))}Object.freeze({__proto__:null,length:dv,copy:pv,set:fv,add:mv,subtract:gv,multiply:yv,divide:vv,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e},max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:bv,scaleAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e},distance:wv,squaredDistance:_v,squaredLength:xv,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:Sv,dot:kv,cross:Mv,lerp:Tv,hermite:function(e,t,i,r,n,o){const s=o*o,a=s*(2*o-3)+1,l=s*(o-2)+o,c=s*(o-1),u=s*(3-2*o);return e[0]=t[0]*a+i[0]*l+r[0]*c+n[0]*u,e[1]=t[1]*a+i[1]*l+r[1]*c+n[1]*u,e[2]=t[2]*a+i[2]*l+r[2]*c+n[2]*u,e},bezier:function(e,t,i,r,n,o){const s=1-o,a=s*s,l=o*o,c=a*s,u=3*o*a,h=3*l*s,d=l*o;return e[0]=t[0]*c+i[0]*u+r[0]*h+n[0]*d,e[1]=t[1]*c+i[1]*u+r[1]*h+n[1]*d,e[2]=t[2]*c+i[2]*u+r[2]*h+n[2]*d,e},random:function(e,t){t=t||1;const i=2*lv()*Math.PI,r=2*lv()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e},transformMat4:Ev,transformMat3:Iv,transformQuat:Cv,rotateX:function(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e},rotateY:function(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e},rotateZ:function(e,t,i,r){const n=[],o=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e},angle:function(e,t){pv(Ov,e),pv(Av,t),Sv(Ov,Ov),Sv(Av,Av);const i=kv(Ov,Av);return i>1?0:i<-1?Math.PI:Math.acos(i)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:Pv,equals:function(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=t[0],s=t[1],a=t[2];return Math.abs(i-o)<=av*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=av*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=av*Math.max(1,Math.abs(n),Math.abs(a))},direction:Rv,sub:Lv,mul:Dv,div:Nv,dist:Fv,sqrDist:jv,len:$v,sqrLen:Vv});const rb=Gv,nb=Bv,ob=Wv,sb=Jv,ab=Yv,lb=Zv,cb=Kv;Object.freeze({__proto__:null,copy:zv,set:Uv,add:qv,subtract:Gv,multiply:Bv,divide:Wv,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e},max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:Hv,scaleAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e},distance:Jv,squaredDistance:Yv,length:Zv,squaredLength:Kv,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:Xv,dot:Qv,lerp:eb,random:function(e,t){let i,r,n,o,s,a;t=t||1;do{i=2*lv()-1,r=2*lv()-1,s=i*i+r*r}while(s>=1);do{n=2*lv()-1,o=2*lv()-1,a=n*n+o*o}while(a>=1);const l=Math.sqrt((1-s)/a);return e[0]=t*i,e[1]=t*r,e[2]=t*n*l,e[3]=t*o*l,e},transformMat4:function(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*s,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*s,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*s,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*s,e},transformQuat:function(e,t,i){const r=t[0],n=t[1],o=t[2],s=i[0],a=i[1],l=i[2],c=i[3],u=c*r+a*o-l*n,h=c*n+l*r-s*o,d=c*o+s*n-a*r,p=-s*r-a*n-l*o;return e[0]=u*c+p*-s+h*-l-d*-a,e[1]=h*c+p*-a+d*-s-u*-l,e[2]=d*c+p*-l+u*-a-h*-s,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:tb,equals:ib,sub:rb,mul:nb,div:ob,dist:sb,sqrDist:ab,len:lb,sqrLen:cb});const ub=new Float32Array(1);function hb(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function db(e,t,i){return Math.min(Math.max(e,t),i)}function pb(e){return 0==(e&e-1)}function fb(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function mb(e,t,i){return e+(t-e)*i}function gb(e){return e*Math.PI/180}function yb(e){return 180*e/Math.PI}function vb(e){return Math.acos(db(e,-1,1))}function bb(e){return Math.asin(db(e,-1,1))}function wb(e){return _b(Math.max(-Sb,Math.min(e,Sb)))}function _b(e){return ub[0]=e,ub[0]}function xb(e,t){const i=dv(e);return fv(t,i,bb(e[2]/i),Math.atan2(e[1]/i,e[0]/i)),t}const Sb=_b(34028234663852886e22);function kb(e){return db(dh(e),0,255)}function Mb(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Tb{constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}static blendColors(e,t,i,r=new Tb){return r.r=Math.round(e.r+(t.r-e.r)*i),r.g=Math.round(e.g+(t.g-e.g)*i),r.b=Math.round(e.b+(t.b-e.b)*i),r.a=e.a+(t.a-e.a)*i,r._sanitize()}static fromRgb(e,t){const i=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const e=i[2].split(/\s*,\s*/),r=i[1];if("rgb"===r&&3===e.length||"rgba"===r&&4===e.length){const i=e[0];if("%"===i.charAt(i.length-1)){const i=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(i[3]=parseFloat(e[3])),Tb.fromArray(i,t)}return Tb.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===r&&3===e.length||"hsla"===r&&4===e.length)return Tb.fromArray(By(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new Tb){if(4!==e.length&&7!==e.length||"#"!==e[0])return null;const i=4===e.length?4:8,r=(1<<i)-1;let n=Number("0x"+e.substr(1));return isNaN(n)?null:(["b","g","r"].forEach((e=>{const o=n&r;n>>=i,t[e]=4===i?17*o:o})),t.a=1,t)}static fromArray(e,t=new Tb){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const i=Uy(e)?qy(e):null;return i&&Tb.fromArray(i,t)||Tb.fromRgb(e,t)||Tb.fromHex(e,t)}static fromJSON(e){return e&&new Tb([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return _a(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return _a(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){if("string"==typeof e)Tb.fromString(e,this);else if(Array.isArray(e))Tb.fromArray(e,this);else{var t,i,r,n;this._set(null!=(t=e.r)?t:0,null!=(i=e.g)?i:0,null!=(r=e.b)?r:0,null!=(n=e.a)?n:1),e instanceof Tb||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return`#${e.length<2?"0"+e:e}${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}`}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Tb.AlphaMode.ALWAYS){const t=kb(this.r),i=kb(this.g),r=kb(this.b);return e===Tb.AlphaMode.ALWAYS||1!==this.a?[t,i,r,kb(255*this.a)]:[t,i,r]}clone(){return new Tb(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return _a(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(Mb(this.r,0,255)),this.g=Math.round(Mb(this.g,0,255)),this.b=Math.round(Mb(this.b,0,255)),this.a=Mb(this.a,0,1),this}_set(e,t,i,r){this.r=e,this.g=t,this.b=i,this.a=r}}Tb.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Tb||(Tb={}));const Eb=Tb;function Ib(e){}function Cb(e,t={}){var i;const r=e instanceof $g?e:new $g(e,t),n={type:null==(i=null==t?void 0:t.ignoreUnknown)||i?r.apiValues:String,json:{type:r.jsonValues,read:(null==t||!t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return void 0!==(null==t?void 0:t.readOnly)&&(n.readOnly=!!t.readOnly),void 0!==(null==t?void 0:t.default)&&(n.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(n.json.name=t.name),Lh(n)}var Ob;let Ab=Ob=class extends tp{constructor(e){super(e),this.type="none"}clone(){return new Ob({type:this.type})}};function Pb(e){const t=dh(100*(1-e));return Math.max(0,Math.min(t,100))}function Rb(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var Lb;bl([Cb({none:"none",stayAbove:"stay-above"})],Ab.prototype,"type",void 0),Ab=Ob=bl([md("esri.ground.NavigationConstraint")],Ab);const Db=Dl.getLogger("esri.Ground");let Nb=Lb=class extends(Qd(lp)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Fd;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&Db.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{Db.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",jd(e,this._get("layers")))}writeLayers(e,t,i,r){const n=[];e?(r={...r,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(function(e){return()=>e})(e)().write(t,r)&&n.push(t)}else r&&r.messages&&r.messages.push(new Ac("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=n):t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return hp(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await import("./chunks/ElevationQuery-075f75d8.js");Yc(t);const r=new i,n=this.layers.filter(Fb).toArray();return r.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:i}=await import("./chunks/ElevationQuery-075f75d8.js");Yc(t);const r=new i,n=this.layers.filter(Fb).toArray();return r.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ol(this.surfaceColor),navigationConstraint:ol(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Lb({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",n=t&&t.portal||null,o=t&&t.url||null;return import("./chunks/layersCreator-ba6b8e6f.js").then((({populateOperationalLayers:t})=>{Yc(i);const s=[];if(e.layers&&Array.isArray(e.layers)){const i={context:{origin:r,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};s.push(t(this.layers,e.layers,i))}return su(s)})).then((()=>{}))}};function Fb(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}bl([Lh({json:{read:!1}})],Nb.prototype,"layers",null),bl([Mf("layers")],Nb.prototype,"writeLayers",null),bl([Lh({readOnly:!0})],Nb.prototype,"resourceInfo",void 0),bl([Lh({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ch,read:{reader:Rb,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Pb(e)},target:"transparency"}}})],Nb.prototype,"opacity",void 0),bl([Lh({type:Eb,json:{type:[Ch],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Nb.prototype,"surfaceColor",void 0),bl([Lh({type:Ab,json:{write:!0}})],Nb.prototype,"navigationConstraint",void 0),Nb=Lb=bl([md("esri.Ground")],Nb);const jb=Nb;let $b=class extends vd{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!Fd.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||Fd.isCollection(e)?e.forEach((e=>this._isHandle(e)&&i.push(e))):i.push(e),this.notifyChange("size"),this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||Fd.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let e=0;e<t.length;e++)t[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((e=>{for(let t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};bl([Lh({readOnly:!0})],$b.prototype,"size",null),$b=bl([md("esri.core.Handles")],$b);const Vb=$b;function zb(e,t,i={}){return qb(e,t,i,Wb)}function Ub(e,t,i={}){return qb(e,t,i,Hb)}function qb(e,t,i={},r){let n=null;const o=i.once?(e,i)=>{r(e)&&(Aa(n),t(e,i))}:(e,i)=>{r(e)&&t(e,i)};if(n=nh(e,o,i.sync,i.equals),i.initial){const t=e();o(t,t)}return n}function Gb(e,t,i,r={}){let n=null,o=null,s=null;function a(){n&&o&&(o.remove(),null==r.onListenerRemove||r.onListenerRemove(n),n=null,o=null)}function l(e){r.once&&r.once&&Aa(s),i(e)}const c=zb(e,((e,i)=>{a(),zc(e)&&(n=e,o=Uc(e,t,l),null==r.onListenerAdd||r.onListenerAdd(e))}),{sync:r.sync,initial:!0});return s=Fl((()=>{c.remove(),a()})),s}function Bb(e,t){return function(e,t,i){if(Kc(i))return Promise.reject(Jc());const r=e();if(null!=t&&t(r))return Promise.resolve(r);let n=null;function o(){n=Aa(n)}return new Promise(((r,s)=>{n=Nl([eu(i,(()=>{o(),s(Jc())})),qb(e,(e=>{o(),r(e)}),{sync:!1,once:!0},null!=t?t:Wb)])}))}(e,Hb,t)}function Wb(e){return!0}function Hb(e){return!!e}const Jb={sync:!0},Yb={initial:!0},Zb={sync:!0,initial:!0};let Kb=class extends vd{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new Vb,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,zb)}addWhen(e,t,i={}){return this._installWatch(e,t,i,Ub)}addOnCollectionChange(e,t,{initial:i=!1}={}){const r=++this.handleId;return this.handles.add([Gb(e,"after-changes",this._createSyncUpdatingCallback(),Jb),Gb(e,"change",t,{onListenerAdd:i?e=>t({added:e.toArray(),removed:[]}):void 0})],r),{remove:()=>this.handles.remove(r)}}addPromise(e){if(xa(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(Xb)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const n=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,n);const o=r(e,t,i);return this.handles.add(o,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const i=zb(e,this._createSyncUpdatingCallback(),{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}_createSyncUpdatingCallback(){return()=>{this.handles.remove(Xb),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Eu((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Xb))})),Xb)}}};bl([Lh({readOnly:!0})],Kb.prototype,"updating",void 0),Kb=bl([md("esri.views.support.WatchUpdatingTracking")],Kb);const Xb=-42;var Qb;!function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"}(Qb||(Qb={}));const ew=e=>{let t=class extends e{destroy(){var e,t;this.destroyed||(null==(e=this._get("handles"))||e.destroy(),null==(t=this._get("updatingHandles"))||t.destroy())}get handles(){return this._get("handles")||new Vb}get updatingHandles(){return this._get("updatingHandles")||new Kb}};return bl([Lh({readOnly:!0})],t.prototype,"handles",null),bl([Lh({readOnly:!0})],t.prototype,"updatingHandles",null),t=bl([md("esri.core.HandleOwner")],t),t};let tw=class extends(ew(vd)){};tw=bl([md("esri.core.HandleOwner")],tw);let iw=class extends(ew(Fd)){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(Gu((()=>this._refresh())))}destroy(){this.getCollections=null}_refresh(){const e=_a(this.getCollections)?this.getCollections():null;if(xa(e))return void this.removeAll();let t=0;for(const i of e)_a(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new Fd(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:e=>!!e;for(const r of t)if(r){if(i(r)){const t=this.indexOf(r,e);t>=0?t!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const t=this.getChildrenFunction(r);if(Array.isArray(t))for(const i of t)e=this._processCollection(e,i);else e=this._processCollection(e,t)}}return e}};bl([Lh()],iw.prototype,"getCollections",void 0),bl([Lh()],iw.prototype,"getChildrenFunction",void 0),bl([Lh()],iw.prototype,"itemFilterFunction",void 0),iw=bl([md("esri.core.CollectionFlattener")],iw);const rw=iw;function nw(e){var t;return!(!(e&&e.loaded&&"capabilities"in e&&null!=e&&null!=(t=e.capabilities)&&t.operations&&"supportsEditing"in e.capabilities.operations&&!0===e.capabilities.operations.supportsEditing)||"editingEnabled"in e&&!e.editingEnabled)}const ow=Dl.getLogger("esri.support.basemapUtils");const sw=Dl.getLogger("esri.support.groundUtils"),aw={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function lw(e,t,i=!1){let{hasM:r,hasZ:n}=e;Array.isArray(t)?4!==t.length||r||n?3===t.length&&i&&!r?(n=!0,r=!1):3===t.length&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=r}var cw;function uw(e){return(t,i)=>null==t?i:null==i?t:e(t,i)}let hw=cw=class extends Em{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(void 0===i.hasZ&&void 0===i.hasM?(i.hasZ=r.length>2,i.hasM=!1):void 0===i.hasZ?i.hasZ=r.length>3:void 0===i.hasM&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Eg,i=this.hasZ,r=this.hasM,n=i?3:2,o=e[0],s=uw(Math.min),a=uw(Math.max);let l,c,u,h,[d,p]=o,[f,m]=o;for(let t=0,o=e.length;t<o;t++){const o=e[t],[g,y]=o;if(d=s(d,g),p=s(p,y),f=a(f,g),m=a(m,y),i&&o.length>2){const e=o[2];l=s(l,e),u=a(u,e)}if(r&&o.length>n){const e=o[n];c=s(c,e),h=a(h,e)}}return t.xmin=d,t.ymin=p,t.xmax=f,t.ymax=m,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=u):(t.zmin=null,t.zmax=null),r?(t.mmin=c,t.mmax=h):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=ol(this.points)}addPoint(e){return lw(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ol(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new cw(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Qm(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Qm(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(lw(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return null!=e&&e>=0&&e<this.points.length}};bl([Lh({readOnly:!0})],hw.prototype,"cache",null),bl([Lh()],hw.prototype,"extent",null),bl([Lh({type:[[Number]],json:{write:{isRequired:!0}}})],hw.prototype,"points",void 0),bl([Mf("points")],hw.prototype,"writePoints",null),hw=cw=bl([md("esri.geometry.Multipoint")],hw),hw.prototype.toJSON.isDefaultToJSON=!0;const dw=hw;function pw(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function fw(e,t,i,r){const[n,o]=t,[s,a]=i[r],[l,c]=i[r+1],u=l-s,h=c-a,d=u*u+h*h,p=(n-s)*u+(o-a)*h,f=Math.min(1,Math.max(0,p/d));return e[0]=s+u*f,e[1]=a+h*f,e}function mw(e,t){return function(e,t,i){const r=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,n,e[2]+i*(t[2]-e[2])]:[r,n]}(e,t,.5)}function gw(e,t,i){const r=e.length;let n=0,o=0,s=0;for(let a=0;a<r;a++){const l=e[a],c=e[(a+1)%r];let u=2;n+=l[0]*c[1]-c[0]*l[1],l.length>2&&c.length>2&&i&&(o+=l[0]*c[2]-c[0]*l[2],u=3),l.length>u&&c.length>u&&t&&(s+=l[0]*c[u]-c[0]*l[u])}return n<=0&&o<=0&&s<=0}function yw(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!gw(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function vw(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function bw(e){return e?function(e,t){if(!e||!e.length)return null;const i=[],r=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let i=0,o=e.length;i<o;i++){const o=ww(e[i],t,n);o&&r.push(o)}if(r.sort(((e,i)=>{let r=e[2]-i[2];return 0===r&&t&&(r=e[4]-i[4]),r})),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const r=e[0]&&e[0].length?function(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let n=0,o=0,s=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const c=e[l],u=e[l+1];if(c&&u){i[0]=c[0],i[1]=c[1],r[0]=u[0],r[1]=u[1],t&&c.length>2&&u.length>2&&(i[2]=c[2],r[2]=u[2]);const e=pw(i,r);if(e){n+=e;const i=mw(c,u);o+=e*i[0],s+=e*i[1],t&&i.length>2&&(a+=e*i[2])}}}return n>0?t?[o/n,s/n,a/n]:[o/n,s/n]:e.length?e[0]:null}(e[0],t):null;if(!r)return null;i[0]=r[0],i[1]=r[1],t&&r.length>2&&(i[2]=r[2])}return i}(e.rings,e.hasZ):null}function ww(e,t,i){let r=0,n=0,o=0,s=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,u=e.length&&t?e[0][2]:0;for(let h=0;h<e.length;h++){const d=e[h],p=e[(h+1)%e.length],[f,m,g]=d,y=f-l,v=m-c,b=t?g-u:void 0,[w,_,x]=p,S=w-l,k=_-c,M=t?x-u:void 0,T=y*k-S*v;if(s+=T,r+=(y+S)*T,n+=(v+k)*T,t&&d.length>2&&p.length>2){const e=y*M-S*b;o+=(b+M)*e,a+=e}f<i[0]&&(i[0]=f),f>i[1]&&(i[1]=f),m<i[2]&&(i[2]=m),m>i[3]&&(i[3]=m),t&&(g<i[4]&&(i[4]=g),g>i[5]&&(i[5]=g))}if(s>0&&(s*=-1),a>0&&(a*=-1),!s)return null;s*=.5,a*=.5;const h=[r/(6*s)+l,n/(6*s)+c,s];return t&&(i[4]===i[5]||0===a?(h[3]=(i[4]+i[5])/2,h[4]=0):(h[3]=o/(6*a)+u,h[4]=a)),h}function _w(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function xw(e){return void 0!==e.points}function Sw(e){return void 0!==e.x&&void 0!==e.y}function kw(e){return void 0!==e.paths}function Mw(e){return void 0!==e.rings}function Tw(e){return(t,i)=>null==t?i:null==i?t:e(t,i)}const Ew=Tw(Math.min),Iw=Tw(Math.max);function Cw(e,t){return kw(t)?Aw(e,t.paths,!1,!1):Mw(t)?Aw(e,t.rings,!1,!1):xw(t)?Rw(e,t.points,!1,!1,!1,!1):_w(t)?Pw(e,t):(Sw(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Ow(e,t){return kw(t)?Aw(e,t.paths,!0,!1):Mw(t)?Aw(e,t.rings,!0,!1):xw(t)?Rw(e,t.points,!0,!1,!0,!1):_w(t)?Pw(e,t,!0,!1,!0,!1):(Sw(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Aw(e,t,i,r){const n=i?3:2;if(!t.length||!t[0].length)return null;let o,s,a,l,[c,u]=t[0][0],[h,d]=t[0][0];for(let e=0;e<t.length;e++){const p=t[e];for(let e=0;e<p.length;e++){const t=p[e],[f,m]=t;if(c=Ew(c,f),u=Ew(u,m),h=Iw(h,f),d=Iw(d,m),i&&t.length>2){const e=t[2];o=Ew(o,e),s=Iw(s,e)}if(r&&t.length>n){const e=t[n];a=Ew(o,e),l=Iw(s,e)}}}return i?r?(e[0]=c,e[1]=u,e[2]=o,e[3]=a,e[4]=h,e[5]=d,e[6]=s,e[7]=l,e.length=8,e):(e[0]=c,e[1]=u,e[2]=o,e[3]=h,e[4]=d,e[5]=s,e.length=6,e):r?(e[0]=c,e[1]=u,e[2]=a,e[3]=h,e[4]=d,e[5]=l,e.length=6,e):(e[0]=c,e[1]=u,e[2]=h,e[3]=d,e.length=4,e)}function Pw(e,t,i,r,n,o){const s=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let u=t.zmin,h=t.zmax,d=t.mmin,p=t.mmax;return n?(u=u||0,h=h||0,o?(d=d||0,p=p||0,e[0]=s,e[1]=l,e[2]=u,e[3]=d,e[4]=a,e[5]=c,e[6]=h,e[7]=p,e):(e[0]=s,e[1]=l,e[2]=u,e[3]=a,e[4]=c,e[5]=h,e)):o?(d=d||0,p=p||0,e[0]=s,e[1]=l,e[2]=d,e[3]=a,e[4]=c,e[5]=p,e):(e[0]=s,e[1]=l,e[2]=a,e[3]=c,e)}function Rw(e,t,i,r,n,o){const s=i?3:2,a=r&&o,l=i&&n;if(!t.length||!t[0].length)return null;let c,u,h,d,[p,f]=t[0],[m,g]=t[0];for(let e=0;e<t.length;e++){const i=t[e],[r,n]=i;if(p=Ew(p,r),f=Ew(f,n),m=Iw(m,r),g=Iw(g,n),l&&i.length>2){const e=i[2];c=Ew(c,e),u=Iw(u,e)}if(a&&i.length>s){const e=i[s];h=Ew(c,e),d=Iw(u,e)}}return n?(c=c||0,u=u||0,o?(h=h||0,d=d||0,e[0]=p,e[1]=f,e[2]=c,e[3]=h,e[4]=m,e[5]=g,e[6]=u,e[7]=d,e):(e[0]=p,e[1]=f,e[2]=c,e[3]=m,e[4]=g,e[5]=u,e)):o?(h=h||0,d=d||0,e[0]=p,e[1]=f,e[2]=h,e[3]=m,e[4]=g,e[5]=d,e):(e[0]=p,e[1]=f,e[2]=m,e[3]=g,e)}const Lw=[];function Dw(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function Nw(e,t,i,r,n,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:n,zmax:o}}function Fw(e,t,i,r,n,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:n,mmax:o}}function jw(e,t,i,r,n,o,s,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:n,ymax:o,zmax:s,mmax:a}}function $w(e,t=!1,i=!1){return t?i?jw(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Nw(e[0],e[1],e[2],e[3],e[4],e[5]):i?Fw(e[0],e[1],e[2],e[3],e[4],e[5]):Dw(e[0],e[1],e[2],e[3])}function Vw(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){const{x:t,y:i,z:r,m:n}=e,o=null!=n;return null!=r?o?jw(t,i,r,n,t,i,r,n):Nw(t,i,r,t,i,r):o?Fw(t,i,n,t,i,n):Dw(t,i,t,i)}(e):function(e){return void 0!==e.rings}(e)?zw(e):function(e){return void 0!==e.paths}(e)?Uw(e):function(e){return void 0!==e.points}(e)?function(e){const{hasZ:t,hasM:i,points:r}=e;return $w(Rw(Lw,r,t,i),t,i)}(e):null:null}function zw(e){const{hasZ:t,hasM:i,rings:r}=e,n=Aw(Lw,r,t,i);return n?$w(n,t,i):null}function Uw(e){const{hasZ:t,hasM:i,paths:r}=e,n=Aw(Lw,r,t,i);return n?$w(n,t,i):null}var qw;function Gw(e){return!Array.isArray(e[0])}let Bw=qw=class extends Em{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,n=!1;for(const e of t)e.hasZ&&(r=!0),e.hasM&&(n=!0);const o={rings:t.map((function(e){const t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(r&&e.hasZ){const i=e.zmin+.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(i)}if(n&&e.hasM){const i=e.mmin+.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(i)}return t})),spatialReference:i};return r&&(o.hasZ=!0),n&&(o.hasM=!0),new qw(o)}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||Yf.WGS84,n.length&&n[0]&&null!=n[0][0]&&"number"==typeof n[0][0]&&(n=[n]),o=n[0]&&n[0][0],o&&(void 0===i&&void 0===r?(i=o.length>2,r=o.length>3):void 0===i?i=r?o.length>3:o.length>2:void 0===r&&(r=i?o.length>3:o.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=bw(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Qm;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=zw(this);if(!t)return null;const i=new Eg(t);return i.spatialReference=e,i}get isSelfIntersecting(){return function(e){for(let t=0;t<e.length;t++){const i=e[t];for(let r=0;r<i.length-1;r++){const n=i[r],o=i[r+1];for(let i=t+1;i<e.length;i++)for(let t=0;t<e[i].length-1;t++){const r=e[i][t],s=e[i][t+1];if(xg(n,o,r,s,wg)&&!(wg[0]===n[0]&&wg[1]===n[1]||wg[0]===r[0]&&wg[1]===r[1]||wg[0]===o[0]&&wg[1]===o[1]||wg[0]===s[0]&&wg[1]===s[1]))return!0}}const r=i.length;if(!(r<=4))for(let e=0;e<r-3;e++){let t=r-1;0===e&&(t=r-2);const n=i[e],o=i[e+1];for(let r=e+2;r<t;r++){const e=i[r],t=i[r+1];if(xg(n,o,e,t,wg)&&!(wg[0]===n[0]&&wg[1]===n[1]||wg[0]===e[0]&&wg[1]===e[1]||wg[0]===o[0]&&wg[1]===o[1]||wg[0]===t[0]&&wg[1]===t[1]))return!0}}}return!1}(this.rings)}writeRings(e,t){t.rings=ol(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(Gw(e)){const r=[];for(let t=0,i=e.length;t<i;t++)r[t]=e[t].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new qw;return e.spatialReference=this.spatialReference,e.rings=ol(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(xa(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(_a(t)!==_a(i))return!1;if(_a(t)&&_a(i)&&!t.equals(i))return!1;if(this.rings.length!==e.rings.length)return!1;const r=([e,t,i,r],[n,o,s,a])=>e===n&&t===o&&(null==i&&null==s||i===s)&&(null==r&&null==a||r===a);for(let t=0;t<this.rings.length;t++){if(!za(this.rings[t],e.rings[t],r))return!1}return!0}contains(e){if(!e)return!1;const t=qm(e,this.spatialReference);return sg(this,_a(t)?t:e)}isClockwise(e){let t;return t=Gw(e)?e.map((e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])):e,gw(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new Qm(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Qm(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Qm(i[0],i[1],i[2],i[3],this.spatialReference):new Qm(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(lw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Qm(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map((e=>new Qm(e,i)));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(lw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){const r=this.rings[e];if(i&&(t<0||t>r.length))return!1;if(!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};bl([Lh({readOnly:!0})],Bw.prototype,"cache",null),bl([Lh({readOnly:!0})],Bw.prototype,"centroid",null),bl([Lh({readOnly:!0})],Bw.prototype,"extent",null),bl([Lh({readOnly:!0})],Bw.prototype,"isSelfIntersecting",null),bl([Lh({type:[[[Number]]],json:{write:{isRequired:!0}}})],Bw.prototype,"rings",void 0),bl([Mf("rings")],Bw.prototype,"writeRings",null),Bw=qw=bl([md("esri.geometry.Polygon")],Bw),Bw.prototype.toJSON.isDefaultToJSON=!0;const Ww=Bw;var Hw;let Jw=Hw=class extends Em{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,n=null,o=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):n=e,n=n||[],t=t||Yf.WGS84,n.length&&n[0]&&null!=n[0][0]&&"number"==typeof n[0][0]&&(n=[n]),o=n[0]&&n[0][0],o&&(void 0===i&&void 0===r?(i=o.length>2,r=!1):void 0===i?i=!r&&o.length>3:void 0===r&&(r=!i&&o.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=Uw(this);if(!t)return null;const i=new Eg(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=ol(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(function(e){return!Array.isArray(e[0])}(e)){const r=[];for(let t=0,i=e.length;t<i;t++)r[t]=e[t].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Hw;return e.spatialReference=this.spatialReference,e.paths=ol(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,n=this.hasM;return r&&!n?new Qm(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Qm(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Qm(i[0],i[1],i[2],i[3],this.spatialReference):new Qm(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(lw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map((e=>new Qm(e,i)));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Qm(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(lw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){const r=this.paths[e];if(i&&(t<0||t>r.length))return!1;if(!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};bl([Lh({readOnly:!0})],Jw.prototype,"cache",null),bl([Lh({readOnly:!0})],Jw.prototype,"extent",null),bl([Lh({type:[[[Number]]],json:{write:{isRequired:!0}}})],Jw.prototype,"paths",void 0),bl([Mf("paths")],Jw.prototype,"writePaths",null),Jw=Hw=bl([md("esri.geometry.Polyline")],Jw),Jw.prototype.toJSON.isDefaultToJSON=!0;const Yw=Jw,Zw=Vg()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Kw=Vg()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Xw(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function Qw(e){return void 0!==e.points}function e_(e){return void 0!==e.x&&void 0!==e.y}function t_(e){return void 0!==e.paths}function i_(e){return void 0!==e.rings}function r_(e){return xa(e)?null:e instanceof Em?e:e_(e)?Qm.fromJSON(e):t_(e)?Yw.fromJSON(e):i_(e)?Ww.fromJSON(e):Qw(e)?dw.fromJSON(e):Xw(e)?Eg.fromJSON(e):null}function n_(e){return e?e_(e)?"esriGeometryPoint":t_(e)?"esriGeometryPolyline":i_(e)?"esriGeometryPolygon":Xw(e)?"esriGeometryEnvelope":Qw(e)?"esriGeometryMultipoint":null:null}const o_={esriGeometryPoint:Qm,esriGeometryPolyline:Yw,esriGeometryPolygon:Ww,esriGeometryEnvelope:Eg,esriGeometryMultipoint:dw};function s_(e){return e&&o_[e]||null}const a_={base:Em,key:"type",typeMap:{extent:Eg,multipoint:dw,point:Qm,polyline:Yw,polygon:Ww}};Ih(a_);let l_=0;const c_=e=>{let t=class extends e{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l_++})}};return t=bl([md("esri.core.Identifiable")],t),t};let u_=class extends(c_(class{})){};u_=bl([md("esri.core.Identifiable")],u_);let h_=0;const d_=Dl.getLogger("esri.layers.Layer");let p_=class extends(wd.EventedMixin(c_(lp))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Eg(-180,-90,180,90,Yf.WGS84),this.id=Date.now().toString(16)+"-layer-"+h_++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Yf.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,i=await import("./chunks/arcgisLayers-e76a701d.js");try{return await i.fromUrl(t)}catch(e){throw d_.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",e),e}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},i=await import("./chunks/portalLayers-197b9ceb.js");try{return await i.fromItem(t)}catch(e){const i=t&&t.portalItem,r=i&&i.id||"unset",n=i&&i.portal&&i.portal.url||vl.portalUrl;throw d_.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+r+"')",e),e}}initialize(){this.when().catch((e=>{var t,i;ru(e)||Dl.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(i=this.id)?i:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?Ap(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await am(e,{query:{f:"json"},responseType:"json"})).data;throw new Ac("layer:no-attribution-data","Layer does not have attribution data")}};bl([Lh({type:String})],p_.prototype,"attributionDataUrl",void 0),bl([Lh({type:Eg})],p_.prototype,"fullExtent",void 0),bl([Lh({readOnly:!0})],p_.prototype,"hasAttributionData",null),bl([Lh({type:String,clonable:!1})],p_.prototype,"id",void 0),bl([Lh({type:Boolean,nonNullable:!0})],p_.prototype,"legendEnabled",void 0),bl([Lh({type:["show","hide","hide-children"]})],p_.prototype,"listMode",void 0),bl([Lh({type:Number,range:{min:0,max:1},nonNullable:!0})],p_.prototype,"opacity",void 0),bl([Lh({clonable:!1})],p_.prototype,"parent",void 0),bl([Lh({readOnly:!0})],p_.prototype,"parsedUrl",null),bl([Lh({type:Boolean})],p_.prototype,"popupEnabled",void 0),bl([Lh({type:Boolean})],p_.prototype,"attributionVisible",void 0),bl([Lh({type:Yf})],p_.prototype,"spatialReference",void 0),bl([Lh({type:String})],p_.prototype,"title",void 0),bl([Lh({type:String,readOnly:!0,json:{read:!1}})],p_.prototype,"type",void 0),bl([Lh()],p_.prototype,"url",void 0),bl([Lh({type:Boolean,nonNullable:!0})],p_.prototype,"visible",void 0),p_=bl([md("esri.layers.Layer")],p_);const f_=p_;function m_(e){return e&&"group"===e.type}function g_(e,t,i){let r,n;if(e)for(let o=0,s=e.length;o<s;o++){if(r=e.getItemAt(o),r[t]===i)return r;if(m_(r)&&(n=g_(r.layers,t,i),n))return n}}const y_=Dl.getLogger("esri.support.LayersMixin"),v_=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new Fd;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||y_.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},i=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>i(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",jd(e,this._get("layers")))}add(e,t){const i=this.layers;if(t=i.getNextIndex(t),e instanceof f_){const r=e;r.parent===this?this.reorder(r,t):i.add(r,t)}else hu(e)?e.then((e=>{this.destroyed||this.add(e,t)})):y_.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const i=this.layers;t=i.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(i.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return g_(this.layers,"id",e)}findLayerByUid(e){return g_(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return bl([Lh()],t.prototype,"layers",null),t=bl([md("esri.support.LayersMixin")],t),t},b_="esri.support.TablesMixin",w_=Dl.getLogger(b_);function __(e){return e&&"group"===e.type}function x_(e,t,i){if(e)for(let r=0,n=e.length;r<n;r++){const n=e.getItemAt(r);if(n[t]===i)return n;if(__(n)){const e=x_(n.tables,t,i);if(e)return e}}}const S_=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new Fd,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&w_.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",jd(e,this._get("tables")))}findTableById(e){return x_(this.tables,"id",e)}findTableByUid(e){return x_(this.tables,"uid",e)}};return bl([Lh()],t.prototype,"tables",null),t=bl([md(b_)],t),t};let k_=class extends(S_(v_(wd.EventedMixin(vd)))){constructor(e){super(e),this.allLayers=new rw({getCollections:()=>{var e,t,i;return[null==(e=this.basemap)?void 0:e.baseLayers,null==(t=this.ground)?void 0:t.layers,this.layers,null==(i=this.basemap)?void 0:i.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new rw({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return t&&"tables"in t&&t.tables.includes(e)}}),this.basemap=null,this.editableLayers=new rw({getCollections:()=>[this.allLayers],itemFilterFunction:nw}),this.ground=new jb,this._basemapCache={}}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),function(e){for(const t in e){const i=e[t];!1===(null==i?void 0:i.destroyed)&&i.destroy(),delete e[t]}}(this._basemapCache),this._basemapCache=null}castBasemap(e){return function(e,t){var i;let r;if("string"==typeof e){if(!(e in Ey)){const t=Object.entries(Ey).filter((([e,t])=>vl.apiKey&&!t.classic||!vl.apiKey&&t.classic&&!t.deprecated)).map((([e])=>`"${e}"`)).join(", ");return ow.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(r=t[e]),r||(r=$y.fromId(e),t&&(t[e]=r))}else r=xh($y,e);return null!=(i=r)&&i.destroyed&&(ow.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}(e,this._basemapCache)}castGround(e){const t=function(e){let t=null;"string"==typeof e?e in aw?t=new jb({resourceInfo:{data:{layers:[aw[e]]}}}):sw.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=xh(jb,e);return t}(e);return xa(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}};bl([Lh({readOnly:!0,dependsOn:[]})],k_.prototype,"allLayers",void 0),bl([Lh({readOnly:!0})],k_.prototype,"allTables",void 0),bl([Lh({type:$y})],k_.prototype,"basemap",void 0),bl([Am("basemap")],k_.prototype,"castBasemap",null),bl([Lh({readOnly:!0})],k_.prototype,"editableLayers",void 0),bl([Lh({type:jb,nonNullable:!0})],k_.prototype,"ground",void 0),bl([Am("ground")],k_.prototype,"castGround",null),k_=bl([md("esri.Map")],k_);const M_=k_;var T_;let E_;function I_(){return E_||(E_=(async()=>{const e=await import("./chunks/arcadeUtils-06d89b42.js").then((function(e){return e.q}));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),E_}!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(T_||(T_={}));const C_=(e,t,i)=>A_.create(e,t,i,null,["$feature"]),O_=(e,t,i)=>A_.create(e,t,i,null,["$feature","$view"]);class A_{constructor(e,t,i,r,n,o,s,a){this.script=e,this.evaluate=n;const l=Array.isArray(s)?s:s.fields;this.fields=l,this._syntaxTree=r,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=o,this._spatialReference=a,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,r,n,o){const{arcade:s,Feature:a,Dictionary:l}=await I_(),c=Yf.fromJSON(t),u=s.parseScript(e,o),h=n.reduce(((e,t)=>({...e,[t]:null})),{});let d=null;_a(r)&&(d=new l(r),d.immutable=!0,h.$config=null);const p=s.scriptUsesGeometryEngine(u)&&s.enableGeometrySupport(),f=s.scriptUsesFeatureSet(u)&&s.enableFeatureSetSupport(),m=s.scriptIsAsync(u)&&s.enableAsyncSupport(),g={vars:h,spatialReference:c,useAsync:!!m},y=new l;y.immutable=!1,y.setField("scale",0);const v=s.compileScript(u,g);return await Promise.all([p,f,m]),new A_(e,s,l,u,(e=>("$view"in e&&e.$view&&(y.setField("scale",e.$view.scale),e.$view=y),d&&(e.$config=d),v({vars:e,spatialReference:c}))),new a,i,c)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const P_=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],R_=["field","normalizationField"];function L_(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(D_(P_,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)D_(R_,e,t)}function D_(e,t,i){if(e)for(const r of e){const e=pl(r,t),n=e&&"function"!=typeof e&&i.get(e);n&&fl(r,n.name,t)}}function N_(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const F_=new Set;function j_(e,t){return e&&t?(F_.clear(),$_(F_,e,t),Array.from(F_).sort()):[]}function $_(e,t,i){var r;if(i)if(null!=t&&null!=(r=t.fields)&&r.length)if(i.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const r of i)V_(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function V_(e,t,i){if("string"==typeof i)if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function z_(e,t){return xa(t)||xa(e)?[]:t.includes("*")?e.fields.map((e=>e.name)):t}async function U_(e,t,i){var r;if(!i)return;const{arcadeUtils:n}=await I_(),o=n.extractFieldNames(i,null==t||null==(r=t.fields)?void 0:r.map((e=>e.name)));for(const i of o)V_(e,t,i)}async function q_(e,t,i){if(i&&"1=1"!==i){const r=(await import("./chunks/WhereClause-3a857400.js")).WhereClause.create(i,t);if(!r.isStandardized)throw new Ac("fieldUtils:collectFilterFields","Where clause is not standardized");$_(e,t,r.fieldNames)}}function G_(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function B_(e,t){if(!t)return;const i=pl("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function W_(e,t,i){var r,n;if(!t||!i||"cluster"!==i.type)return;const o=[];if(null!=(r=i.popupTemplate)&&r.expressionInfos&&o.push(...i.popupTemplate.expressionInfos.map((i=>U_(e,t.fieldsIndex,i.expression)))),Array.isArray(null==(n=i.popupTemplate)?void 0:n.content)){const r=i.popupTemplate.content;for(const i of r)"expression"===i.type&&i.expressionInfo&&o.push(U_(e,t.fieldsIndex,i.expressionInfo.expression))}i.fields&&o.push(...i.fields.map((i=>async function(e,t,i){i.outStatistic.onStatisticValueExpression?U_(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}(e,t.fieldsIndex,i)))),await Promise.all(o)}async function H_(e,t,i){t&&(t.timeInfo&&_a(i)&&i.timeExtent&&$_(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&$_(e,t.fieldsIndex,[t.floorInfo.floorField]),_a(i)&&_a(i.where)&&await q_(e,t.fieldsIndex,i.where))}async function J_(e,t,i){t&&i&&await Promise.all(i.map((i=>async function(e,t,i){t&&i&&(i.valueExpression?await U_(e,t.fieldsIndex,i.valueExpression):i.field&&V_(e,t.fieldsIndex,i.field))}(e,t,i))))}function Y_(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?j_(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function Z_(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if("arcade"===r.type)await U_(e,t,r.expression);else{const i=r.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{V_(e,t,i.slice(1,-1))}))}await q_(e,t,n)}(e,r,t))))}function K_(e){const t=e.defaultValue;return void 0!==t&&ox(e,t)?t:e.nullable?null:void 0}function X_(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function Q_(e){return null===e||X_(e)}const ex="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function tx(e){return null===e||ex(e)}function ix(e){return null!=e&&"string"==typeof e}function rx(e){return null===e||ix(e)}function nx(){return!0}function ox(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?tx:ex;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?Q_:X_;break;case"string":case"esriFieldTypeString":i=e.nullable?rx:ix;break;default:i=nx}return 1===arguments.length?i:i(t)}const sx=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function ax(e){return null!=e&&sx.has(e.type)}function lx(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var cx,ux;function hx(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function dx(e,t){return e.nullable&&null===t?null:ax(e)&&!function(e,t){const i="string"==typeof e?px(e):e;return!!i&&(i.isInteger?ex(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?cx.OUT_OF_RANGE:ox(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return T_.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return T_.INVALID_CODED_VALUE}return null}(e.domain,t):null:ux.INVALID_TYPE}function px(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return fx;case"esriFieldTypeInteger":case"integer":return mx;case"esriFieldTypeSingle":case"single":return gx;case"esriFieldTypeDouble":case"double":return yx}}(cx||(cx={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(ux||(ux={})).INVALID_TYPE="type-validation-error::invalid-type";const fx={min:-32768,max:32767,isInteger:!0},mx={min:-2147483648,max:2147483647,isInteger:!0},gx={min:-34e37,max:12e37,isInteger:!1},yx={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function vx(e,t,i){switch(e){case T_.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case T_.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case ux.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case cx.OUT_OF_RANGE:{const{min:e,max:r}=px(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function bx(e,t){return!function(e,t,i){if(!t||!t.attributes||!e){if(_a(i))for(const t of e)i.add(t);return!0}const r=t.attributes;let n=!1;for(const t of e)if(!(t in r)){if(n=!0,!_a(i))break;i.add(t)}return n}(e,t,null)}let wx=class extends tp{constructor(e){super(e),this.type=null}};bl([Lh({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],wx.prototype,"type",void 0),wx=bl([md("esri.popup.content.Content")],wx);const _x=wx;var xx;let Sx=xx=class extends _x{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new xx({description:this.description,displayType:this.displayType,title:this.title})}};bl([Lh({type:String,json:{write:!0}})],Sx.prototype,"description",void 0),bl([Lh({type:["auto","preview","list"],json:{write:!0}})],Sx.prototype,"displayType",void 0),bl([Lh({type:String,json:{write:!0}})],Sx.prototype,"title",void 0),bl([Lh({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Sx.prototype,"type",void 0),Sx=xx=bl([md("esri.popup.content.AttachmentsContent")],Sx);const kx=Sx;var Mx;let Tx=Mx=class extends _x{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Mx({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ol(this.outFields):null})}};bl([Lh()],Tx.prototype,"creator",void 0),bl([Lh()],Tx.prototype,"destroyer",void 0),bl([Lh()],Tx.prototype,"outFields",void 0),bl([Lh({type:["custom"],readOnly:!0})],Tx.prototype,"type",void 0),Tx=Mx=bl([md("esri.popup.content.CustomContent")],Tx);const Ex=Tx;var Ix;let Cx=Ix=class extends tp{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Ix({title:this.title,expression:this.expression})}};bl([Lh({type:String,json:{write:!0}})],Cx.prototype,"title",void 0),bl([Lh({type:String,json:{write:!0}})],Cx.prototype,"expression",void 0),bl([Lh({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Cx.prototype,"returnType",void 0),Cx=Ix=bl([md("esri.popup.ElementExpressionInfo")],Cx);const Ox=Cx;var Ax;let Px=Ax=class extends _x{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Ax({expressionInfo:null==(e=this.expressionInfo)?void 0:e.clone()})}};bl([Lh({type:Ox,json:{write:!0}})],Px.prototype,"expressionInfo",void 0),bl([Lh({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Px.prototype,"type",void 0),Px=Ax=bl([md("esri.popup.content.ExpressionContent")],Px);const Rx=Px,Lx=Vg()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Lx.toJSON.bind(Lx),Lx.fromJSON.bind(Lx);const Dx={year:"numeric",month:"numeric",day:"numeric"},Nx={year:"numeric",month:"long",day:"numeric"},Fx={year:"numeric",month:"short",day:"numeric"},jx={year:"numeric",month:"long",weekday:"long",day:"numeric"},$x={hour:"numeric",minute:"numeric"},Vx={...$x,second:"numeric"},zx={"short-date":Dx,"short-date-short-time":{...Dx,...$x},"short-date-short-time-24":{...Dx,...$x,hour12:!1},"short-date-long-time":{...Dx,...Vx},"short-date-long-time-24":{...Dx,...Vx,hour12:!1},"short-date-le":Dx,"short-date-le-short-time":{...Dx,...$x},"short-date-le-short-time-24":{...Dx,...$x,hour12:!1},"short-date-le-long-time":{...Dx,...Vx},"short-date-le-long-time-24":{...Dx,...Vx,hour12:!1},"long-month-day-year":Nx,"long-month-day-year-short-time":{...Nx,...$x},"long-month-day-year-short-time-24":{...Nx,...$x,hour12:!1},"long-month-day-year-long-time":{...Nx,...Vx},"long-month-day-year-long-time-24":{...Nx,...Vx,hour12:!1},"day-short-month-year":Fx,"day-short-month-year-short-time":{...Fx,...$x},"day-short-month-year-short-time-24":{...Fx,...$x,hour12:!1},"day-short-month-year-long-time":{...Fx,...Vx},"day-short-month-year-long-time-24":{...Fx,...Vx,hour12:!1},"long-date":jx,"long-date-short-time":{...jx,...$x},"long-date-short-time-24":{...jx,...$x,hour12:!1},"long-date-long-time":{...jx,...Vx},"long-date-long-time-24":{...jx,...Vx,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":$x,"long-time":Vx},Ux=Vg()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Ux.apiValues,Ux.toJSON.bind(Ux),Ux.fromJSON.bind(Ux);const qx={ar:"ar-u-nu-latn-ca-gregory"};let Gx=new WeakMap,Bx=zx["short-date-short-time"];function Wx(e){return zx[e]||null}function Hx(e,t){return function(e){const t=e||Bx;if(!Gx.has(t)){const e=Lg(),i=qx[Lg()]||e;Gx.set(t,new Intl.DateTimeFormat(i,t))}return Gx.get(t)}(t).format(e)}jg((()=>{Gx=new WeakMap,Bx=zx["short-date-short-time"]}));const Jx={ar:"ar-u-nu-latn"};let Yx=new WeakMap,Zx={};function Kx(e={}){const t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Xx(e,t){return function(e){const t=e||Zx;if(!Yx.has(t)){const i=Lg(),r=Jx[Lg()]||i;Yx.set(t,new Intl.NumberFormat(r,e))}return Yx.get(t)}(t).format(e)}var Qx;jg((()=>{Yx=new WeakMap,Zx={}}));let eS=Qx=class extends tp{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new Qx({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Hx(e,{...Wx(this.dateFormat),...this.dateTimeFormatOptions}):Xx(e,Kx(this))}};bl([Cb(Lx)],eS.prototype,"dateFormat",void 0),bl([Lh({type:Object,json:{read:!1}})],eS.prototype,"dateTimeFormatOptions",void 0),bl([Lh({type:Boolean,json:{write:!0}})],eS.prototype,"digitSeparator",void 0),bl([Lh({type:Ch,json:{write:!0}})],eS.prototype,"places",void 0),eS=Qx=bl([md("esri.popup.support.FieldInfoFormat")],eS);const tS=eS;var iS;let rS=iS=class extends tp{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new iS({fieldName:this.fieldName,format:this.format?ol(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};bl([Lh({type:String,json:{write:!0}})],rS.prototype,"fieldName",void 0),bl([Lh({type:tS,json:{write:!0}})],rS.prototype,"format",void 0),bl([Lh({type:Boolean,json:{write:!0,default:!1}})],rS.prototype,"isEditable",void 0),bl([Lh({type:String,json:{write:!0}})],rS.prototype,"label",void 0),bl([Cb(new $g({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],rS.prototype,"stringFieldOption",void 0),bl([Lh({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],rS.prototype,"statisticType",void 0),bl([Lh({type:String,json:{write:!0}})],rS.prototype,"tooltip",void 0),bl([Lh({type:Boolean,json:{write:!0}})],rS.prototype,"visible",void 0),rS=iS=bl([md("esri.popup.FieldInfo")],rS);const nS=rS;var oS;let sS=oS=class extends _x{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map((e=>e.toJSON()))}clone(){return new oS(ol({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};bl([Lh({type:Object,json:{write:!0}})],sS.prototype,"attributes",void 0),bl([Lh({type:String,json:{write:!0}})],sS.prototype,"description",void 0),bl([Lh({type:[nS]})],sS.prototype,"fieldInfos",void 0),bl([Mf("fieldInfos")],sS.prototype,"writeFieldInfos",null),bl([Lh({type:String,json:{write:!0}})],sS.prototype,"title",void 0),bl([Lh({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],sS.prototype,"type",void 0),sS=oS=bl([md("esri.popup.content.FieldsContent")],sS);const aS=sS;let lS=class extends tp{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};bl([Lh({type:String,json:{write:!0}})],lS.prototype,"altText",void 0),bl([Lh({type:String,json:{write:!0}})],lS.prototype,"caption",void 0),bl([Lh({type:String,json:{write:!0}})],lS.prototype,"title",void 0),bl([Lh({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],lS.prototype,"type",void 0),lS=bl([md("esri.popup.content.mixins.MediaInfo")],lS);const cS=lS;var uS;let hS=uS=class extends vd{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new uS({tooltip:this.tooltip,value:this.value})}};bl([Lh()],hS.prototype,"tooltip",void 0),bl([Lh()],hS.prototype,"value",void 0),hS=uS=bl([md("esri.popup.content.support.ChartMediaInfoValueSeries")],hS);const dS=hS;var pS;let fS=pS=class extends tp{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new pS({fields:ol(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};bl([Lh({type:[String],json:{write:!0}})],fS.prototype,"fields",void 0),bl([Lh({type:String,json:{write:!0}})],fS.prototype,"normalizeField",void 0),bl([Lh({type:[dS],json:{read:!1}})],fS.prototype,"series",void 0),bl([Lh({type:String,json:{write:!0}})],fS.prototype,"tooltipField",void 0),fS=pS=bl([md("esri.popup.content.support.ChartMediaInfoValue")],fS);const mS=fS;let gS=class extends cS{constructor(e){super(e),this.type=null,this.value=null}};bl([Lh({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],gS.prototype,"type",void 0),bl([Lh({type:mS,json:{write:!0}})],gS.prototype,"value",void 0),gS=bl([md("esri.popup.content.mixins.ChartMediaInfo")],gS);const yS=gS,vS=Vg()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var bS;let wS=bS=class extends yS{constructor(e){super(e),this.type="bar-chart"}clone(){return new bS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};bl([Lh({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:vS.write}})],wS.prototype,"type",void 0),wS=bS=bl([md("esri.popup.content.BarChartMediaInfo")],wS);const _S=wS;var xS;let SS=xS=class extends yS{constructor(e){super(e),this.type="column-chart"}clone(){return new xS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};bl([Lh({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:vS.write}})],SS.prototype,"type",void 0),SS=xS=bl([md("esri.popup.content.ColumnChartMediaInfo")],SS);const kS=SS;var MS;let TS=MS=class extends tp{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new MS({linkURL:this.linkURL,sourceURL:this.sourceURL})}};bl([Lh({type:String,json:{write:!0}})],TS.prototype,"linkURL",void 0),bl([Lh({type:String,json:{write:!0}})],TS.prototype,"sourceURL",void 0),TS=MS=bl([md("esri.popup.content.support.ImageMediaInfoValue")],TS);const ES=TS;var IS;let CS=IS=class extends cS{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new IS({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};bl([Lh({type:Number,json:{write:!0}})],CS.prototype,"refreshInterval",void 0),bl([Lh({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],CS.prototype,"type",void 0),bl([Lh({type:ES,json:{write:!0}})],CS.prototype,"value",void 0),CS=IS=bl([md("esri.popup.content.ImageMediaInfo")],CS);const OS=CS;var AS;let PS=AS=class extends yS{constructor(e){super(e),this.type="line-chart"}clone(){return new AS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};bl([Lh({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:vS.write}})],PS.prototype,"type",void 0),PS=AS=bl([md("esri.popup.content.LineChartMediaInfo")],PS);const RS=PS;var LS;let DS=LS=class extends yS{constructor(e){super(e),this.type="pie-chart"}clone(){return new LS({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};bl([Lh({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:vS.write}})],DS.prototype,"type",void 0),DS=LS=bl([md("esri.popup.content.PieChartMediaInfo")],DS);const NS=DS,FS={base:cS,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":_S,"column-chart":kS,"line-chart":RS,"pie-chart":NS,image:OS}};var jS;let $S=jS=class extends _x{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map((e=>"image"===e.type?OS.fromJSON(e):"barchart"===e.type?_S.fromJSON(e):"columnchart"===e.type?kS.fromJSON(e):"linechart"===e.type?RS.fromJSON(e):"piechart"===e.type?NS.fromJSON(e):void 0)).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map((e=>e.toJSON()))}clone(){return new jS(ol({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};bl([Lh()],$S.prototype,"activeMediaInfoIndex",void 0),bl([Lh({type:Object,json:{write:!0}})],$S.prototype,"attributes",void 0),bl([Lh({type:String,json:{write:!0}})],$S.prototype,"description",void 0),bl([Lh({types:[FS]})],$S.prototype,"mediaInfos",void 0),bl([Mm("mediaInfos")],$S.prototype,"readMediaInfos",null),bl([Mf("mediaInfos")],$S.prototype,"writeMediaInfos",null),bl([Lh({type:String,json:{write:!0}})],$S.prototype,"title",void 0),bl([Lh({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],$S.prototype,"type",void 0),$S=jS=bl([md("esri.popup.content.MediaContent")],$S);const VS=$S;var zS;let US=zS=class extends _x{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new zS({text:this.text})}};bl([Lh({type:String,json:{write:!0}})],US.prototype,"text",void 0),bl([Lh({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],US.prototype,"type",void 0),US=zS=bl([md("esri.popup.content.TextContent")],US);const qS=US,GS={base:null,key:"type",typeMap:{attachment:kx,media:VS,text:qS,expression:Rx,field:aS}};var BS;let WS=BS=class extends tp{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new BS({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};bl([Lh({type:String,json:{write:!0}})],WS.prototype,"name",void 0),bl([Lh({type:String,json:{write:!0}})],WS.prototype,"title",void 0),bl([Lh({type:String,json:{write:!0}})],WS.prototype,"expression",void 0),bl([Lh({type:["string","number"],json:{write:!0}})],WS.prototype,"returnType",void 0),WS=BS=bl([md("esri.popup.ExpressionInfo")],WS);const HS=WS;var JS;let YS=JS=class extends tp{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new JS({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};bl([Lh({type:Boolean,json:{write:!0}})],YS.prototype,"returnTopmostRaster",void 0),bl([Lh({type:Boolean,json:{write:!0}})],YS.prototype,"showNoDataRecords",void 0),YS=JS=bl([md("esri.popup.LayerOptions")],YS);const ZS=YS;var KS;let XS=KS=class extends tp{constructor(e){super(e),this.field=null,this.order=null}clone(){return new KS({field:this.field,order:this.order})}};bl([Lh({type:String,json:{write:!0}})],XS.prototype,"field",void 0),bl([Lh({type:["asc","desc"],json:{write:!0}})],XS.prototype,"order",void 0),XS=KS=bl([md("esri.popup.support.RelatedRecordsInfoFieldOrder")],XS);const QS=XS;var ek;let tk=ek=class extends tp{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new ek({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ol(this.orderByFields):null})}};bl([Lh({type:Boolean,json:{write:!0}})],tk.prototype,"showRelatedRecords",void 0),bl([Lh({type:[QS],json:{write:!0}})],tk.prototype,"orderByFields",void 0),tk=ek=bl([md("esri.popup.RelatedRecordsInfo")],tk);const ik=tk;var rk;let nk=rk=class extends(c_(vd)){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new rk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};bl([Lh()],nk.prototype,"active",void 0),bl([Lh()],nk.prototype,"className",void 0),bl([Lh()],nk.prototype,"disabled",void 0),bl([Lh()],nk.prototype,"id",void 0),bl([Lh()],nk.prototype,"indicator",void 0),bl([Lh()],nk.prototype,"title",void 0),bl([Lh()],nk.prototype,"type",void 0),bl([Lh()],nk.prototype,"visible",void 0),nk=rk=bl([md("esri.support.actions.ActionBase")],nk);const ok=nk;var sk;let ak=sk=class extends ok{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new sk({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};bl([Lh()],ak.prototype,"image",void 0),ak=sk=bl([md("esri.support.Action.ActionButton")],ak);const lk=ak;var ck;let uk=ck=class extends ok{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new ck({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};bl([Lh()],uk.prototype,"image",void 0),bl([Lh()],uk.prototype,"value",void 0),uk=ck=bl([md("esri.support.Action.ActionToggle")],uk);const hk=uk;var dk;const pk=Fd.ofType({key:"type",defaultKeyValue:"button",base:ok,typeMap:{button:lk,toggle:hk}}),fk={base:_x,key:"type",typeMap:{media:VS,custom:Ex,text:qS,attachments:kx,fields:aS,expression:Rx}},mk="esri.PopupTemplate",gk=Dl.getLogger(mk),yk=["attachments","fields","media","text","expression"];let vk=dk=class extends tp{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map((e=>Ih(fk,e))):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||hu(e)?e:(gk.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter((e=>-1!==yk.indexOf(e.type))).map((e=>e&&e.toJSON(r))),t.popupElements.forEach((e=>{"attachments"===e.type?this._writeAttachmentContent(t):"media"===e.type?this._writeMediaContent(e,t):"text"===e.type&&this._writeTextContent(e,t)}))):t.description=e}writeFieldInfos(e,t,i,r){const{content:n}=this,o=Array.isArray(n)?n:null;if(e){const i=o?o.filter((e=>"fields"===e.type)):[],n=i.length&&i.every((e=>{var t;return null==(t=e.fieldInfos)?void 0:t.length}));t.fieldInfos=e.filter(Boolean).map((e=>{const t=e.toJSON(r);return n&&(t.visible=!1),t}))}if(o)for(const e of o)"fields"===e.type&&this._writeFieldsContent(e,t)}writeLayerOptions(e,t,i,r){t[i]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?ol(e.toArray()):[];return new dk({actions:t,content:Array.isArray(this.content)?ol(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?ol(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?ol(this.fieldInfos):null,layerOptions:this.layerOptions?ol(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?ol(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?ol(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),$_(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=ol(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach((e=>{const i=t.fieldInfos.find((t=>t.fieldName.toLowerCase()===e.fieldName.toLowerCase()));i?i.visible=!0:t.fieldInfos.push(e)})):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=ol(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map((i=>"media"===i.type?(i.mediaInfos||!t||r.mediaInfos||(i.mediaInfos=t,r.mediaInfos=!0),VS.fromJSON(i)):"text"===i.type?(i.text||!e||r.description||(i.text=e,r.description=!0),qS.fromJSON(i)):"attachments"===i.type?kx.fromJSON(i):"fields"===i.type?aS.fromJSON(i):"expression"===i.type?Rx.fromJSON(i):void 0)).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new qS({text:e})):r.push(new aS),Array.isArray(t)&&t.length&&r.push(VS.fromJSON({mediaInfos:t})),i&&r.push(kx.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=null==e?void 0:e.type;if("attachments"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if("custom"===t)return e.outFields||[];if("fields"===t)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if("media"===t){const t=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...t.reduce(((e,t)=>[...e,...this._getMediaInfoFields(t)]),[])]}return"text"===t?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,n=r||{},{fields:o=[],normalizeField:s,tooltipField:a,sourceURL:l,linkURL:c}=n,u=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(c),...o];return s&&u.push(s),a&&u.push(a),u}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce(((e,t)=>[...e,..."expression"===t.type&&t.expressionInfo?[t.expressionInfo]:[]]),t):[]}_getContentFields(e){return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce(((e,t)=>[...e,...this._getContentElementFields(t)]),[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map((i=>U_(e,t,i.expression))))}_getFieldInfoFields(e){return e?e.filter((e=>void 0===e.visible||!!e.visible)).map((e=>e.fieldName)).filter((e=>-1===e.indexOf("relationships/")&&-1===e.indexOf("expression/"))):[]}_getActionsFields(e){return e?e.toArray().reduce(((e,t)=>[...e,...this._getActionFields(t)]),[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,n="button"===r||"toggle"===r?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return"string"==typeof e?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||"string"!=typeof e)return[];const t=e.match(/{[^}]*}/g);if(!t)return[];const i=/\{(\w+):.+\}/,r=t.filter((e=>!(0===e.indexOf("{relationships/")||0===e.indexOf("{expression/")))).map((e=>e.replace(i,"{$1}")));return r?r.map((e=>e.slice(1,-1))):[]}};bl([Lh({type:pk})],vk.prototype,"actions",void 0),bl([Lh()],vk.prototype,"content",void 0),bl([Am("content")],vk.prototype,"castContent",null),bl([Mm("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],vk.prototype,"readContent",null),bl([Mf("content",{popupElements:{type:Fd.ofType(GS)},showAttachments:{type:Boolean},mediaInfos:{type:Fd.ofType(FS)},description:{type:String}})],vk.prototype,"writeContent",null),bl([Lh({type:[HS],json:{write:!0}})],vk.prototype,"expressionInfos",void 0),bl([Lh({type:[nS]})],vk.prototype,"fieldInfos",void 0),bl([Mf("fieldInfos")],vk.prototype,"writeFieldInfos",null),bl([Lh({type:ZS})],vk.prototype,"layerOptions",void 0),bl([Mf("layerOptions")],vk.prototype,"writeLayerOptions",null),bl([Lh({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],vk.prototype,"lastEditInfoEnabled",void 0),bl([Lh()],vk.prototype,"outFields",void 0),bl([Lh()],vk.prototype,"overwriteActions",void 0),bl([Lh()],vk.prototype,"returnGeometry",void 0),bl([Lh({json:{type:String}})],vk.prototype,"title",void 0),bl([Mf("title")],vk.prototype,"writeTitle",null),bl([Lh({type:ik,json:{write:!0}})],vk.prototype,"relatedRecordsInfo",void 0),vk=dk=bl([md(mk)],vk);const bk=vk,wk=new $g({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let _k=0,xk=class extends tp{constructor(e){super(e),this.id="sym"+_k++,this.type=null,this.color=new Eb([0,0,0,1])}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};bl([Lh({type:wk.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:wk.write}}})],xk.prototype,"type",void 0),bl([Lh({type:Eb,json:{write:{allowNull:!0}}})],xk.prototype,"color",void 0),bl([Mm("color")],xk.prototype,"readColor",null),xk=bl([md("esri.symbols.Symbol")],xk);const Sk=xk;var kk;let Mk=kk=class extends Sk{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if("CIMSymbolReference"===this.data.type){const i=this.data.primitiveOverrides;if(i){const r=i.map((i=>{const r=i.valueExpressionInfo;return U_(e,t,r.expression)}));await Promise.all(r)}}}clone(){return new kk({data:ol(this.data)})}hash(){return Pl(JSON.stringify(this.data)).toString()}};bl([Lh({json:{write:!1}})],Mk.prototype,"color",void 0),bl([Lh({json:{write:!0}})],Mk.prototype,"data",void 0),bl([Mm("data",["symbol"])],Mk.prototype,"readData",null),bl([Mf("data",{})],Mk.prototype,"writeData",null),bl([Cb({CIMSymbolReference:"cim"},{readOnly:!0})],Mk.prototype,"type",void 0),Mk=kk=bl([md("esri.symbols.CIMSymbol")],Mk);const Tk=Mk;let Ek=class extends tp{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};bl([Lh({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ek.prototype,"enabled",void 0),bl([Mf("enabled")],Ek.prototype,"writeEnabled",null),bl([Lh({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Ek.prototype,"type",void 0),Ek=bl([md("esri.symbols.Symbol3DLayer")],Ek);const Ik=Ek,Ck=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function Ok(e){return e?e/72*96:0}function Ak(e){return e?72*e/96:0}function Pk(e){if("string"==typeof e){const t=e.match(Ck);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),n="-"===e.charAt(0),o="px"===r?Ak(i):i;return n?-o:o}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function Rk(e=0,t=0){return{x:e,y:t}}function Lk(e=0,t=0){return[e,t]}const Dk={type:Eb,json:{type:[Ch],default:null,read:{source:["color","transparency"],reader:function(e,t){const i=null!=t.transparency?Rb(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Eb([r[0]||0,r[1]||0,r[2]||0,i]):null}},write:{target:{color:{type:[Ch]},transparency:{type:Ch}},writer:function(e,t){t.color=e.toJSON().slice(0,3);const i=Pb(e.a);0!==i&&(t.transparency=i)}}}},Nk={type:Number,cast:Pk,json:{write:!0}};let Fk=class extends tp{constructor(e){super(e),this.color=new Eb([0,0,0,1]),this.extensionLength=0,this.size=Ak(1)}clone(){}cloneProperties(){return{color:ol(this.color),size:this.size,extensionLength:this.extensionLength}}};bl([Lh({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Fk.prototype,"type",void 0),bl([Lh(Dk)],Fk.prototype,"color",void 0),bl([Lh({...Nk,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Fk.prototype,"extensionLength",void 0),bl([Lh(Nk)],Fk.prototype,"size",void 0),Fk=bl([md("esri.symbols.edges.Edges3D")],Fk);const jk=Fk;var $k;let Vk=$k=class extends jk{constructor(e){super(e),this.type="sketch"}clone(){return new $k(this.cloneProperties())}};bl([Cb({sketch:"sketch"},{readOnly:!0})],Vk.prototype,"type",void 0),Vk=$k=bl([md("esri.symbols.edges.SketchEdges3D")],Vk);const zk=Vk;var Uk;let qk=Uk=class extends jk{constructor(e){super(e),this.type="solid"}clone(){return new Uk(this.cloneProperties())}};bl([Cb({solid:"solid"},{readOnly:!0})],qk.prototype,"type",void 0),qk=Uk=bl([md("esri.symbols.support.SolidEdges3D")],qk);const Gk={types:{key:"type",base:jk,typeMap:{solid:qk,sketch:zk}},json:{write:!0}};var Bk;let Wk=Bk=class extends tp{constructor(e){super(e),this.color=null}clone(){const e={color:_a(this.color)?this.color.clone():null};return new Bk(e)}};var Hk;bl([Lh(Dk)],Wk.prototype,"color",void 0),Wk=Bk=bl([md("esri.symbols.support.Symbol3DMaterial")],Wk);let Jk=Hk=class extends Ik{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Hk({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:_a(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};bl([Cb({Extrude:"extrude"},{readOnly:!0})],Jk.prototype,"type",void 0),bl([Lh({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Jk.prototype,"size",void 0),bl([Lh({type:Wk,json:{write:!0}})],Jk.prototype,"material",void 0),bl([Lh({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Jk.prototype,"castShadows",void 0),bl([Lh(Gk)],Jk.prototype,"edges",void 0),Jk=Hk=bl([md("esri.symbols.ExtrudeSymbol3DLayer")],Jk);const Yk=Jk;let Zk=class extends Sk{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};bl([Cb({esriSLS:"simple-line"},{readOnly:!0})],Zk.prototype,"type",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],Zk.prototype,"width",void 0),Zk=bl([md("esri.symbols.LineSymbol")],Zk);const Kk=Zk,Xk=["arrow","circle","square","diamond","cross","x"];var Qk;let eM=Qk=class extends tp{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){"web-map"===(null==r?void 0:r.origin)?t[i]="arrow":t[i]=e}set color(e){this._set("color",e)}readColor(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){"web-map"===(null==r?void 0:r.origin)||(t[i]=e)}clone(){return new Qk({color:ol(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${null==(e=this.color)?void 0:e.hash()}.${this.style}`}};bl([Lh({type:["begin","end","begin-end"],json:{write:!0}})],eM.prototype,"placement",void 0),bl([Cb({"line-marker":"line-marker"},{readOnly:!0}),Lh({json:{origins:{"web-map":{write:!1}}}})],eM.prototype,"type",void 0),bl([Lh({type:Xk})],eM.prototype,"style",void 0),bl([Mf("style")],eM.prototype,"writeStyle",null),bl([Lh({type:Eb,value:null,json:{write:{allowNull:!0}}})],eM.prototype,"color",null),bl([Mm("color")],eM.prototype,"readColor",null),bl([Mf("color")],eM.prototype,"writeColor",null),eM=Qk=bl([md("esri.symbols.LineSymbolMarker")],eM);const tM=eM;var iM;const rM=new $g({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let nM=iM=class extends Kk{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,n,o){if(e&&"string"!=typeof e)return e;const s={};return null!=e&&(s.style=e),null!=t&&(s.color=t),null!=i&&(s.width=Pk(i)),null!=r&&(s.cap=r),null!=n&&(s.join=n),null!=o&&(s.miterLimit=Pk(o)),s}clone(){var e;return new iM({color:ol(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(e=this.marker)?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${null==(e=this.color)?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(t=this.marker)?void 0:t.hash()}`}};bl([Cb({esriSLS:"simple-line"},{readOnly:!0})],nM.prototype,"type",void 0),bl([Lh({type:rM.apiValues,json:{read:rM.read,write:rM.write}})],nM.prototype,"style",void 0),bl([Lh({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:"round"!==e&&(null==i||null==i.origin)})}}})],nM.prototype,"cap",void 0),bl([Lh({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:"round"!==e&&(null==i||null==i.origin)})}}})],nM.prototype,"join",void 0),bl([Lh({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":tM}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],nM.prototype,"marker",void 0),bl([Lh({type:Number,json:{read:!1,write:!1}})],nM.prototype,"miterLimit",void 0),nM=iM=bl([md("esri.symbols.SimpleLineSymbol")],nM);const oM=nM;let sM=class extends Sk{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};bl([Lh({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":oM}},json:{default:null,write:!0}})],sM.prototype,"outline",void 0),bl([Lh({type:["simple-fill","picture-fill"],readOnly:!0})],sM.prototype,"type",void 0),sM=bl([md("esri.symbols.FillSymbol")],sM);const aM=sM;let lM=class extends tp{constructor(e){super(e)}clone(){}};bl([Lh({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lM.prototype,"type",void 0),lM=bl([md("esri.symbols.patterns.LinePattern3D")],lM);const cM=lM;var uM;const hM=Vg()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let dM=uM=class extends cM{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new uM(e)}};bl([Lh({type:["style"]})],dM.prototype,"type",void 0),bl([Cb(hM),Lh({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],dM.prototype,"style",void 0),dM=uM=bl([md("esri.symbols.patterns.LineStylePattern3D")],dM);const pM=dM;let fM=class extends tp{constructor(e){super(e)}clone(){}};bl([Lh({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],fM.prototype,"type",void 0),fM=bl([md("esri.symbols.patterns.Pattern3D")],fM);const mM=fM;var gM;let yM=gM=class extends mM{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new gM(e)}};bl([Lh({type:["style"]})],yM.prototype,"type",void 0),bl([Lh({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],yM.prototype,"style",void 0),yM=gM=bl([md("esri.symbols.patterns.StylePattern3D")],yM);const vM=yM,bM={types:{key:"type",base:mM,typeMap:{style:vM}},json:{write:!0}},wM={types:{key:"type",base:cM,typeMap:{style:pM}},json:{write:!0}},_M=new Eb("white");new Eb("black");const xM=new Eb([255,255,255,0]);var SM;let kM=SM=class extends Wk{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:_a(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new SM(e)}};function MM(e=jM){return[e[0],e[1],e[2],e[3]]}function TM(e){return[e[0],e[1],e[2],e[3]]}function EM(e,t,i,r,n=MM()){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function IM(e,t=MM()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function CM(e,t){return new Eg({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function OM(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function AM(e){return xa(e)||e[0]>=e[2]?0:e[2]-e[0]}function PM(e){return e[1]>=e[3]?0:e[3]-e[1]}function RM(e){return AM(e)*PM(e)}function LM(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function DM(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function NM(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}bl([Cb({multiply:"multiply",replace:"replace",tint:"tint"})],kM.prototype,"colorMixMode",void 0),kM=SM=bl([md("esri.symbols.support.Symbol3DFillMaterial")],kM);const FM=[1/0,1/0,-1/0,-1/0],jM=[0,0,0,0];function $M(e=XM){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function VM(e,t,i,r,n,o,s=$M()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s}function zM(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function UM(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function qM(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function GM(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function BM(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function WM(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function HM(e){return e?WM(e,KM):$M(KM)}function JM(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function YM(e){return 6===e.length}function ZM(e,t,i){if(xa(e)||xa(t))return e===t;if(!YM(e)||!YM(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const KM=[1/0,1/0,1/0,-1/0,-1/0,-1/0],XM=[0,0,0,0,0,0];function QM(e,{isPrimitive:t,width:i,depth:r,height:n}){const o=t?10:1;if(null==i&&null==n&&null==r)return[o*e[0],o*e[1],o*e[2]];const s=Jy(i,r,n);let a;for(let t=0;t<3;t++){const i=s[t];if(null!=i){a=i/e[t];break}}for(let t=0;t<3;t++)null==s[t]&&(s[t]=e[t]*a);return s}$M();const eT=VM(-.5,-.5,-.5,.5,.5,.5),tT=VM(-.5,-.5,0,.5,.5,1),iT=VM(-.5,-.5,0,.5,.5,.5);function rT(e){switch(e){case"sphere":case"cube":case"diamond":return eT;case"cylinder":case"cone":case"inverted-cone":return tT;case"tetrahedron":return iT;default:return}}const nT=["butt","square","round"],oT=[...nT,"none"],sT=["miter","bevel","round"];var aT;let lT=aT=class extends tp{constructor(e){super(e),this.color=new Eb([0,0,0,1]),this.size=Ak(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:_a(this.color)?this.color.clone():null,size:this.size,pattern:_a(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new aT(e)}};var cT;bl([Lh(Dk)],lT.prototype,"color",void 0),bl([Lh(Nk)],lT.prototype,"size",void 0),bl([Lh(wM)],lT.prototype,"pattern",void 0),bl([Lh({type:nT,json:{default:"butt",write:{overridePolicy(){return{enabled:_a(this.pattern)}}}}})],lT.prototype,"patternCap",void 0),lT=aT=bl([md("esri.symbols.support.Symbol3DOutline")],lT);let uT=cT=class extends Ik{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:_a(this.edges)?this.edges.clone():null,enabled:this.enabled,material:_a(this.material)?this.material.clone():null,pattern:_a(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:_a(this.outline)?this.outline.clone():null};return new cT(e)}static fromSimpleFillSymbol(e){var t,i,r,n,o,s;const a=e.outline&&e.outline.style&&"inside-frame"!==e.outline.style&&"solid"!==e.outline.style?new pM({style:e.outline.style}):null,l={size:null!=(t=null==(i=e.outline)?void 0:i.width)?t:0,color:(null!=(r=null==(n=e.outline)?void 0:n.color)?r:_M).clone(),pattern:a};return a&&null!=(o=e.outline)&&o.cap&&(l.patternCap=e.outline.cap),new cT({material:new kM({color:(null!=(s=e.color)?s:xM).clone()}),pattern:e.style&&"solid"!==e.style?new vM({style:e.style}):null,outline:l})}};bl([Cb({Fill:"fill"},{readOnly:!0})],uT.prototype,"type",void 0),bl([Lh({type:kM,json:{write:!0}})],uT.prototype,"material",void 0),bl([Lh(bM)],uT.prototype,"pattern",void 0),bl([Lh({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],uT.prototype,"castShadows",void 0),bl([Lh({type:lT,json:{write:!0}})],uT.prototype,"outline",void 0),bl([Lh(Gk)],uT.prototype,"edges",void 0),uT=cT=bl([md("esri.symbols.FillSymbol3DLayer")],uT);const hT=uT,dT={type:Number,cast:e=>{const t=hh(e);return 0===t?1:db(t,.1,4)},nonNullable:!0},pT={type:["left","right","center","justify"],nonNullable:!0},fT={type:["left","right","center"],nonNullable:!0},mT={type:["baseline","top","middle","bottom"],nonNullable:!0};var gT;let yT=gT=class extends tp{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Pk(e)}clone(){return new gT({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};bl([Lh({type:["none","underline","line-through"],json:{default:"none",write:!0}})],yT.prototype,"decoration",void 0),bl([Lh({type:String,json:{write:!0}})],yT.prototype,"family",void 0),bl([Lh({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],yT.prototype,"size",void 0),bl([Am("size")],yT.prototype,"castSize",null),bl([Lh({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],yT.prototype,"style",void 0),bl([Lh({type:["normal","lighter","bold","bolder"],json:{default:"normal",write:!0}})],yT.prototype,"weight",void 0),yT=gT=bl([md("esri.symbols.Font")],yT);const vT=yT;function bT(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=Wp(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=Hp(e,t.portalItem.itemUrl);kT.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return TT(e,t&&t.portal)}function wT(e,t,i=ET.YES){if(!e)return e;!Kp(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=Wp(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const n=TT(i,t.portal);r=Hp(TT(r,t.portal),n,n),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?gf(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(r,t&&t.portal),Kp(r)&&(r=Jp(r)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Kp(r)&&!Qp(r)&&i===ET.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function _T(e,t,i){return bT(e,i)}function xT(e,t,i,r){const n=wT(e,r);void 0!==n&&(t[i]=n)}const ST=/\/items\/([^\/]+)\/resources\//,kT=/^\.\/resources\//;function MT(e){const t=_a(e)?e.match(ST):null;return _a(t)?t[1]:null}function TT(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=Cp();return qp(r,`${r.scheme}://${i}`)?gf(e,t.portalHostname,i):gf(e,i,t.portalHostname)}var ET;!function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"}(ET||(ET={}));const IT=Object.freeze({__proto__:null,fromJSON:bT,toJSON:wT,read:_T,write:xT,itemIdFromResourceUrl:MT,get MarkKeep(){return ET}});var CT;const OT=Vg()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let AT=CT=class extends tp{constructor(e){super(e)}readHref(e,t,i){return e?bT(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Qp(e)?t.dataURI=e:(t.href=wT(e,r),Kp(t.href)&&(t.href=Jp(t.href))))}clone(){return new CT({href:this.href,primitive:this.primitive})}};var PT;bl([Lh({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],AT.prototype,"href",void 0),bl([Mm("href")],AT.prototype,"readHref",null),bl([Mf("href",{href:{type:String},dataURI:{type:String}})],AT.prototype,"writeHref",null),bl([Cb(OT)],AT.prototype,"primitive",void 0),AT=CT=bl([md("esri.symbols.support.IconSymbol3DLayerResource")],AT);let RT=PT=class extends vd{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new PT({x:this.x,y:this.y})}};var LT;bl([Lh({type:Number})],RT.prototype,"x",void 0),bl([Lh({type:Number})],RT.prototype,"y",void 0),RT=PT=bl([md("esri.symbols.support.Symbol3DAnchorPosition2D")],RT);let DT=LT=class extends tp{constructor(e){super(e),this.color=new Eb([0,0,0,1]),this.size=Ak(1)}clone(){const e={color:_a(this.color)?this.color.clone():null,size:this.size};return new LT(e)}};var NT;bl([Lh(Dk)],DT.prototype,"color",void 0),bl([Lh(Nk)],DT.prototype,"size",void 0),DT=LT=bl([md("esri.symbols.support.Symbol3DIconOutline")],DT);const FT=Dl.getLogger("esri.symbols.IconSymbol3DLayer");let jT=NT=class extends Ik{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new NT({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:_a(this.material)?this.material.clone():null,outline:_a(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||_M,i=$T(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||_M).clone()}:null;return new NT({size:e.size,resource:{primitive:UT(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||function(e){return 0===e.r&&0===e.g&&0===e.b}(e.color)?_M:e.color,i=$T(e);return new NT({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new NT({resource:{href:of({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function $T(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=VT(e.xoffset),n=VT(e.yoffset);return(r||n)&&t&&i?{x:-r/t,y:n/i}:null}function VT(e){return isFinite(e)?e:0}bl([Lh({type:Wk,json:{write:!0}})],jT.prototype,"material",void 0),bl([Lh({type:AT,json:{write:!0}})],jT.prototype,"resource",void 0),bl([Cb({Icon:"icon"},{readOnly:!0})],jT.prototype,"type",void 0),bl([Lh(Nk)],jT.prototype,"size",void 0),bl([Cb({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),Lh({json:{default:"center"}})],jT.prototype,"anchor",void 0),bl([Lh({type:RT,json:{type:[Number],read:{reader:e=>new RT({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],jT.prototype,"anchorPosition",void 0),bl([Lh({type:DT,json:{write:!0}})],jT.prototype,"outline",void 0),jT=NT=bl([md("esri.symbols.IconSymbol3DLayer")],jT);const zT={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function UT(e){return zT[e]||(FT.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const qT=jT;Dl.getLogger("esri.core.Clonable");const GT=e=>{let t=class extends e{clone(){const e=Ta(jl(this),"unable to clone instance of non-accessor class"),t=e.metadatas,i=e.store,r={},n=new Map;for(const e in t){const o=t[e],s=null==i?void 0:i.originOf(e),a=o.clonable;if(o.readOnly||!1===a||s!==ic.USER&&s!==ic.DEFAULTS&&s!==ic.WEB_MAP&&s!==ic.WEB_SCENE)continue;const l=this[e];let c=null;c="function"==typeof a?a(l):"reference"===a?l:sl(l),null!=l&&null==c||(s===ic.DEFAULTS?n.set(e,c):r[e]=c)}const o=new(Object.getPrototypeOf(this).constructor)(r);if(n.size){var s;const e=null==(s=jl(o))?void 0:s.store;if(e)for(const[t,i]of n)e.set(t,i,ic.DEFAULTS)}return o}};return t=bl([md("esri.core.Clonable")],t),t};let BT=class extends(GT(vd)){};BT=bl([md("esri.core.Clonable")],BT);let WT=class extends(GT(tp)){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return _a(e)&&e.placement===this.placement&&e.style===this.style&&(xa(this.color)&&xa(e.color)||_a(this.color)&&_a(e.color)&&this.color.toJSON()===e.color.toJSON())}};bl([Lh({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],WT.prototype,"type",void 0),bl([Lh({type:["begin","end","begin-end"],json:{default:"begin-end",write:!0}})],WT.prototype,"placement",void 0),bl([Lh({type:Xk,json:{default:"arrow",write:!0}})],WT.prototype,"style",void 0),bl([Lh({type:Eb,json:{type:[Ch],default:null,write:!0}})],WT.prototype,"color",void 0),WT=bl([md("esri.symbols.LineStyleMarker3D")],WT);const HT=WT;var JT;let YT=JT=class extends Ik{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ak(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:_a(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:_a(this.pattern)?this.pattern.clone():null,marker:_a(this.marker)?this.marker.clone():null};return new JT(e)}static fromSimpleLineSymbol(e){var t,i,r;const n={enabled:!0,size:null!=(t=e.width)?t:Ak(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&"inside-frame"!==e.style?new pM({style:e.style}):null,material:new Wk({color:(e.color||_M).clone()}),marker:e.marker?new HT({placement:e.marker.placement,style:e.marker.style,color:null!=(i=null==(r=e.marker.color)?void 0:r.clone())?i:null}):null};return new JT(n)}};bl([Lh({type:Wk,json:{write:!0}})],YT.prototype,"material",void 0),bl([Cb({Line:"line"},{readOnly:!0})],YT.prototype,"type",void 0),bl([Lh({type:sT,json:{write:!0,default:"miter"}})],YT.prototype,"join",void 0),bl([Lh({type:nT,json:{write:!0,default:"butt"}})],YT.prototype,"cap",void 0),bl([Lh(Nk)],YT.prototype,"size",void 0),bl([Lh(wM)],YT.prototype,"pattern",void 0),bl([Lh({types:{key:"type",base:HT,typeMap:{style:HT}},json:{write:!0}})],YT.prototype,"marker",void 0),YT=JT=bl([md("esri.symbols.LineSymbol3DLayer")],YT);const ZT=YT;var KT;const XT=Vg()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let QT=KT=class extends tp{clone(){return new KT({href:this.href,primitive:this.primitive})}};var eE;bl([Lh({type:String,json:{read:_T,write:xT}})],QT.prototype,"href",void 0),bl([Cb(XT)],QT.prototype,"primitive",void 0),QT=KT=bl([md("esri.symbols.support.ObjectSymbol3DLayerResource")],QT);let tE=eE=class extends vd{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new eE({x:this.x,y:this.y,z:this.z})}};var iE;bl([Lh({type:Number})],tE.prototype,"x",void 0),bl([Lh({type:Number})],tE.prototype,"y",void 0),bl([Lh({type:Number})],tE.prototype,"z",void 0),tE=eE=bl([md("esri.symbols.support.Symbol3DAnchorPosition3D")],tE);let rE=iE=class extends Ik{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new iE({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:_a(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};bl([Lh({type:Wk,json:{write:!0}})],rE.prototype,"material",void 0),bl([Lh({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rE.prototype,"castShadows",void 0),bl([Lh({type:QT,json:{write:!0}})],rE.prototype,"resource",void 0),bl([Cb({Object:"object"},{readOnly:!0})],rE.prototype,"type",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"width",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"height",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"depth",void 0),bl([Cb({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),Lh({json:{default:"origin"}})],rE.prototype,"anchor",void 0),bl([Lh({type:tE,json:{type:[Number],read:{reader:e=>new tE({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],rE.prototype,"anchorPosition",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"heading",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"tilt",void 0),bl([Lh({type:Number,json:{write:!0}})],rE.prototype,"roll",void 0),bl([Lh({readOnly:!0})],rE.prototype,"isPrimitive",null),rE=iE=bl([md("esri.symbols.ObjectSymbol3DLayer")],rE);const nE=rE;var oE;let sE=oE=class extends Ik{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return null!=e?e:null==t.height&&null!=t.size?t.size:void 0}readHeight(e,t){return null!=e?e:null==t.width&&null!=t.size?t.size:void 0}clone(){return new oE({enabled:this.enabled,material:_a(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};bl([Lh({type:Wk,json:{write:!0}})],sE.prototype,"material",void 0),bl([Lh({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],sE.prototype,"castShadows",void 0),bl([Cb({Path:"path"},{readOnly:!0})],sE.prototype,"type",void 0),bl([Lh({type:["circle","quad"],json:{write:!0,default:"circle"}})],sE.prototype,"profile",void 0),bl([Lh({type:sT,json:{write:!0,default:"miter"}})],sE.prototype,"join",void 0),bl([Lh({type:oT,json:{write:!0,default:"butt"}})],sE.prototype,"cap",void 0),bl([Lh({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],sE.prototype,"width",void 0),bl([Mm("width",["width","size","height"])],sE.prototype,"readWidth",null),bl([Lh({type:Number,json:{write:!0}})],sE.prototype,"height",void 0),bl([Mm("height",["height","size","width"])],sE.prototype,"readHeight",null),bl([Lh({type:["center","bottom","top"],json:{write:!0,default:"center"}})],sE.prototype,"anchor",void 0),bl([Lh({type:["heading","all"],json:{write:!0,default:"all"}})],sE.prototype,"profileRotation",void 0),sE=oE=bl([md("esri.symbols.PathSymbol3DLayer")],sE);const aE=sE;var lE;let cE=lE=class extends tp{constructor(){super(...arguments),this.color=new Eb([0,0,0,1]),this.size=0}clone(){const e={color:ol(this.color),size:this.size};return new lE(e)}};bl([Lh(Dk)],cE.prototype,"color",void 0),bl([Lh(Nk)],cE.prototype,"size",void 0),cE=lE=bl([md("esri.symbols.support.Symbol3DHalo")],cE);let uE=class extends(GT(tp)){constructor(e){super(e),this.color=null}};var hE;bl([Lh(Dk)],uE.prototype,"color",void 0),uE=bl([md("esri.symbols.support.Symbol3DTextBackground")],uE);let dE=hE=class extends Ik{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){_a(e)&&_a(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const n={...r,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return _a(this._userSize)?this._userSize:_a(this.font)&&null!=this.font.size?this.font.size:9}set size(e){this._userSize=e,_a(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new hE({enabled:this.enabled,font:this.font&&ol(this.font),halo:this.halo&&ol(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:_a(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ol(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new hE({font:_a(e.font)?e.font.clone():new vT,halo:pE(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Wk({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new uE({color:e.backgroundColor.clone()}):null})}};function pE(e,t){return e&&t>0?new cE({color:ol(e),size:t}):null}bl([Lh({type:vT,json:{write:!0}})],dE.prototype,"font",null),bl([Mf("font")],dE.prototype,"writeFont",null),bl([Lh({type:cE,json:{write:!0}})],dE.prototype,"halo",void 0),bl([Lh({...fT,json:{default:"center",write:!0}})],dE.prototype,"horizontalAlignment",void 0),bl([Lh({...dT,json:{default:1,write:!0}})],dE.prototype,"lineHeight",void 0),bl([Lh({type:Wk,json:{write:!0}})],dE.prototype,"material",void 0),bl([Lh({type:uE,json:{write:!0}})],dE.prototype,"background",void 0),bl([Lh(Nk)],dE.prototype,"size",null),bl([Lh({type:String,json:{write:!0}})],dE.prototype,"text",void 0),bl([Cb({Text:"text"},{readOnly:!0})],dE.prototype,"type",void 0),bl([Lh({...mT,json:{default:"baseline",write:!0}})],dE.prototype,"verticalAlignment",void 0),dE=hE=bl([md("esri.symbols.TextSymbol3DLayer")],dE);const fE=dE;var mE;let gE=mE=class extends Ik{constructor(e){super(e),this.color=yE.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new mE({color:ol(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};bl([Lh({type:Eb,nonNullable:!0,json:{type:[Ch],write:(e,t,i)=>t[i]=e.toArray(Eb.AlphaMode.UNLESS_OPAQUE),default:()=>yE.clone(),defaultEquals:e=>e.toCss(!0)===yE.toCss(!0)}})],gE.prototype,"color",void 0),bl([Cb({Water:"water"},{readOnly:!0})],gE.prototype,"type",void 0),bl([Lh({type:["small","medium","large"],json:{write:!0,default:"medium"}})],gE.prototype,"waterbodySize",void 0),bl([Lh({type:Number,json:{write:!0,default:null}})],gE.prototype,"waveDirection",void 0),bl([Lh({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],gE.prototype,"waveStrength",void 0),gE=mE=bl([md("esri.symbols.WaterSymbol3DLayer")],gE);const yE=new Eb([0,119,190]),vE=gE;var bE;let wE=bE=class extends vd{constructor(){super(...arguments),this.portal=null}clone(){return new bE({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};bl([Lh({type:String})],wE.prototype,"name",void 0),bl([Lh({type:String})],wE.prototype,"styleUrl",void 0),bl([Lh({type:String})],wE.prototype,"styleName",void 0),bl([Lh({type:sy})],wE.prototype,"portal",void 0),wE=bE=bl([md("esri.symbols.support.StyleOrigin")],wE);const _E=wE;var xE;let SE=xE=class extends vd{clone(){return new xE({url:this.url})}};bl([Lh({type:String})],SE.prototype,"url",void 0),SE=xE=bl([md("esri.symbols.support.Thumbnail")],SE);const kE={icon:qT,object:nE,line:ZT,path:aE,fill:hT,extrude:Yk,text:fE,water:vE},ME=Fd.ofType({base:Ik,key:"type",typeMap:kE,errorContext:"symbol-layer"}),TE=Dl.getLogger("esri.symbols.Symbol3D");let EE=class extends Sk{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||Fd;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&TE.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){jd(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const t=bT(e.styleUrl,i);return new _E({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new _E({portal:i&&i.portal||sy.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Fh("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let i=wT(e.styleUrl,r);Kp(i)&&(i=Jp(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!Vp(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new Fh("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ik||e&&kE[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};bl([Lh({json:{read:!1,write:!1}})],EE.prototype,"color",null),bl([Lh({type:ME,nonNullable:!0,json:{write:!0}}),Am($d)],EE.prototype,"symbolLayers",null),bl([Lh({type:_E})],EE.prototype,"styleOrigin",void 0),bl([Mm("styleOrigin")],EE.prototype,"readStyleOrigin",null),bl([Mf("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],EE.prototype,"writeStyleOrigin",null),bl([Lh({type:SE,json:{read:!1}})],EE.prototype,"thumbnail",void 0),bl([Lh({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],EE.prototype,"type",void 0),EE=bl([md("esri.symbols.Symbol3D")],EE);const IE=EE;let CE=class extends tp{constructor(e){super(e),this.visible=!0}clone(){}};bl([Lh({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],CE.prototype,"type",void 0),bl([Lh({readOnly:!0})],CE.prototype,"visible",void 0),CE=bl([md("esri.symbols.callouts.Callout3D")],CE);const OE=CE;var AE;let PE=AE=class extends tp{constructor(){super(...arguments),this.color=new Eb("white")}clone(){return new AE({color:ol(this.color)})}};bl([Lh(Dk)],PE.prototype,"color",void 0),PE=AE=bl([md("esri.symbols.callouts.LineCallout3DBorder")],PE);const RE=PE;var LE;Object.freeze({__proto__:null,get LineCallout3DBorder(){return PE},default:RE});let DE=LE=class extends OE{constructor(e){super(e),this.type="line",this.color=new Eb([0,0,0,1]),this.size=Ak(1),this.border=null}get visible(){return this.size>0&&_a(this.color)&&this.color.a>0}clone(){return new LE({color:ol(this.color),size:this.size,border:ol(this.border)})}};bl([Cb({line:"line"},{readOnly:!0})],DE.prototype,"type",void 0),bl([Lh(Dk)],DE.prototype,"color",void 0),bl([Lh(Nk)],DE.prototype,"size",void 0),bl([Lh({type:RE,json:{write:!0}})],DE.prototype,"border",void 0),bl([Lh({readOnly:!0})],DE.prototype,"visible",null),DE=LE=bl([md("esri.symbols.callouts.LineCallout3D")],DE);function NE(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function FE(e){if(!e)return!1;if(!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!NE(e)}const jE={types:{key:"type",base:OE,typeMap:{line:DE}},json:{write:!0}};var $E;let VE=$E=class extends tp{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new $E({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};var zE;bl([Lh(Nk)],VE.prototype,"screenLength",void 0),bl([Lh({type:Number,json:{write:!0,default:0}})],VE.prototype,"minWorldLength",void 0),bl([Lh({type:Number,json:{write:!0}})],VE.prototype,"maxWorldLength",void 0),VE=$E=bl([md("esri.symbols.support.Symbol3DVerticalOffset")],VE);const UE=Fd.ofType({base:null,key:"type",typeMap:{text:fE}});let qE=zE=class extends IE{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new UE,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return FE(this)}hasVisibleVerticalOffset(){return NE(this)}clone(){return new zE({styleOrigin:ol(this.styleOrigin),symbolLayers:ol(this.symbolLayers),thumbnail:ol(this.thumbnail),callout:ol(this.callout),verticalOffset:ol(this.verticalOffset)})}static fromTextSymbol(e){return new zE({symbolLayers:[fE.fromTextSymbol(e)]})}};bl([Lh({type:VE,json:{write:!0}})],qE.prototype,"verticalOffset",void 0),bl([Lh(jE)],qE.prototype,"callout",void 0),bl([Lh({json:{read:!1,write:!1}})],qE.prototype,"styleOrigin",void 0),bl([Lh({type:UE})],qE.prototype,"symbolLayers",void 0),bl([Cb({LabelSymbol3D:"label-3d"},{readOnly:!0})],qE.prototype,"type",void 0),qE=zE=bl([md("esri.symbols.LabelSymbol3D")],qE);const GE=qE;var BE;const WE=Fd.ofType({base:null,key:"type",typeMap:{line:ZT,path:aE}}),HE=Fd.ofType({base:null,key:"type",typeMap:{line:ZT,path:aE}});let JE=BE=class extends IE{constructor(e){super(e),this.symbolLayers=new WE,this.type="line-3d"}clone(){return new BE({styleOrigin:ol(this.styleOrigin),symbolLayers:ol(this.symbolLayers),thumbnail:ol(this.thumbnail)})}static fromSimpleLineSymbol(e){return new BE({symbolLayers:[ZT.fromSimpleLineSymbol(e)]})}};bl([Lh({type:WE,json:{type:HE}})],JE.prototype,"symbolLayers",void 0),bl([Cb({LineSymbol3D:"line-3d"},{readOnly:!0})],JE.prototype,"type",void 0),JE=BE=bl([md("esri.symbols.LineSymbol3D")],JE);const YE=JE;let ZE=class extends Sk{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};bl([Lh({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ZE.prototype,"angle",void 0),bl([Lh({type:["simple-marker","picture-marker"],readOnly:!0})],ZE.prototype,"type",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],ZE.prototype,"xoffset",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],ZE.prototype,"yoffset",void 0),bl([Lh({type:Number,cast:e=>"auto"===e?e:Pk(e),json:{write:!0}})],ZE.prototype,"size",void 0),ZE=bl([md("esri.symbols.MarkerSymbol")],ZE);const KE=ZE;var XE;const QE=Fd.ofType({base:null,key:"type",typeMap:{fill:hT}});let eI=XE=class extends IE{constructor(e){super(e),this.symbolLayers=new QE,this.type="mesh-3d"}clone(){return new XE({styleOrigin:ol(this.styleOrigin),symbolLayers:ol(this.symbolLayers),thumbnail:ol(this.thumbnail)})}};bl([Lh({type:QE})],eI.prototype,"symbolLayers",void 0),bl([Cb({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],eI.prototype,"type",void 0),eI=XE=bl([md("esri.symbols.MeshSymbol3D")],eI);const tI=eI;function iI(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!Kp(e)&&t.layer.parsedUrl?Yp(t.layer.parsedUrl.path,"images",e):bT(e,t)}const rI={json:{read:{source:["imageData","url"],reader:function(e,t,i){return t.imageData?of({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):iI(t.url,i)}},write:{writer(e,t,i,r){!function(e,t,i,r){if(Qp(e)){const n=nf(e);t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&xT(i.url,t,"url",r)}else xT(e,t,"url",r)}(e,t,this.source,r)}}}},nI={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=iI(t.url,i)),r}}}};var oI;let sI=oI=class extends aM{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),null!=i&&(n.width=Pk(i)),null!=r&&(n.height=Pk(r)),n}clone(){const e=new oI({color:ol(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ol(this.source)),e}hash(){var e;return`${super.hash()}.${null==(e=this.color)?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};bl([Cb({esriPFS:"picture-fill"},{readOnly:!0})],sI.prototype,"type",void 0),bl([Lh(rI)],sI.prototype,"url",void 0),bl([Lh({type:Number,json:{write:!0}})],sI.prototype,"xscale",void 0),bl([Lh({type:Number,json:{write:!0}})],sI.prototype,"yscale",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],sI.prototype,"width",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],sI.prototype,"height",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],sI.prototype,"xoffset",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],sI.prototype,"yoffset",void 0),bl([Lh(nI)],sI.prototype,"source",void 0),sI=oI=bl([md("esri.symbols.PictureFillSymbol")],sI);const aI=sI;var lI;let cI=lI=class extends KE{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;const r={};return e&&(r.url=e),null!=t&&(r.width=Pk(t)),null!=i&&(r.height=Pk(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new lI({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ol(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};bl([Lh({json:{write:!1}})],cI.prototype,"color",void 0),bl([Cb({esriPMS:"picture-marker"},{readOnly:!0})],cI.prototype,"type",void 0),bl([Lh(rI)],cI.prototype,"url",void 0),bl([Lh(nI)],cI.prototype,"source",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],cI.prototype,"height",void 0),bl([Mm("height",["height","size"])],cI.prototype,"readHeight",null),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],cI.prototype,"width",void 0),bl([Lh({json:{write:!1}})],cI.prototype,"size",void 0),cI=lI=bl([md("esri.symbols.PictureMarkerSymbol")],cI);const uI=cI;var hI;const dI=Fd.ofType({base:null,key:"type",typeMap:{icon:qT,object:nE,text:fE}});let pI=hI=class extends IE{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new dI,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return FE(this)}hasVisibleVerticalOffset(){return NE(this)}clone(){return new hI({verticalOffset:ol(this.verticalOffset),callout:ol(this.callout),styleOrigin:ol(this.styleOrigin),symbolLayers:ol(this.symbolLayers),thumbnail:ol(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new hI({symbolLayers:[qT.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new hI({symbolLayers:[qT.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,i;return"CIMPointSymbol"!==(null==(t=e.data)||null==(i=t.symbol)?void 0:i.type)?null:e.data.symbol.callout?new hI({symbolLayers:[qT.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new hI({symbolLayers:[qT.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new hI({symbolLayers:[fE.fromTextSymbol(e)]})}};bl([Lh({type:VE,json:{write:!0}})],pI.prototype,"verticalOffset",void 0),bl([Lh(jE)],pI.prototype,"callout",void 0),bl([Lh({type:dI,json:{origins:{"web-scene":{write:!0}}}})],pI.prototype,"symbolLayers",void 0),bl([Cb({PointSymbol3D:"point-3d"},{readOnly:!0})],pI.prototype,"type",void 0),pI=hI=bl([md("esri.symbols.PointSymbol3D")],pI);const fI=pI;var mI;const gI=Fd.ofType({base:null,key:"type",typeMap:{extrude:Yk,fill:hT,icon:qT,line:ZT,object:nE,text:fE,water:vE}}),yI=Fd.ofType({base:null,key:"type",typeMap:{extrude:Yk,fill:hT,icon:qT,line:ZT,object:nE,water:vE}});let vI=mI=class extends IE{constructor(e){super(e),this.symbolLayers=new gI,this.type="polygon-3d"}writeSymbolLayers(e,t,i,r){const n=e.filter((e=>"text"!==e.type));if(r&&r.messages&&n.length<e.length){const t=e.find((e=>"text"===e.type));r.messages.push(new Ac("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:t}))}t[i]=n.map((e=>e.write({},r))).toArray()}clone(){return new mI({styleOrigin:ol(this.styleOrigin),symbolLayers:ol(this.symbolLayers),thumbnail:ol(this.thumbnail)})}static fromJSON(e){const t=new mI;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.getItemAt(0).type&&"line"===t.symbolLayers.getItemAt(1).type){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(i.outline={size:r.size,color:_a(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new mI({symbolLayers:[hT.fromSimpleFillSymbol(e)]})}};bl([Lh({type:gI,json:{type:yI}})],vI.prototype,"symbolLayers",void 0),bl([Mf("web-scene","symbolLayers")],vI.prototype,"writeSymbolLayers",null),bl([Cb({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],vI.prototype,"type",void 0),vI=mI=bl([md("esri.symbols.PolygonSymbol3D")],vI);const bI=vI;var wI;const _I=new $g({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let xI=wI=class extends aM{constructor(...e){super(...e),this.color=new Eb([0,0,0,.25]),this.outline=new oM,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e)return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new wI({color:ol(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};bl([Lh()],xI.prototype,"color",void 0),bl([Lh()],xI.prototype,"outline",void 0),bl([Cb({esriSFS:"simple-fill"},{readOnly:!0})],xI.prototype,"type",void 0),bl([Lh({type:_I.apiValues,json:{read:_I.read,write:_I.write}})],xI.prototype,"style",void 0),xI=wI=bl([md("esri.symbols.SimpleFillSymbol")],xI);const SI=xI;var kI;const MI=new $g({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let TI=kI=class extends KE{constructor(...e){super(...e),this.color=new Eb([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new oM}normalizeCtorArgs(e,t,i,r){if(e&&"string"!=typeof e)return e;const n={};return e&&(n.style=e),null!=t&&(n.size=Pk(t)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new kI({angle:this.angle,color:ol(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(e=this.outline)?void 0:e.hash()}`}};bl([Lh()],TI.prototype,"color",void 0),bl([Mf("color")],TI.prototype,"writeColor",null),bl([Cb({esriSMS:"simple-marker"},{readOnly:!0})],TI.prototype,"type",void 0),bl([Lh()],TI.prototype,"size",void 0),bl([Lh({type:MI.apiValues,json:{read:MI.read,write:MI.write}})],TI.prototype,"style",void 0),bl([Lh({type:String,json:{write:!0}})],TI.prototype,"path",null),bl([Lh({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":oM}},json:{default:null,write:!0}})],TI.prototype,"outline",void 0),TI=kI=bl([md("esri.symbols.SimpleMarkerSymbol")],TI);const EI=TI;var II;let CI=II=class extends Sk{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new vT,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&"string"!=typeof e)return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&"string"!=typeof r?r.origin:t[i]=e}castLineWidth(e){return Pk(e)}writeLineHeight(e,t,i,r){r&&"string"!=typeof r?r.origin:t[i]=e}clone(){return new II({angle:this.angle,backgroundColor:ol(this.backgroundColor),borderLineColor:ol(this.borderLineColor),borderLineSize:this.borderLineSize,color:ol(this.color),font:this.font&&this.font.clone(),haloColor:ol(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};bl([Lh({type:Eb,json:{write:!0}})],CI.prototype,"backgroundColor",void 0),bl([Lh({type:Eb,json:{write:!0}})],CI.prototype,"borderLineColor",void 0),bl([Lh({type:Number,json:{write:!0}})],CI.prototype,"borderLineSize",void 0),bl([Lh({type:vT,json:{write:!0}})],CI.prototype,"font",void 0),bl([Lh({...pT,json:{write:!0}})],CI.prototype,"horizontalAlignment",void 0),bl([Lh({type:Boolean,json:{write:!0}})],CI.prototype,"kerning",void 0),bl([Lh({type:Eb,json:{write:!0}})],CI.prototype,"haloColor",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],CI.prototype,"haloSize",void 0),bl([Lh({type:Boolean,json:{write:!0}})],CI.prototype,"rightToLeft",void 0),bl([Lh({type:Boolean,json:{write:!0}})],CI.prototype,"rotated",void 0),bl([Lh({type:String,json:{write:!0}})],CI.prototype,"text",void 0),bl([Cb({esriTS:"text"},{readOnly:!0})],CI.prototype,"type",void 0),bl([Lh({...mT,json:{write:!0}})],CI.prototype,"verticalAlignment",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],CI.prototype,"xoffset",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],CI.prototype,"yoffset",void 0),bl([Lh({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],CI.prototype,"angle",void 0),bl([Lh({type:Number,json:{write:!0}})],CI.prototype,"width",void 0),bl([Lh({type:Number})],CI.prototype,"lineWidth",void 0),bl([Mf("lineWidth")],CI.prototype,"writeLineWidth",null),bl([Am("lineWidth")],CI.prototype,"castLineWidth",null),bl([Lh(dT)],CI.prototype,"lineHeight",void 0),bl([Mf("lineHeight")],CI.prototype,"writeLineHeight",null),CI=II=bl([md("esri.symbols.TextSymbol")],CI);const OI=CI;var AI;const PI=Dl.getLogger("esri.symbols.WebStyleSymbol");let RI=AI=class extends Sk{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new AI({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=await import("./chunks/webStyleSymbolUtils-f88f3112.js");Yc(t);const r=i.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return r.catch((e=>{PI.error("#fetchSymbol()","Failed to create symbol from style",e)})),r}};bl([Lh({json:{write:!1}})],RI.prototype,"color",void 0),bl([Lh({type:String,json:{write:!0}})],RI.prototype,"styleName",void 0),bl([Lh({type:sy,json:{write:!1}})],RI.prototype,"portal",void 0),bl([Lh({type:String,json:{read:_T,write:xT}})],RI.prototype,"styleUrl",void 0),bl([Lh({type:SE,json:{read:!1}})],RI.prototype,"thumbnail",void 0),bl([Lh({type:String,json:{write:!0}})],RI.prototype,"name",void 0),bl([Cb({styleSymbolReference:"web-style"},{readOnly:!0})],RI.prototype,"type",void 0),RI=AI=bl([md("esri.symbols.WebStyleSymbol")],RI);const LI=RI;function DI(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function NI(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const FI={base:Sk,key:"type",typeMap:{"simple-fill":SI,"picture-fill":aI,"picture-marker":uI,"simple-line":oM,"simple-marker":EI,text:OI,"label-3d":GE,"line-3d":YE,"mesh-3d":tI,"point-3d":fI,"polygon-3d":bI,"web-style":LI,cim:Tk},errorContext:"symbol"},jI={base:Sk,key:"type",typeMap:{"picture-marker":uI,"simple-marker":EI,text:OI,"web-style":LI,cim:Tk},errorContext:"symbol"},$I=zh({types:FI}),VI={base:Sk,key:"type",typeMap:{"simple-fill":SI,"picture-fill":aI,"picture-marker":uI,"simple-line":oM,"simple-marker":EI,text:OI,"line-3d":YE,"mesh-3d":tI,"point-3d":fI,"polygon-3d":bI,"web-style":LI,cim:Tk},errorContext:"symbol"},zI={base:Sk,key:"type",typeMap:{text:OI,"label-3d":GE},errorContext:"symbol"},UI={base:Sk,key:"type",typeMap:{"line-3d":YE,"mesh-3d":tI,"point-3d":fI,"polygon-3d":bI,"web-style":LI,cim:Tk},errorContext:"symbol"},qI={base:Sk,key:"type",typeMap:{"label-3d":GE},errorContext:"symbol"},GI=Ih(FI);function BI(e){if(!_a(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return 0!==Object.keys(t).length?t:null}let WI=class extends(GT(tp)){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:ju(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&_a(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:BI(this.aggregateGeometries),geometry:_a(this.geometry)?this.geometry.toJSON():null,symbol:_a(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){_a(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};"attributes"===e&&(n.attributeName=r),this.layer.graphicChanged(n)}};bl([Lh({value:null,json:{read:function(e){if(!e)return null;const t={};for(const i in e){const r=r_(e[i]);r&&(t[i]=r)}return 0!==Object.keys(t).length?t:null}}})],WI.prototype,"aggregateGeometries",null),bl([Lh({value:null})],WI.prototype,"attributes",null),bl([Lh({value:null,types:a_,json:{read:r_}})],WI.prototype,"geometry",null),bl([Lh({type:Boolean})],WI.prototype,"isAggregate",void 0),bl([Lh({clonable:"reference"})],WI.prototype,"layer",void 0),bl([Lh({type:bk})],WI.prototype,"popupTemplate",void 0),bl([Lh({clonable:"reference"})],WI.prototype,"sourceLayer",void 0),bl([Lh({value:null,types:FI})],WI.prototype,"symbol",null),bl([Lh({type:Boolean,value:!0})],WI.prototype,"visible",null),WI=bl([md("esri.Graphic")],WI),(WI||(WI={})).generateUID=ju;const HI=WI;class JI{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,i,r=0,n=!1){return(i-=r)<e?i+=this.ndiff(e-i):i>t&&(i-=this.ndiff(i-t)),n&&i===t&&(i=e),i+r}normalize(e,t=0,i=!1){return this._normalize(this.min,this.max,e,t,i)}clamp(e,t=0){return db(e-t,this.min,this.max)+t}monotonic(e,t,i){return e<t?t:t+this.ndiff(e-t,i)}minimalMonotonic(e,t,i){return this._normalize(e,e+this.range,t,i)}center(e,t,i){return t=this.monotonic(e,t,i),this.normalize((e+t)/2,i)}diff(e,t,i){return this.monotonic(e,t,i)-e}shortestSignedDiff(e,t){e=this.normalize(e);const i=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(i)<Math.abs(r)?i:r}contains(e,t,i){return t=this.minimalMonotonic(e,t),(i=this.minimalMonotonic(e,i))>e&&i<t}}function YI(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}YI(new JI(0,2*Math.PI)),YI(new JI(-Math.PI,Math.PI));const ZI=YI(new JI(0,360));let KI=class extends(GT(tp)){constructor(...e){super(...e),this.position=new Qm([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const n={position:e};return null!=t&&(n.heading=t),null!=i&&(n.tilt=i),null!=r&&(n.fov=r),n}return e}writePosition(e,t,i,r){const n=e.clone();n.x=hh(e.x||0),n.y=hh(e.y||0),n.z=e.hasZ?hh(e.z||0):e.z,t[i]=n.write({},r)}readPosition(e,t){const i=new Qm;return i.read(e,t),i.x=hh(i.x||0),i.y=hh(i.y||0),i.z=i.hasZ?hh(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};bl([Lh({type:Qm,json:{write:{isRequired:!0}}})],KI.prototype,"position",void 0),bl([Mf("position")],KI.prototype,"writePosition",null),bl([Mm("position")],KI.prototype,"readPosition",null),bl([Lh({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Am((e=>ZI.normalize(hh(e))))],KI.prototype,"heading",void 0),bl([Lh({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Am((e=>db(hh(e),-180,180)))],KI.prototype,"tilt",void 0),bl([Lh({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],KI.prototype,"fov",void 0),KI=bl([md("esri.Camera")],KI);const XI=KI;var QI;let eC=QI=class extends tp{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new QI({rotation:this.rotation,scale:this.scale,targetGeometry:_a(this.targetGeometry)?this.targetGeometry.clone():null,camera:_a(this.camera)?this.camera.clone():null})}};function tC(){return{enabled:!this.camera}}bl([Lh({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:tC}}}}})],eC.prototype,"rotation",void 0),bl([Am("rotation")],eC.prototype,"castRotation",null),bl([Lh({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:tC}}}}})],eC.prototype,"scale",void 0),bl([Lh({types:a_,json:{read:r_,write:!0,origins:{"web-scene":{read:r_,write:{overridePolicy:tC}}}}})],eC.prototype,"targetGeometry",void 0),bl([Lh({type:XI,json:{write:!0}})],eC.prototype,"camera",void 0),eC=QI=bl([md("esri.Viewpoint")],eC);const iC=eC;function rC(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function nC(e,t){for(const i of e)if(null!=i&&t(i))return i}function oC(e){return null!=e&&"function"==typeof e[Symbol.iterator]}var sC;!function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"}(sC||(sC={}));let aC=0;function lC(){return aC++}function cC(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function uC(e,t,i,r){if(t.type===sC.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==sC.INVOKE&&t.type!==sC.RESPONSE)return void e.postMessage(t);let n;!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(i)?(n=dC(r),t.data=i):(n=dC(i.transferList),t.data=i.result),n?e.postMessage(t,n):e.postMessage(t)}function hC(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function dC(e){if(!e||!e.length)return null;if(wa("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)));return t.length?t:null}const pC={statsWorker:()=>import("./chunks/statsWorker-1a6efdd1.js"),geometryEngineWorker:()=>import("./chunks/geometryEngineWorker-f4f365f1.js"),CSVSourceWorker:()=>import("./chunks/CSVSourceWorker-5ec30a62.js"),EdgeProcessingWorker:()=>import("./chunks/EdgeProcessingWorker-a3e86be2.js"),ElevationSamplerWorker:()=>import("./chunks/ElevationSamplerWorker-538fa19b.js"),FeatureServiceSnappingSourceWorker:()=>import("./chunks/FeatureServiceSnappingSourceWorker-941721cf.js"),GeoJSONSourceWorker:()=>import("./chunks/GeoJSONSourceWorker-39d56a64.js"),LercWorker:()=>import("./chunks/LercWorker-92eb4b23.js"),MemorySourceWorker:()=>import("./chunks/MemorySourceWorker-7e35f027.js"),PBFDecoderWorker:()=>import("./chunks/PBFDecoderWorker-197a8b4f.js"),Pipeline:()=>import("./chunks/Pipeline-dd190a0d.js"),PointCloudWorker:()=>import("./chunks/PointCloudWorker-546bc05c.js"),RasterWorker:()=>import("./chunks/RasterWorker-645bdbdc.js"),SceneLayerWorker:()=>import("./chunks/SceneLayerWorker-92b10307.js"),WFSSourceWorker:()=>import("./chunks/WFSSourceWorker-b57fe7dd.js"),WorkerTileHandler:()=>import("./chunks/WorkerTileHandler-ab645dd5.js")},{CLOSE:fC,ABORT:mC,INVOKE:gC,RESPONSE:yC,OPEN_PORT:vC,ON:bC}=sC;class wC{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===sC.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class _C{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new wC((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){const t=new MessageChannel;let i;i="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const r=new _C(t.port1,{channel:t,client:i});return"object"==typeof i&&"remoteClient"in i&&(i.remoteClient=r),_C.clients.set(r,i),t.port2}static loadWorker(e){const t=pC[e];return t?t():Promise.resolve(null)}close(){this._post({type:fC}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,i){const r=i&&i.signal,n=i&&i.transferList;if(!this._port)return Promise.reject(new Ac("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const o=lC();return new Promise(((i,s)=>{const a=tu(r,(()=>{var e;const t=this._outJobs.get(o);t&&(this._outJobs.delete(o),null==(e=t.abortHandle)||e.remove(),this._post({type:mC,jobId:o}),s(Jc()))})),l={resolve:i,reject:s,abortHandle:a,debugInfo:e};this._outJobs.set(o,l),this._post({type:gC,jobId:o,methodName:e,abortable:null!=r},t,n)}))}on(e,t){const i=new MessageChannel;function r(e){t(e.data)}return this._port.postMessage({type:sC.ON,eventType:e,port:i.port2},[i.port2]),i.port1.addEventListener("message",r),i.port1.start(),{remove(){i.port1.postMessage({type:sC.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",r)}}}openPort(){const e=new MessageChannel;return this._post({type:vC,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject(Jc(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){_a(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const t=hC(e);if(t)switch(t.type){case yC:this._onResponseMessage(t);break;case gC:this._invokeQueue.push(t);break;case mC:this._onAbortMessage(t);break;case fC:this._onCloseMessage();break;case vC:this._onOpenPortMessage(t);break;case bC:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,i=e.jobId,r=t.get(i);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(i))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&_C.clients.get(this)===e&&e.destroy(),_C.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:i,data:r,abortable:n}=e,o=n?new AbortController:null,s=this._inJobs;let a,l=this._client,c=l[t];try{if(!c&&t&&-1!==t.indexOf(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)l=l[e[t]],c=l[e[t+1]]}if("function"!=typeof c)throw new TypeError(`${t} is not a function`);a=c.call(l,r,{client:this,signal:o?o.signal:null})}catch(e){return void this._post({type:yC,jobId:i,error:cC(e)})}hu(a)?(s.set(i,{controller:o,promise:a}),a.then((e=>{s.has(i)&&(s.delete(i),this._post({type:yC,jobId:i},e))}),(e=>{s.has(i)&&(s.delete(i),ru(e)||this._post({type:yC,jobId:i,error:cC(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:yC,jobId:i},a)}_onOpenPortMessage(e){new _C(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,i=this._client.on(e.eventType,(e=>{t.postMessage(e)})),r=Uc(e.port,"message",(e=>{hC(e).type===sC.CLOSE&&(r.remove(),i.remove(),t.close())}))}_onResponseMessage(e){var t;const{jobId:i,error:r,data:n}=e,o=this._outJobs;if(!o.has(i))return;const s=o.get(i);o.delete(i),null==(t=s.abortHandle)||t.remove(),r?s.reject(Ac.fromJSON(JSON.parse(r))):s.resolve(n)}_post(e,t,i){return uC(this._port,e,t,i)}}_C.kernelInfo={revision:Kf,version:"4.23",buildDate:"20220404"},_C.clients=new Map;const xC=Dl.getLogger("esri.core.workers.Connection");class SC{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((i,r)=>{let n=!0;const o=e=>{Yc(t.signal),n&&(n=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let n=0;n<e.length;++n){const s=e[n];hu(s)?this._clientPromises[n]=s.then((e=>(this._clients[n]=new _C(e,t),o(i),this._clients[n])),(()=>(o(r),null))):(this._clients[n]=new _C(s,t),this._clientPromises[n]=Promise.resolve(this._clients[n]),o(i))}}))}broadcast(e,t,i){const r=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];r[n]=o.then((r=>r.invoke(e,t,i)))}return r}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const i=this._clients[t];if(i){if(!i.isBusy())return Promise.resolve(i)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,i){let r=null;return Array.isArray(i)?(xC.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:i}):r=i,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((i=>i.invoke(e,t,r)))}on(e,t){return Promise.all(this._clientPromises).then((()=>Nl(this._clients.map((i=>i.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let i=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then((n=>{t[r]=n.openPort(),0==--i&&e(t)}))}))}get test(){return{numClients:this._clients.length}}}const kC=Dl.getLogger("esri.intl");function MC(e,t,i={}){const{format:r={}}=i;return Ol(e,(e=>function(e,t,i){let r,n;const o=e.indexOf(":");if(-1===o?r=e.trim():(r=e.slice(0,o).trim(),n=e.slice(o+1).trim()),!r)return"";const s=pl(r,t);if(null==s)return"";const a=i[n]||i[r];return a?function(e,t){switch(t.type){case"date":return Hx(e,t.intlOptions);case"number":return Xx(e,t.intlOptions);default:return kC.warn("missing format descriptor for key {key}"),TC(e)}}(s,a):n?function(e,t){switch(t.toLowerCase()){case"dateformat":return Hx(e);case"numberformat":return Xx(e);default:return kC.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Hx(e):/^numberformat/i.test(t)?Xx(e):TC(e)}}(s,n):TC(s)}(e,t,r)))}function TC(e){switch(typeof e){case"string":return e;case"number":return Xx(e);case"boolean":return""+e;default:return e instanceof Date?Hx(e):""}}async function EC(e,t,i,r){const n=t.exec(i);if(!n)throw new Ac("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=n[1]?`${n[1]}/`:"",s=n[2],a=function(e){if(!vy.test(e))return null;const[,t,i]=vy.exec(e),r=t+(i?"-"+i.toUpperCase():"");return wy(r)?r:wy(t)?t:null}(r),l=`${o}${s}.json`,c=a?`${o}${s}_${a}.json`:l;let u;try{u=await IC(e(c))}catch(t){if(c===l)throw new Ac("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:t});try{u=await IC(e(l))}catch(e){throw new Ac("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:e})}}return u}async function IC(e){if(_a(OC.fetchBundleAsset))return OC.fetchBundleAsset(e);const t=await am(e,{responseType:"text"});return JSON.parse(t.data)}class CC{constructor({base:e="",pattern:t,location:i=new URL(window.location.href)}){let r;r="string"==typeof i?e=>new URL(e,new URL(i,window.location.href)).href:i instanceof URL?e=>new URL(e,i).href:i,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=r,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,t){return EC(this.getAssetUrl,this.matcher,e,t)}}const OC={};!function(e){_y.includes(e)||(Sy(e),_y.unshift(e))}(function(e){return new CC(e)}({pattern:"esri/",location:ly}));const AC={};class PC{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...i)=>e[t](...i)}))}}class RC{constructor(){this._dispatcher=new PC,this._workerPostMessage({type:sC.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Lc((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,i){this._dispatcher.addEventListener(e,t,i)}removeEventListener(e,t,i){this._dispatcher.removeEventListener(e,t,i)}_workerPostMessage(e){Lc((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const t=hC(e);if(t&&t.type===sC.OPEN){const{modulePath:e,jobId:i}=t;let r=await _C.loadWorker(e);r||(r=await import(e));const n=_C.connect(r);this._workerPostMessage({type:sC.OPENED,jobId:i,data:n})}}}const LC=Dl.getLogger("esri.core.workers"),{HANDSHAKE:DC}=sC;let NC,FC;const jC="Failed to create Worker. Fallback to execute module in main thread";async function $C(){if(!wa("esri-workers")||(wa("mozilla"),0))return VC(new RC);if(!NC&&!FC)try{const e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.replace('"{CONFIGURATION}"',`'${function(){let e;if(null!=vl.default){const t={...vl};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(vl));e.assetsPath=Wp(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Lg(),e.has={"esri-csp-restrictions":wa("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":wa("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":wa("esri-2d-query-centroid-enabled"),"featurelayer-pbf":wa("featurelayer-pbf"),"featurelayer-simplify-thresholds":wa("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":wa("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":wa("featurelayer-simplify-mobile-factor"),"esri-atomics":wa("esri-atomics"),"esri-shared-array-buffer":wa("esri-shared-array-buffer"),"esri-tiles-debug":wa("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":wa("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":wa("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Wp(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Wp(e.workers.workerPath):e.workers.workerPath=Wp(ly("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=vl.workers.loaderConfig,i=function(e){var t;const i={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(i.async=!0),e.hasOwnProperty("isDebug")||(i.isDebug=!1),e.baseUrl||(i.baseUrl=AC.baseUrl),null==(t=AC.packages)||t.forEach((e=>{!function(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}(i.packages,e)})),i}({baseUrl:null==t?void 0:t.baseUrl,locale:Lg(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...null==t?void 0:t.has},map:{...null==t?void 0:t.map},paths:{...null==t?void 0:t.paths},packages:(null==t?void 0:t.packages)||[]}),r={version:"4.23",buildDate:Zf,revision:Kf};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}()}'`);NC=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){FC=e||{}}let e;if(NC)try{e=new Worker(NC,{name:"esri-worker-"+zC++})}catch(t){LC.warn(jC,FC),e=new RC}else LC.warn(jC,FC),e=new RC;return VC(e)}async function VC(e){return new Promise((t=>{function i(n){const o=hC(n);o&&o.type===DC&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(t){t.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),LC.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new RC).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)}))}let zC=0;const UC=Dl.getLogger("esri.core.workers"),{ABORT:qC,INVOKE:GC,OPEN:BC,OPENED:WC,RESPONSE:HC}=sC;class JC{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),UC.error(e)}))}static async create(e){const t=await $C();return new JC(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:i}=t,r=lC();return new Promise(((t,n)=>{const o={resolve:t,reject:n,abortHandle:tu(i,(()=>{this._outJobs.delete(r),this._post({type:qC,jobId:r})}))};this._outJobs.set(r,o),this._post({type:BC,jobId:r,modulePath:e})}))}_onMessage(e){const t=hC(e);if(t)switch(t.type){case WC:this._onOpenedMessage(t);break;case HC:this._onResponseMessage(t);break;case qC:this._onAbortMessage(t);break;case GC:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,i=e.jobId,r=t.get(i);r&&(r.controller&&r.controller.abort(),t.delete(i))}_onInvokeMessage(e){const{methodName:t,jobId:i,data:r,abortable:n}=e,o=n?new AbortController:null,s=this._inJobs,a=Qf[t];let l;try{if("function"!=typeof a)throw new TypeError(`${t} is not a function`);l=a.call(null,r,{signal:o?o.signal:null})}catch(e){return void this._post({type:HC,jobId:i,error:cC(e)})}hu(l)?(s.set(i,{controller:o,promise:l}),l.then((e=>{s.has(i)&&(s.delete(i),this._post({type:HC,jobId:i},e))}),(e=>{s.has(i)&&(s.delete(i),e||(e={message:"Error encountered at method"+t}),ru(e)||this._post({type:HC,jobId:i,error:cC(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:HC,jobId:i},l)}_onOpenedMessage(e){var t;const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),null==(t=n.abortHandle)||t.remove(),n.resolve(r))}_onResponseMessage(e){var t;const{jobId:i,error:r,data:n}=e,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),null==(t=o.abortHandle)||t.remove(),r?o.reject(Ac.fromJSON(JSON.parse(r))):o.resolve(n))}_post(e,t,i){return uC(this.worker,e,t,i)}}let YC=wa("esri-workers-debug")?1:wa("host-browser")?navigator.hardwareConcurrency-1:0;YC||(YC=wa("safari")&&wa("mac")||wa("trident")?7:2);let ZC=0;const KC=[];async function XC(e,t){const i=new SC;return await i.open(e,t),i}async function QC(e,t={}){if("string"!=typeof e)throw new Ac("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(wa("host-webworker")&&!wa("esri-workers")&&(i="local"),"local"===i){let i=await _C.loadWorker(e);i||(i=await import(e)),Yc(t.signal);const r=t.client||i;return XC([_C.connect(i)],{...t,client:r})}if(await tO(),Yc(t.signal),"dedicated"===i){const i=ZC++%YC;return XC([await KC[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,YC);if(i<YC){const r=new Array(i);for(let n=0;n<i;++n){const i=ZC++%YC;r[n]=KC[i].open(e,t)}return XC(r,t)}}return XC(KC.map((i=>i.open(e,t))),t)}let eO=null;async function tO(){if(eO)return eO;new AbortController;const e=[];for(let t=0;t<YC;t++){const i=JC.create(t).then((e=>(KC[t]=e,e)));e.push(i)}return eO=Promise.all(e),eO}function iO(e){return new Yf({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const rO=iO(Rm),nO=iO(Lm),oO=iO(Dm),sO=new Yf({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Rm.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function aO(e){return e&&(Uf(e)||e===nO)?nO:e&&(Gf(e)||e===oO)?oO:rO}function lO(e){return zf(e)?Lm:qf(e)?Dm:Rm}const cO=39.37,uO=Rm.radius*Math.PI/200,hO=/UNIT\[([^\]]+)\]\]$/i,dO=If,pO=/UNIT\[([^\]]+)\]/i,fO=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),mO=Vg()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),gO=e=>e*e,yO=e=>e*e*e,vO={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:gO(.001)},"square-centimeters":{inBaseUnits:gO(.01)},"square-decimeters":{inBaseUnits:gO(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:gO(1e3)},"square-inches":{inBaseUnits:gO(.0254)},"square-feet":{inBaseUnits:gO(.3048)},"square-yards":{inBaseUnits:gO(.9144)},"square-miles":{inBaseUnits:gO(1609.344)},"square-us-feet":{inBaseUnits:gO(1200/3937)},acres:{inBaseUnits:.0015625*gO(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*yO(.001)},"cubic-centimeters":{inBaseUnits:1e3*yO(.01)},"cubic-decimeters":{inBaseUnits:1e3*yO(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*yO(1e3)},"cubic-inches":{inBaseUnits:1e3*yO(.0254)},"cubic-feet":{inBaseUnits:1e3*yO(.3048)},"cubic-yards":{inBaseUnits:1e3*yO(.9144)},"cubic-miles":{inBaseUnits:1e3*yO(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},bO=function(){const e={};for(const t in vO)for(const i in vO[t].units)e[i]=t;return e}();function wO(e){const t=bO[e];if(t)return t;throw new Error("unknown type")}function _O(e,t=null){return t=t||wO(e),vO[t].baseUnit===e}function xO(e,t,i){if(t===i)return e;const r=wO(t);if(r!==wO(i))throw new Error("incompatible units");const n=_O(t,r)?e:function(e,t,i){return e*vO[i].units[t].inBaseUnits}(e,t,r);return _O(i,r)?n:function(e,t,i){return e/vO[i].units[t].inBaseUnits}(n,i,r)}function SO(e){return mO.fromJSON(e.toLowerCase())||null}function kO(e){if(e&&"object"==typeof e&&!function(e){return!(Uf(e)||Gf(e))}(e))return 1;const t=TO(e);return t>1e5?1:t}function MO(e){return TO(e)>=(e instanceof Yf?function(e){return e&&(Uf(e)||e===nO)?Lm:e&&(Gf(e)||e===oO)?Dm:Rm}(e).metersPerDegree:1e5)?"meters":OO(e)}function TO(e,t=Rm.metersPerDegree){return EO(e,!0)||t}function EO(e,t=!1){let i,r,n=null;if(null!=e&&("object"==typeof e?(i=e.wkid,r=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(r=e)),i){if(zf(i))return Lm.metersPerDegree;if(qf(i))return Dm.metersPerDegree;n=dO.values[dO[i]],!n&&t&&fO.has(i)&&(n=uO)}else r&&(PO(r)?n=IO(hO.exec(r),n):AO(r)&&(n=IO(pO.exec(r),n)));return n}function IO(e,t){return e&&e[1]?CO(e[1]):t}function CO(e){return parseFloat(e.split(",")[1])}function OO(e){let t,i,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)r=dO.units[dO[t]];else if(i){const e=PO(i)?hO:AO(i)?pO:null;if(e){const t=e.exec(i);t&&t[1]&&(r=function(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||-1===dO.units.indexOf(i)){const t=CO(e);i=null;const r=dO.values;for(let e=0;e<r.length;++e)if(Math.abs(t-r[e])<1e-7){i=dO.units[e];break}}return i}(t[1]))}}return _a(r)?SO(r):null}function AO(e){return/^GEOCCS/i.test(e)}function PO(e){return/^PROJCS/i.test(e)}const RO={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},LO={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},DO=Vg()(RO),NO=Vg()(LO);function FO(e,t,i,r,n,o,s,a,l,c,u,h,d,p,f,m,g){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=p,e[13]=f,e[14]=m,e[15]=g,e}function jO(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $O(e,t){if(e===t){const i=t[1],r=t[2],n=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function VO(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=i*a-r*s,b=i*l-n*s,w=i*c-o*s,_=r*l-n*a,x=r*c-o*a,S=n*c-o*l,k=u*m-h*f,M=u*g-d*f,T=u*y-p*f,E=h*g-d*m,I=h*y-p*m,C=d*y-p*g;let O=v*C-b*I+w*E+_*T-x*M+S*k;return O?(O=1/O,e[0]=(a*C-l*I+c*E)*O,e[1]=(n*I-r*C-o*E)*O,e[2]=(m*S-g*x+y*_)*O,e[3]=(d*x-h*S-p*_)*O,e[4]=(l*T-s*C-c*M)*O,e[5]=(i*C-n*T+o*M)*O,e[6]=(g*w-f*S-y*b)*O,e[7]=(u*S-d*w+p*b)*O,e[8]=(s*I-a*T+c*k)*O,e[9]=(r*T-i*I-o*k)*O,e[10]=(f*x-m*w+y*v)*O,e[11]=(h*w-u*x-p*v)*O,e[12]=(a*M-s*E-l*k)*O,e[13]=(i*E-r*M+n*k)*O,e[14]=(m*b-f*_-g*v)*O,e[15]=(u*_-h*b+d*v)*O,e):null}function zO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15];let b=i[0],w=i[1],_=i[2],x=i[3];return e[0]=b*r+w*a+_*h+x*m,e[1]=b*n+w*l+_*d+x*g,e[2]=b*o+w*c+_*p+x*y,e[3]=b*s+w*u+_*f+x*v,b=i[4],w=i[5],_=i[6],x=i[7],e[4]=b*r+w*a+_*h+x*m,e[5]=b*n+w*l+_*d+x*g,e[6]=b*o+w*c+_*p+x*y,e[7]=b*s+w*u+_*f+x*v,b=i[8],w=i[9],_=i[10],x=i[11],e[8]=b*r+w*a+_*h+x*m,e[9]=b*n+w*l+_*d+x*g,e[10]=b*o+w*c+_*p+x*y,e[11]=b*s+w*u+_*f+x*v,b=i[12],w=i[13],_=i[14],x=i[15],e[12]=b*r+w*a+_*h+x*m,e[13]=b*n+w*l+_*d+x*g,e[14]=b*o+w*c+_*p+x*y,e[15]=b*s+w*u+_*f+x*v,e}function UO(e,t,i){const r=i[0],n=i[1],o=i[2];let s,a,l,c,u,h,d,p,f,m,g,y;return t===e?(e[12]=t[0]*r+t[4]*n+t[8]*o+t[12],e[13]=t[1]*r+t[5]*n+t[9]*o+t[13],e[14]=t[2]*r+t[6]*n+t[10]*o+t[14],e[15]=t[3]*r+t[7]*n+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],c=t[3],u=t[4],h=t[5],d=t[6],p=t[7],f=t[8],m=t[9],g=t[10],y=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=h,e[6]=d,e[7]=p,e[8]=f,e[9]=m,e[10]=g,e[11]=y,e[12]=s*r+u*n+f*o+t[12],e[13]=a*r+h*n+m*o+t[13],e[14]=l*r+d*n+g*o+t[14],e[15]=c*r+p*n+y*o+t[15]),e}function qO(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function GO(e,t,i,r){let n,o,s,a,l,c,u,h,d,p,f,m,g,y,v,b,w,_,x,S,k,M,T,E,I=r[0],C=r[1],O=r[2],A=Math.sqrt(I*I+C*C+O*O);return A<av?null:(A=1/A,I*=A,C*=A,O*=A,n=Math.sin(i),o=Math.cos(i),s=1-o,a=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],p=t[6],f=t[7],m=t[8],g=t[9],y=t[10],v=t[11],b=I*I*s+o,w=C*I*s+O*n,_=O*I*s-C*n,x=I*C*s-O*n,S=C*C*s+o,k=O*C*s+I*n,M=I*O*s+C*n,T=C*O*s-I*n,E=O*O*s+o,e[0]=a*b+h*w+m*_,e[1]=l*b+d*w+g*_,e[2]=c*b+p*w+y*_,e[3]=u*b+f*w+v*_,e[4]=a*x+h*S+m*k,e[5]=l*x+d*S+g*k,e[6]=c*x+p*S+y*k,e[7]=u*x+f*S+v*k,e[8]=a*M+h*T+m*E,e[9]=l*M+d*T+g*E,e[10]=c*M+p*T+y*E,e[11]=u*M+f*T+v*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function BO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function WO(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function HO(e,t,i){let r,n,o,s=i[0],a=i[1],l=i[2],c=Math.sqrt(s*s+a*a+l*l);return c<av?null:(c=1/c,s*=c,a*=c,l*=c,r=Math.sin(t),n=Math.cos(t),o=1-n,e[0]=s*s*o+n,e[1]=a*s*o+l*r,e[2]=l*s*o-a*r,e[3]=0,e[4]=s*a*o-l*r,e[5]=a*a*o+n,e[6]=l*a*o+s*r,e[7]=0,e[8]=s*l*o+a*r,e[9]=a*l*o-s*r,e[10]=l*l*o+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function JO(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function YO(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=r+r,l=n+n,c=o+o,u=r*a,h=r*l,d=r*c,p=n*l,f=n*c,m=o*c,g=s*a,y=s*l,v=s*c;return e[0]=1-(p+m),e[1]=h+v,e[2]=d-y,e[3]=0,e[4]=h-v,e[5]=1-(u+m),e[6]=f+g,e[7]=0,e[8]=d+y,e[9]=f-g,e[10]=1-(u+p),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}Vg()({...RO,...LO});const ZO=[0,0,0];function KO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function XO(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function QO(e,t){if(e===t)return!0;const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=t[0],b=t[1],w=t[2],_=t[3],x=t[4],S=t[5],k=t[6],M=t[7],T=t[8],E=t[9],I=t[10],C=t[11],O=t[12],A=t[13],P=t[14],R=t[15];return Math.abs(i-v)<=av*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-b)<=av*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-w)<=av*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(o-_)<=av*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-x)<=av*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(a-S)<=av*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-k)<=av*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-M)<=av*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-T)<=av*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-E)<=av*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(d-I)<=av*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(p-C)<=av*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(f-O)<=av*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-A)<=av*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-P)<=av*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(y-R)<=av*Math.max(1,Math.abs(y),Math.abs(R))}function eA(e){const t=av,i=e[0],r=e[1],n=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return Math.abs(1-(i*i+o*o+l*l))<=t&&Math.abs(1-(r*r+s*s+c*c))<=t&&Math.abs(1-(n*n+a*a+u*u))<=t}const tA=zO,iA=KO;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},set:FO,identity:jO,transpose:$O,invert:VO,adjoint:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15];return e[0]=a*(d*y-p*g)-h*(l*y-c*g)+m*(l*p-c*d),e[1]=-(r*(d*y-p*g)-h*(n*y-o*g)+m*(n*p-o*d)),e[2]=r*(l*y-c*g)-a*(n*y-o*g)+m*(n*c-o*l),e[3]=-(r*(l*p-c*d)-a*(n*p-o*d)+h*(n*c-o*l)),e[4]=-(s*(d*y-p*g)-u*(l*y-c*g)+f*(l*p-c*d)),e[5]=i*(d*y-p*g)-u*(n*y-o*g)+f*(n*p-o*d),e[6]=-(i*(l*y-c*g)-s*(n*y-o*g)+f*(n*c-o*l)),e[7]=i*(l*p-c*d)-s*(n*p-o*d)+u*(n*c-o*l),e[8]=s*(h*y-p*m)-u*(a*y-c*m)+f*(a*p-c*h),e[9]=-(i*(h*y-p*m)-u*(r*y-o*m)+f*(r*p-o*h)),e[10]=i*(a*y-c*m)-s*(r*y-o*m)+f*(r*c-o*a),e[11]=-(i*(a*p-c*h)-s*(r*p-o*h)+u*(r*c-o*a)),e[12]=-(s*(h*g-d*m)-u*(a*g-l*m)+f*(a*d-l*h)),e[13]=i*(h*g-d*m)-u*(r*g-n*m)+f*(r*d-n*h),e[14]=-(i*(a*g-l*m)-s*(r*g-n*m)+f*(r*l-n*a)),e[15]=i*(a*d-l*h)-s*(r*d-n*h)+u*(r*l-n*a),e},determinant:function(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15];return(t*s-i*o)*(h*g-d*m)-(t*a-r*o)*(u*g-d*f)+(t*l-n*o)*(u*m-h*f)+(i*a-r*s)*(c*g-d*p)-(i*l-n*s)*(c*m-h*p)+(r*l-n*a)*(c*f-u*p)},multiply:zO,translate:UO,scale:qO,rotate:GO,rotateX:function(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+c*r,e[5]=s*n+u*r,e[6]=a*n+h*r,e[7]=l*n+d*r,e[8]=c*n-o*r,e[9]=u*n-s*r,e[10]=h*n-a*r,e[11]=d*n-l*r,e},rotateY:function(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-c*r,e[1]=s*n-u*r,e[2]=a*n-h*r,e[3]=l*n-d*r,e[8]=o*r+c*n,e[9]=s*r+u*n,e[10]=a*r+h*n,e[11]=l*r+d*n,e},rotateZ:function(e,t,i){const r=Math.sin(i),n=Math.cos(i),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+c*r,e[1]=s*n+u*r,e[2]=a*n+h*r,e[3]=l*n+d*r,e[4]=c*n-o*r,e[5]=u*n-s*r,e[6]=h*n-a*r,e[7]=d*n-l*r,e},fromTranslation:BO,fromScaling:WO,fromRotation:HO,fromXRotation:JO,fromYRotation:function(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:YO,fromQuat2:function(e,t){const i=ZO,r=-t[0],n=-t[1],o=-t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=r*r+n*n+o*o+s*s;return h>0?(i[0]=2*(a*s+u*r+l*o-c*n)/h,i[1]=2*(l*s+u*n+c*r-a*o)/h,i[2]=2*(c*s+u*o+a*n-l*r)/h):(i[0]=2*(a*s+u*r+l*o-c*n),i[1]=2*(l*s+u*n+c*r-a*o),i[2]=2*(c*s+u*o+a*n-l*r)),YO(e,t,i),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(o*o+s*s+a*a),e[2]=Math.sqrt(l*l+c*c+u*u),e},getRotation:function(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},fromRotationTranslationScale:function(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=t[3],l=n+n,c=o+o,u=s+s,h=n*l,d=n*c,p=n*u,f=o*c,m=o*u,g=s*u,y=a*l,v=a*c,b=a*u,w=r[0],_=r[1],x=r[2];return e[0]=(1-(f+g))*w,e[1]=(d+b)*w,e[2]=(p-v)*w,e[3]=0,e[4]=(d-b)*_,e[5]=(1-(h+g))*_,e[6]=(m+y)*_,e[7]=0,e[8]=(p+v)*x,e[9]=(m-y)*x,e[10]=(1-(h+f))*x,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,i,r,n){const o=t[0],s=t[1],a=t[2],l=t[3],c=o+o,u=s+s,h=a+a,d=o*c,p=o*u,f=o*h,m=s*u,g=s*h,y=a*h,v=l*c,b=l*u,w=l*h,_=r[0],x=r[1],S=r[2],k=n[0],M=n[1],T=n[2],E=(1-(m+y))*_,I=(p+w)*_,C=(f-b)*_,O=(p-w)*x,A=(1-(d+y))*x,P=(g+v)*x,R=(f+b)*S,L=(g-v)*S,D=(1-(d+m))*S;return e[0]=E,e[1]=I,e[2]=C,e[3]=0,e[4]=O,e[5]=A,e[6]=P,e[7]=0,e[8]=R,e[9]=L,e[10]=D,e[11]=0,e[12]=i[0]+k-(E*k+O*M+R*T),e[13]=i[1]+M-(I*k+A*M+L*T),e[14]=i[2]+T-(C*k+P*M+D*T),e[15]=1,e},fromQuat:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,l=n+n,c=i*s,u=r*s,h=r*a,d=n*s,p=n*a,f=n*l,m=o*s,g=o*a,y=o*l;return e[0]=1-h-f,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,i,r,n,o,s){const a=1/(i-t),l=1/(n-r),c=1/(o-s);return e[0]=2*o*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+r)*l,e[10]=(s+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*c,e[15]=0,e},perspective:function(e,t,i,r,n){const o=1/Math.tan(t/2);let s;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(s=1/(r-n),e[10]=(n+r)*s,e[14]=2*n*r*s):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,i,r){const n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(s+a),c=2/(n+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-a)*l*.5,e[9]=(n-o)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e},ortho:function(e,t,i,r,n,o,s){const a=1/(t-i),l=1/(r-n),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(n+r)*l,e[14]=(s+o)*c,e[15]=1,e},lookAt:function(e,t,i,r){let n,o,s,a,l,c,u,h,d,p;const f=t[0],m=t[1],g=t[2],y=r[0],v=r[1],b=r[2],w=i[0],_=i[1],x=i[2];return Math.abs(f-w)<av&&Math.abs(m-_)<av&&Math.abs(g-x)<av?jO(e):(u=f-w,h=m-_,d=g-x,p=1/Math.sqrt(u*u+h*h+d*d),u*=p,h*=p,d*=p,n=v*d-b*h,o=b*u-y*d,s=y*h-v*u,p=Math.sqrt(n*n+o*o+s*s),p?(p=1/p,n*=p,o*=p,s*=p):(n=0,o=0,s=0),a=h*s-d*o,l=d*n-u*s,c=u*o-h*n,p=Math.sqrt(a*a+l*l+c*c),p?(p=1/p,a*=p,l*=p,c*=p):(a=0,l=0,c=0),e[0]=n,e[1]=a,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=d,e[11]=0,e[12]=-(n*f+o*m+s*g),e[13]=-(a*f+l*m+c*g),e[14]=-(u*f+h*m+d*g),e[15]=1,e)},targetTo:function(e,t,i,r){const n=t[0],o=t[1],s=t[2],a=r[0],l=r[1],c=r[2];let u=n-i[0],h=o-i[1],d=s-i[2],p=u*u+h*h+d*d;p>0&&(p=1/Math.sqrt(p),u*=p,h*=p,d*=p);let f=l*d-c*h,m=c*u-a*d,g=a*h-l*u;return p=f*f+m*m+g*g,p>0&&(p=1/Math.sqrt(p),f*=p,m*=p,g*=p),e[0]=f,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-d*m,e[5]=d*f-u*g,e[6]=u*m-h*f,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=n,e[13]=o,e[14]=s,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e},subtract:KO,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e},exactEquals:XO,equals:QO,isOrthoNormal:eA,mul:tA,sub:iA});let rA,nA=null;function oA(){return!!nA}function sA(){return rA||(rA=import("./chunks/pe-wasm-02967ab5.js").then((e=>e.p)).then((({default:e})=>e({locateFile:e=>ly(`esri/geometry/support/${e}`)}))).then((e=>{wA(e)})),rA)}var aA,lA,cA;!function(e){function t(e,t,i){nA.ensureCache.prepare();const r=SA(i),n=i===r,o=nA.ensureFloat64(r),s=nA._pe_geog_to_proj(nA.getPointer(e),t,o);return s&&kA(i,t,o,n),s}function i(e,t,i){return r(e,t,i,0)}function r(e,t,i,r){nA.ensureCache.prepare();const n=SA(i),o=i===n,s=nA.ensureFloat64(n),a=nA._pe_proj_to_geog_center(nA.getPointer(e),t,s,r);return a&&kA(i,t,s,o),a}e.geogToProj=t,e.projGeog=function(e,r,n,o){switch(o){case lA.PE_TRANSFORM_P_TO_G:return i(e,r,n);case lA.PE_TRANSFORM_G_TO_P:return t(e,r,n)}return 0},e.projToGeog=i,e.projToGeogCenter=r}(aA||(aA={})),function(e){e.init=function(){e.PE_BUFFER_MAX=nA.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=nA.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=nA.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=nA.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=nA.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=nA.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=nA.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=nA.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=nA.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=nA.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=nA.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=nA.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=nA.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=nA.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=nA.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=nA.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=nA.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=nA.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=nA.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=nA.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=nA.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=nA.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=nA.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=nA.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=nA.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=nA.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=nA.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=nA.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=nA.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=nA.PeDefs.prototype.PE_HORIZON_DELTA}}(lA||(lA={})),function(e){const t={},i={},r=e=>{if(e){const t=e.getType();switch(t){case lA.PE_TYPE_GEOGCS:e=nA.castObject(e,nA.PeGeogcs);break;case lA.PE_TYPE_PROJCS:e=nA.castObject(e,nA.PeProjcs);break;case lA.PE_TYPE_GEOGTRAN:e=nA.castObject(e,nA.PeGeogtran);break;default:t&lA.PE_TYPE_UNIT&&(e=nA.castObject(e,nA.PeUnit))}}return e};function n(e,i){let n=null,o=t[e];if(o||(o={},t[e]=o),o.hasOwnProperty(String(i)))n=o[i];else{const t=nA.PeFactory.prototype.factoryByType(e,i);nA.compare(t,nA.NULL)||(n=t,o[i]=n)}return n=r(n),n}e.initialize=function(){nA.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return n(lA.PE_TYPE_COORDSYS,e)},e.factoryByType=n,e.fromString=function(e,t){let n=null,o=i[e];if(o||(o={},i[e]=o),o.hasOwnProperty(t))n=o[t];else{const i=nA.PeFactory.prototype.fromString(e,t);nA.compare(i,nA.NULL)||(n=i,o[t]=n)}return n=r(n),n},e.geogcs=function(e){return n(lA.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return n(lA.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return nA.PeFactory.prototype.getCode(e)},e.projcs=function(e){return n(lA.PE_TYPE_PROJCS,e)},e.unit=function(e){return n(lA.PE_TYPE_UNIT,e)}}(cA||(cA={}));let uA=null;var hA,dA,pA,fA,mA,gA,yA,vA,bA;function wA(e){function t(e,t,i){e[t]=i(e[t])}nA=e,lA.init(),hA.init(),mA.init(),yA.init(),vA.init(),uA=class extends nA.PeGCSExtent{destroy(){nA.destroy(this)}};const i=[nA.PeDatum,nA.PeGeogcs,nA.PeGeogtran,nA.PeObject,nA.PeParameter,nA.PePrimem,nA.PeProjcs,nA.PeSpheroid,nA.PeUnit];for(const e of i)t(e.prototype,"getName",(e=>function(){return e.call(this,new Array(lA.PE_NAME_MAX))}));for(const e of[nA.PeGeogtran,nA.PeProjcs])t(e.prototype,"getParameters",(e=>function(){const t=new Array(lA.PE_PARM_MAX);let i=e.call(this);for(let e=0;e<t.length;e++){const r=nA.getValue(i,"*");t[e]=r?nA.wrapPointer(r,nA.PeParameter):null,i+=Int32Array.BYTES_PER_ELEMENT}return t}));t(nA.PeHorizon.prototype,"getCoord",(e=>function(){const t=this.getSize();if(!t)return null;const i=[];return kA(i,t,e.call(this)),i})),t(nA.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{const t=nA._pe_getPeGTlistExtendedGTsSize();return function(){let i=null;const r=e.call(this);if(!nA.compare(r,nA.NULL)){i=[r];const e=this.getSteps();if(e>1){const n=nA.getPointer(r);for(let r=1;r<e;r++)i.push(nA.wrapPointer(n+t*r,nA.PeGTlistExtendedGTs))}}return i}}));const r=nA._pe_getPeHorizonSize(),n=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let i=null;const n=e.call(this);if(!nA.compare(n,nA.NULL)){i=[n];const e=n.getNump();if(e>1){const t=nA.getPointer(n);for(let n=1;n<e;n++)i.push(nA.wrapPointer(t+r*n,nA.PeHorizon))}}return t.set(e,i),i};t(nA.PeProjcs.prototype,"horizonGcsGenerate",n),t(nA.PeProjcs.prototype,"horizonPcsGenerate",n),nA.PeObject.prototype.toString=function(e=lA.PE_STR_OPTS_NONE){nA.ensureCache.prepare();const t=nA.getPointer(this),i=nA.ensureInt8(new Array(lA.PE_BUFFER_MAX));return nA.UTF8ToString(nA._pe_object_to_string_ext(t,e,i))}}function _A(e){if(!e)return;const t=nA.getClass(e);if(!t)return;const i=nA.getCache(t);if(!i)return;const r=nA.getPointer(e);r&&delete i[r]}function xA(e,t){const i=[],r=new Array(t);for(let t=0;t<e;t++)i.push(nA.ensureInt8(r));return i}function SA(e){let t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1])}))):t=e,t}function kA(e,t,i,r=!1){if(r)for(let r=0;r<2*t;r++)e[r]=nA.getValue(i+r*Float64Array.BYTES_PER_ELEMENT,"double");else{const r=0===e.length;for(let n=0;n<t;n++)r&&(e[n]=new Array(2)),e[n][0]=nA.getValue(i,"double"),e[n][1]=nA.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}!function(e){let t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=nA.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=nA._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,i,r,n,o,s){let a=null;const l=new nA.PeInteger(s);try{const c=nA.PeGTlistExtended.prototype.getGTlist(e,i,r,n,o,l);if((s=l.val)&&(a=[c],s>1)){const e=nA.getPointer(c);for(let i=1;i<s;i++)a.push(nA.wrapPointer(e+t*i,nA.PeGTlistExtendedEntry))}}finally{nA.destroy(l)}return a}}(hA||(hA={})),(dA||(dA={})).destroy=function(e){if(e&&e.length){for(const t of e)_A(t),t.getEntries().forEach((e=>{_A(e);const t=e.getGeogtran();_A(t),t.getParameters().forEach(_A),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{_A(e);const t=e.getDatum();_A(t),_A(t.getSpheroid()),_A(e.getPrimem()),_A(e.getUnit())}))}));nA.PeGTlistExtendedEntry.prototype.Delete(e[0])}},(pA||(pA={})).geogToGeog=function(e,t,i,r,n){nA.ensureCache.prepare();const o=SA(i),s=i===o,a=nA.ensureFloat64(o);let l=0;r&&(l=nA.ensureFloat64(r));const c=nA._pe_geog_to_geog(nA.getPointer(e),t,a,l,n);return c&&kA(i,t,a,s),c},function(e){const t=(e,t,i,r,n,o)=>{let s,a;switch(nA.ensureCache.prepare(),e){case"dd":s=nA._pe_geog_to_dd,a=lA.PE_DD_MAX;break;case"ddm":s=nA._pe_geog_to_ddm,a=lA.PE_DDM_MAX;break;case"dms":s=nA._pe_geog_to_dms,a=lA.PE_DMS_MAX}let l=0;t&&(l=nA.getPointer(t));const c=SA(r),u=nA.ensureFloat64(c),h=xA(i,a),d=s(l,i,u,n,nA.ensureInt32(h));if(d)for(let e=0;e<i;e++)o[e]=nA.UTF8ToString(h[e]);return d},i=(e,t,i,r,n)=>{let o;switch(nA.ensureCache.prepare(),e){case"dd":o=nA._pe_dd_to_geog;break;case"ddm":o=nA._pe_ddm_to_geog;break;case"dms":o=nA._pe_dms_to_geog}let s=0;t&&(s=nA.getPointer(t));const a=r.map((e=>nA.ensureString(e))),l=nA.ensureInt32(a),c=nA.ensureFloat64(new Array(2*i)),u=o(s,i,l,c);return u&&kA(n,i,c),u};e.geogToDms=function(e,i,r,n,o){return t("dms",e,i,r,n,o)},e.dmsToGeog=function(e,t,r,n){return i("dms",e,t,r,n)},e.geogToDdm=function(e,i,r,n,o){return t("ddm",e,i,r,n,o)},e.ddmToGeog=function(e,t,r,n){return i("ddm",e,t,r,n)},e.geogToDd=function(e,i,r,n,o){return t("dd",e,i,r,n,o)},e.ddToGeog=function(e,t,r,n){return i("dd",e,t,r,n)}}(fA||(fA={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=nA.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=nA.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=nA.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=nA.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=nA.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geogToMgrsExtended=function(e,t,i,r,n,o,s){nA.ensureCache.prepare();let a=0;e&&(a=nA.getPointer(e));const l=SA(i),c=nA.ensureFloat64(l),u=xA(t,lA.PE_MGRS_MAX),h=nA.ensureInt32(u),d=nA._pe_geog_to_mgrs_extended(a,t,c,r,n,o,h);if(d)for(let e=0;e<t;e++)s[e]=nA.UTF8ToString(u[e]);return d},e.mgrsToGeogExtended=function(e,t,i,r,n){nA.ensureCache.prepare();let o=0;e&&(o=nA.getPointer(e));const s=i.map((e=>nA.ensureString(e))),a=nA.ensureInt32(s),l=nA.ensureFloat64(new Array(2*t)),c=nA._pe_mgrs_to_geog_extended(o,t,a,r,l);return c&&kA(n,t,l),c}}(mA||(mA={})),function(e){e.geogToUsng=function(e,t,i,r,n,o,s){nA.ensureCache.prepare();let a=0;e&&(a=nA.getPointer(e));const l=SA(i),c=nA.ensureFloat64(l),u=xA(t,lA.PE_MGRS_MAX),h=nA.ensureInt32(u),d=nA._pe_geog_to_usng(a,t,c,r,n,o,h);if(d)for(let e=0;e<t;e++)s[e]=nA.UTF8ToString(u[e]);return d},e.usngToGeog=function(e,t,i,r){nA.ensureCache.prepare();let n=0;e&&(n=nA.getPointer(e));const o=i.map((e=>nA.ensureString(e))),s=nA.ensureInt32(o),a=nA.ensureFloat64(new Array(2*t)),l=nA._pe_usng_to_geog(n,t,s,a);return l&&kA(r,t,a),l}}(gA||(gA={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=nA.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=nA.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=nA.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geogToUtm=function(e,t,i,r,n){nA.ensureCache.prepare();let o=0;e&&(o=nA.getPointer(e));const s=SA(i),a=nA.ensureFloat64(s),l=xA(t,lA.PE_UTM_MAX),c=nA.ensureInt32(l),u=nA._pe_geog_to_utm(o,t,a,r,c);if(u)for(let e=0;e<t;e++)n[e]=nA.UTF8ToString(l[e]);return u},e.utmToGeog=function(e,t,i,r,n){nA.ensureCache.prepare();let o=0;e&&(o=nA.getPointer(e));const s=i.map((e=>nA.ensureString(e))),a=nA.ensureInt32(s),l=nA.ensureFloat64(new Array(2*t)),c=nA._pe_utm_to_geog(o,t,a,r,l);return c&&kA(n,t,l),c}}(yA||(yA={})),function(e){const t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=nA.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=nA.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=nA.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=nA.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(i,r=e.PE_PCSINFO_OPTION_DOMAIN){let n,o;return t.has(i)&&(o=t.get(i),o[r]&&(n=o[r])),n||(n=nA.PePCSInfo.prototype.generate(i,r),o||(o=[],t.set(i,o)),o[r]=n),n}}(vA||(vA={})),(bA||(bA={})).versionString=function(){return nA.PeVersion.prototype.version_string()};const MA=Object.freeze({__proto__:null,get _pe(){return nA},isLoaded:oA,isSupported:function(){return!!wa("esri-wasm")},load:sA,get PeCSTransformations(){return aA},get PeDefs(){return lA},get PeFactory(){return cA},get PeGCSExtent(){return uA},get PeGTlistExtended(){return hA},get PeGTlistExtendedEntry(){return dA},get PeGTTransformations(){return pA},get PeNotationDms(){return fA},get PeNotationMgrs(){return mA},get PeNotationUsng(){return gA},get PeNotationUtm(){return yA},get PePCSInfo(){return vA},get PeVersion(){return bA},_init:wA}),TA=Rm.radius,EA=Rm.eccentricitySquared,IA={a1:TA*EA,a2:TA*EA*TA*EA,a3:TA*EA*EA/2,a4:TA*EA*TA*EA*2.5,a5:TA*EA+TA*EA*EA/2,a6:1-EA};Rm.radius,Rm.flattening,Dm.radius,Dm.flattening,Lm.radius,Lm.flattening,Lm.radius;let CA=0;class OA{constructor(e=null){this.uid=CA++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(e){const t=new OA;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=CA++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=CA++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=CA++}getInverse(){const e=new OA;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class AA{constructor(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const t of e.steps)t instanceof OA?this.steps.push(t):this.steps.push(new OA({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}static cacheKey(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")}static fromGE(e){const t=new AA;let i="";for(const r of e.steps){const e=OA.fromGE(r);t.steps.push(e),i+=e.uid.toString()+","}return t._cached_projection={},t._gtlistentry=null,t._chain=i,t}getInverse(){const e=new AA;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){const i=this.steps[t];e.steps.push(i.getInverse())}return e}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,i){this._cached_projection[AA.cacheKey(e,t)]=i}getCachedGeTransformation(e,t){let i="";for(const e of this.steps)i+=e.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);const r=this._cached_projection[AA.cacheKey(e,t)];return void 0===r?null:r}}function PA(e,t,i){if(xa(t)||xa(i)||i.vcsWkid||Df(t,i))return null;const r=kO(t)/kO(i);if(1===r)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){e&&null!=e.z&&(e.z*=t)}(e,r);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const i of e.paths)for(const e of i)e.length>2&&(e[2]*=t)}(e,r);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const i of e.rings)for(const e of i)e.length>2&&(e[2]*=t)}(e,r);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}(e,r);case"extent":case"esriGeometryExtent":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,r);default:return null}}let RA=null,LA=null,DA=null,NA={};function FA(){return!!RA&&oA()}function jA(e){return xa(DA)&&(DA=Promise.all([sA(),import("./chunks/geometryEngineBase-c1e40b61.js").then((e=>e.g)),import("./chunks/hydrated-63828c0f.js")])),DA.then((([,t,{hydratedAdapter:i}])=>{Yc(e),LA=i,RA=t.default,RA._enableProjection(MA)}))}function $A(e,t,i=null){return Array.isArray(e)?0===e.length?[]:VA(LA,e,e[0].spatialReference,t,i):VA(LA,[e],e.spatialReference,t,i)[0]}function VA(e,t,i,r,n=null){if(xa(i)||xa(r))return t;if(GA(i,r,n))return t.map((e=>function(e,t,i){return e?"x"in e?function(e,t,i,r,n){OP[0]=e.x,OP[1]=e.y;const o=e.z;return OP[2]=void 0!==o?o:n,ZA(OP,t,0,OP,r,0,1)?(i.x=OP[0],i.y=OP[1],i.spatialReference=r,void 0===o?(i.z=void 0,i.hasZ=!1):(i.z=OP[2],i.hasZ=!0),void 0===e.m?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}(e,t,new Qm,i,0):"xmin"in e?function(e,t,i,r,n){const{xmin:o,ymin:s,xmax:a,ymax:l,hasZ:c,hasM:u}=e;return YA(o,s,c?e.zmin:n,t,OP,r)?(i.xmin=OP[0],i.ymin=OP[1],c&&(i.zmin=OP[2]),YA(a,l,c?e.zmax:n,t,OP,r)?(i.xmax=OP[0],i.ymax=OP[1],c&&(i.zmax=OP[2]),u&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}(e,t,new Eg,i,0):"rings"in e?HA(e,t,new Ww,i,0):"paths"in e?function(e,t,i,r,n){const{paths:o,hasZ:s,hasM:a}=e,l=[];return KA(o,s,a,t,l,r,n)?(i.paths=l,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}(e,t,new Yw,i,0):"points"in e?function(e,t,i,r,n){const{points:o,hasZ:s,hasM:a}=e,l=[],c=o.length,u=[];for(const e of o)u.push(e[0],e[1],s?e[2]:n);if(!ZA(u,t,0,u,r,0,c))return null;for(let e=0;e<c;++e){const t=3*e,i=u[t],r=u[t+1];s&&a?l.push([i,r,u[t+2],o[e][3]]):s?l.push([i,r,u[t+2]]):a?l.push([i,r,o[e][2]]):l.push([i,r])}return i.points=l,i.spatialReference=r,i.hasZ=s,i.hasM=a,i}(e,t,new dw,i,0):null:null}(e,i,r)));if(xa(n)){const e=AA.cacheKey(i,r);void 0!==NA[e]?n=NA[e]:(xa(n=zA(i,r,null))&&(n=new AA),NA[e]=n)}if(xa(RA))throw new UA;return RA._project(e,t,i,r,n)}function zA(e,t,i=null){if(xa(RA))throw new UA;if(xa(e)||xa(t))return null;const r=RA._getTransformation(LA,e,t,i,null==i?void 0:i.spatialReference);return null!==r?AA.fromGE(r):null}class UA extends Ac{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var qA;function GA(e,t,i){return!i&&(!!Df(e,t)||Bf(e)&&Bf(t)&&!!wP(e,t,kP))}async function BA(e,t,i,r){if(!FA())if(Array.isArray(e)){for(const{source:t,dest:i,geographicTransformation:n}of e)if(!GA(t,i,n))return jA(r)}else if(!GA(e,t,i))return jA(r)}function WA(e,t,i=t.spatialReference,r=0){return _a(i)&&_a(HA(e,e.spatialReference,t,i,r))}function HA(e,t,i,r,n){const{rings:o,hasZ:s,hasM:a}=e,l=[];return KA(o,s,a,t,l,r,n)?(i.rings=l,i.spatialReference=r,i.hasZ=s,i.hasM=a,i):null}function JA(e,t,i,r=0){OP[0]=e.x,OP[1]=e.y;const n=e.z;return OP[2]=void 0!==n?n:r,ZA(OP,e.spatialReference,0,t,i,0,1)}function YA(e,t,i,r,n,o){return EP[0]=e,EP[1]=t,EP[2]=i,ZA(EP,r,0,n,o,0,1)}function ZA(e,t,i,r,n,o,s=1){const a=wP(t,n,kP);if(xa(a))return!1;if(a===iP){if(e===r&&i===o)return!0;const t=i+3*s;for(let n=i,s=o;n<t;n++,s++)r[s]=e[n];return!0}const l=i+3*s;for(let t=i,n=o;t<l;t+=3,n+=3)a(e,t,r,n);return!0}function KA(e,t,i,r,n,o,s=0){const a=new Array;for(const i of e)for(const e of i)a.push(e[0],e[1],t?e[2]:s);if(!ZA(a,r,0,a,o,0,a.length/3))return!1;let l=0;n.length=0;for(const r of e){const e=new Array;for(const n of r)t&&i?e.push([a[l++],a[l++],a[l++],n[3]]):t?e.push([a[l++],a[l++],a[l++]]):i?(e.push([a[l++],a[l++],n[2]]),l++):(e.push([a[l++],a[l++]]),l++);n.push(e)}return!0}function XA(e,t,i,r){if(xa(e)||xa(r))return!1;const n=tP(e,xP),o=tP(r,SP);if(n===o&&!QA(o)&&(n!==qA.UNKNOWN||Df(e,r)))return BO(i,t),!0;if(QA(o)){const e=bP[n][qA.LON_LAT],r=bP[qA.LON_LAT][o];return!xa(e)&&!xa(r)&&(e(t,0,IP,0),r(IP,0,CP,0),eP(MP*IP[0],MP*IP[1],i),i[12]=CP[0],i[13]=CP[1],i[14]=CP[2],!0)}if((o===qA.WEB_MERCATOR||o===qA.PLATE_CARREE)&&(n===qA.WGS84||n===qA.CGCS2000&&o===qA.PLATE_CARREE||n===qA.SPHERICAL_ECEF||n===qA.WEB_MERCATOR)){const e=bP[n][qA.LON_LAT],r=bP[qA.LON_LAT][o];return!xa(e)&&!xa(r)&&(e(t,0,IP,0),r(IP,0,CP,0),n===qA.SPHERICAL_ECEF?function(e,t,i){eP(e,t,i),$O(i,i)}(MP*IP[0],MP*IP[1],i):jO(i),i[12]=CP[0],i[13]=CP[1],i[14]=CP[2],!0)}return!1}function QA(e){return e===qA.SPHERICAL_ECEF||e===qA.SPHERICAL_MARS_PCPF||e===qA.SPHERICAL_MOON_PCPF}function eP(e,t,i){const r=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t),a=i;return a[0]=-r,a[4]=-o*n,a[8]=s*n,a[12]=0,a[1]=n,a[5]=-o*r,a[9]=s*r,a[13]=0,a[2]=0,a[6]=s,a[10]=o,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function tP(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=TO(e,1)),e.wkt===rO.wkt?t.spatialReferenceId=qA.SPHERICAL_ECEF:jf(e)?t.spatialReferenceId=qA.WGS84:Vf(e)?t.spatialReferenceId=qA.WEB_MERCATOR:function(e){return Bf(e)&&32662===e.wkid}(e)?t.spatialReferenceId=qA.PLATE_CARREE:e.wkt===sO.wkt?t.spatialReferenceId=qA.WGS84_ECEF:e.wkid===Tf.CGCS2000?t.spatialReferenceId=qA.CGCS2000:e.wkt===nO.wkt?t.spatialReferenceId=qA.SPHERICAL_MARS_PCPF:e.wkt===oO.wkt?t.spatialReferenceId=qA.SPHERICAL_MOON_PCPF:Uf(e)?t.spatialReferenceId=qA.GCSMARS2000:Gf(e)?t.spatialReferenceId=qA.GCSMOON2000:t.spatialReferenceId=qA.UNKNOWN)}function iP(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function rP(e,t,i,r){i[r++]=TP*(e[t++]/Rm.radius),i[r++]=TP*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Rm.radius))),i[r]=e[t]}function nP(e,t,i,r){!function(e,t,i,r,n){const o=.4999999*Math.PI,s=db(MP*e[t+1],-o,o),a=Math.sin(s);i[r++]=MP*e[t]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}(e,t,i,r,Rm)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"}(qA||(qA={}));const oP=Rm.radius*Math.PI/180,sP=180/(Rm.radius*Math.PI);function aP(e,t,i,r){i[r]=e[t]*oP,i[r+1]=e[t+1]*oP,i[r+2]=e[t+2]}function lP(e,t,i,r){i[r]=e[t]*sP,i[r+1]=e[t+1]*sP,i[r+2]=e[t+2]}function cP(e,t,i,r,n){const o=n+e[t+2],s=MP*e[t+1],a=MP*e[t],l=Math.cos(s);i[r++]=Math.cos(a)*l*o,i[r++]=Math.sin(a)*l*o,i[r]=Math.sin(s)*o}function uP(e,t,i,r){cP(e,t,i,r,Dm.radius)}function hP(e,t,i,r){cP(e,t,i,r,Lm.radius)}function dP(e,t,i,r){cP(e,t,i,r,Rm.radius)}function pP(e,t,i,r,n){const o=e[t],s=e[t+1],a=e[t+2],l=Math.sqrt(o*o+s*s+a*a),c=bb(a/(0===l?1:l)),u=Math.atan2(s,o);i[r++]=TP*u,i[r++]=TP*c,i[r]=l-n}function fP(e,t,i,r){pP(e,t,i,r,Dm.radius)}function mP(e,t,i,r){pP(e,t,i,r,Lm.radius)}function gP(e,t,i,r){pP(e,t,i,r,Rm.radius)}function yP(e,t,i,r){!function(e,t,i,r,n){const o=MP*e[t],s=MP*e[t+1],a=e[t+2],l=Math.sin(s),c=Math.cos(s),u=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(u+a)*c*Math.cos(o),i[r++]=(u+a)*c*Math.sin(o),i[r++]=(u*(1-n.eccentricitySquared)+a)*l}(e,t,i,r,Rm)}function vP(e,t,i,r){const n=IA,o=e[t],s=e[t+1],a=e[t+2];let l,c,u,h,d,p,f,m,g,y,v,b,w,_,x,S,k,M,T,E,I;l=Math.abs(a),c=o*o+s*s,u=Math.sqrt(c),h=c+a*a,d=Math.sqrt(h),E=Math.atan2(s,o),p=a*a/h,f=c/h,_=n.a2/d,x=n.a3-n.a4/d,f>.3?(m=l/d*(1+f*(n.a1+_+p*x)/d),T=Math.asin(m),y=m*m,g=Math.sqrt(1-y)):(g=u/d*(1-p*(n.a5-_-f*x)/d),T=Math.acos(g),y=1-g*g,m=Math.sqrt(y)),v=1-Rm.eccentricitySquared*y,b=Rm.radius/Math.sqrt(v),w=n.a6*b,_=u-b*g,x=l-w*m,k=g*_+m*x,S=g*x-m*_,M=S/(w/v+k),T+=M,I=k+S*M/2,a<0&&(T=-T),i[r++]=TP*E,i[r++]=TP*T,i[r]=I}const bP={[qA.WGS84]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:iP,[qA.SPHERICAL_ECEF]:dP,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:nP,[qA.PLATE_CARREE]:aP,[qA.WGS84]:iP,[qA.WGS84_ECEF]:yP},[qA.CGCS2000]:{[qA.CGCS2000]:iP,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:iP,[qA.SPHERICAL_ECEF]:dP,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:aP,[qA.WGS84]:null,[qA.WGS84_ECEF]:yP},[qA.GCSMARS2000]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:iP,[qA.GCSMOON2000]:null,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:null,[qA.SPHERICAL_ECEF]:null,[qA.SPHERICAL_MARS_PCPF]:hP,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:null,[qA.WGS84]:null,[qA.WGS84_ECEF]:null},[qA.GCSMOON2000]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:iP,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:null,[qA.SPHERICAL_ECEF]:null,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:uP,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:null,[qA.WGS84]:null,[qA.WGS84_ECEF]:null},[qA.WEB_MERCATOR]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:rP,[qA.WGS84_COMPARABLE_LON_LAT]:rP,[qA.SPHERICAL_ECEF]:function(e,t,i,r){rP(e,t,i,r),dP(i,r,i,r)},[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:iP,[qA.PLATE_CARREE]:function(e,t,i,r){rP(e,t,i,r),aP(i,r,i,r)},[qA.WGS84]:rP,[qA.WGS84_ECEF]:function(e,t,i,r){rP(e,t,i,r),yP(i,r,i,r)}},[qA.WGS84_ECEF]:{[qA.CGCS2000]:vP,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:vP,[qA.WGS84_COMPARABLE_LON_LAT]:vP,[qA.SPHERICAL_ECEF]:function(e,t,i,r){vP(e,t,i,r),dP(i,r,i,r)},[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:function(e,t,i,r){vP(e,t,i,r),nP(i,r,i,r)},[qA.PLATE_CARREE]:function(e,t,i,r){vP(e,t,i,r),aP(i,r,i,r)},[qA.WGS84]:vP,[qA.WGS84_ECEF]:iP},[qA.SPHERICAL_ECEF]:{[qA.CGCS2000]:gP,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:gP,[qA.WGS84_COMPARABLE_LON_LAT]:gP,[qA.SPHERICAL_ECEF]:iP,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:function(e,t,i,r){gP(e,t,i,r),nP(i,r,i,r)},[qA.PLATE_CARREE]:function(e,t,i,r){gP(e,t,i,r),aP(i,r,i,r)},[qA.WGS84]:gP,[qA.WGS84_ECEF]:function(e,t,i,r){gP(e,t,i,r),yP(i,r,i,r)}},[qA.SPHERICAL_MARS_PCPF]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:mP,[qA.GCSMOON2000]:null,[qA.LON_LAT]:mP,[qA.WGS84_COMPARABLE_LON_LAT]:null,[qA.SPHERICAL_ECEF]:null,[qA.SPHERICAL_MARS_PCPF]:iP,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:null,[qA.WGS84]:null,[qA.WGS84_ECEF]:null},[qA.SPHERICAL_MOON_PCPF]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:fP,[qA.LON_LAT]:fP,[qA.WGS84_COMPARABLE_LON_LAT]:null,[qA.SPHERICAL_ECEF]:null,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:iP,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:null,[qA.WGS84]:null,[qA.WGS84_ECEF]:null},[qA.UNKNOWN]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:null,[qA.WGS84_COMPARABLE_LON_LAT]:null,[qA.SPHERICAL_ECEF]:null,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:iP,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:null,[qA.WGS84]:null,[qA.WGS84_ECEF]:null},[qA.LON_LAT]:{[qA.CGCS2000]:iP,[qA.GCSMARS2000]:iP,[qA.GCSMOON2000]:iP,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:iP,[qA.SPHERICAL_ECEF]:dP,[qA.SPHERICAL_MARS_PCPF]:hP,[qA.SPHERICAL_MOON_PCPF]:uP,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:nP,[qA.PLATE_CARREE]:aP,[qA.WGS84]:iP,[qA.WGS84_ECEF]:yP},[qA.WGS84_COMPARABLE_LON_LAT]:{[qA.CGCS2000]:null,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:iP,[qA.WGS84_COMPARABLE_LON_LAT]:iP,[qA.SPHERICAL_ECEF]:dP,[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:null,[qA.PLATE_CARREE]:aP,[qA.WGS84]:iP,[qA.WGS84_ECEF]:yP},[qA.PLATE_CARREE]:{[qA.CGCS2000]:lP,[qA.GCSMARS2000]:null,[qA.GCSMOON2000]:null,[qA.LON_LAT]:lP,[qA.WGS84_COMPARABLE_LON_LAT]:lP,[qA.SPHERICAL_ECEF]:function(e,t,i,r){lP(e,t,i,r),dP(i,r,i,r)},[qA.SPHERICAL_MARS_PCPF]:null,[qA.SPHERICAL_MOON_PCPF]:null,[qA.UNKNOWN]:null,[qA.WEB_MERCATOR]:function(e,t,i,r){lP(e,t,i,r),nP(i,r,i,r)},[qA.PLATE_CARREE]:iP,[qA.WGS84]:lP,[qA.WGS84_ECEF]:function(e,t,i,r){lP(e,t,i,r),yP(i,r,i,r)}}};function wP(e,t,i=_P()){return xa(e)||xa(t)?null:function(e,t,i){if(xa(e)||xa(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=tP(e,i.source),n=tP(t,i.dest);return r===qA.UNKNOWN&&n===qA.UNKNOWN?Df(e,t)?i.projector=iP:i.projector=null:i.projector=bP[r][n],i}(e,t,i).projector}function _P(){return{source:{spatialReference:null,spatialReferenceId:qA.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:qA.UNKNOWN,metersPerUnit:1},projector:iP}}const xP={spatialReference:null,spatialReferenceId:qA.UNKNOWN},SP={spatialReference:null,spatialReferenceId:qA.UNKNOWN},kP=_P();_P();const MP=gb(1),TP=yb(1),EP=[0,0,0],IP=[0,0,0],CP=[0,0,0],OP=[0,0,0];var AP;let PP=AP=class extends tp{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new AP({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};bl([Lh({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],PP.prototype,"cols",void 0),bl([Lh({type:Ch,json:{write:!0}})],PP.prototype,"level",void 0),bl([Lh({type:String,json:{write:!0}})],PP.prototype,"levelValue",void 0),bl([Lh({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],PP.prototype,"origin",void 0),bl([Lh({type:Number,json:{write:!0}})],PP.prototype,"resolution",void 0),bl([Lh({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],PP.prototype,"rows",void 0),bl([Lh({type:Number,json:{write:!0}})],PP.prototype,"scale",void 0),PP=AP=bl([md("esri.layers.support.LOD")],PP);const RP=PP;var LP;const DP=new $g({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let NP=LP=class extends tp{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=Yf.WebMercator,numLODs:o=24}=e;if(!Bf(n)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let i=o-1;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new LP({dpi:96,lods:e,origin:new Qm(0,0,n),size:[r,r],spatialReference:n})}const s=Nf(n),a=e.origin?new Qm({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Qm(s?{x:s.origin[0],y:s.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=1/(39.37*TO(n)*96),c=[];if(i)for(let e=0;e<i.length;e++){const t=i[e],r=t*l;c.push({level:e,scale:t,resolution:r})}else{let e=Ff(n)?512/r*591657527.5917094:256/r*591657527.591555;const i=Math.ceil(o/t);c.push({level:0,scale:e,resolution:e*l});for(let r=1;r<i;r++){const i=e/2**t,n=i*l;c.push({level:r,scale:i,resolution:n}),e=i}}return new LP({dpi:96,lods:c,origin:a,size:[r,r],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Nf(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Qm.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],n=t[r+1];if(i<=e)return r;if(n===e)return r+1;if(i>e&&n<e)return r+Math.log(i/e)/Math.log(i/n)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const n=this.lodAt(e);if(!n)return null;let o,s;if("number"==typeof t)o=t,s=i;else if(Df(t.spatialReference,this.spatialReference))o=t.x,s=t.y,r=i;else{const e=qm(t,this.spatialReference);if(xa(e))return null;o=e.x,s=e.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:MM()}),r.level=e,r.row=Math.floor((this.origin.y-s)/l+.001),r.col=Math.floor((o-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=LP.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===LP.ExtrapolateOptions.POWER_OF_TWO){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const r=e.level-i.level,n=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=MM()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+r,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return LP.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(256===this.size[0]&&256===this.size[1])return 256===e?this:null;const i=[],r=this.lods.length;for(let e=0;e<r;e++){const r=this.lods[e],n=r.resolution*t;i.push(new RP({level:r.level,scale:r.scale,resolution:n}))}return new LP({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};bl([Lh({type:Number,json:{write:!0}})],NP.prototype,"compressionQuality",void 0),bl([Lh({type:Number,json:{write:!0}})],NP.prototype,"dpi",void 0),bl([Lh({type:String,json:{read:DP.read,write:DP.write,origins:{"web-scene":{read:!1,write:!1}}}})],NP.prototype,"format",void 0),bl([Lh({readOnly:!0})],NP.prototype,"isWrappable",null),bl([Lh({type:Qm,json:{write:!0}})],NP.prototype,"origin",void 0),bl([Mm("origin")],NP.prototype,"readOrigin",null),bl([Lh({type:[RP],value:null,json:{write:!0}})],NP.prototype,"lods",null),bl([Lh({readOnly:!0})],NP.prototype,"minScale",void 0),bl([Lh({readOnly:!0})],NP.prototype,"maxScale",void 0),bl([Lh({readOnly:!0})],NP.prototype,"scales",void 0),bl([Lh({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],NP.prototype,"size",void 0),bl([Mm("size",["rows","cols"])],NP.prototype,"readSize",null),bl([Mf("size",{cols:{type:Ch},rows:{type:Ch}})],NP.prototype,"writeSize",null),bl([Lh({type:Yf,json:{write:!0}})],NP.prototype,"spatialReference",void 0),NP=LP=bl([md("esri.layers.support.TileInfo")],NP),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(NP||(NP={}));const FP=NP,jP={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},$P={xsmall:544,small:768,medium:992,large:1200};function VP(e,t){return t?jP[e].valueToClassName[t].split(" "):[]}const zP=e=>{let t=class extends e{constructor(...e){super(...e),this._breakpointsHandles=new Vb,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=$P}initialize(){this._breakpointsHandles.add(zb((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),Yb))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Ca(this._breakpointsHandles))}set breakpoints(e){if(e===this._get("breakpoints"))return;const t=function(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e);if(!t){const e=JSON.stringify($P,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e)}e=t?e:$P,this._set("breakpoints",{...e})}_updateClassNames(){if(!this.container)return;const e=xl.acquire(),t=xl.acquire();let i,r=!1;for(i in jP){const n=this[i],o=jP[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});n!==o&&(r=!0,this[i]=o,VP(i,n).forEach((e=>t.push(e))),VP(i,o).forEach((t=>e.push(t))))}r&&(this._applyClassNameChanges(e,t),xl.release(e),xl.release(t))}_applyClassNameChanges(e,t){const i=this.container;i&&(t.forEach((e=>i.classList.remove(e))),e.forEach((e=>i.classList.add(e))))}_removeActiveClassNames(){const e=this.container;if(!e)return;let t;for(t in jP)VP(t,this[t]).forEach((t=>e.classList.remove(t)))}};return bl([Lh()],t.prototype,"breakpoints",null),bl([Lh()],t.prototype,"orientation",void 0),bl([Lh()],t.prototype,"widthBreakpoint",void 0),bl([Lh()],t.prototype,"heightBreakpoint",void 0),t=bl([md("esri.views.BreakpointsOwner")],t),t};function UP(e){return"string"==typeof e?document.getElementById(e):e}function qP(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function GP(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function BP(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}
/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var WP,HP,JP=Function.prototype,YP=Object.prototype,ZP=JP.toString,KP=YP.hasOwnProperty,XP=ZP.call(Object),QP=YP.toString,eR=(WP=Object.getPrototypeOf,HP=Object,function(e){return WP(HP(e))});var tR=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=QP.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=eR(e);if(null===t)return!0;var i=KP.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&ZP.call(i)==XP},iR={exports:{}},rR={},nR={exports:{}},oR={};function sR(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var aR=/javascript\s*\:/gim;oR.whiteList=sR(),oR.getDefaultWhiteList=sR,oR.onAttr=function(e,t,i){},oR.onIgnoreAttr=function(e,t,i){},oR.safeAttrValue=function(e,t){return aR.test(t)?"":t};var lR={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},cR=lR;var uR=function(e,t){";"!==(e=cR.trimRight(e))[e.length-1]&&(e+=";");var i=e.length,r=!1,n=0,o=0,s="";function a(){if(!r){var i=cR.trim(e.slice(n,o)),a=i.indexOf(":");if(-1!==a){var l=cR.trim(i.slice(0,a)),c=cR.trim(i.slice(a+1));if(l){var u=t(n,s.length,l,c,i);u&&(s+=u+"; ")}}}n=o+1}for(;o<i;o++){var l=e[o];if("/"===l&&"*"===e[o+1]){var c=e.indexOf("*/",o+2);if(-1===c)break;n=(o=c+1)+1,r=!1}else"("===l?r=!0:")"===l?r=!1:";"===l?r||a():"\n"===l&&a()}return cR.trim(s)},hR=oR,dR=uR;function pR(e){return null==e}function fR(e){e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{}),e.whiteList=e.whiteList||hR.whiteList,e.onAttr=e.onAttr||hR.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||hR.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||hR.safeAttrValue,this.options=e}fR.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,r=t.onAttr,n=t.onIgnoreAttr,o=t.safeAttrValue;return dR(e,(function(e,t,s,a,l){var c=i[s],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(a):c instanceof RegExp&&(u=c.test(a)),!0!==u&&(u=!1),a=o(s,a)){var h,d={position:t,sourcePosition:e,source:l,isWhite:u};return u?pR(h=r(s,a,d))?s+":"+a:h:pR(h=n(s,a,d))?void 0:h}}))};var mR=fR;!function(e,t){var i=oR,r=mR;for(var n in(t=e.exports=function(e,t){return new r(t).process(e)}).FilterCSS=r,i)t[n]=i[n]}(nR,nR.exports);var gR={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,n;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},yR=nR.exports.FilterCSS,vR=nR.exports.getDefaultWhiteList,bR=gR;function wR(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _R=new yR;function xR(e){return e.replace(SR,"&lt;").replace(kR,"&gt;")}var SR=/</g,kR=/>/g,MR=/"/g,TR=/&quot;/g,ER=/&#([a-zA-Z0-9]*);?/gim,IR=/&colon;?/gim,CR=/&newline;?/gim,OR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,AR=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,PR=/u\s*r\s*l\s*\(.*/gi;function RR(e){return e.replace(MR,"&quot;")}function LR(e){return e.replace(TR,'"')}function DR(e){return e.replace(ER,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function NR(e){return e.replace(IR,":").replace(CR," ")}function FR(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return bR.trim(t)}function jR(e){return e=FR(e=NR(e=DR(e=LR(e))))}function $R(e){return e=xR(e=RR(e))}rR.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},rR.getDefaultWhiteList=wR,rR.onTag=function(e,t,i){},rR.onIgnoreTag=function(e,t,i){},rR.onTagAttr=function(e,t,i){},rR.onIgnoreTagAttr=function(e,t,i){},rR.safeAttrValue=function(e,t,i,r){if(i=jR(i),"href"===t||"src"===t){if("#"===(i=bR.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===t){if(OR.lastIndex=0,OR.test(i))return""}else if("style"===t){if(AR.lastIndex=0,AR.test(i))return"";if(PR.lastIndex=0,PR.test(i)&&(OR.lastIndex=0,OR.test(i)))return"";!1!==r&&(i=(r=r||_R).process(i))}return i=$R(i)},rR.escapeHtml=xR,rR.escapeQuote=RR,rR.unescapeQuote=LR,rR.escapeHtmlEntities=DR,rR.escapeDangerHtml5Entities=NR,rR.clearNonPrintableCharacter=FR,rR.friendlyAttrValue=jR,rR.escapeAttrValue=$R,rR.onIgnoreTagStripAll=function(){return""},rR.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),r=[],n=!1;return{onIgnoreTag:function(o,s,a){if(function(t){return!!i||-1!==bR.indexOf(e,t)}(o)){if(a.isClosing){var l="[/removed]",c=a.position+l.length;return r.push([!1!==n?n:a.position,c]),n=!1,l}return n||(n=a.position),"[removed]"}return t(o,s,a)},remove:function(e){var t="",i=0;return bR.forEach(r,(function(r){t+=e.slice(i,r[0]),i=r[1]})),t+=e.slice(i)}}},rR.stripCommentTag=function(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("\x3c!--",i);if(-1===r){t+=e.slice(i);break}t+=e.slice(i,r);var n=e.indexOf("--\x3e",r);if(-1===n)break;i=n+3}return t},rR.stripBlankChar=function(e){var t=e.split("");return t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))})),t.join("")},rR.cssFilter=_R,rR.getDefaultCSSWhiteList=vR;var VR={},zR=gR;function UR(e){var t=zR.spaceIndex(e);if(-1===t)var i=e.slice(1,-1);else i=e.slice(1,t+1);return"/"===(i=zR.trim(i).toLowerCase()).slice(0,1)&&(i=i.slice(1)),"/"===i.slice(-1)&&(i=i.slice(0,-1)),i}function qR(e){return"</"===e.slice(0,2)}var GR=/[^a-zA-Z0-9_:\.\-]/gim;function BR(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"="===i?t:-1}}function WR(e,t){for(;t>0;t--){var i=e[t];if(" "!==i)return"="===i?t:-1}}function HR(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}VR.parseTag=function(e,t,i){var r="",n=0,o=!1,s=!1,a=0,l=e.length,c="",u="";e:for(a=0;a<l;a++){var h=e.charAt(a);if(!1===o){if("<"===h){o=a;continue}}else if(!1===s){if("<"===h){r+=i(e.slice(n,a)),o=a,n=a;continue}if(">"===h){r+=i(e.slice(n,o)),c=UR(u=e.slice(o,a+1)),r+=t(o,r.length,c,u,qR(u)),n=a+1,o=!1;continue}if('"'===h||"'"===h)for(var d=1,p=e.charAt(a-d);""===p.trim()||"="===p;){if("="===p){s=h;continue e}p=e.charAt(a-++d)}}else if(h===s){s=!1;continue}}return n<e.length&&(r+=i(e.substr(n))),r},VR.parseAttr=function(e,t){var i=0,r=[],n=!1,o=e.length;function s(e,i){if(!((e=(e=zR.trim(e)).replace(GR,"").toLowerCase()).length<1)){var n=t(e,i||"");n&&r.push(n)}}for(var a=0;a<o;a++){var l,c=e.charAt(a);if(!1!==n||"="!==c)if(!1===n||a!==i||'"'!==c&&"'"!==c||"="!==e.charAt(a-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===n){if(-1===(l=BR(e,a))){s(zR.trim(e.slice(i,a))),n=!1,i=a+1;continue}a=l-1;continue}if(-1===(l=WR(e,a-1))){s(n,HR(zR.trim(e.slice(i,a)))),n=!1,i=a+1;continue}}else;else{if(-1===(l=e.indexOf(c,a+1)))break;s(n,zR.trim(e.slice(i+1,l))),n=!1,i=(a=l)+1}else n=e.slice(i,a),i=a+1}return i<e.length&&(!1===n?s(e.slice(i)):s(n,HR(zR.trim(e.slice(i))))),zR.trim(r.join(" "))};var JR=nR.exports.FilterCSS,YR=rR,ZR=VR,KR=ZR.parseTag,XR=ZR.parseAttr,QR=gR;function eL(e){return null==e}function tL(e){e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=YR.onIgnoreTagStripAll),e.whiteList=e.whiteList||YR.whiteList,e.onTag=e.onTag||YR.onTag,e.onTagAttr=e.onTagAttr||YR.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||YR.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||YR.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||YR.safeAttrValue,e.escapeHtml=e.escapeHtml||YR.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new JR(e.css))}tL.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,r=t.onTag,n=t.onIgnoreTag,o=t.onTagAttr,s=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=YR.stripBlankChar(e)),t.allowCommentTag||(e=YR.stripCommentTag(e));var u=!1;if(t.stripIgnoreTagBody){u=YR.StripTagBody(t.stripIgnoreTagBody,n);n=u.onIgnoreTag}var h=KR(e,(function(e,t,u,h,d){var p,f={sourcePosition:e,position:t,isClosing:d,isWhite:i.hasOwnProperty(u)};if(!eL(p=r(u,h,f)))return p;if(f.isWhite){if(f.isClosing)return"</"+u+">";var m=function(e){var t=QR.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var i="/"===(e=QR.trim(e.slice(t+1,-1)))[e.length-1];return i&&(e=QR.trim(e.slice(0,-1))),{html:e,closing:i}}(h),g=i[u],y=XR(m.html,(function(e,t){var i,r=-1!==QR.indexOf(g,e);return eL(i=o(u,e,t,r))?r?(t=a(u,e,t,c))?e+'="'+t+'"':e:eL(i=s(u,e,t,r))?void 0:i:i}));h="<"+u;return y&&(h+=" "+y),m.closing&&(h+=" /"),h+=">"}return eL(p=n(u,h,f))?l(h):p}),l);return u&&(h=u.remove(h)),h};var iL=tL;!function(e,t){var i=rR,r=VR,n=iL;function o(e,t){return new n(t).process(e)}for(var s in(t=e.exports=o).filterXSS=o,t.FilterXSS=n,i)t[s]=i[s];for(var s in r)t[s]=r[s];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(iR,iR.exports);var rL=function(){function e(e,t){var i,r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,i,n){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(i):iR.exports.safeAttrValue(e,t,i,n)}},e&&!t?i=e:e&&t?(i=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):i[t]=e[t]}))):(i=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=i,this._xssFilter=new iR.exports.FilterXSS(i)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?iR.exports.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,i,r){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,i,r):iR.exports.safeAttrValue(e,t,i,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var i=this.sanitize(e,t);return{isValid:e===i,sanitized:i}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(i){Array.isArray(e[i])&&Array.isArray(t[i])?t[i]=t[i].concat(e[i]):t[i]=e[i]}))})),t},e.prototype._iterateOverObject=function(e,t){var i=this;void 0===t&&(t={});try{var r=!1,n=void 0;if(Array.isArray(e))n=e.reduce((function(e,n){var o=i.validate(n,t);return o.isValid?e.concat([n]):(r=!0,e.concat([o.sanitized]))}),[]);else{if(!tR(e)){if(t.allowUndefined&&void 0===e)return;return null}n=Object.keys(e).reduce((function(n,o){var s=e[o],a=i.validate(s,t);return a.isValid?n[o]=s:(r=!0,n[o]=a.sanitized),n}),{})}return r?n:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();const nL=new Map;function oL(){nL.clear()}function sL(e){nL.delete(e)}var aL,lL,cL=function(e){aL||function(e){if("WebkitTransition"in e.style)aL="webkitTransitionEnd",lL="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");aL="transitionend",lL="animationend"}}(e)},uL=function(e,t){return void 0===t&&(t=e+"-active"),function(i){cL(i);var r=!1,n=function(o){r||(r=!0,i.removeEventListener(aL,n),i.removeEventListener(lL,n),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(aL,n),i.addEventListener(lL,n),requestAnimationFrame((function(){i.classList.add(t)}))}},hL=function(e,t){return void 0===t&&(t=e+"-active"),function(i,r){cL(i);var n=!1,o=function(e){n||(n=!0,i.removeEventListener(aL,o),i.removeEventListener(lL,o),r())};i.classList.add(e),i.addEventListener(aL,o),i.addEventListener(lL,o),requestAnimationFrame((function(){i.classList.add(t)}))}};Dl.getLogger("esri.widgets.support.widgetUtils");function dL(e){const t=xl.acquire();for(let e=0;e<arguments.length;e++){const i=arguments[e],r=typeof i;if("string"===r)t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if("object"===r)for(const e in i)i[e]&&t.push(e)}const i=t.join(" ");return xl.release(t),i}function pL(e){const t=null==e?void 0:e.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir}function fL(e){this[e.getAttribute("data-node-ref")]=null}function mL(e){this[e.getAttribute("data-node-ref")]=e}function gL(e,t){return("enter"===e?uL:hL)(t)}(()=>{const e=new Map,t=new ResizeObserver((t=>{oL();for(const i of t)e.get(i.target)(i)}))})();const yL=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),vL=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],bL=new rL({whiteList:yL,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(vL.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);const wL="http://www.w3.org/",_L=`${wL}2000/svg`,xL=`${wL}1999/xlink`;let SL,kL=[],ML=(e,t)=>{let i={};return Object.keys(e).forEach((t=>{i[t]=e[t]})),t&&Object.keys(t).forEach((e=>{i[e]=t[e]})),i},TL=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),EL=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},IL=(e,t,i)=>{if(""!==t.vnodeSelector)for(let r=i;r<e.length;r++)if(TL(e[r],t))return r;return-1},CL=(e,t,i,r)=>{let n=e[t];if(""===n.vnodeSelector)return;let o=n.properties;if(!(o?void 0===o.key?o.bind:o.key:void 0))for(let o=0;o<e.length;o++)if(o!==t){let t=e[o];if(TL(t,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${"added"===r?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},OL=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},AL=[],PL=!1,RL=e=>{(e.children||[]).forEach(RL),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},LL=()=>{PL=!1,AL.forEach(RL),AL.length=0},DL=e=>{AL.push(e),PL||(PL=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(LL,{timeout:16}):setTimeout(LL,16))},NL=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i){t.style.pointerEvents="none";let r=()=>{t.parentNode&&(t.parentNode.removeChild(t),DL(e))};return void i(t,r,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),DL(e))},FL=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,n=Object.keys(t),o=n.length;for(let s=0;s<o;s++){let o=n[s],a=t[o];if("className"===o)throw new Error('Property "className" is not supported, use "class".');if("class"===o)VL(e,a,!0);else if("classes"===o){let t=Object.keys(a),i=t.length;for(let r=0;r<i;r++){let i=t[r];a[i]&&e.classList.add(i)}}else if("styles"===o){let t=Object.keys(a),r=t.length;for(let n=0;n<r;n++){let r=t[n],o=a[r];o&&(EL(o),i.styleApplyer(e,r,o))}}else if("key"!==o&&null!=a){let n=typeof a;"function"===n?(0===o.lastIndexOf("on",0)&&(r&&(a=r(o,a,e,t)),"oninput"===o&&function(){let e=a;a=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[o]=a):i.namespace===_L?"href"===o?e.setAttributeNS(xL,o,a):e.setAttribute(o,a):"string"===n&&"value"!==o?"innerHTML"===o?e[o]=bL.sanitize(a):e.setAttribute(o,a):e[o]=a}}},jL=(e,t,i)=>{((e,t,i)=>{if(t)for(let r of t)$L(r,e,void 0,i)})(e,t.children,i),t.text&&(e.textContent=t.text),FL(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},$L=(e,t,i,r)=>{let n,o=0,s=e.vnodeSelector,a=t.ownerDocument;if(""===s)n=e.domNode=a.createTextNode(e.text),void 0!==i?t.insertBefore(n,i):t.appendChild(n);else{for(let l=0;l<=s.length;++l){let c=s.charAt(l);if(l===s.length||"."===c||"#"===c){let c=s.charAt(o-1),u=s.slice(o,l);"."===c?n.classList.add(u):"#"===c?n.id=u:("svg"===u&&(r=ML(r,{namespace:_L})),void 0!==r.namespace?n=e.domNode=a.createElementNS(r.namespace,u):(n=e.domNode=e.domNode||a.createElement(u),"input"===u&&e.properties&&void 0!==e.properties.type&&n.setAttribute("type",e.properties.type)),void 0!==i?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),o=l+1}}jL(n,e,r)}},VL=(e,t,i)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,i)}))};SL=(e,t,i)=>{let r=e.domNode,n=!1;if(e===t)return!1;let o=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(e,r),t.domNode=e,n=!0,n}t.domNode=r}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(i=ML(i,{namespace:_L})),e.text!==t.text&&(o=!0,void 0===t.text?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=((e,t,i,r,n)=>{if(i===r)return!1;r=r||kL;let o,s=(i=i||kL).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let a=l<s?i[l]:void 0,h=r[c];if(void 0!==a&&TL(a,h))u=SL(a,h,n)||u,l++;else{let a=IL(i,h,l+1);if(a>=0){for(o=l;o<a;o++)NL(i[o]),CL(i,o,e,"removed");u=SL(i[a],h,n)||u,l=a+1}else $L(h,t,l<s?i[l].domNode:void 0,n),OL(h),CL(r,c,e,"added")}c++}if(s>l)for(o=l;o<s;o++)NL(i[o]),CL(i,o,e,"removed");return u})(t,r,e.children,t.children,i)||o,o=((e,t,i,r)=>{if(!i)return;let n=!1,o=Object.keys(i),s=o.length;for(let a=0;a<s;a++){let s=o[a],l=i[s],c=t[s];if("class"===s)c!==l&&(VL(e,c,!1),VL(e,l,!0));else if("classes"===s){let t=e.classList,i=Object.keys(l),r=i.length;for(let e=0;e<r;e++){let r=i[e],o=!!l[r];o!==!!c[r]&&(n=!0,o?t.add(r):t.remove(r))}}else if("styles"===s){let t=Object.keys(l),i=t.length;for(let o=0;o<i;o++){let i=t[o],s=l[i];s!==c[i]&&(n=!0,s?(EL(s),r.styleApplyer(e,i,s)):r.styleApplyer(e,i,""))}}else if(l||"string"!=typeof c||(l=""),"value"===s){let t=e[s];t!==l&&(e["oninput-value"]?t===e["oninput-value"]:l!==c)&&(e[s]=l,e["oninput-value"]=void 0),l!==c&&(n=!0)}else if(l!==c){let t=typeof l;"function"===t&&r.eventHandlerInterceptor||(r.namespace===_L?"href"===s?e.setAttributeNS(xL,s,l):e.setAttribute(s,l):"string"===t?"innerHTML"===s?e[s]=bL.sanitize(l):"role"===s&&""===l?e.removeAttribute(s):e.setAttribute(s,l):e[s]!==l&&(e[s]=l),n=!0)}}return n})(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),n};let zL=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,SL(r,i,t)},domNode:e.domNode});const UL={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{"-"===t.charAt(0)?e.style.setProperty(t,i):e.style[t]=i}};let qL,GL=e=>ML(UL,e),BL=(e,t,i)=>(i=GL(i),$L(t,e,void 0,i),zL(t,i)),WL=(e,t,i)=>(i=GL(i),$L(t,e.parentNode,e,i),zL(t,i)),HL=(e,t,i)=>(i=GL(i),t.domNode=e,jL(e,t,i),zL(t,i)),JL=(e,t,i)=>(i=GL(i),$L(t,e.parentNode,e,i),e.parentNode.removeChild(e),zL(t,i)),YL=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};qL=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let ZL=(e,t)=>{let i=e;return t.forEach((e=>{i=i&&i.children?qL(i.children,(t=>t.domNode===e)):void 0})),i},KL=(e,t,i)=>{let r=function(r){i("domEvent",r);let n=t(),o=YL(r.currentTarget,n.domNode);o.reverse();let s,a=ZL(n.getLastRender(),o);return e.scheduleRender(),a&&(s=a.properties[`on${r.type}`].apply(a.properties.bind||this,arguments)),i("domEventProcessed",r),s};return(e,t,i,n)=>r},XL=e=>{let t,i,r=GL(e),n=r.performanceLogger,o=!0,s=!1,a=[],l=[],c=(e,i,o)=>{let s;r.eventHandlerInterceptor=KL(t,(()=>s),n),s=e(i,o(),r),a.push(s),l.push(o)},u=()=>{if(i=void 0,o){o=!1,n("renderStart",void 0);for(let e=0;e<a.length;e++){let t=l[e]();n("rendered",void 0),a[e].update(t),n("patched",void 0)}n("renderDone",void 0),o=!0}};return t={renderNow:u,scheduleRender:()=>{i||s||(i=requestAnimationFrame(u))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),s=!0},resume:()=>{s=!1,o=!0,t.scheduleRender()},append:(e,t)=>{c(BL,e,t)},insertBefore:(e,t)=>{c(WL,e,t)},merge:(e,t)=>{c(HL,e,t)},replace:(e,t)=>{c(JL,e,t)},detach:e=>{for(let t=0;t<l.length;t++)if(l[t]===e)return l.splice(t,1),a.splice(t,1)[0];throw new Error("renderFunction was not found")}},t},QL=class extends vd{constructor(){super(...arguments),this.items=new Fd,this._watchUpdatingTracking=new Kb,this._callbacks=new Map,this._projector=XL(),this._hiddenProjector=XL()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(e=>{for(const t of e.added){const e=()=>t.render();this._callbacks.set(t,e),this._projector.append(this.surface,e)}for(const t of e.removed){const e=this._projector.detach(this._callbacks.get(t));this.surface.removeChild(e.domNode),this._callbacks.delete(t)}}))}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach((e=>this._projector.detach(e))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const n=()=>(r=e.render(),r);i.append(t,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const e=r.domNode.getBoundingClientRect();o.left=e.left,o.top=e.top,o.right=e.right,o.bottom=e.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some((e=>e.visible))}renderCanvas(e){if(!this.items.some((e=>e.visible)))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach((e=>{t.save(),e.renderCanvas(t),t.restore()})),t.restore()}};bl([Lh({readOnly:!0})],QL.prototype,"surface",void 0),bl([Lh({readOnly:!0})],QL.prototype,"items",void 0),bl([Lh({readOnly:!0})],QL.prototype,"needsRender",null),bl([Lh({readOnly:!0})],QL.prototype,"_watchUpdatingTracking",void 0),bl([Lh({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],QL.prototype,"updating",void 0),QL=bl([md("esri.views.overlay.ViewOverlay")],QL);const eD=QL;function tD(e,t,i,r){let n=null,o=1e3;"number"==typeof t?(o=t,r=i):(n=null!=t?t:null,o=i);let s,a=0;const l=()=>{a=0,e.apply(r,s)},c=(...e)=>{n&&n.apply(r,e),s=e,o?a||(a=setTimeout(l,o)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}const iD=/\?(\.|$)/g;function rD(e,t,i,r){const n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=nD(e,t,i,r);for(const t of n){const r=t.trim().replace(iD,"$1"),n=e.get(r);i.call(e,n,n,r,e)}return o}function nD(e,t,i,r){return e.watch(t,i,r)}function oD(e,t,i,r){return hD(e,t,dD,i,r)}function sD(e,t,i,r){return hD(e,t,pD,i,r)}function aD(e,t,i,r){return function(e,t,i,r,n){const o="function"==typeof r?r:null,s="object"==typeof r?r:null;"boolean"==typeof r&&(n=r);let a,l=!1;function c(){a&&(a.remove(),a=null)}const u=ou();eu(s,(()=>{c(),u.reject(Jc())}));const h={then:u.promise.then.bind(u.promise),catch:u.promise.catch.bind(u.promise),remove:c};return Object.freeze(h),a=hD(e,t,i,((t,i,r,n)=>{l=!0,c(),o&&o.call(e,t,i,r,n),u.resolve({value:t,oldValue:i,propertyName:r,target:n})}),n),l&&c(),h}(e,t,pD,i,r)}function lD(e,t,i,r){return hD(e,t,fD,i,r)}function cD(e,t,i,r){return hD(e,t,mD,i,r)}function uD(e,t,i,r,n,o,s){const a={};function l(t){const r=a[t];r&&(o&&o(r.target,t,e,i),r.handle.remove(),delete a[t])}const c=rD(e,t,((t,o,s)=>{l(s),zc(t)&&(a[s]={handle:Uc(t,i,r),target:t},n&&n(t,s,e,i))}),s);return{remove(){c.remove();for(const e in a)l(e)}}}function hD(e,t,i,r,n){const o=e.watch(t,((t,n,o,s)=>{i&&!i(t)||null==r||r.call(e,t,n,o,s)}),n);if(Array.isArray(t))for(const n of t){const o=e.get(n);i&&i(o)&&(null==r||r.call(e,o,o,t,e))}else{const n=e.get(t);i&&i(n)&&(null==r||r.call(e,n,n,t,e))}return o}function dD(e){return!!e}function pD(e){return!e}function fD(e){return!0===e}function mD(e){return!1===e}function gD(e,t){return Lh({aliasOf:t?{...t,source:e}:e})}function yD(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const vD={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},bD={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},wD=(e,t,i=!1)=>{let r=e;return t.forEach(((e,n)=>{var o;const s=null!=(o=r)&&o.children?((e,t)=>e.find(t))(r.children,(t=>t.domNode===e)):void 0;i&&!s&&n!==t.length-1||(r=s)})),r},_D=!0,xD=!0,SD=!0,kD=!1,MD=!1;let TD,ED,ID,CD=!1,OD=!1,AD=!1,PD=!1,RD=null,LD=!1;const DD="undefined"!=typeof window?window:{},ND=DD.document||{head:{}},FD=DD.HTMLElement||class{},jD={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},$D=(()=>{let e=!1;try{ND.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),VD=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),zD=(e,t,i,r)=>{i&&i.map((([i,r,n])=>{const o=qD(e,i),s=UD(t,n),a=GD(i);jD.ael(o,r,s,a),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>jD.rel(o,r,s,a)))}))},UD=(e,t)=>i=>{try{MD||e.$hostElement$[t](i)}catch(e){zN(e)}},qD=(e,t)=>4&t?ND:8&t?DD:16&t?ND.body:e,GD=e=>$D?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),BD="http://www.w3.org/1999/xlink",WD=new WeakMap,HD=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=(t.$tagName$,()=>{}),o=((e,t,i,r)=>{let n=JD(t,i),o=UN.get(n);if(e=11===e.nodeType?e:ND,o)if("string"==typeof o){e=e.head||e;let t,i=WD.get(e);i||WD.set(e,i=new Set),i.has(n)||(t=ND.createElement("style"),t.innerHTML=o,e.insertBefore(t,e.querySelector("link")),i&&i.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n})(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&r&&(i["s-sc"]=o,i.classList.add(o+"-h"),2&r&&i.classList.add(o+"-s")),n()},JD=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),YD={},ZD=e=>"object"===(e=typeof e)||"function"===e,KD=(e,t,...i)=>{let r=null,n=null,o=null,s=!1,a=!1,l=[];const c=t=>{for(let i=0;i<t.length;i++)r=t[i],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((s="function"!=typeof e&&!ZD(r))&&(r=String(r)),s&&a?l[l.length-1].$text$+=r:l.push(s?XD(null,r):r),a=s)};if(c(i),t){t.key&&(n=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,eN);const u=XD(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=n,u.$name$=o,u},XD=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},QD={},eN={forEach:(e,t)=>e.map(tN).forEach(t),map:(e,t)=>e.map(tN).map(t).map(iN)},tN=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),iN=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),KD(e.vtag,t,...e.vchildren||[])}const t=XD(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},rN=(e,t,i,r,n,o)=>{if(i!==r){let s=VN(e,t),a=t.toLowerCase();if("class"===t){const t=e.classList,n=oN(i),o=oN(r);t.remove(...n.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!n.includes(e))))}else if("style"===t){for(const t in i)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)i&&r[t]===i[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=ZD(r);if((s||l&&null!==r)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let n=null==r?"":r;"list"===t?s=!1:null!=i&&e[t]==n||(e[t]=n)}}catch(e){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(BD,t):e.removeAttribute(t)):(!s||4&o||n)&&!l&&(r=!0===r?"":r,c?e.setAttributeNS(BD,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):VN(DD,a)?a.slice(2):a[2]+t.slice(3),i&&jD.rel(e,t,i,!1),r&&jD.ael(e,t,r,!1)}},nN=/\s/,oN=e=>e?e.split(nN):[],sN=(e,t,i,r)=>{const n=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||YD,s=t.$attrs$||YD;for(r in o)r in s||rN(n,r,o[r],void 0,i,t.$flags$);for(r in s)rN(n,r,o[r],s[r],i,t.$flags$)},aN=(e,t,i,r)=>{let n,o,s,a=t.$children$[i],l=0;if(CD||(AD=!0,"slot"===a.$tag$&&(TD&&r.classList.add(TD+"-s"),a.$flags$|=a.$children$?2:1)),null!==a.$text$)n=a.$elm$=ND.createTextNode(a.$text$);else if(1&a.$flags$)n=a.$elm$=ND.createTextNode("");else{if(PD||(PD="svg"===a.$tag$),n=a.$elm$=ND.createElementNS(PD?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&a.$flags$?"slot-fb":a.$tag$),PD&&"foreignObject"===a.$tag$&&(PD=!1),sN(null,a,PD),(e=>null!=e)(TD)&&n["s-si"]!==TD&&n.classList.add(n["s-si"]=TD),a.$children$)for(l=0;l<a.$children$.length;++l)o=aN(e,a,l,n),o&&n.appendChild(o);"svg"===a.$tag$?PD=!1:"foreignObject"===n.tagName&&(PD=!0)}return n["s-hn"]=ID,3&a.$flags$&&(n["s-sr"]=!0,n["s-cr"]=ED,n["s-sn"]=a.$name$||"",s=e&&e.$children$&&e.$children$[i],s&&s.$tag$===a.$tag$&&e.$elm$&&lN(e.$elm$,!1)),n},lN=(e,t)=>{jD.$flags$|=1;const i=e.childNodes;for(let e=i.length-1;e>=0;e--){const r=i[e];r["s-hn"]!==ID&&r["s-ol"]&&(pN(r).insertBefore(r,dN(r)),r["s-ol"].remove(),r["s-ol"]=void 0,AD=!0),t&&lN(r,t)}jD.$flags$&=-2},cN=(e,t,i,r,n,o)=>{let s,a=e["s-cr"]&&e["s-cr"].parentNode||e;for(a.shadowRoot&&a.tagName===ID&&(a=a.shadowRoot);n<=o;++n)r[n]&&(s=aN(null,i,n,e),s&&(r[n].$elm$=s,a.insertBefore(s,dN(t))))},uN=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,bN(r),OD=!0,n["s-ol"]?n["s-ol"].remove():lN(n,!0),n.remove())},hN=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),dN=e=>e&&e["s-ol"]||e,pN=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,fN=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,s=t.$text$;let a;null===s?(PD="svg"===o||"foreignObject"!==o&&PD,"slot"===o||sN(e,t,PD),null!==r&&null!==n?((e,t,i,r)=>{let n,o,s=0,a=0,l=0,c=0,u=t.length-1,h=t[0],d=t[u],p=r.length-1,f=r[0],m=r[p];for(;s<=u&&a<=p;)if(null==h)h=t[++s];else if(null==d)d=t[--u];else if(null==f)f=r[++a];else if(null==m)m=r[--p];else if(hN(h,f))fN(h,f),h=t[++s],f=r[++a];else if(hN(d,m))fN(d,m),d=t[--u],m=r[--p];else if(hN(h,m))"slot"!==h.$tag$&&"slot"!==m.$tag$||lN(h.$elm$.parentNode,!1),fN(h,m),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++s],m=r[--p];else if(hN(d,f))"slot"!==h.$tag$&&"slot"!==m.$tag$||lN(d.$elm$.parentNode,!1),fN(d,f),e.insertBefore(d.$elm$,h.$elm$),d=t[--u],f=r[++a];else{for(l=-1,c=s;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(o=t[l],o.$tag$!==f.$tag$?n=aN(t&&t[a],i,l,e):(fN(o,f),t[l]=void 0,n=o.$elm$),f=r[++a]):(n=aN(t&&t[a],i,a,e),f=r[++a]),n&&pN(h.$elm$).insertBefore(n,dN(h.$elm$))}s>u?cN(e,null==r[p+1]?null:r[p+1].$elm$,i,r,a,p):a>p&&uN(t,s,u)})(i,r,t,n):null!==n?(null!==e.$text$&&(i.textContent=""),cN(i,null,t,n,0,n.length-1)):null!==r&&uN(r,0,r.length-1),PD&&"svg"===o&&(PD=!1)):(a=i["s-cr"])?a.parentNode.textContent=s:e.$text$!==s&&(i.data=s)},mN=e=>{let t,i,r,n,o,s,a=e.childNodes;for(i=0,r=a.length;i<r;i++)if(t=a[i],1===t.nodeType){if(t["s-sr"])for(o=t["s-sn"],t.hidden=!1,n=0;n<r;n++)if(s=a[n].nodeType,a[n]["s-hn"]!==t["s-hn"]||""!==o){if(1===s&&o===a[n].getAttribute("slot")){t.hidden=!0;break}}else if(1===s||3===s&&""!==a[n].textContent.trim()){t.hidden=!0;break}mN(t)}},gN=[],yN=e=>{let t,i,r,n,o,s,a=0,l=e.childNodes,c=l.length;for(;a<c;a++){if(t=l[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],s=r.length-1;s>=0;s--)i=r[s],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(vN(i,n)?(o=gN.find((e=>e.$nodeToRelocate$===i)),OD=!0,i["s-sn"]=i["s-sn"]||n,o?o.$slotRefNode$=t:gN.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&gN.map((e=>{vN(e.$nodeToRelocate$,i["s-sn"])&&(o=gN.find((e=>e.$nodeToRelocate$===i)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):gN.some((e=>e.$nodeToRelocate$===i))||gN.push({$nodeToRelocate$:i}));1===t.nodeType&&yN(t)}},vN=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,bN=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(bN)},wN=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||XD(null,null),o=(s=t)&&s.$tag$===QD?t:KD(null,null,t);var s;if(ID=i.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=i[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=n.$elm$=i.shadowRoot||i,TD=i["s-sc"],ED=i["s-cr"],CD=0!=(1&r.$flags$),OD=!1,fN(n,o),jD.$flags$|=1,AD){let e,t,i,r,n,s;yN(o.$elm$);let a=0;for(;a<gN.length;a++)e=gN[a],t=e.$nodeToRelocate$,t["s-ol"]||(i=ND.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(a=0;a<gN.length;a++)if(e=gN[a],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,n=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if(s=i["s-nr"],s&&s["s-sn"]===t["s-sn"]&&r===s.parentNode&&(s=s.nextSibling,!s||!s["s-nr"])){n=s;break}(!n&&r!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,n))}else 1===t.nodeType&&(t.hidden=!0)}OD&&mN(o.$elm$),jD.$flags$&=-2,gN.length=0},_N=(e,t,i)=>{const r=e;return{emit:e=>xN(r,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},xN=(e,t,i)=>{const r=jD.ce(t,i);return e.dispatchEvent(r),r},SN=(e,t)=>{e.$flags$|=16,e.$ancestorComponent$;return ZN((()=>kN(e,t)))},kN=(e,t)=>{const i=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),n=i;let o;return o=CN(n,t?"componentWillLoad":"componentWillUpdate"),o=ON(o,(()=>CN(n,"componentWillRender"))),r(),ON(o,(()=>MN(e,n,t)))},MN=async(e,t,i)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],i&&HD(e);const o=(e.$cmpMeta$.$tagName$,()=>{});TN(e,t,r),o(),n(),EN(e)},TN=(e,t,i)=>{try{RD=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(_D||xD)&&(SD||xD)&&(kD||wN(e,t))}catch(t){zN(t,e.$hostElement$)}return RD=null,null},EN=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},i=e.$hostElement$;e.$ancestorComponent$,CN(i,"componentDidRender"),64&e.$flags$?(CN(i,"componentDidUpdate"),t()):(e.$flags$|=64,CN(i,"componentDidLoad"),t())},IN=e=>{{const t=jN(e),i=t.$hostElement$.isConnected;return i&&2==(18&t.$flags$)&&SN(t,!1),i}},CN=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){zN(e)}},ON=(e,t)=>e&&e.then?e.then(t):t(),AN=(e,t,i,r)=>{const n=jN(e),o=e,s=n.$instanceValues$.get(t),a=n.$flags$,l=o;var c,u;if(c=i,u=r.$members$[t][0],(i=null==c||ZD(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c)!==s){if(n.$instanceValues$.set(t,i),r.$watchers$&&128&a){const e=r.$watchers$[t];e&&e.map((e=>{try{l[e](i,s,t)}catch(e){zN(e,o)}}))}if(2==(18&a)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,s,t))return;SN(n,!1)}}},PN=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),r=e.prototype;i.map((([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(r,e,{get(){return t=e,jN(this).$instanceValues$.get(t);var t},set(i){AN(this,e,i,t)},configurable:!0,enumerable:!0})}));{const n=new Map;r.attributeChangedCallback=function(e,t,i){jD.jmp((()=>{const t=n.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i}))},e.observedAttributes=i.filter((([e,t])=>15&t[0])).map((([e,i])=>{const r=i[1]||e;return n.set(r,e),512&i[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},RN=async(e,t,i,r,n)=>{if(0==(32&t.$flags$)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then((()=>t.$flags$|=128)),n.style)){let r=n.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>qN.map((t=>t(e))).find((e=>!!e)))(e)]);const o=JD(i,t.$modeName$);if(!UN.has(o)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let r=UN.get(e);VD&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,UN.set(e,r)})(o,r,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;SN(t,!0)},LN=e=>{const t=e["s-cr"]=ND.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},DN=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){$N(this,i)},connectedCallback(){(e=>{if(0==(1&jD.$flags$)){const t=jN(e),i=t.$cmpMeta$,r=(i.$tagName$,()=>{});1&t.$flags$?(zD(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&LN(e),i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),RN(e,t,i)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&jD.$flags$)){const t=jN(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,PN(e,i)},NN=e=>{const t=new URL(e,jD.$resourcesUrl$);return t.origin!==DD.location.origin?t.href:t.pathname},FN=new WeakMap,jN=e=>FN.get(e),$N=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return zD(e,i,t.$listeners$),FN.set(e,i)},VN=(e,t)=>t in e,zN=(e,t)=>(0,console.error)(e,t),UN=new Map,qN=[],GN=[],BN=[],WN=(e,t)=>i=>{e.push(i),LD||(LD=!0,t&&4&jD.$flags$?YN(JN):jD.raf(JN))},HN=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){zN(e)}e.length=0},JN=()=>{HN(GN),HN(BN),(LD=GN.length>0)&&jD.raf(JN)},YN=e=>(e=>Promise.resolve(e))().then(e),ZN=WN(BN,!0);let KN;function XN(){(e=>{jD.$resourcesUrl$=e})(Wp(ly(KN)))}KN="components/assets";const QN=Symbol("widget"),eF=[],tF={},iF=new WeakMap;function rF(e,t){let i=t.children;if(i&&i.length)for(let t=0;t<i.length;++t)i[t]=rF(e,i[t]);else i=eF;const r=t.vnodeSelector;if(aF(r)){const n=t.properties||tF,o=n.key||r;return{vnodeSelector:"div",properties:{key:o,afterCreate:nF,afterUpdate:oF,afterRemoved:sF,parentWidget:e,widgetConstructor:r,widgetProperties:{...n,key:o,children:i}},children:void 0,text:void 0,domNode:null}}return t}function nF(e,t,i,{parentWidget:r,widgetConstructor:n,widgetProperties:o}){const s=new n(o);s.container=e,iF.set(e,s),null==s.afterCreate||s.afterCreate(s,e),r._internalHandles.add(Fl((()=>sF(e))))}function oF(e,t,i,{widgetProperties:r}){const n=iF.get(e);n&&(n.set(r),null==n.afterUpdate||n.afterUpdate(n,e))}function sF(e){const t=iF.get(e);t&&(t.destroy(),iF.delete(e))}function aF(e){return"function"==typeof e&&e[QN]}function lF(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function cF(){return lF().startsWith("dark")}const uF="esri.widgets.Widget",hF=Dl.getLogger(uF);let dF=0;const pF="esri-icon-checkbox-unchecked";function fF(e,t){for(const i in t)null!=e[i]&&("object"==typeof e[i]&&"object"==typeof t[i]?fF(e[i],t[i]):e[i]=t[i]);return e}const mF=(e=>{let t;const i={...vD,...e},r=(e=>({...bD,...e}))(i),n=r.performanceLogger;let o,s=!0,a=!1;const l=[],c=[],u=(e,o,s)=>{let a;r.eventHandlerInterceptor=(e,r,o,s)=>function(e){let r;n("domEvent",e);const o=((e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i})(e.currentTarget,a.domNode),s=o.some((e=>{var t;return customElements.get(null==e||null==(t=e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase!==Event.CAPTURING_PHASE&&s){const t=e.composedPath(),i=t.slice(t.indexOf(e.currentTarget),t.indexOf(a.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();r=wD(a.getLastRender(),i,!0)}else o.reverse(),r=wD(a.getLastRender(),o);let l;return r&&(l=i.handleInterceptedEvent(t,r,this,e)),n("domEventProcessed",e),l},null==i.postProcessProjectionOptions||i.postProcessProjectionOptions(r);const u=s();a=e(o,u,r),l.push(a),c.push(s),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(a,u)};let h=()=>{if(o=void 0,s){s=!1,n("renderStart",void 0);for(let e=0;e<l.length;e++){const t=c[e]();n("rendered",void 0),l[e].update(t),n("patched",void 0)}n("renderDone",void 0),s=!0}};return i.modifyDoRenderImplementation&&(h=i.modifyDoRenderImplementation(h,l,c)),t={renderNow:h,scheduleRender:()=>{o||a||(o=requestAnimationFrame(h))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:()=>{a=!1,s=!0,t.scheduleRender()},append:(e,t)=>{u(BL,e,t)},insertBefore:(e,t)=>{u(WL,e,t)},merge:(e,t)=>{u(HL,e,t)},replace:(e,t)=>{u(JL,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),l.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(e,r,n,o)=>{const s=t(e,r,n,o),a=i.test(e);if(!((e=e.replace(i,"")).toLowerCase()in n)||a){const t=e[2].toLowerCase()+e.slice(3),i=e=>s.call(n,e);n.addEventListener(t,i,a);const r=()=>n.removeEventListener(t,i,a),l=o.afterRemoved;o.afterRemoved=e=>{null==l||l(e),r()}}return s}},handleInterceptedEvent(e,t,i,r){const{eventPhase:n,type:o}=r,s=n===Event.CAPTURING_PHASE;let a=`on${o}${s?"capture":""}`;const l=t.properties;(a in l||(a=`on${o[0].toUpperCase()}${o.slice(1)}${s?"Capture":""}`,a in l))&&(oL(),e.scheduleRender(),l[a].call(l.bind||i,r))}});let gF=!1,yF=class extends(np(wd.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Vb,this._projector=mF,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=pF,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=pu((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await su(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let i=await ky(e);this.uiStrings&&Object.keys(this.uiStrings)&&(i=fF(ol(i),this.uiStrings)),this[t]=i})));for(const t of e)t.error&&hF.error("widget-intl:locale-error",this.declaredClass,t.error)}await this.loadLocale()})),XN();const i=lF()||"light";["light","dark"].includes(i)||El(hF,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const r="esri-widget-uid-"+yD(),n=this.render.bind(this);this._trackingTarget=new $u((()=>this.scheduleRender()));const o=()=>{var e;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const t=n();let{properties:i}=t;i||(t.properties=i={});let{key:o,styles:s}=i;o||(i.key=r),s||(i.styles=s={}),s.display||(s.display="");let a=0;return null==(e=t.children)||e.forEach((e=>{if(aF(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${a++}`)})),rF(this,t)};this.render=()=>{if(gF)return o();let e=function(e){return nL.get(e)}(this);if(e)return e;this._trackingTarget.clear(),gF=!0;try{e=fc(this._trackingTarget,o)}finally{gF=!1}return function(e,t){nL.set(e,t)}(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize()})))}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch(Qc)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Ca(this._trackingTarget),this.viewModel=Ca(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,sL(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return UP(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+dF++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(sL(this),this._projector.scheduleRender())}classes(...e){return dL.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){sL(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(zb((()=>this.viewModel),((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e)})))),"delegated-events")}),Yb)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(Qc),this.scheduleRender()};this._internalHandles.add([Ng(t),zb((()=>this.uiStrings),t),Ub((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};yF[QN]=!0,bl([Lh()],yF.prototype,"_readyForTrueRender",void 0),bl([Lh({value:null})],yF.prototype,"container",null),bl([Am("container")],yF.prototype,"castContainer",null),bl([Lh({aliasOf:"container"})],yF.prototype,"domNode",void 0),bl([Lh()],yF.prototype,"iconClass",void 0),bl([Lh()],yF.prototype,"id",null),bl([Lh()],yF.prototype,"label",void 0),bl([Lh()],yF.prototype,"renderable",null),bl([Lh()],yF.prototype,"uiStrings",void 0),bl([Lh()],yF.prototype,"viewModel",void 0),bl([Lh()],yF.prototype,"visible",void 0),bl([Lh()],yF.prototype,"key",void 0),bl([Lh()],yF.prototype,"children",void 0),bl([Lh()],yF.prototype,"afterCreate",void 0),bl([Lh()],yF.prototype,"afterUpdate",void 0),bl([Lh()],yF.prototype,"afterRemoved",void 0),yF=bl([md(uF)],yF);const vF=yF;function bF(e){return 32+e.length}function wF(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=bF(r);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function _F(e,t){return 32+e.length*t}var xF;!function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(xF||(xF={}));const SF=["B","kB","MB","GB","TB"];var kF;const MF={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let TF=kF=class extends tp{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=function(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const n=t.find((e=>e.name===i));return n?function(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find((e=>e.name===t));return r&&r.value||null}({tagName:r,tags:n.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return MF[t]||null}clone(){return new kF({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};bl([Lh({type:String})],TF.prototype,"contentType",void 0),bl([Lh()],TF.prototype,"exifInfo",void 0),bl([Lh({readOnly:!0})],TF.prototype,"orientationInfo",null),bl([Lh({type:Ch})],TF.prototype,"id",void 0),bl([Lh({type:String})],TF.prototype,"globalId",void 0),bl([Lh({type:String})],TF.prototype,"keywords",void 0),bl([Lh({type:String})],TF.prototype,"name",void 0),bl([Lh({json:{read:!1}})],TF.prototype,"parentGlobalId",void 0),bl([Lh({json:{read:!1}})],TF.prototype,"parentObjectId",void 0),bl([Lh({type:Ch})],TF.prototype,"size",void 0),bl([Lh({json:{read:!1}})],TF.prototype,"url",void 0),TF=kF=bl([md("esri.layers.support.AttachmentInfo")],TF);const EF=TF;var IF;let CF=IF=class extends tp{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new IF(ol({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};bl([Lh({type:[String],json:{write:!0}})],CF.prototype,"attachmentTypes",void 0),bl([Lh({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],CF.prototype,"attachmentsWhere",void 0),bl([Lh({type:[String],json:{write:!0}})],CF.prototype,"keywords",void 0),bl([Lh({type:[Number],json:{write:!0}})],CF.prototype,"globalIds",void 0),bl([Lh({json:{write:!0}})],CF.prototype,"name",void 0),bl([Lh({type:Number,json:{read:{source:"resultRecordCount"}}})],CF.prototype,"num",void 0),bl([Lh({type:[Number],json:{write:!0}})],CF.prototype,"objectIds",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],CF.prototype,"returnMetadata",void 0),bl([Lh({type:[Number],json:{write:!0}})],CF.prototype,"size",void 0),bl([Lh({type:Number,json:{read:{source:"resultOffset"}}})],CF.prototype,"start",void 0),bl([Mf("start"),Mf("num")],CF.prototype,"writeStart",null),bl([Lh({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],CF.prototype,"where",void 0),CF=IF=bl([md("esri.rest.support.AttachmentQuery")],CF),CF.from=xh(CF);const OF=CF,AF=Dl.getLogger("esri.widgets.Feature.support.featureUtils"),PF=/href=(""|'')/gi,RF=/(\{([^\{\r\n]+)\})/g,LF=/\'/g,DF=/^\s*expression\//i,NF=/(\n)/gi,FF=/[\u00A0-\u9999<>\&]/gim,jF=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,$F=/^(?:mailto:|tel:)/,VF="relationships/",zF=Wx("short-date-short-time");function UF(e){if(!xa(e))return e.get("sourceLayer")||e.get("layer")}async function qF(e,t){return"function"==typeof e?e.call(null,t):e}function GF(e=""){if(e)return!$F.test(e.trim().toLowerCase())}function BF(e){return!!e&&DF.test(e)}function WF(e,t){const i=function(e,t){if(!BF(t)||!e)return null;const i=t.replace(DF,"").toLowerCase();let r;return e.some((e=>e.name.toLowerCase()===i&&(r=e,!0))),r}(t,null==e?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function HF(e,t){const i=JF(t,e);return i?i.name:e}function JF(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function YF(e){return`${e}`.trim()}function ZF({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:n,fieldInfoMap:o}){return r?KF({formattedAttributes:t,template:ej(r,{...t,...n,...e},i),fieldInfoMap:o}):""}function KF({formattedAttributes:e,template:t,fieldInfoMap:i}){return YF(function(e){return e.replace(PF,"")}(Ol(Ol(t,(e=>function(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}(e,i))),e)))}function XF(e,t=!1){const i={...e};return Object.keys(i).forEach((e=>function(e,t,i=!1){const r=t[e];if("string"==typeof r){const n="%27",o=(i?encodeURIComponent(r):r).replace(LF,n);t[e]=o}}(e,i,t))),i}function QF(e,t){return e.replace(RF,((e,i,r)=>{const n=JF(t,r);return n?`{${n.name}}`:i}))}function ej(e,t,i){const r=QF(e,i);return r?r.replace(jF,((e,i,r)=>function(e,t,i){return Ol(e,XF(i,(t=YF(t))&&"{"!==t[0]))}(e,i||r,t))):r}function tj(e,t){const i=t.fieldInfos,r=t.fieldName,n=ij(i,r),o=null==n?void 0:n.clone(),s=t.preventPlacesFormatting,a=t.layer,l=JF(a,r);if(o&&"date"===(null==l?void 0:l.type)){const e=o.format||new tS;e.dateFormat=e.dateFormat||"short-date-short-time",e.dateTimeFormatOptions=function(e){return"feature"===(null==e?void 0:e.type)}(a)&&a.datesInUnknownTimezone||function(e){return!(null==e||!e.layer)}(a)&&function(e){return"map-image"===(null==e?void 0:e.type)}(a.layer)&&a.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,o.format=e}const c=o&&o.format;return"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}(e,c))||null==e||null==c?oj(e):s?Xx(e,{...Kx(c),minimumFractionDigits:0,maximumFractionDigits:20}):c.format(e)}function ij(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==i||(r=e,0)))),r}function rj(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)?(r.forEach((e=>{if("fields"===e.type){const i=e&&e.fieldInfos;i&&t.push(...i)}})),t):t}function nj(e){return e.replace(FF,(e=>`&#${e.charCodeAt(0)};`))}function oj(e){return"string"==typeof e?e.replace(NF,'<br class="esri-text-new-line" />'):e}function sj(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:n,layer:o,graphic:s}=e;if(null==t)return"";const a=function({fieldName:e,value:t,graphic:i,layer:r}){if(cj(e))return null;if(!r||"function"!=typeof r.getFieldDomain)return null;const n=r.getFieldDomain(e,{feature:i});return n&&"coded-value"===n.type?n.getName(t):null}({fieldName:i,value:t,graphic:s,layer:o});if(a)return a;const l=function({fieldName:e,graphic:t,layer:i}){if(cj(e))return null;if(!i||"function"!=typeof i.getFeatureType)return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const n=i.getFeatureType(t);return n?n.name:null}({fieldName:i,graphic:s,layer:o});if(l)return l;if(n.get(i.toLowerCase()))return tj(t,{fieldInfos:r,fieldName:i,layer:o});const c=o&&o.fieldsIndex;return c&&c.isDateField(i)?Hx(t,zF):oj(t)}function aj({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:n,relatedInfos:o}){const s={};return null==o||o.forEach((e=>function(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((i=>uj({attributes:e,graphic:i,relatedInfo:t}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((i=>uj({attributes:e,graphic:i,relatedInfo:t}))))}(s,e))),Object.keys(t).forEach((o=>{const a=t[o];s[o]=sj({fieldName:o,fieldInfos:e,fieldInfoMap:n,layer:i,value:a,graphic:r})})),s}async function lj({graphic:e,popupTemplate:t,layer:i,spatialReference:r},n){if(!i||!t)return;if("function"==typeof i.load&&await i.load(n),!e.attributes)return;const o=e.attributes[i.objectIdField];if(null==o)return;const s=[o],a=await t.getRequiredFields(i.fieldsIndex),l=bx(a,e),c=l?[]:a,u=t.returnGeometry||await async function(e){var t;if(null==(t=e.expressionInfos)||!t.length)return!1;const i=await I_(),{arcadeUtils:{hasGeometryFunctions:r}}=i;return r(e)}(t);if(l&&!u)return;const h=await async function(e,t){var i,r;const{layer:n,graphic:o,outFields:s,objectIds:a,returnGeometry:l,spatialReference:c}=e,u=a[0];if("number"!=typeof u&&"string"!=typeof u){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:n,graphic:o,objectId:u,requiredFields:s};return AF.warn(e,t),null}if(null==(i=n.capabilities)||null==(r=i.operations)||!r.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:n,graphic:o,requiredFields:s,returnGeometry:l};return AF.warn(e,t),null}const h=n.createQuery();return h.objectIds=a,h.outFields=null!=s&&s.length?s:[n.objectIdField],h.returnGeometry=!!l,h.returnZ=!!l,h.returnM=!!l,h.outSpatialReference=c,(await n.queryFeatures(h,t)).features[0]}({layer:i,graphic:e,outFields:c,objectIds:s,returnGeometry:u,spatialReference:r},n);h&&(h.geometry&&(e.geometry=h.geometry),h.attributes&&(e.attributes={...e.attributes,...h.attributes}))}function cj(e=""){return!!e&&-1!==e.indexOf(VF)}function uj({attributes:e,graphic:t,relatedInfo:i}){e&&t&&i&&Object.keys(t.attributes).forEach((r=>{const n=function(e){return e?`${VF}${e.layerId}/${e.fieldName}`:""}({layerId:i.relation.id.toString(),fieldName:r});e[n]=t.attributes[r]}))}const hj=e=>{if(!e)return!1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},dj=({layer:e,method:t,query:i,definitionExpression:r})=>{var n,o;if(null==(n=e.capabilities)||null==(o=n.query)||!o.supportsCacheHint||"attachments"===t)return;const s=_a(i.where)&&i.where,a=_a(i.geometry)&&i.geometry;hj(r)||hj(s)||"extent"===(null==a?void 0:a.type)||"tile"===i.resultType||(i.cacheHint=!0)},pj={editing:!1,operations:{add:!0,update:!0,delete:!0}},fj=Fd.ofType(EF);let mj=class extends tw{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...pj},this.activeAttachmentInfo=null,this.attachmentInfos=new fj,this.graphic=null,this.mode="view",this.handles.add([rD(this,"graphic",(()=>this._graphicChanged()))])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...pj,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||"function"!=typeof e.queryAttachments)throw new Ac("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new OF({objectIds:[i],returnMetadata:!0}),n=[],o=e.queryAttachments(r).then((e=>e[i]||n)).catch((()=>n));this._getAttachmentsPromise=o,this.notifyChange("state");const s=await o;return t.removeAll(),s.length&&t.addMany(s),this._getAttachmentsPromise=null,this.notifyChange("state"),s}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new Ac("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new Ac("invalid-abilities","addAttachment(): add abilities are required.");if(!t||"function"!=typeof t.addAttachment)throw new Ac("invalid-layer","addAttachment(): A valid layer is required.");const o=t.addAttachment(r,e).then((e=>this._queryAttachment(e.objectId))),s=await o;return i.add(s),s}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:n}=this;if(!e)throw new Ac("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new Ac("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||"function"!=typeof t.deleteAttachments)throw new Ac("invalid-layer","deleteAttachment(): A valid layer is required.");const o=t.deleteAttachments(r,[e.id]).then((()=>e)),s=await o;return i.remove(s),s}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:n,abilities:o}=this;if(!e)throw new Ac("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new Ac("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!o.operations.update)throw new Ac("invalid-abilities","updateAttachment(): Update abilities are required.");const s=r.findIndex((e=>e===t));if(!i||"function"!=typeof i.updateAttachment)throw new Ac("invalid-layer","updateAttachment(): A valid layer is required.");const a=i.updateAttachment(n,t.id,e).then((e=>this._queryAttachment(e.objectId))),l=await a;return r.splice(s,1,l),l}async _queryAttachment(e){if(!e)throw new Ac("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new OF({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then((e=>e[i][0]))}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>{})))}_setAttachmentLayer(){const{graphic:e}=this,t=UF(e);this._attachmentLayer=t?"scene"===t.type&&_a(t.associatedLayer)?t.associatedLayer:t:null}};bl([Lh()],mj.prototype,"abilities",void 0),bl([Am("abilities")],mj.prototype,"castAbilities",null),bl([Lh()],mj.prototype,"activeAttachmentInfo",void 0),bl([Lh({readOnly:!0,type:fj})],mj.prototype,"attachmentInfos",void 0),bl([Lh({type:HI})],mj.prototype,"graphic",void 0),bl([Lh()],mj.prototype,"mode",void 0),bl([Lh({readOnly:!0})],mj.prototype,"state",null),bl([Lh({readOnly:!0})],mj.prototype,"supportsResizeAttachments",null),mj=bl([md("esri.widgets.Attachments.AttachmentsViewModel")],mj);const gj=mj;function yj(e){return function(t,i){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var vj=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},bj=function(e,t){for(var i=0,r=e.length;i<r;i++){var n=e[i];Array.isArray(n)?bj(n,t):null!=n&&!1!==n&&(n.hasOwnProperty("vnodeSelector")||(n=vj(n)),t.push(n))}};function wj(e,t,...i){return"function"!=typeof e||aF(e)?function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(1===i.length&&"string"==typeof i[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return bj(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}}(e,t,...i):e(t,...i)}const _j={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},xj="esri-attachments",Sj="esri-attachments__loader-container",kj="esri-attachments__loader",Mj="esri-attachments__container",Tj="esri-attachments__container--list",Ej="esri-attachments__container--preview",Ij="esri-attachments__actions",Cj="esri-attachments__delete-button",Oj="esri-attachments__add-attachment-button",Aj="esri-attachments__error-message",Pj="esri-attachments__items",Rj="esri-attachments__item",Lj="esri-attachments__item-button",Dj="esri-attachments__item-mask",Nj="esri-attachments__item-mask--icon",Fj="esri-attachments__image",jj="esri-attachments__image--resizable",$j="esri-attachments__label",Vj="esri-attachments__filename",zj="esri-attachments__item-chevron-icon",Uj="esri-attachments__item-link",qj="esri-attachments__item-link-overlay",Gj="esri-attachments__item-link-overlay-icon",Bj="esri-attachments__item-add-icon",Wj="esri-attachments__form-node",Hj="esri-attachments__file-fieldset",Jj="esri-attachments__file-label",Yj="esri-attachments__file-name",Zj="esri-attachments__file-input",Kj="esri-attachments__metadata",Xj="esri-attachments__metadata-fieldset",Qj="esri-attachments__progress-bar",e$="esri-widget",t$="esri-button",i$="esri-button--disabled",r$="esri-button--secondary",n$="esri-button--tertiary",o$="esri-button--third",s$="esri-button--small",a$="esri-button--half",l$="esri-widget__content--empty",c$="esri-icon-right",u$="esri-icon-left",h$="esri-icon-plus",d$=window.CSS;let p$=class extends vF{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new gj,this.visibleElements={..._j},this._supportsImageOrientation=d$&&d$.supports&&d$.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(uD(this,"viewModel.attachmentInfos","change",(()=>this.scheduleRender())),rD(this,"viewModel.mode",(()=>this._modeChanged())))}get effectiveDisplayType(){const{displayType:e}=this;return e&&"auto"!==e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{..._j,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new Ac("attachments:add-attachment",this.messages.addErrorMessage,e)),e}))}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((e=>{throw this._set("submitting",!1),this._set("error",new Ac("attachments:delete-attachment",this.messages.deleteErrorMessage,e)),e}))}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),e.mode="view",t))).catch((e=>{throw this._set("submitting",!1),this._set("error",new Ac("attachments:update-attachment",this.messages.updateErrorMessage,e)),e}))}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return wj("div",{class:this.classes(xj,e$)},e?this.renderProgressBar():null,"loading"===i?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?wj("div",{key:"error-message",class:Aj},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return"add"===e?this.renderAddForm():"edit"===e?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return wj("div",{class:Sj,key:"loader"},wj("div",{class:kj}))}renderProgressBar(){return this.visibleElements.progressBar?wj("div",{class:Qj,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?wj("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(t$,n$,s$,a$,e&&i$)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?wj("button",{type:"submit",disabled:i,class:this.classes(t$,r$,s$,a$,{[i$]:i})},this.messages.add):null,o=t?wj("span",{key:"file-name",class:Yj},t.name):null,s=wj("form",{bind:this,afterCreate:mL,afterRemoved:fL,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},wj("fieldset",{class:Hj},o,wj("label",{class:this.classes(Jj,t$,r$)},t?this.messages.changeFile:this.messages.selectFile,wj("input",{class:Zj,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,r);return wj("div",{key:"add-form-container",class:Wj},s)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:n}=this,{contentType:o,size:s,url:a}=e,{abilities:l}=i,c=n||!r,u=l.editing&&l.operations.delete&&t.deleteButton?wj("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:t=>this._submitDeleteAttachment(t,e),class:this.classes(t$,s$,n$,Cj,{[i$]:n})},this.messages.delete):null,h=l.editing&&l.operations.update&&t.updateButton?wj("button",{disabled:c,key:"update-button",type:"submit",class:this.classes(t$,s$,o$,{[i$]:c})},this.messages.update):null,d=this.visibleElements.cancelUpdateButton?wj("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(t$,s$,n$,o$,{[i$]:n})},this.messages.cancel):null,p=r?wj("span",{key:"file-name",class:Yj},r.name):null,f=l.editing&&l.operations.update?wj("fieldset",{key:"file",class:Hj},p,wj("label",{class:this.classes(Jj,t$,r$)},this.messages.changeFile,wj("input",{class:Zj,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,m=wj("fieldset",{key:"size",class:Xj},wj("label",null,function(e,t){let i=0===t?0:Math.floor(Math.log(t)/Math.log(xF.KILOBYTES));i=db(i,0,SF.length-1);const r=Xx(t/xF.KILOBYTES**i,{maximumFractionDigits:2});return Ol(e.units.bytes[SF[i]],{fileSize:r})}(this.messagesUnits,s))),g=wj("fieldset",{key:"content-type",class:Xj},wj("label",null,o)),y=wj("form",{bind:this,afterCreate:mL,afterRemoved:fL,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},wj("div",{class:Kj},m,g),f,wj("div",{class:Ij},u,d,h));return wj("div",{key:"edit-form-container",class:Wj},wj("a",{class:Uj,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),wj("div",{class:qj},wj("span",{class:Gj},wj("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},wj("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),wj("path",{fill:"none",d:"M0 0h32v32H0z"}))))),y)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:n,url:o}=e,s=i&&function(e){const t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}(r),a=this._getCSSTransform(e,s),l=a?{transform:a,"image-orientation":"none"}:{},c=-1===o.indexOf("?")?"?":"&",u=s?`${o}${c}w=${t}`:function(e){const t=ly("esri/themes/base/images/files/");return e?"text/plain"===e?`${t}text-32.svg`:"application/pdf"===e?`${t}pdf-32.svg`:"text/csv"===e?`${t}csv-32.svg`:"application/gpx+xml"===e?`${t}gpx-32.svg`:"application/x-dwf"===e?`${t}cad-32.svg`:"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?`${t}code-32.svg`:"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?`${t}zip-32.svg`:-1!==e.indexOf("image/")?`${t}image-32.svg`:-1!==e.indexOf("audio/")?`${t}sound-32.svg`:-1!==e.indexOf("video/")?`${t}video-32.svg`:-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?`${t}excel-32.svg`:-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?`${t}word-32.svg`:-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}(r),h={[Nj]:!s},d={[jj]:i};return wj("div",{class:this.classes(h,Dj)},wj("img",{styles:l,alt:n,src:u,class:this.classes(d,Fj)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:n,url:o}=e,s=this.renderImageMask({attachmentInfo:e,size:"list"===t?48:400}),a=r.editing?wj("span",{"aria-hidden":"true",class:this.classes(zj,pL(this.container)?u$:c$)}):null,l=[s,wj("label",{class:$j},wj("span",{class:Vj},n||this.messages.noTitle),a)],c=r.editing?wj("button",{key:"details-button",bind:this,class:Lj,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},l):wj("a",{key:"details-link",class:Lj,href:o,target:"_blank"},l);return wj("li",{class:Rj,key:e},c)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:n}=t,o=r&&r.length,s={[Tj]:"preview"!==e,[Ej]:"preview"===e},a=n.editing&&n.operations.add&&i.addButton?wj("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(t$,n$,Oj),type:"button"},wj("span",{"aria-hidden":"true",class:this.classes(Bj,h$)}),this.messages.add):null,l=o?wj("ul",{class:Pj},r.toArray().map((t=>this.renderAttachmentInfo({attachmentInfo:t,displayType:e})))):wj("div",{class:l$},this.messages.noAttachments);return wj("div",{key:"attachments-container",class:this.classes(Mj,s)},l,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};bl([gD("viewModel.abilities")],p$.prototype,"abilities",void 0),bl([Lh()],p$.prototype,"displayType",void 0),bl([Lh({readOnly:!0})],p$.prototype,"effectiveDisplayType",null),bl([gD("viewModel.graphic")],p$.prototype,"graphic",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],p$.prototype,"label",void 0),bl([Lh(),yj("esri/widgets/Attachments/t9n/Attachments")],p$.prototype,"messages",void 0),bl([Lh(),yj("esri/core/t9n/Units")],p$.prototype,"messagesUnits",void 0),bl([Lh({readOnly:!0})],p$.prototype,"selectedFile",void 0),bl([Lh({readOnly:!0})],p$.prototype,"submitting",void 0),bl([Lh({readOnly:!0})],p$.prototype,"error",void 0),bl([Lh({type:gj})],p$.prototype,"viewModel",void 0),bl([Lh()],p$.prototype,"visibleElements",void 0),bl([Am("visibleElements")],p$.prototype,"castVisibleElements",null),p$=bl([md("esri.widgets.Attachments")],p$);const f$=p$;let m$=class extends gj{constructor(e){super(e),this.description=null,this.title=null}};bl([Lh()],m$.prototype,"description",void 0),bl([Lh()],m$.prototype,"title",void 0),m$=bl([md("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],m$);const g$=m$,y$="esri-widget__heading";function v$(e,t){const i=function(e){return db(Math.ceil(e),1,6)}(e.level),r=`h${i}`;return delete e.level,wj(r,{...e,class:dL(y$,e.class),role:"heading","aria-level":String(i)},t)}const b$="esri-feature-element-info",w$="esri-feature-element-info__title",_$="esri-feature-element-info__description";let x$=class extends vF{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return wj("div",{class:b$},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?wj(v$,{level:this.headingLevel,class:w$},e):null}renderDescription(){const{description:e}=this;return e?wj("div",{key:"description",class:_$},e):null}};bl([Lh()],x$.prototype,"description",void 0),bl([Lh()],x$.prototype,"headingLevel",void 0),bl([Lh()],x$.prototype,"title",void 0),x$=bl([md("esri.widgets.Feature.support.FeatureElementInfo")],x$);const S$=x$,k$="esri-feature-attachments";let M$=class extends vF{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new f$,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new g$}initialize(){this._featureElementInfo=new S$,rD(this,["viewModel.description","viewModel.title","headingLevel"],(()=>this._setupFeatureElementInfo())),rD(this,"viewModel.graphic",(e=>this.attachmentsWidget.graphic=e))}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var e;const{attachmentsWidget:t}=this;return wj("div",{class:k$},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};bl([Lh({readOnly:!0})],M$.prototype,"attachmentsWidget",void 0),bl([gD("viewModel.description")],M$.prototype,"description",void 0),bl([gD("attachmentsWidget.displayType")],M$.prototype,"displayType",void 0),bl([gD("viewModel.graphic")],M$.prototype,"graphic",void 0),bl([Lh()],M$.prototype,"headingLevel",void 0),bl([gD("viewModel.title")],M$.prototype,"title",void 0),bl([Lh({type:g$})],M$.prototype,"viewModel",void 0),M$=bl([md("esri.widgets.Feature.FeatureAttachments")],M$);const T$=M$;let E$=class extends(ew(vd)){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(rD(this,"creator",(e=>{this._destroyContent(),this._createContent(e)})))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(qF(i,{graphic:t}).catch((()=>null)),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=qF(e,{graphic:t}).catch((()=>null));this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};bl([Lh({readOnly:!0})],E$.prototype,"created",void 0),bl([Lh()],E$.prototype,"creator",void 0),bl([Lh()],E$.prototype,"destroyer",void 0),bl([Lh({type:HI})],E$.prototype,"graphic",void 0),bl([Lh({readOnly:!0})],E$.prototype,"state",null),E$=bl([md("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],E$);const I$=E$;function C$(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:O$(e[t])}}}function O$(e){return function(t,...i){!function(e){const{type:t}=e;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(t)?e.call(this,t,...i):function(e){return"Enter"===e||" "===e}(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click())}}function A$(e){return e&&"function"==typeof e.render}const P$="esri-feature-content",R$="esri-feature-content__loader-container",L$="esri-feature-content__loader";let D$=class extends vF{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{GF(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))}}renderLoading(){return wj("div",{class:R$,key:"loader"},wj("div",{class:L$}))}renderCreated(){var e;const t=null==(e=this.viewModel)?void 0:e.created;return t?t instanceof HTMLElement?wj("div",{key:t,bind:t,afterCreate:this._attachToNode}):A$(t)?wj("div",{key:t},!t.destroyed&&t.render()):wj("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){var e;const t=null==(e=this.viewModel)?void 0:e.state;return wj("div",{class:P$},"loading"===t?this.renderLoading():this.renderCreated())}_attachToNode(e){e.appendChild(this)}};bl([gD("viewModel.creator")],D$.prototype,"creator",void 0),bl([gD("viewModel.graphic")],D$.prototype,"graphic",void 0),bl([Lh({type:I$})],D$.prototype,"viewModel",void 0),D$=bl([md("esri.widgets.Feature.FeatureContent")],D$);const N$=D$;let F$=class extends vd{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return null==t||t.forEach((t=>{if(t.hasOwnProperty("visible")&&!t.visible)return;const r=t.clone();r.label=WF(r,e),i.push(r)})),i}};bl([Lh()],F$.prototype,"attributes",void 0),bl([Lh({type:[HS]})],F$.prototype,"expressionInfos",void 0),bl([Lh()],F$.prototype,"description",void 0),bl([Lh({type:[nS]})],F$.prototype,"fieldInfos",void 0),bl([Lh({readOnly:!0})],F$.prototype,"formattedFieldInfos",null),bl([Lh()],F$.prototype,"title",void 0),F$=bl([md("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],F$);const j$=F$,$$=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function V$(e,t){if("string"!=typeof t||!t)return t;const i=function(e){let t=null;return $$.some((i=>(i.pattern.test(e)&&(t=i),!!t))),t}(t);if(!i)return t;const r=t.match(i.pattern),n=r&&r[2],o=Ol(Ol(i.label,{messages:e,hierPart:n}),{appName:i.appName}),s=i.target?` target="${i.target}"`:"",a="_blank"===i.target?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${s} href="$1"${a}>${o}</a>`)}const z$="esri-feature-fields",U$="esri-feature-fields__field-header",q$="esri-feature-fields__field-data",G$="esri-feature-fields__field-data--date",B$="esri-widget__table";let W$=class extends vF{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new j$,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new S$,rD(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo()))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,n=e.label||r,o=i?null==i[r]?"":i[r]:"",s=!(!e.format||!e.format.dateFormat),a="number"!=typeof o||s?V$(this.messagesURIUtils,o):this._forceLTR(o),l={[G$]:s};return wj("tr",{key:`fields-element-info-row-${r}-${t}`},wj("th",{key:`fields-element-info-row-header-${r}-${t}`,class:U$,innerHTML:n}),wj("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(q$,l),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return null!=e&&e.length?wj("table",{class:B$,summary:this.messages.fieldsSummary},wj("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null}render(){var e;return wj("div",{class:z$},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};bl([gD("viewModel.attributes")],W$.prototype,"attributes",void 0),bl([gD("viewModel.description")],W$.prototype,"description",void 0),bl([gD("viewModel.expressionInfos")],W$.prototype,"expressionInfos",void 0),bl([gD("viewModel.fieldInfos")],W$.prototype,"fieldInfos",void 0),bl([gD("viewModel.title")],W$.prototype,"title",void 0),bl([Lh({type:j$})],W$.prototype,"viewModel",void 0),bl([Lh(),yj("esri/widgets/Feature/t9n/Feature")],W$.prototype,"messages",void 0),bl([Lh(),yj("esri/widgets/support/t9n/uriUtils")],W$.prototype,"messagesURIUtils",void 0),W$=bl([md("esri.widgets.Feature.FeatureFields")],W$);const H$=W$,J$={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Y$={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Z$(e,t,i){const r=new Date(e.getTime());if(t&&i){const e=Y$[i],{getter:n,setter:o,multiplier:s}=e;if("months"===i){const e=function(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}(r.getFullYear(),r.getMonth()+t);r.getDate()>e&&r.setDate(e)}r[o](r[n]()+t*s)}return r}function K$(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}var X$;let Q$=X$=class extends tp{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return eV}static get empty(){return tV}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(X$.allTime)}get isEmpty(){return this.equals(X$.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new X$({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=_a(this.start)?this.start.getTime():this.start,i=_a(this.end)?this.end.getTime():this.end,r=_a(e.start)?e.start.getTime():e.start,n=_a(e.end)?e.end.getTime():e.end;return t===r&&i===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=ka(this.start,(t=>K$(t,e))),i=ka(this.end,(t=>Z$(K$(t,e),1,e)));return new X$({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return X$.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Na(this.start,-1/0,(e=>e.getTime())),i=Na(this.end,1/0,(e=>e.getTime())),r=Na(e.start,-1/0,(e=>e.getTime())),n=Na(e.end,1/0,(e=>e.getTime()));let o,s;if(r>=t&&r<=i?o=r:t>=r&&t<=n&&(o=t),i>=r&&i<=n?s=i:n>=t&&n<=i&&(s=n),!isNaN(o)&&!isNaN(s)){const e=new X$;return e.start=o===-1/0?null:new Date(o),e.end=s===1/0?null:new Date(s),e}return X$.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new X$,{start:r,end:n}=this;return _a(r)&&(i.start=Z$(r,e,t)),_a(n)&&(i.end=Z$(n,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return eV.clone();const t=_a(this.start)&&_a(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=_a(this.end)&&_a(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new X$({start:t,end:i})}};bl([Lh({type:Date,json:{write:{allowNull:!0}}})],Q$.prototype,"end",void 0),bl([Mm("end")],Q$.prototype,"readEnd",null),bl([Mf("end")],Q$.prototype,"writeEnd",null),bl([Lh({readOnly:!0,json:{read:!1}})],Q$.prototype,"isAllTime",null),bl([Lh({readOnly:!0,json:{read:!1}})],Q$.prototype,"isEmpty",null),bl([Lh({type:Date,json:{write:{allowNull:!0}}})],Q$.prototype,"start",void 0),bl([Mm("start")],Q$.prototype,"readStart",null),bl([Mf("start")],Q$.prototype,"writeStart",null),Q$=X$=bl([md("esri.TimeExtent")],Q$);const eV=new Q$,tV=new Q$({start:void 0,end:void 0}),iV=Q$;var rV;let nV=rV=class extends tp{constructor(e){super(e),this.name=null,this.code=null}clone(){return new rV({name:this.name,code:this.code})}};bl([Lh({type:String,json:{write:!0}})],nV.prototype,"name",void 0),bl([Lh({type:[String,Number],json:{write:!0}})],nV.prototype,"code",void 0),nV=rV=bl([md("esri.layers.support.CodedValue")],nV);const oV=nV,sV=new $g({inherited:"inherited",codedValue:"coded-value",range:"range"});let aV=class extends tp{constructor(e){super(e),this.name=null,this.type=null}};bl([Lh({type:String,json:{write:!0}})],aV.prototype,"name",void 0),bl([Cb(sV)],aV.prototype,"type",void 0),aV=bl([md("esri.layers.support.Domain")],aV);const lV=aV;var cV;let uV=cV=class extends lV{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some((e=>(String(e.code)===i&&(t=e.name),!!t)))}return t}clone(){return new cV({codedValues:ol(this.codedValues),name:this.name})}};bl([Lh({type:[oV],json:{write:!0}})],uV.prototype,"codedValues",void 0),bl([Cb({codedValue:"coded-value"})],uV.prototype,"type",void 0),uV=cV=bl([md("esri.layers.support.CodedValueDomain")],uV);const hV=uV;var dV;let pV=dV=class extends lV{constructor(e){super(e),this.type="inherited"}clone(){return new dV}};bl([Cb({inherited:"inherited"})],pV.prototype,"type",void 0),pV=dV=bl([md("esri.layers.support.InheritedDomain")],pV);const fV=pV;var mV;let gV=mV=class extends lV{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new mV({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};bl([Lh({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],gV.prototype,"maxValue",void 0),bl([Lh({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],gV.prototype,"minValue",void 0),bl([Cb({range:"range"})],gV.prototype,"type",void 0),gV=mV=bl([md("esri.layers.support.RangeDomain")],gV);const yV=gV,vV={key:"type",base:lV,typeMap:{range:yV,"coded-value":hV,inherited:fV}};function bV(e){if(!e||!e.type)return null;switch(e.type){case"range":return yV.fromJSON(e);case"codedValue":return hV.fromJSON(e);case"inherited":return fV.fromJSON(e)}return null}const wV=new $g({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var _V;const xV=new $g({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let SV=_V=class extends tp{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch(e){}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch(e){}return i?xV.fromJSON(i.fieldValueType):null}clone(){return new _V({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};bl([Lh({type:String,json:{write:!0}})],SV.prototype,"alias",void 0),bl([Lh({type:[String,Number],json:{write:{allowNull:!0}}})],SV.prototype,"defaultValue",void 0),bl([Lh()],SV.prototype,"description",void 0),bl([Mm("description")],SV.prototype,"readDescription",null),bl([Lh({types:vV,json:{read:{reader:bV},write:!0}})],SV.prototype,"domain",void 0),bl([Lh({type:Boolean,json:{write:!0}})],SV.prototype,"editable",void 0),bl([Lh({type:Ch,json:{write:!0}})],SV.prototype,"length",void 0),bl([Lh({type:String,json:{write:!0}})],SV.prototype,"name",void 0),bl([Lh({type:Boolean,json:{write:!0}})],SV.prototype,"nullable",void 0),bl([Cb(wV)],SV.prototype,"type",void 0),bl([Lh()],SV.prototype,"valueType",void 0),bl([Mm("valueType",["description"])],SV.prototype,"readValueType",null),SV=_V=bl([md("esri.layers.support.Field")],SV);const kV=SV;var MV;let TV=MV=class extends tp{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new MV({mapLayerId:e,gdbVersion:t})}};var EV;bl([Cb({mapLayer:"map-layer"})],TV.prototype,"type",void 0),bl([Lh({type:Ch,json:{write:!0}})],TV.prototype,"mapLayerId",void 0),bl([Lh({type:String,json:{write:!0}})],TV.prototype,"gdbVersion",void 0),TV=MV=bl([md("esri.layers.support.source.MapLayerSource")],TV);let IV=EV=class extends tp{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:i,oidFields:r,spatialReference:n,geometryType:o}=this,s={workspaceId:t,query:i,oidFields:r,spatialReference:null!=(e=null==n?void 0:n.clone())?e:void 0,geometryType:o};return new EV(s)}};var CV;bl([Cb({queryTable:"query-table"})],IV.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],IV.prototype,"workspaceId",void 0),bl([Lh({type:String,json:{write:!0}})],IV.prototype,"query",void 0),bl([Lh({type:String,json:{write:!0}})],IV.prototype,"oidFields",void 0),bl([Lh({type:Yf,json:{write:!0}})],IV.prototype,"spatialReference",void 0),bl([Cb(Zw)],IV.prototype,"geometryType",void 0),IV=EV=bl([md("esri.layers.support.source.QueryTableDataSource")],IV);let OV=CV=class extends tp{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new CV({workspaceId:e,dataSourceName:t})}};var AV;bl([Cb({raster:"raster"})],OV.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],OV.prototype,"dataSourceName",void 0),bl([Lh({type:String,json:{write:!0}})],OV.prototype,"workspaceId",void 0),OV=CV=bl([md("esri.layers.support.source.RasterDataSource")],OV);let PV=AV=class extends tp{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new AV({workspaceId:e,gdbVersion:t,dataSourceName:i})}};var RV,LV;bl([Cb({table:"table"})],PV.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],PV.prototype,"workspaceId",void 0),bl([Lh({type:String,json:{write:!0}})],PV.prototype,"gdbVersion",void 0),bl([Lh({type:String,json:{write:!0}})],PV.prototype,"dataSourceName",void 0),PV=AV=bl([md("esri.layers.support.source.TableDataSource")],PV);const DV=Vg()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let NV=RV=class extends tp{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return jV()(e,t,i)}castLeftTableSource(e){return Ih(VV(),e)}readRightTableSource(e,t,i){return jV()(e,t,i)}castRightTableSource(e){return Ih(VV(),e)}clone(){var e,t;const{leftTableKey:i,rightTableKey:r,leftTableSource:n,rightTableSource:o,joinType:s}=this,a={leftTableKey:i,rightTableKey:r,leftTableSource:null!=(e=null==n?void 0:n.clone())?e:void 0,rightTableSource:null!=(t=null==o?void 0:o.clone())?t:void 0,joinType:s};return new RV(a)}};bl([Cb({joinTable:"join-table"})],NV.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],NV.prototype,"leftTableKey",void 0),bl([Lh({type:String,json:{write:!0}})],NV.prototype,"rightTableKey",void 0),bl([Lh({json:{write:!0}})],NV.prototype,"leftTableSource",void 0),bl([Mm("leftTableSource")],NV.prototype,"readLeftTableSource",null),bl([Am("leftTableSource")],NV.prototype,"castLeftTableSource",null),bl([Lh({json:{write:!0}})],NV.prototype,"rightTableSource",void 0),bl([Mm("rightTableSource")],NV.prototype,"readRightTableSource",null),bl([Am("rightTableSource")],NV.prototype,"castRightTableSource",null),bl([Cb(DV)],NV.prototype,"joinType",void 0),NV=RV=bl([md("esri.layers.support.source.JoinTableDataSource")],NV);let FV=null;function jV(){return FV||(FV=zh({types:VV()})),FV}let $V=null;function VV(){return $V||($V={key:"type",base:null,typeMap:{"data-layer":UV,"map-layer":TV}}),$V}const zV={key:"type",base:null,typeMap:{"join-table":NV,"query-table":IV,raster:OV,table:PV}};let UV=LV=class extends tp{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new LV({fields:e,dataSource:t})}};var qV;bl([Cb({dataLayer:"data-layer"})],UV.prototype,"type",void 0),bl([Lh({type:[kV],json:{write:!0}})],UV.prototype,"fields",void 0),bl([Lh({types:zV,json:{write:!0}})],UV.prototype,"dataSource",void 0),UV=LV=bl([md("esri.layers.support.source.DataLayerSource")],UV),UV.from=xh(UV);const GV=new $g({upperLeft:"upper-left",lowerLeft:"lower-left"});let BV=qV=class extends tp{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new qV(ol({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};bl([Lh({type:Eg,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],BV.prototype,"extent",void 0),bl([Lh({type:["view","edit"],json:{write:!0}})],BV.prototype,"mode",void 0),bl([Lh({type:String,json:{read:GV.read,write:GV.write}})],BV.prototype,"originPosition",void 0),bl([Lh({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],BV.prototype,"tolerance",void 0),BV=qV=bl([md("esri.rest.support.QuantizationParameters")],BV);const WV=BV;var HV;const JV=new $g({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let YV=HV=class extends tp{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=ol(e))}clone(){return new HV({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ol(this.statisticParameters)})}};bl([Lh({type:Number,json:{write:!0}})],YV.prototype,"maxPointCount",void 0),bl([Lh({type:Number,json:{write:!0}})],YV.prototype,"maxRecordCount",void 0),bl([Lh({type:Number,json:{write:!0}})],YV.prototype,"maxVertexCount",void 0),bl([Lh({type:String,json:{write:!0}})],YV.prototype,"onStatisticField",void 0),bl([Lh({type:String,json:{write:!0}})],YV.prototype,"outStatisticFieldName",void 0),bl([Lh({type:String,json:{read:{source:"statisticType",reader:JV.read},write:{target:"statisticType",writer:JV.write}}})],YV.prototype,"statisticType",void 0),bl([Lh({type:Object})],YV.prototype,"statisticParameters",void 0),bl([Mf("statisticParameters")],YV.prototype,"writeStatisticParameters",null),YV=HV=bl([md("esri.rest.support.StatisticDefinition")],YV);const ZV=YV;var KV;const XV=new $g({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),QV=new $g({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ez=KV=class extends tp{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return vh(KV,e)}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const t in e){const r=e[t];Array.isArray(r)?i[t]=r.map((e=>e instanceof Date?e.getTime():e)):r instanceof Date?i[t]=r.getTime():i[t]=r}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new KV(ol({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:_a(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ez.MAX_MAX_RECORD_COUNT_FACTOR=5,bl([Lh({json:{write:!0}})],ez.prototype,"aggregateIds",void 0),bl([Lh({type:Boolean,json:{write:!0}})],ez.prototype,"cacheHint",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"compactGeometryEnabled",void 0),bl([Lh({json:{write:!0}})],ez.prototype,"datumTransformation",void 0),bl([Am("datumTransformation")],ez.prototype,"castDatumTransformation",null),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"defaultSpatialReferenceEnabled",void 0),bl([Lh({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ez.prototype,"distance",void 0),bl([Lh({type:UV,json:{write:!0}})],ez.prototype,"dynamicDataSource",void 0),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"formatOf3DObjects",void 0),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"gdbVersion",void 0),bl([Lh({types:a_,json:{read:r_,write:!0}})],ez.prototype,"geometry",void 0),bl([Lh({type:Number,json:{write:!0}})],ez.prototype,"geometryPrecision",void 0),bl([Lh({type:[String],json:{write:!0}})],ez.prototype,"groupByFieldsForStatistics",void 0),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"having",void 0),bl([Lh({type:Date})],ez.prototype,"historicMoment",void 0),bl([Mf("historicMoment")],ez.prototype,"writeHistoricMoment",null),bl([Lh({type:Number,json:{write:!0}})],ez.prototype,"maxAllowableOffset",void 0),bl([Lh({type:Number,cast:e=>e<1?1:e>KV.MAX_MAX_RECORD_COUNT_FACTOR?KV.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ez.prototype,"maxRecordCountFactor",void 0),bl([Lh({type:["xyFootprint"],json:{write:!0}})],ez.prototype,"multipatchOption",void 0),bl([Lh({type:Number,json:{read:{source:"resultRecordCount"}}})],ez.prototype,"num",void 0),bl([Lh({json:{write:!0}})],ez.prototype,"objectIds",void 0),bl([Lh({type:[String],json:{write:!0}})],ez.prototype,"orderByFields",void 0),bl([Lh({type:[String],json:{write:!0}})],ez.prototype,"outFields",void 0),bl([Lh({type:Yf,json:{name:"outSR",write:!0}})],ez.prototype,"outSpatialReference",void 0),bl([Lh({type:[ZV],json:{write:{enabled:!0,overridePolicy(){return{enabled:_a(this.outStatistics)&&this.outStatistics.length>0}}}}})],ez.prototype,"outStatistics",void 0),bl([Lh({json:{write:!0}})],ez.prototype,"parameterValues",void 0),bl([Mf("parameterValues")],ez.prototype,"writeParameterValues",null),bl([Lh({type:Qm,json:{write:!0}})],ez.prototype,"pixelSize",void 0),bl([Lh({type:WV,json:{write:!0}})],ez.prototype,"quantizationParameters",void 0),bl([Lh({type:[Object],json:{write:!0}})],ez.prototype,"rangeValues",void 0),bl([Lh({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],ez.prototype,"relationParameter",void 0),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"resultType",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"returnCentroid",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"returnDistinctValues",void 0),bl([Lh({type:Boolean,json:{default:!0,write:!0}})],ez.prototype,"returnExceededLimitFeatures",void 0),bl([Lh({type:Boolean,json:{write:!0}})],ez.prototype,"returnGeometry",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"returnQueryGeometry",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"returnM",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ez.prototype,"returnZ",void 0),bl([Lh({type:Yf,json:{write:!0}})],ez.prototype,"sourceSpatialReference",void 0),bl([Cb(XV,{ignoreUnknown:!1,name:"spatialRel"})],ez.prototype,"spatialRelationship",void 0),bl([Lh({type:Number,json:{read:{source:"resultOffset"}}})],ez.prototype,"start",void 0),bl([Mf("start"),Mf("num")],ez.prototype,"writeStart",null),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"sqlFormat",void 0),bl([Lh({type:String,json:{write:!0}})],ez.prototype,"text",void 0),bl([Lh({type:iV,json:{write:!0}})],ez.prototype,"timeExtent",void 0),bl([Lh({type:Boolean,json:{default:!1,write:!0}})],ez.prototype,"timeReferenceUnknownClient",void 0),bl([Cb(QV,{ignoreUnknown:!1}),Lh({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ez.prototype,"units",void 0),bl([Lh({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||this.start>0}}}}})],ez.prototype,"where",void 0),bl([Mf("where")],ez.prototype,"writeWhere",null),ez=KV=bl([md("esri.rest.support.Query")],ez);const tz=ez;var iz;let rz=iz=class extends tp{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}clone(){return new iz(ol({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};bl([Lh({type:UV,json:{write:!0}})],rz.prototype,"dynamicDataSource",void 0),bl([Lh({type:String,json:{write:!0}})],rz.prototype,"gdbVersion",void 0),bl([Lh({type:Number,json:{write:!0}})],rz.prototype,"geometryPrecision",void 0),bl([Lh({type:Date})],rz.prototype,"historicMoment",void 0),bl([Mf("historicMoment")],rz.prototype,"_writeHistoricMoment",null),bl([Lh({type:Number,json:{write:!0}})],rz.prototype,"maxAllowableOffset",void 0),bl([Lh({type:[Number],json:{write:!0}})],rz.prototype,"objectIds",void 0),bl([Lh({type:[String],json:{write:!0}})],rz.prototype,"orderByFields",void 0),bl([Lh({type:[String],json:{write:!0}})],rz.prototype,"outFields",void 0),bl([Lh({type:Yf,json:{read:{source:"outSR"},write:{target:"outSR"}}})],rz.prototype,"outSpatialReference",void 0),bl([Lh({json:{write:!0}})],rz.prototype,"relationshipId",void 0),bl([Lh({type:Number,json:{read:{source:"resultOffset"}}})],rz.prototype,"start",void 0),bl([Mf("start"),Mf("num")],rz.prototype,"writeStart",null),bl([Lh({type:Number,json:{read:{source:"resultRecordCount"}}})],rz.prototype,"num",void 0),bl([Lh({json:{write:!0}})],rz.prototype,"returnGeometry",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],rz.prototype,"returnM",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],rz.prototype,"returnZ",void 0),bl([Lh({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],rz.prototype,"where",void 0),rz=iz=bl([md("esri.rest.support.RelationshipQuery")],rz),rz.from=xh(rz);const nz=rz;function oz(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function sz(e){return"string"==typeof e?Ap(e):e}function az(e,t,i){const r={};for(const n in e){if("declaredClass"===n)continue;const o=e[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){r[n]=[];for(let e=0;e<o.length;e++)r[n][e]=az(o[e])}else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(i&&i[n]);r[n]=t?e:JSON.stringify(e)}else r[n]=t?o:JSON.stringify(o);else r[n]=o}return r}function lz(e){const t={};for(const i in e){if("declaredClass"===i)continue;const r=e[i];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){t[i]=[];for(let e=0;e<r.length;e++)t[i][e]=lz(r[e])}else"object"==typeof r?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}function cz(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function uz(e,t){const i={};for(const r of e){const{parentObjectId:e,parentGlobalId:n,attachmentInfos:o}=r;for(const r of o){const{id:o}=r,s=Dp(im(`${t}/${e}/attachments/${o}`)),a=EF.fromJSON(r);a.set({url:s,parentObjectId:e,parentGlobalId:n}),i[e]?i[e].push(a):i[e]=[a]}}return i}async function hz(e,t,i){const r=sz(e);return function(e,t,i){let r={query:lz({...e.query,f:"json",...cz(t)})};return i&&(r={...i,...r,query:{...i.query,...r.query}}),am(e.path+"/queryAttachments",r)}(r,OF.from(t),{...i}).then((e=>uz(e.data.attachmentGroups,r.path)))}const dz={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new Yw({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:Yf.WebMercator}),minus180Line:new Yw({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:Yf.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Yw({paths:[[[180,-180],[180,180]]],spatialReference:Yf.WGS84}),minus180Line:new Yw({paths:[[[-180,-180],[-180,180]]],spatialReference:Yf.WGS84})}};function pz(e,t){return Math.ceil((e-t)/(2*t))}function fz(e,t){const i=mz(e);for(const e of i)for(const i of e)i[0]+=t;return e}function mz(e){return i_(e)?e.rings:e.paths}function gz(e){const t=(null==e?void 0:e.isWebMercator)?102100:4326;return[dz[t].minX,dz[t].maxX]}async function yz(e,t,i){const r="string"==typeof e?Ap(e):e,n=t[0].spatialReference,o=n_(t[0]),s={...i,query:{...r.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(vz(t))}};return function(e,t,i){const r=s_(t);return e.map((e=>{const t=r.fromJSON(e);return t.spatialReference=i,t}))}((await am(r.path+"/simplify",s)).data,o,n)}function vz(e){return{geometryType:n_(e[0]),geometries:e.map((e=>e.toJSON()))}}const bz=Dl.getLogger("esri.geometry.support.normalizeUtils");function wz(e){return"polygon"===e[0].type}function _z(e){return"polyline"===e[0].type}function xz(e,t,i){if(t){const t=function(e,t){if(!(e instanceof Yw||e instanceof Ww)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw bz.error(e),new Ac(e)}const i=mz(e),r=[];for(const e of i){const i=[];r.push(i),i.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){const n=e[r][0],o=e[r][1],s=e[r+1][0],a=e[r+1][1],l=Math.sqrt((s-n)*(s-n)+(a-o)*(a-o)),c=(a-o)/l,u=(s-n)/l,h=l/t;if(h>1){for(let e=1;e<=h-1;e++){const r=e*t,s=u*r+n,a=c*r+o;i.push([s,a])}const e=(l+Math.floor(h-1)*t)/2,r=u*e+n,s=c*e+o;i.push([r,s])}i.push([s,a])}}return function(e){return"polygon"===e.type}(e)?new Ww({rings:r,spatialReference:e.spatialReference}):new Yw({paths:r,spatialReference:e.spatialReference})}(e,1e6);e=Hm(t,!0)}return i&&(e=fz(e,i)),e}function Sz(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const i=pz(r,t);e[0]=r+i*(-2*t)}else if(r<i){const t=pz(r,i);e[0]=r+t*(-2*i)}}else{const r=e.x;if(r>t){const i=pz(r,t);e=e.clone().offset(i*(-2*t),0)}else if(r<i){const t=pz(r,i);e=e.clone().offset(t*(-2*i),0)}}return e}async function kz(e,t,i){var r;if(!Array.isArray(e))return kz([e],t);const n=null!=(r=null==t?void 0:t.url)?r:vl.geometryServiceUrl;let o,s,a,l,c,u,h,d,p=0;const f=[],m=[];for(const t of e)if(xa(t))m.push(t);else if(o||(o=t.spatialReference,s=Nf(o),a=o.isWebMercator,u=a?102100:4326,l=dz[u].maxX,c=dz[u].minX,h=dz[u].plus180Line,d=dz[u].minus180Line),s)if("mesh"===t.type)m.push(t);else if("point"===t.type)m.push(Sz(t.clone(),l,c));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>Sz(e,l,c))),m.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,s);m.push(e.rings?new Ww(e):e)}else if(t.extent){const e=t.extent,i=pz(e.xmin,c)*(2*l);let r=0===i?t.clone():fz(t.clone(),i);e.offset(i,0),e.intersects(h)&&e.xmax!==l?(p=e.xmax>p?e.xmax:p,r=xz(r,a),f.push(r),m.push("cut")):e.intersects(d)&&e.xmin!==c?(p=e.xmax*(2*l)>p?e.xmax*(2*l):p,r=xz(r,a,360),f.push(r),m.push("cut")):m.push(r)}else m.push(t.clone());else m.push(t);let g=pz(p,l),y=-90;const v=g,b=new Yw;for(;g>0;){const e=360*g-180;b.addPath([[e,y],[e,-1*y]]),y*=-1,g--}if(f.length>0&&v>0){const t=function(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const n=t.cutIndexes[r],o=t.geometries[r],s=mz(o);for(let e=0;e<s.length;e++){const t=s[e];t.some((i=>{if(i[0]<180)return!0;{let i=0;for(let e=0;e<t.length;e++){const r=t[e][0];i=r>i?r:i}i=Number(i.toFixed(9));const r=-360*pz(i,180);for(let i=0;i<t.length;i++){const t=o.getPoint(e,i);o.setPoint(e,i,t.clone().offset(r,0))}return!0}}))}if(n===i){if(wz(e))for(const t of mz(o))e[n]=e[n].addRing(t);else if(_z(e))for(const t of mz(o))e[n]=e[n].addPath(t)}else i=n,e[n]=o}return e}(f,await async function(e,t,i,r){const n="string"==typeof e?Ap(e):e,o=t[0].spatialReference,s={...r,query:{...n.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:n_(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await am(n.path+"/cut",s),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map((e=>{const t=r_(e);return t.spatialReference=o,t}))}}(n,f,b,i)),r=[],o=[];for(let i=0;i<m.length;i++){const n=m[i];if("cut"!==n)o.push(n);else{const n=t.shift(),s=e[i];_a(s)&&"polygon"===s.type&&s.rings&&s.rings.length>1&&n.rings.length>=s.rings.length?(r.push(n),o.push("simplify")):o.push(a?Wm(n):n)}}if(!r.length)return o;const s=await yz(n,r,i),l=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?l.push(t):l.push(a?Wm(s.shift()):s.shift())}return l}const w=[];for(let e=0;e<m.length;e++){const t=m[e];if("cut"!==t)w.push(t);else{const e=f.shift();w.push(!0===a?Wm(e):e)}}return Promise.resolve(w)}function Mz(e,t){const i=Nf(t);if(i){const[t,r]=i.valid,n=r-t;if(e<t)for(;e<t;)e+=n;if(e>r)for(;e>r;)e-=n}return e}var Tz;!function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"}(Tz||(Tz={}));const Ez=new TextDecoder("utf-8"),Iz=wa("safari")||wa("ios")?6:wa("ff")?12:32;class Cz{constructor(e,t,i=0,r=(e?e.byteLength:0)){this._tag=0,this._dataType=Tz.unknown,this._init(e,t,i,r)}_init(e,t,i,r){this._data=e,this._dataView=t,this._pos=i,this._end=r}clone(){return new Cz(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,i=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),i}getSFixed64(){const e=this._dataView,t=this._pos,i=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),i}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,i=this._toString(this._data,t,t+e);return this._skip(e),i}getBytes(){const e=this._getLength(),t=this._pos,i=this._toBytes(this._data,t,t+e);return this._skip(e),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,i,r){const n=this.getMessage(),o=e(n,t,i,r);return n.release(),o}processMessage(e){const t=this.getMessage(),i=e(t);return t.release(),i}getMessage(){const e=this._getLength(),t=Cz.pool.acquire();return t._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){Cz.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Tz.varint:this._decodeVarint();break;case Tz.fixed64:this._skip(8);break;case Tz.delimited:this._skip(this._getLength());break;case Tz.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t,i=this._pos,r=0;if(this._end-i>=10)do{if(t=e[i++],r|=127&t,0==(128&t))break;if(t=e[i++],r|=(127&t)<<7,0==(128&t))break;if(t=e[i++],r|=(127&t)<<14,0==(128&t))break;if(t=e[i++],r|=(127&t)<<21,0==(128&t))break;if(t=e[i++],r+=268435456*(127&t),0==(128&t))break;if(t=e[i++],r+=34359738368*(127&t),0==(128&t))break;if(t=e[i++],r+=4398046511104*(127&t),0==(128&t))break;if(t=e[i++],r+=562949953421312*(127&t),0==(128&t))break;if(t=e[i++],r+=72057594037927940*(127&t),0==(128&t))break;if(t=e[i++],r+=0x8000000000000000*(127&t),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{let n=1;for(;i!==this._end&&(t=e[i],0!=(128&t));)++i,r+=(127&t)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=t*n}return this._pos=i,r}_decodeSVarint(){const e=this._decodeVarint();return e%2?-(e+1)/2:e/2}_getLength(){if(this._dataType!==Tz.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,i){if((i=Math.min(this._end,i))-t>Iz){const r=e.subarray(t,i);return Ez.decode(r)}let r="",n="";for(let o=t;o<i;++o){const t=e[o];128&t?n+="%"+t.toString(16):(r+=decodeURIComponent(n)+String.fromCharCode(t),n="")}return n.length&&(r+=decodeURIComponent(n)),r}_toBytes(e,t,i){return i=Math.min(this._end,i),new Uint8Array(e.buffer,t,i-t)}}Cz.pool=new wl(Cz,null,(e=>{e._data=null,e._dataView=null}));class Oz{constructor(e=[],t=[],i=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=i}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const r=this.lengths[i];for(let i=0;i<r;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=r}}clone(e){return e?(e.set(this.coords),new Oz(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new Oz(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Az{constructor(e=null,t={},i,r){this.geometry=e,this.attributes=t,this.centroid=i,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new Az(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function Pz(e){return!(xa(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Rz extends Az{}class Lz{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new Lz;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}const Dz=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Nz{constructor(e){this.options=e,this.geometryTypes=Dz,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Lz}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||Df(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=kO(this.options.sourceSpatialReference)/kO(e.spatialReference);if(1!==t)for(const i of e.features){if(!Pz(i))continue;const e=i.geometry.coords;for(let i=2;i<e.length;i+=3)e[i]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new Az}createSpatialReference(){return{wkid:0}}createGeometry(){return new Oz}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new Oz}}const Fz=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],jz=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],$z=["upperLeft","lowerLeft"];function Vz(e){return e>=Fz.length?null:Fz[e]}function zz(e){return e>=jz.length?null:jz[e]}function Uz(e){return e>=$z.length?null:$z[e]}function qz(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Gz(e,t,i){const r=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const i=e.getUInt32(),n=e.pos()+i;let o=0;for(;e.pos()<n;)t.addCoordinatePoint(r,e.getSInt64(),o++);break}default:e.skip()}return r}function Bz(e,t,i){const r=t.createGeometry(i),n=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const i=e.getUInt32(),n=e.pos()+i;let o=0;for(;e.pos()<n;)t.addLength(r,e.getUInt32(),o++);break}case 3:{const i=e.getUInt32(),o=e.pos()+i;let s=0;for(t.allocateCoordinates(r);e.pos()<o;)t.addCoordinate(r,e.getSInt64(),s),s++,s===n&&(s=0);break}default:e.skip()}return r}function Wz(e){const t=new Oz;let i="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const i=e.getUInt32(),r=e.pos()+i;for(;e.pos()<r;)t.lengths.push(e.getUInt32());break}case 3:{const i=e.getUInt32(),r=e.pos()+i;for(;e.pos()<r;)t.coords.push(e.getSInt64());break}case 1:i=Dz[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:i}}function Hz(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function Jz(e){const t={type:Vz(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=Vz(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=zz(e.getEnum());break;case 5:default:e.skip();break;case 6:t.defaultValue=e.getString()}return t}function Yz(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function Zz(e,t,i,r){const n=t.createFeature(i);let o=0;for(;e.next();)switch(e.tag()){case 1:{const t=r[o++].name;n.attributes[t]=e.processMessage(Hz);break}case 2:n.geometry=e.processMessageWithArgs(Bz,t,i);break;case 4:n.centroid=e.processMessageWithArgs(Gz,t,i);break;default:e.skip()}return n}function Kz(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function Xz(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function Qz(e){const t={originPosition:Uz(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=Uz(e.getEnum());break;case 2:t.scale=e.processMessage(Kz);break;case 3:t.translate=e.processMessage(Xz);break;default:e.skip()}return t}function eU(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function tU(e,t){const i=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:i.wkid=e.getUInt32();break;case 5:i.wkt=e.getString();break;case 2:i.latestWkid=e.getUInt32();break;case 3:i.vcsWkid=e.getUInt32();break;case 4:i.latestVcsWkid=e.getUInt32();break;default:e.skip()}return i}function iU(e,t){const i=t.createFeatureResult();i.geometryType=qz(t,0);let r=!1;for(;e.next();)switch(e.tag()){case 1:i.objectIdFieldName=e.getString();break;case 3:i.globalIdFieldName=e.getString();break;case 4:i.geohashFieldName=e.getString();break;case 5:i.geometryProperties=e.processMessage(eU);break;case 7:i.geometryType=qz(t,e.getEnum());break;case 8:i.spatialReference=e.processMessageWithArgs(tU,t);break;case 10:i.hasZ=e.getBool();break;case 11:i.hasM=e.getBool();break;case 12:i.transform=e.processMessage(Qz);break;case 9:{const t=e.getBool();i.exceededTransferLimit=t;break}case 13:t.addField(i,e.processMessage(Jz));break;case 15:r||(t.prepareFeatures(i),r=!0),t.addFeature(i,e.processMessageWithArgs(Zz,t,i,i.fields));break;case 2:i.uniqueIdField=e.processMessage(Yz);break;default:e.skip()}return t.finishFeatureResult(i),i}function rU(e,t){const i={};let r=null;for(;e.next();)switch(e.tag()){case 4:r=e.processMessageWithArgs(Wz);break;case 1:i.featureResult=e.processMessageWithArgs(iU,t);break;default:e.skip()}return _a(r)&&i.featureResult&&t.addQueryGeometry(i,r),i}function nU(e,t){const i=function(e,t){try{const i=2,r=new Cz(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===i?n.queryResult=r.processMessageWithArgs(rU,t):r.skip();return n}catch(e){throw new Ac("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}(e,t),r=i.queryResult.featureResult,n=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const e=r.objectIdFieldName;for(const t of r.features)t.attributes&&(t.objectId=t.attributes[e])}return r&&(r.queryGeometry=n,r.queryGeometryType=o),r}function oU(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=PA(i.geometryType,t,e.outSpatialReference);if(!xa(r))for(const e of i.features)r(e.geometry)}const sU="Layer does not support extent calculation.";function aU(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function lU(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const n=r,o=e.outSpatialReference;let s,a;if(_a(i)&&(s=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),n.geometryType=n_(i),n.geometry=aU(i,e.compactGeometryEnabled),n.inSR=a),r.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(n.objectIds=r.objectIds.join(",")),r.orderByFields&&(n.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete n.outFields:-1!==r.outFields.indexOf("*")?n.outFields="*":n.outFields=r.outFields.join(","),r.outSR?n.outSR=r.outSR.wkid||JSON.stringify(r.outSR):i&&(r.returnGeometry||r.returnCentroid)&&(n.outSR=n.inSR),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(n.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(n.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&_a(s)&&_a(e.quantizationParameters)&&_a(e.quantizationParameters.extent)&&s.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(n.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(n.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(n.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const e=r.timeExtent,{start:t,end:i}=e;null==t&&null==i||(n.time=t===i?t:`${null==t?"null":t},${null==i?"null":i}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&_a(s)&&_a(o)&&s.equals(o)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function cU(e,t,i,r){const n=_a(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await mU(e,t,"json",r);return oU(t,i,n.data),n}async function uU(e,t,i,r){if(_a(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:i.createFeatureResult()});const n=await hU(e,t,r),o=n;return o.data=nU(n.data,i),o}function hU(e,t,i){return mU(e,t,"pbf",i)}function dU(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):mU(e,t,"json",i,{returnIdsOnly:!0})}function pU(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):mU(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function fU(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):mU(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(sU);if(t.hasOwnProperty("count"))throw new Error(sU);return e}))}function mU(e,t,i,r={},n={}){const o="string"==typeof e?Ap(e):e,s=t.geometry?[t.geometry]:[];return r.responseType="pbf"===i?"array-buffer":"json",kz(s,null,r).then((e=>{const s=e&&e[0];_a(s)&&((t=t.clone()).geometry=s);const a=lz({...o.query,f:i,...n,...lU(t,n)});return am(Yp(o.path,"query"),{...r,query:{...a,...r.query}})}))}var gU,yU=Object.freeze({__proto__:null,encodeGeometry:aU,executeQuery:cU,executeQueryForCount:pU,executeQueryForExtent:fU,executeQueryForIds:dU,executeQueryPBF:uU,executeQueryPBFBuffer:hU,queryToQueryStringParameters:lU,runQuery:mU});async function vU(e,t,i){return pU(sz(e),tz.from(t),{...i}).then((e=>e.data.count))}async function bU(e,t,i){return dU(sz(e),tz.from(t),{...i}).then((e=>e.data.objectIds))}const wU=new $g({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let _U=gU=class extends tp{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=Yf.fromJSON(t.spatialReference),r=[];for(let t=0;t<e.length;t++){const n=e[t],o=HI.fromJSON(n),s=n.geometry&&n.geometry.spatialReference;_a(o.geometry)&&!s&&(o.geometry.spatialReference=i);const a=n.aggregateGeometries,l=o.aggregateGeometries;if(a&&_a(l))for(const e in l){const t=l[e],r=a[e],n=null==r?void 0:r.spatialReference;_a(t)&&!n&&(t.spatialReference=i)}r.push(o)}return r}writeGeometryType(e,t,i,r){if(e)return void wU.write(e,t,i,r);const{features:n}=this;if(n)for(const e of n)if(e&&_a(e.geometry))return void wU.write(e.geometry.type,t,i,r)}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=r_(e);return!i&&t.spatialReference&&(r.spatialReference=Yf.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i)for(const e of i)if(e&&_a(e.geometry)&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new gU(this.cloneProperties())}cloneProperties(){return ol({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const t=e&&e[i];r.geometry=t&&t.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,n]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-r)/t)),(e=>Math.round((n-e)/i)));for(let e=0,t=o.length;e<t;e++)s(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[o,s]}=i,a=this._getHydrationFunction(e,(e=>e*o+r),(e=>n-e*s));for(const{geometry:e}of t)_a(e)&&a(e);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;const o=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=i(a[1]);e===r&&s===n||(o.push([e-r,s-n]),r=e,n=s)}else r=t(a[0]),n=i(a[1]),o.push([r,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return"point"===e?e=>(e.x=t(e.x),e.y=i(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=i_(e)?e.rings:e.paths,n=[];for(let e=0,o=r.length;e<o;e++){const o=r[e],s=this._quantizePoints(o,t,i);s&&n.push(s)}return n.length>0?(i_(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{const r=this._quantizePoints(e.points,t,i);return r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,i){return"point"===e?e=>{e.x=t(e.x),e.y=i(e.y)}:"polyline"===e||"polygon"===e?e=>{const r=i_(e)?e.rings:e.paths;let n,o;for(let e=0,s=r.length;e<s;e++){const s=r[e];for(let e=0,r=s.length;e<r;e++){const r=s[e];e>0?(n+=r[0],o+=r[1]):(n=r[0],o=r[1]),r[0]=t(n),r[1]=i(o)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=i(e.ymin),e.xmax=t(e.xmax),e.ymax=i(e.ymax)}:"multipoint"===e?e=>{const r=e.points;let n,o;for(let e=0,s=r.length;e<s;e++){const s=r[e];e>0?(n+=s[0],o+=s[1]):(n=s[0],o=s[1]),s[0]=t(n),s[1]=i(o)}}:void 0}};bl([Lh({type:String,json:{write:!0}})],_U.prototype,"displayFieldName",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_U.prototype,"exceededTransferLimit",void 0),bl([Lh({type:[HI],json:{write:!0}})],_U.prototype,"features",void 0),bl([Mm("features")],_U.prototype,"readFeatures",null),bl([Lh({type:[kV],json:{write:!0}})],_U.prototype,"fields",void 0),bl([Lh({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:wU.read}}})],_U.prototype,"geometryType",void 0),bl([Mf("geometryType")],_U.prototype,"writeGeometryType",null),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_U.prototype,"hasM",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_U.prototype,"hasZ",void 0),bl([Lh({types:a_,json:{write:!0}})],_U.prototype,"queryGeometry",void 0),bl([Mm("queryGeometry")],_U.prototype,"readQueryGeometry",null),bl([Lh({type:Yf,json:{write:!0}})],_U.prototype,"spatialReference",void 0),bl([Mf("spatialReference")],_U.prototype,"writeSpatialReference",null),bl([Lh({json:{write:!0}})],_U.prototype,"transform",void 0),_U=gU=bl([md("esri.rest.support.FeatureSet")],_U),_U.prototype.toJSON.isDefaultToJSON=!0;const xU=_U;var SU=Object.freeze({__proto__:null,default:xU});async function kU(e,t,i){const r=await MU(e,t,i);return xU.fromJSON(r)}async function MU(e,t,i){const r=sz(e),n={...i},o=tz.from(t),{data:s}=await cU(r,o,o.sourceSpatialReference,n);return s}function TU(e,t){return e?t?4:3:t?3:2}const EU=Dl.getLogger("esri.layers.graphics.featureConversionUtils"),IU={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},CU=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o},OU=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2]},AU=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+3]},PU=(e,t,i,r,n,o)=>{e[i]=n,e[i+1]=o,e[i+2]=t[r+2],e[i+3]=t[r+3]};function RU(e,t,i,r){if(e){if(i)return t&&r?PU:OU;if(t&&r)return AU}else if(t&&r)return OU;return CU}function LU({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function DU({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function NU({scale:e,translate:t},i){return i*e[0]+t[0]}function FU({scale:e,translate:t},i){return t[1]-i*e[1]}function jU(e,t,i){return e?t?i?BU(e):zU(e):i?qU(e):$U(e):null}function $U(e){const t=e.coords;return{x:t[0],y:t[1]}}function VU(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function zU(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function UU(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function qU(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function GU(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function BU(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function WU(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function HU(e,t){return e&&t?WU:e?UU:t?GU:VU}function JU(e,t,i,r,n){const o=HU(i,r);for(const i of t){const{geometry:t,attributes:r}=i;let s;t&&(s=o(new Oz,t)),e.push(new Az(s,r,null,r[n]))}return e}function YU(e,t,i){if(xa(e))return null;const r=TU(t,i),n=[];for(let t=0;t<e.coords.length;t+=r){const i=[];for(let n=0;n<r;n++)i.push(e.coords[t+n]);n.push(i)}return t?i?{points:n,hasZ:t,hasM:i}:{points:n,hasZ:t}:i?{points:n,hasM:i}:{points:n}}function ZU(e,t,i,r,n){const o=TU(i,r);for(const i of t){const t=i.geometry,r=i.attributes;let s;t&&(s=KU(new Oz,t,o)),e.push(new Az(s,r,null,r[n]))}return e}function KU(e,t,i=TU(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let n=0;for(const e of t.points)for(let t=0;t<i;t++)r[n++]=e[t];return e}function XU(e,t,i){if(!e)return null;const r=TU(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const e of o){const t=[];for(let i=0;i<e;i++){const e=[];for(let t=0;t<r;t++)e.push(n[a++]);t.push(e)}s.push(t)}return t?i?{paths:s,hasZ:t,hasM:i}:{paths:s,hasZ:t}:i?{paths:s,hasM:i}:{paths:s}}function QU(e,t,i,r,n){const o=TU(i,r);for(const i of t){const t=i.geometry,r=i.attributes;let s;t&&(s=eq(new Oz,t,o)),e.push(new Az(s,r,null,r[n]))}return e}function eq(e,t,i=TU(t.hasZ,t.hasM)){const{lengths:r,coords:n}=e;let o=0;for(const e of t.paths){for(const t of e)for(let e=0;e<i;e++)n[o++]=t[e];r.push(e.length)}return e}function tq(e,t,i){if(!e)return null;const r=TU(t,i),{coords:n,lengths:o}=e,s=[];let a=0;for(const e of o){const t=[];for(let i=0;i<e;i++){const e=[];for(let t=0;t<r;t++)e.push(n[a++]);t.push(e)}s.push(t)}return t?i?{rings:s,hasZ:t,hasM:i}:{rings:s,hasZ:t}:i?{rings:s,hasM:i}:{rings:s}}function iq(e,t,i,r,n){for(const o of t){const t=o.geometry,s=o.centroid,a=o.attributes;let l;t&&(l=rq(new Oz,t,i,r)),_a(s)?e.push(new Az(l,a,VU(new Oz,s),a[n])):e.push(new Az(l,a,null,a[n]))}return e}function rq(e,t,i=t.hasZ,r=t.hasM){return nq(e,t.rings,i,r),e}function nq(e,t,i,r){const n=TU(i,r),{lengths:o,coords:s}=e;let a=0;o.length=s.length=0;for(const e of t){for(const t of e)for(let e=0;e<n;e++)s[a++]=t[e];o.push(e.length)}return e}const oq=[],sq=[];function aq(e,t,i,r,n){oq[0]=e;const[o]=lq(sq,oq,t,i,r,n);return oq.length=sq.length=0,o}function lq(e,t,i,r,n,o){if(e.length=0,!i){for(const i of t){const t=i.attributes[o];e.push(new Az(null,i.attributes,null,t))}return e}switch(i){case"esriGeometryPoint":return JU(e,t,r,n,o);case"esriGeometryMultipoint":return ZU(e,t,r,n,o);case"esriGeometryPolyline":return QU(e,t,r,n,o);case"esriGeometryPolygon":return iq(e,t,r,n,o);default:EU.error("convertToFeatureSet:unknown-geometry",new Ac(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function cq(e,t,i,r,n,o){const s=e.length;switch(i){case"esriGeometryPoint":JU(e,t,r,n,o);break;case"esriGeometryMultipoint":ZU(e,t,r,n,o);break;case"esriGeometryPolyline":QU(e,t,r,n,o);break;case"esriGeometryPolygon":iq(e,t,r,n,o);break;default:EU.error("convertToFeatureSet:unknown-geometry",new Ac(`Unable to parse unknown geometry type '${i}'`))}for(let r=0;r<t.length;r++)e[r+s].geometryType=i,e[r+s].insertAfter=t[r].insertAfter,e[r+s].groupId=t[r].groupId;return e}function uq(e,t,i,r){sq[0]=e,pq(oq,sq,t,i,r);const n=oq[0];return oq.length=sq.length=0,n}function hq(e,t,i){if(xa(e))return null;const r=new Oz;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==i&&(i=e.hasM),e_(e)?HU(null!=t?t:null!=e.z,null!=i?i:null!=e.m)(r,e):i_(e)?rq(r,e,t,i):t_(e)?eq(r,e,TU(t,i)):Qw(e)?KU(r,e,TU(t,i)):void EU.error("convertFromGeometry:unknown-geometry",new Ac(`Unable to parse unknown geometry type '${e}'`))}function dq(e,t,i,r){const n=e&&("coords"in e?e:e.geometry);if(xa(n))return null;switch(t){case"esriGeometryPoint":{let e=$U;return i&&r?e=BU:i?e=zU:r&&(e=qU),e(n)}case"esriGeometryMultipoint":return YU(n,i,r);case"esriGeometryPolyline":return XU(n,i,r);case"esriGeometryPolygon":return tq(n,i,r);default:return void EU.error("convertToGeometry:unknown-geometry",new Ac(`Unable to parse unknown geometry type '${t}'`))}}function pq(e,t,i,r,n){if(e.length=0,xa(i))return function(e,t){for(const i of t)e.push({attributes:i.attributes});return e}(e,t);switch(i){case"esriGeometryPoint":return function(e,t,i,r){let n=$U;i&&r?n=BU:i?n=zU:r&&(n=qU);for(const i of t){const{geometry:t,attributes:r}=i,o=_a(t)?n(t):null;e.push({attributes:r,geometry:o})}return e}(e,t,r,n);case"esriGeometryMultipoint":return function(e,t,i,r){for(const n of t){const{geometry:t,attributes:o}=n;let s;t&&(s=YU(t,i,r)),e.push({attributes:o,geometry:s})}return e}(e,t,r,n);case"esriGeometryPolyline":return function(e,t,i,r){for(const n of t){const{geometry:t,attributes:o}=n;let s;_a(t)&&(s=XU(t,i,r)),e.push({attributes:o,geometry:s})}return e}(e,t,r,n);case"esriGeometryPolygon":return function(e,t,i,r){for(const n of t){const{geometry:t,attributes:o,centroid:s}=n;let a;if(_a(t)&&(a=tq(t,i,r)),_a(s)){const t=$U(s);e.push({attributes:o,centroid:t,geometry:a})}else e.push({attributes:o,geometry:a})}return e}(e,t,r,n);default:EU.error("convertToFeatureSet:unknown-geometry",new Ac(`Unable to parse unknown geometry type '${i}'`))}return e}function fq(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:n,hasM:o,hasZ:s,features:a,geometryType:l,exceededTransferLimit:c,uniqueIdField:u,queryGeometry:h,queryGeometryType:d}=e,p={features:pq([],a,l,s,o),fields:n,geometryType:l,objectIdFieldName:t,spatialReference:i,uniqueIdField:u,queryGeometry:dq(h,d,!1,!1)};return r&&(p.transform=r),c&&(p.exceededTransferLimit=c),o&&(p.hasM=o),s&&(p.hasZ=s),p}function mq(e,t){const i=new Lz,{hasM:r,hasZ:n,features:o,objectIdFieldName:s,spatialReference:a,geometryType:l,exceededTransferLimit:c,transform:u,fields:h}=e;return h&&(i.fields=h),i.geometryType=l,i.objectIdFieldName=s||t,i.spatialReference=a,i.objectIdFieldName?(o&&lq(i.features,o,l,n,r,i.objectIdFieldName),c&&(i.exceededTransferLimit=c),r&&(i.hasM=r),n&&(i.hasZ=n),u&&(i.transform=u),i):(EU.error(new Ac("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function gq(e){const{transform:t,features:i,hasM:r,hasZ:n}=e;if(!t)return e;for(const e of i)_a(e.geometry)&&Sq(e.geometry,e.geometry,r,n,t),_a(e.centroid)&&Sq(e.centroid,e.centroid,r,n,t);return e.transform=null,e}function yq(e,t){const{geometryType:i,features:r,hasM:n,hasZ:o}=t;if(!e)return t;for(let t=0;t<r.length;t++){const s=r[t],a=s.weakClone();a.geometry=new Oz,vq(a.geometry,s.geometry,n,o,i,e),s.centroid&&(a.centroid=new Oz,vq(a.centroid,s.centroid,n,o,"esriGeometryPoint",e)),r[t]=a}return t.transform=e,t}function vq(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),xa(t)||!t.coords.length)return null;const l=IU[n],{coords:c,lengths:u}=t,h=TU(i,r),d=TU(i&&s,r&&a),p=RU(i,r,s,a);if(!u.length)return p(e.coords,c,0,0,LU(o,c[0]),DU(o,c[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=h,e;let f,m,g,y,v=0,b=0,w=b;for(const t of u){if(t<l)continue;let i=0;b=w,g=f=LU(o,c[v]),y=m=DU(o,c[v+1]),p(e.coords,c,b,v,g,y),i++,v+=h,b+=d;for(let r=1;r<t;r++,v+=h)g=LU(o,c[v]),y=DU(o,c[v+1]),g===f&&y===m||(p(e.coords,c,b,v,g-f,y-m),b+=d,i++,f=g,m=y);i>=l&&(e.lengths.push(i),w=b)}return e.coords.length=w,e.coords.length?e:null}function bq(e,t,i,r,n,o,s=i,a=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=IU[n],{coords:c,lengths:u}=t,h=TU(i,r),d=TU(i&&s,r&&a),p=RU(i,r,s,a);if(!u.length)return p(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=h,e;let f=0;const m=o*o;for(const t of u){if(t<l){f+=t*h;continue}const i=e.coords.length/d,r=f,n=f+(t-1)*h;p(e.coords,c,e.coords.length,r,c[r],c[r+1]),_q(e.coords,c,h,m,p,r,n),p(e.coords,c,e.coords.length,n,c[n],c[n+1]);const o=e.coords.length/d-i;o>=l?e.lengths.push(o):e.coords.length=i*d,f+=t*h}return e.coords.length?e:null}function wq(e,t,i,r){const n=e[t],o=e[t+1],s=e[i],a=e[i+1],l=e[r],c=e[r+1];let u=s,h=a,d=l-u,p=c-h;if(0!==d||0!==p){const e=((n-u)*d+(o-h)*p)/(d*d+p*p);e>1?(u=l,h=c):e>0&&(u+=d*e,h+=p*e)}return d=n-u,p=o-h,d*d+p*p}function _q(e,t,i,r,n,o,s){let a,l=r,c=0;for(let e=o+i;e<s;e+=i)a=wq(t,e,o,s),a>l&&(c=e,l=a);l>r&&(c-o>i&&_q(e,t,i,r,n,o,c),n(e,t,e.length,c,t[c],t[c+1]),s-c>i&&_q(e,t,i,r,n,c,s))}function xq(e,t,i,r){if(xa(t)||!t.coords||!t.coords.length)return null;const n=TU(i,r);let o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=n){const i=e[t],r=e[t+1];o=Math.min(o,i),a=Math.max(a,i),s=Math.min(s,r),l=Math.max(l,r)}}return e[0]=o,e[1]=s,e[2]=a,e[3]=l,e}function Sq(e,t,i,r,n){const{coords:o,lengths:s}=t,a=i?r?PU:OU:r?OU:CU,l=TU(i,r);if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!s.length)return a(e.coords,o,0,0,NU(n,o[0]),FU(n,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[c,u]=n.scale;let h=0;for(let t=0;t<s.length;t++){const i=s[t];e.lengths[t]=i;let r=NU(n,o[h]),d=FU(n,o[h+1]);a(e.coords,o,h,h,r,d),h+=l;for(let t=1;t<i;t++,h+=l)r+=o[h]*c,d-=o[h+1]*u,a(e.coords,o,h,h,r,d)}return e!==t&&(e.lengths.length=s.length,e.coords.length=o.length),e}function kq(e,t,i,r,n,o){const s=TU(i,r),a=RU(i,r,n,o),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let t=0;t<l.length;t+=s)a(e.coords,l,e.coords.length,t,l[t],l[t+1]);return e}function Mq(e,t,i,r){let n=0,o=e[r*t],s=e[r*(t+1)];for(let a=1;a<i;a++){const i=o+e[r*(t+a)],l=s+e[r*(t+a)+1],c=(i-o)*(l+s);o=i,s=l,n+=c}return.5*n}function Tq(e,t){const{coords:i,lengths:r}=e;let n=0,o=0;for(let e=0;e<r.length;e++)o+=Mq(i,n,r[e],t),n+=e;return Math.abs(o)}function Eq(e,t){if(xa(e))return null;const i=e.clone(),r=e.coords,n=e.lengths;let o=0;for(let e=0;e<n.length;e++){const s=n[e];let a=r[t*o],l=r[t*o+1];for(let e=1;e<s;e++){const n=a+r[t*(o+e)],s=l+r[t*(o+e)+1];i.coords[t*(o+e)]=n,i.coords[t*(o+e)+1]=s,a=n,l=s}o+=s}return i}function Iq(e,t){return t}function Cq(e,t,i,r){switch(i){case 0:return Rq(e,t+r,0);case 1:return"lowerLeft"===e.originPosition?Rq(e,t+r,1):function({translate:e,scale:t},i,r){return e[r]-i*t[r]}(e,t+r,1)}}function Oq(e,t,i,r){return 2===i?Rq(e,t,2):Cq(e,t,i,r)}function Aq(e,t,i,r){return 2===i?Rq(e,t,3):Cq(e,t,i,r)}function Pq(e,t,i,r){return 3===i?Rq(e,t,3):Oq(e,t,i,r)}function Rq({translate:e,scale:t},i,r){return e[r]+i*t[r]}class Lq{constructor(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=Iq,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this._attributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const t=PA(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(!xa(t))for(const i of e.features)t(i.geometry)}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);const i=e.fields.map((e=>e.name));this._attributesConstructor=function(){for(const e of i)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this._deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,i)=>this.addCoordinatePoint(e,t,i),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,i)=>this._addCoordinatePolygon(e,t,i),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,i)=>this._addCoordinatePolyline(e,t,i),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,i)=>this._addCoordinateMultipoint(e,t,i),this.createGeometry=e=>this._createMultipointGeometry(e);break;default:e.geometryType}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,i){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:i,queryGeometryType:r}=t,n=dq(Sq(i.clone(),i,!1,!1,this.transform),r,!1,!1);e.queryGeometryType=r,e.queryGeometry={...n}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,i){switch(t=this.applyTransform(this.transform,t,i,0),i){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let i=0;return t<=1&&(i=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,i)}_addCoordinatePolyline(e,t,i){this._dehydratedAddPointsCoordinate(e.paths,t,i)}_addCoordinatePolygon(e,t,i){this._dehydratedAddPointsCoordinate(e.rings,t,i)}_addCoordinateMultipoint(e,t,i){0===i&&e.points.push([]);const r=this._transformPathLikeValue(t,i);e.points[e.points.length-1].push(r)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,i){0===i&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const r=this._transformPathLikeValue(t,i),n=e[e.length-1];0===i&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),n.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=r}_deriveApplyTransform(e){const{hasZ:t,hasM:i}=e;return t&&i?Pq:t?Oq:i?Aq:Cq}}function Dq(e,t){const i=e.toJSON();return i.objectIds&&(i.objectIds=i.objectIds.join(",")),i.orderByFields&&(i.orderByFields=i.orderByFields.join(",")),!i.outFields||null!=t&&t.returnCountOnly?delete i.outFields:-1!==i.outFields.indexOf("*")?i.outFields="*":i.outFields=i.outFields.join(","),i.outSpatialReference&&(i.outSR=i.outSR.wkid||JSON.stringify(i.outSR.toJSON()),delete i.outSpatialReference),i.dynamicDataSource&&(i.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i}async function Nq(e,t,i={},r){const n=lz({...e.query,f:"json",...r,...Dq(t,r)});return am(e.path+"/queryRelatedRecords",{...i,query:{...i.query,...n}})}async function Fq(e,t,i){t=nz.from(t);return async function(e,t,i){const r=await Nq(e,t,i),n=r.data,o=n.geometryType,s=n.spatialReference,a={};for(const e of n.relatedRecordGroups){const t={fields:void 0,objectIdFieldName:void 0,geometryType:o,spatialReference:s,hasZ:!!n.hasZ,hasM:!!n.hasM,features:e.relatedRecords};if(null!=e.objectId)a[e.objectId]=t;else for(const i in e)e.hasOwnProperty(i)&&"relatedRecords"!==i&&(a[e[i]]=t)}return{...r,data:a}}(sz(e),t,i).then((e=>{const t=e.data,i={};return Object.keys(t).forEach((e=>i[e]=xU.fromJSON(t[e]))),i}))}async function jq(e,t,i){t=nz.from(t);return async function(e,t,i){const r=await Nq(e,t,i,{returnCountOnly:!0}),n=r.data,o={};for(const e of n.relatedRecordGroups)null!=e.objectId&&(o[e.objectId]=e.count);return{...r,data:o}}(sz(e),t,{...i}).then((e=>e.data))}const $q="Layer does not support extent calculation.";function Vq(e,t){var i,r;const n=e.geometry,o=e.toJSON(),s=o;if(_a(n)&&(s.geometry=JSON.stringify(n),s.geometryType=n_(n),s.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),null!=(i=o.topFilter)&&i.groupByFields&&(s.topFilter.groupByFields=o.topFilter.groupByFields.join(",")),null!=(r=o.topFilter)&&r.orderByFields&&(s.topFilter.orderByFields=o.topFilter.orderByFields.join(",")),o.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),o.objectIds&&(s.objectIds=o.objectIds.join(",")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(",")),o.outFields&&!(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?-1!==o.outFields.indexOf("*")?s.outFields="*":s.outFields=o.outFields.join(","):delete s.outFields,o.outSR?s.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&o.returnGeometry&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.timeExtent){const e=o.timeExtent,{start:t,end:i}=e;null==t&&null==i||(s.time=t===i?t:`${null==t?"null":t},${null==i?"null":i}`),delete o.timeExtent}return s}function zq(e,t,i,r={},n={}){const o="string"==typeof e?Ap(e):e,s=t.geometry?[t.geometry]:[];return r.responseType="pbf"===i?"array-buffer":"json",kz(s,null,r).then((e=>{const s=e&&e[0];_a(s)&&((t=t.clone()).geometry=s);const a=lz({...o.query,f:i,...n,...Vq(t,n)});return am(Yp(o.path,"queryTopFeatures"),{...r,query:{...a,...r.query}})}))}var Uq;let qq=Uq=class extends tp{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new Uq({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};bl([Lh({type:[String],json:{write:!0}})],qq.prototype,"groupByFields",void 0),bl([Lh({type:Number,json:{write:!0}})],qq.prototype,"topCount",void 0),bl([Lh({type:[String],json:{write:!0}})],qq.prototype,"orderByFields",void 0),qq=Uq=bl([md("esri.rest.support.TopFilter")],qq);const Gq=qq;var Bq;const Wq=new $g({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Hq=new $g({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Jq=Bq=class extends tp{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new Bq(ol({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};bl([Lh({type:Boolean,json:{write:!0}})],Jq.prototype,"cacheHint",void 0),bl([Lh({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Jq.prototype,"distance",void 0),bl([Lh({types:a_,json:{read:r_,write:!0}})],Jq.prototype,"geometry",void 0),bl([Lh({type:Number,json:{write:!0}})],Jq.prototype,"geometryPrecision",void 0),bl([Lh({type:Number,json:{write:!0}})],Jq.prototype,"maxAllowableOffset",void 0),bl([Lh({type:Number,json:{read:{source:"resultRecordCount"}}})],Jq.prototype,"num",void 0),bl([Lh({json:{write:!0}})],Jq.prototype,"objectIds",void 0),bl([Lh({type:[String],json:{write:!0}})],Jq.prototype,"orderByFields",void 0),bl([Lh({type:[String],json:{write:!0}})],Jq.prototype,"outFields",void 0),bl([Lh({type:Yf,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Jq.prototype,"outSpatialReference",void 0),bl([Lh({type:String,json:{write:!0}})],Jq.prototype,"resultType",void 0),bl([Lh({json:{write:!0}})],Jq.prototype,"returnGeometry",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jq.prototype,"returnM",void 0),bl([Lh({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Jq.prototype,"returnZ",void 0),bl([Lh({type:Number,json:{read:{source:"resultOffset"}}})],Jq.prototype,"start",void 0),bl([Mf("start"),Mf("num")],Jq.prototype,"writeStart",null),bl([Lh({type:String,json:{read:{source:"spatialRel",reader:Wq.read},write:{target:"spatialRel",writer:Wq.write}}})],Jq.prototype,"spatialRelationship",void 0),bl([Lh({type:iV,json:{write:!0}})],Jq.prototype,"timeExtent",void 0),bl([Lh({type:Gq,json:{write:!0}})],Jq.prototype,"topFilter",void 0),bl([Lh({type:String,json:{read:Hq.read,write:{writer:Hq.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],Jq.prototype,"units",void 0),bl([Lh({type:String,json:{write:!0}})],Jq.prototype,"where",void 0),Jq=Bq=bl([md("esri.rest.support.TopFeaturesQuery")],Jq),Jq.from=xh(Jq);const Yq=Jq;async function Zq(e,t,i,r){const n=sz(e),o={...r},{data:s}=await async function(e,t,i,r){const n=await zq(e,t,"json",r);return oU(t,i,n.data),n}(n,Yq.from(t),i,o);return xU.fromJSON(s)}async function Kq(e,t,i){const r=sz(e);return(await async function(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):zq(e,t,"json",i,{returnIdsOnly:!0})}(r,Yq.from(t),{...i})).data.objectIds}async function Xq(e,t,i){const r=sz(e),n=await async function(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):zq(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then((e=>{const t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error($q);if(t.hasOwnProperty("count"))throw new Error($q);return e}))}(r,Yq.from(t),{...i});return{count:n.data.count,extent:Eg.fromJSON(n.data.extent)}}async function Qq(e,t,i){const r=sz(e);return(await function(e,t,i){return _a(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):zq(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}(r,Yq.from(t),{...i})).data.count}let eG=class extends vd{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Ap(e):null}_encode(e,t,i){const r={};for(const n in e){if("declaredClass"===n)continue;const o=e[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){r[n]=[];for(let e=0;e<o.length;e++)r[n][e]=this._encode(o[e])}else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(i&&i[n]);r[n]=t?e:JSON.stringify(e)}else r[n]=t?o:JSON.stringify(o);else r[n]=o}return r}};bl([Lh({readOnly:!0})],eG.prototype,"parsedUrl",null),bl([Lh()],eG.prototype,"requestOptions",void 0),bl([Lh({type:String})],eG.prototype,"url",void 0),eG=bl([md("esri.tasks.Task")],eG);const tG=eG;let iG=class extends tG{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then((i=>this.featureSetFromJSON(e,i,t)))}async executeJSON(e,t){var i;const r={...this.requestOptions,...t},n=this._normalizeQuery(e),o=null!=(null==(i=e.outStatistics)?void 0:i[0]),s=wa("featurelayer-pbf-statistics"),a=!o||s;let l;if("pbf"===this.format&&a)try{l=await async function(e,t,i){const r=sz(e),n={...i},o=tz.from(t),s=!o.quantizationParameters,{data:a}=await uU(r,o,new Lq({sourceSpatialReference:o.sourceSpatialReference,applyTransform:s}),n);return a}(this.url,n,r)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.format="json"}return"json"!==this.format&&a||(l=await MU(this.url,n,r)),this._normalizeFields(l.fields),l}async featureSetFromJSON(e,t,i){if(!(this._queryIs3DObjectFormat(e)&&_a(this.infoFor3D)&&t.features&&t.features.length))return xU.fromJSON(t);const{meshFeatureSetFromJSON:r}=await iu(import("./chunks/meshFeatureSet-104f5e58.js").then((function(e){return e.a})),i);return r(e,this.infoFor3D,t)}executeForCount(e,t){const i={...this.requestOptions,...t},r=this._normalizeQuery(e);return vU(this.url,r,i)}executeForExtent(e,t){const i={...this.requestOptions,...t},r=this._normalizeQuery(e);return async function(e,t,i){return fU(sz(e),tz.from(t),{...i}).then((e=>({count:e.data.count,extent:Eg.fromJSON(e.data.extent)})))}(this.url,r,i)}executeForIds(e,t){const i={...this.requestOptions,...t},r=this._normalizeQuery(e);return bU(this.url,r,i)}executeRelationshipQuery(e,t){e=nz.from(e);const i={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),Fq(this.url,e,i)}executeRelationshipQueryForCount(e,t){e=nz.from(e);const i={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),jq(this.url,e,i)}executeAttachmentQuery(e,t){const i={...this.requestOptions,...t};return hz(this.url,e,i)}executeTopFeaturesQuery(e,t){const i={...this.requestOptions,...t};return Zq(this.parsedUrl,e,this.sourceSpatialReference,i)}executeForTopIds(e,t){const i={...this.requestOptions,...t};return Kq(this.parsedUrl,e,i)}executeForTopExtents(e,t){const i={...this.requestOptions,...t};return Xq(this.parsedUrl,e,i)}executeForTopCount(e,t){const i={...this.requestOptions,...t};return Qq(this.parsedUrl,e,i)}_normalizeQuery(e){let t=tz.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?UV.from(e.dynamicDataSource):this.dynamicDataSource),_a(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if("3D_glb"===e.id){t.formatOf3DObjects=e.id;break}"3D_gltf"!==e.id||t.formatOf3DObjects||(t.formatOf3DObjects=e.id)}if(!t.formatOf3DObjects)throw new Ac("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(xa(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,xa(t.outFields)&&(t.outFields=[]);const{originX:i,originY:r,originZ:n,translationX:o,translationY:s,translationZ:a,scaleX:l,scaleY:c,scaleZ:u,rotationX:h,rotationY:d,rotationZ:p,rotationDeg:f}=this.infoFor3D.transformFieldRoles;t.outFields.push(i,r,n,o,s,a,l,c,u,h,d,p,f)}}return t}_normalizeFields(e){if(_a(this.fieldsIndex)&&_a(e))for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return _a(this.infoFor3D)&&e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};bl([Lh({type:UV})],iG.prototype,"dynamicDataSource",void 0),bl([Lh()],iG.prototype,"fieldsIndex",void 0),bl([Lh()],iG.prototype,"format",void 0),bl([Lh()],iG.prototype,"gdbVersion",void 0),bl([Lh()],iG.prototype,"infoFor3D",void 0),bl([Lh()],iG.prototype,"sourceSpatialReference",void 0),iG=bl([md("esri.tasks.QueryTask")],iG);const rG=iG,nG=Dl.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),oG=new Map;function sG(e){if(!cj(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function aG(e,t){const i=function(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some((t=>t.id===parseInt(e,10)&&(i=t,!0))),i}(e,t);if(!i)return;const r=`${t.url}/${i.relatedTableId}`;return{url:r,queryTask:new rG({url:r,sourceSpatialReference:t.spatialReference}),relation:i,relatedFields:[],outStatistics:[]}}async function lG(e,t,i,r){const n=i.layerId.toString(),{layerInfo:o,queryTask:s,relation:a,relatedFields:l,outStatistics:c}=t,u=function({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some((t=>(`${t.relatedTableId}`===i&&t.id===e.id&&(r=t),!!r))),r}({originRelationship:a,relationships:o.relationships,layerId:n});if(u.relationshipTableId&&u.keyFieldInRelationshipTable){const t=(await function(e,t,i,r){const n=new nz;return n.outFields=["*"],n.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(n,r)}(e,u,i,r))[e.attributes[i.objectIdField]];if(!t)return null;const n=t.features.map((e=>e.attributes[o.objectIdField]));if((null==c?void 0:c.length)>0&&o.supportsStatistics){const e=new tz;e.where=function(e,t,i){let r=0;const n=[];for(;r<t.length;)n.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return n.join(" OR ")}(o.objectIdField,n,1e3),e.outFields=l,e.outStatistics=c;return su({features:Promise.resolve(t),statsFeatures:s.execute(e)})}}const h=null==u?void 0:u.keyField;if(h){const i=ax(function(e,t){if(null!=e){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}(o.fields,h)),n=function(e,t){const i=t.toLowerCase();for(const t in e)if(t.toLowerCase()===i)return e[t];return null}(e.attributes,a.keyField),l=i?`${h}=${n}`:`${h}='${n}'`,c=s.execute(new tz({where:l,outFields:t.relatedFields}),r),u=t.outStatistics&&t.outStatistics.length>0&&o.supportsStatistics?s.execute(new tz({where:l,outFields:t.relatedFields,outStatistics:t.outStatistics}),r):null,d={features:c};return u&&(d.statsFeatures=u),su(d)}return null}function cG({relatedInfos:e,layer:t},i){const r={};return e.forEach(((e,n)=>{const{relation:o}=e;if(!o){const e=new Ac("relation-required","A relation is required on a layer to retrieve related records.");throw nG.error(e),e}const{relatedTableId:s}=o;if("number"!=typeof s){const e=new Ac("A related table ID is required on a layer to retrieve related records.");throw nG.error(e),e}const a=`${t.url}/${s}`,l=oG.get(a),c=l||function(e,t){return am(e,{query:{f:"json"},signal:t&&t.signal})}(a,i);l||oG.set(a,c),r[n]=c})),su(r)}const uG={chartAnimation:!0};let hG=class extends vd{constructor(e){super(e),this.abilities={...uG},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...uG,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:n,layer:o}=this;return null==t?void 0:t.map((t=>{const s=null==t?void 0:t.clone();if(!s)return null;if(s.title=ZF({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:s.title}),s.caption=ZF({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:s.caption}),s.altText=ZF({attributes:e,fieldInfoMap:n,globalAttributes:i,expressionAttributes:r,layer:o,text:s.altText}),"image"===s.type){const{value:e}=s;return this._setImageValue({value:e,formattedAttributes:i,layer:o}),s.value.sourceURL?s:void 0}if("pie-chart"===s.type||"line-chart"===s.type||"column-chart"===s.type||"bar-chart"===s.type){const{value:t}=s;return this._setChartValue({value:t,chartType:s.type,attributes:e,formattedAttributes:i,layer:o}),s}return null})).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:n}=e,{linkURL:o,sourceURL:s}=i;if(s){const e=QF(s,n);i.sourceURL=KF({formattedAttributes:r,template:e,fieldInfoMap:t})}if(o){const e=QF(o,n);i.linkURL=KF({formattedAttributes:r,template:e,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:n,layer:o}=e,{popupTemplate:s,relatedInfos:a}=this,{fields:l,normalizeField:c}=t;if(t.fields=function(e,t){return e&&e.map((e=>HF(e,t)))}(l,o),c&&(t.normalizeField=HF(c,o)),!l.some((e=>!!(null!=r[e]||cj(e)&&a.size))))return;const u=null==s?void 0:s.fieldInfos;l.forEach((e=>{if(cj(e))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:u,fieldName:e,formattedAttributes:r,chartType:n,value:t})]);const o=this._getChartOption({value:t,attributes:i,chartType:n,formattedAttributes:r,fieldName:e,fieldInfos:u});t.series.push(o)}))}_getRelatedChartInfos(e){var t;const{fieldInfos:i,fieldName:r,formattedAttributes:n,chartType:o,value:s}=e,a=[],l=sG(r),{layerId:c,fieldName:u}=l,h=null==(t=this.relatedInfos)?void 0:t.get(c.toString());if(!h)return a;const{relatedFeatures:d,relation:p}=h;if(!p||!d)return a;const{cardinality:f}=p;return d.forEach((e=>{const{attributes:t}=e;t&&Object.keys(t).forEach((e=>{e===u&&a.push(this._getChartOption({value:s,attributes:t,formattedAttributes:n,fieldName:r,chartType:o,relatedFieldName:e,fieldInfos:i}))}))})),"one-to-many"===f||"many-to-many"===f?a:[a[0]]}_getTooltip({label:e,value:t,chartType:i}){return"pie-chart"===i?e:`${e}: ${t}`}_getChartOption(e){var t;const{value:i,attributes:r,formattedAttributes:n,fieldName:o,relatedFieldName:s,fieldInfos:a,chartType:l}=e,{layer:c}=this,{normalizeField:u,tooltipField:h}=i,d=u?cj(u)?r[sG(u).fieldName]:r[u]:null,p=s&&void 0!==r[s]?r[s]:void 0!==r[o]?r[o]:n[o],f=void 0===p?null:p&&d?p/d:p,m=new dS({value:f});if(cj(o)){const e=sG(o),t=sG(h),i=t?t.fieldName:null,n=tj(f,{fieldInfos:a,fieldName:s,layer:c,preventPlacesFormatting:!!d}),u=e?e.label||e.fieldName:s,p=i&&void 0!==r[i]?r[i]:u;return m.tooltip=this._getTooltip({label:p,value:n,chartType:l}),m}const g=ij(a,o),y=HF(o,c),v=h&&void 0!==n[h]?n[h]:WF(g||new nS({fieldName:y}),null==(t=this.popupTemplate)?void 0:t.expressionInfos),b=n[y];return m.tooltip=this._getTooltip({label:v,value:b,chartType:l}),m}};bl([Lh()],hG.prototype,"abilities",void 0),bl([Am("abilities")],hG.prototype,"castAbilities",null),bl([Lh()],hG.prototype,"activeMediaInfoIndex",void 0),bl([Lh({readOnly:!0})],hG.prototype,"activeMediaInfo",null),bl([Lh()],hG.prototype,"attributes",void 0),bl([Lh()],hG.prototype,"description",void 0),bl([Lh()],hG.prototype,"fieldInfoMap",void 0),bl([Lh()],hG.prototype,"formattedAttributes",void 0),bl([Lh()],hG.prototype,"expressionAttributes",void 0),bl([Lh({readOnly:!0})],hG.prototype,"formattedMediaInfos",null),bl([Lh()],hG.prototype,"layer",void 0),bl([Lh({readOnly:!0})],hG.prototype,"formattedMediaInfoCount",null),bl([Lh()],hG.prototype,"mediaInfos",void 0),bl([Lh()],hG.prototype,"popupTemplate",void 0),bl([Lh()],hG.prototype,"relatedInfos",void 0),bl([Lh()],hG.prototype,"title",void 0),hG=bl([md("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],hG);const dG=hG;var pG=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],fG=[{name:"default",colors:[].concat(pG.slice(30,39),pG.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const mG=new Map([["ar",()=>import("./chunks/ar-ad3995a8.js").then((e=>e.a))],["bg-bg",()=>import("./chunks/bg_BG-7fc84b8f.js").then((e=>e.b))],["bs-ba",()=>import("./chunks/bs_BA-543abdce.js").then((e=>e.b))],["ca-es",()=>import("./chunks/ca_ES-13af26a3.js").then((e=>e.c))],["cs-cz",()=>import("./chunks/cs_CZ-e3b07c03.js").then((e=>e.c))],["da-dk",()=>import("./chunks/da_DK-877a7b13.js").then((e=>e.d))],["de-de",()=>import("./chunks/de_DE-4213762a.js").then((e=>e.d))],["de-ch",()=>import("./chunks/de_CH-5151ac38.js").then((e=>e.d))],["el-gr",()=>import("./chunks/el_GR-9507efe3.js").then((e=>e.e))],["en-us",()=>import("./chunks/en_US-c0b192bf.js").then((e=>e.e))],["en-ca",()=>import("./chunks/en_CA-45bbac87.js").then((e=>e.e))],["es-es",()=>import("./chunks/es_ES-5a281cd6.js").then((e=>e.e))],["et-ee",()=>import("./chunks/et_EE-607ebce0.js").then((e=>e.e))],["fi-fi",()=>import("./chunks/fi_FI-3b5fef92.js").then((e=>e.f))],["fr-fr",()=>import("./chunks/fr_FR-f073f455.js").then((e=>e.f))],["he-il",()=>import("./chunks/he_IL-9a0bd150.js").then((e=>e.h))],["hr-hr",()=>import("./chunks/hr_HR-66c2b4ee.js").then((e=>e.h))],["hu-hu",()=>import("./chunks/hu_HU-429fed3e.js").then((e=>e.h))],["id-id",()=>import("./chunks/id_ID-1ad6f548.js").then((e=>e.i))],["it-it",()=>import("./chunks/it_IT-70f4151d.js").then((e=>e.i))],["ja-jp",()=>import("./chunks/ja_JP-b4326e91.js").then((e=>e.j))],["ko-kr",()=>import("./chunks/ko_KR-4fb11d13.js").then((e=>e.k))],["lt-lt",()=>import("./chunks/lt_LT-ab2c8244.js").then((e=>e.l))],["lv-lv",()=>import("./chunks/lv_LV-c28fdc66.js").then((e=>e.l))],["nb-no",()=>import("./chunks/nb_NO-1a832fd5.js").then((e=>e.n))],["nl-nl",()=>import("./chunks/nl_NL-34c4ccbf.js").then((e=>e.n))],["pl-pl",()=>import("./chunks/pl_PL-e92e9c0c.js").then((e=>e.p))],["pt-br",()=>import("./chunks/pt_BR-04a8ca97.js").then((e=>e.p))],["pt-pt",()=>import("./chunks/pt_PT-1ce8ac5d.js").then((e=>e.p))],["ro-ro",()=>import("./chunks/ro_RO-2a0d4177.js").then((e=>e.r))],["ru-ru",()=>import("./chunks/ru_RU-b6bae28f.js").then((e=>e.r))],["sk-sk",()=>import("./chunks/sk_SK-57d07602.js").then((e=>e.s))],["sl-sl",()=>import("./chunks/sl_SL-99e2f01d.js").then((e=>e.s))],["sr-rs",()=>import("./chunks/sr_RS-e9b2e160.js").then((e=>e.s))],["sv-se",()=>import("./chunks/sv_SE-234b8373.js").then((e=>e.s))],["th-th",()=>import("./chunks/th_TH-50e540ba.js").then((e=>e.t))],["tr-tr",()=>import("./chunks/tr_TR-a0cf63fe.js").then((e=>e.t))],["uk-ua",()=>import("./chunks/uk_UA-1e271cc2.js").then((e=>e.u))],["vi-vn",()=>import("./chunks/vi_VN-11d77119.js").then((e=>e.v))],["zh-cn",()=>import("./chunks/zh_Hans-8b0bc9d7.js").then((e=>e.z))],["zh-hk",()=>import("./chunks/zh_Hant-75aaa1e2.js").then((e=>e.z))],["zh-tw",()=>import("./chunks/zh_Hant-75aaa1e2.js").then((e=>e.z))]]);function gG(e){return e?mG.has(e.toLowerCase())?e.toLowerCase():function(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const e of mG.keys())if(e.startsWith(t)){i=e;break}return i}(e)||"en-us":"en-us"}let yG,vG;const bG="esri-feature-media",wG="esri-feature-media__container",_G="esri-feature-media__item-container",xG="esri-feature-media__item",SG="esri-feature-media__item-title",kG="esri-feature-media__item-caption",MG="esri-feature-media__previous",TG="esri-feature-media__previous-icon",EG="esri-feature-media__previous-icon--rtl",IG="esri-feature-media__next",CG="esri-feature-media__next-icon",OG="esri-feature-media__next-icon--rtl",AG="esri-feature-media__chart",PG="esri-feature-media__button",RG="esri-feature-media__icon",LG="esri-icon-left-triangle-arrow",DG="esri-icon-right-triangle-arrow";let NG=class extends vF{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new dG,this.messages=null,this._getChartDependencies=async e=>{const t=await async function(e=Lg()){if(e=gG(e),yG&&e===vG)return yG;yG=import("./chunks/index-c366b895.js").then((e=>e.i)),vG=e;try{const[t,i]=await Promise.all([yG,mG.get(vG)()]);vG===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return yG=null,vG=null,null}return yG}(),{destroyed:i,viewModel:r}=this;if(i||!r||!e)return;const{activeMediaInfo:n}=r;this._renderChart({chartDiv:e,mediaInfo:n,chartsModule:t})}}initialize(){this._featureElementInfo=new S$,this.own(rD(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(()=>this._setupMediaRefreshTimer())),rD(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo())))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return wj("div",{bind:this,class:bG,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?wj("div",{key:"media-element-container",class:wG},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:n,refreshInterval:o,altText:s,title:a,type:l}=e,{sourceURL:c,linkURL:u}=n,h=GF(u)?"_blank":"_self",d="_blank"===h?"noreferrer":"",p=o?t:null,f=wj("img",{alt:s||a,key:`media-${l}-${i}-${r}-${p?p.timestamp:0}`,src:p?p.sourceURL:c});return(u?wj("a",{title:a,href:u,rel:d,target:h},f):null)||f}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return wj("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:AG,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?wj("div",{key:"media-title",class:SG,innerHTML:e.title}):null,i=e.caption?wj("div",{key:"media-caption",class:kG,innerHTML:e.caption}):null;return wj("div",{key:"media-container",class:_G},wj("div",{key:"media-item-container",class:xG},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(PG,MG):this.classes(PG,IG),n=t?this.classes(RG,TG,LG):this.classes(RG,CG,DG),o=t?this.classes(RG,EG,DG):this.classes(RG,OG,LG);return wj("button",{type:"button",key:t?"media-previous":"media-next",title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:t?this._previous:this._next},wj("span",{"aria-hidden":"true",class:n}),wj("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(e){const t=Bc(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:n}=e,{value:o,type:s}=n,{am4core:a}=i,l=function(e,t="default"){const i=fG.find((e=>e.name===t));return i?i.colors.map((t=>e.color(t))):null}(a);cF()&&a.useTheme(i.am4themes_dark);const c=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!c.matches?a.useTheme(i.am4themes_animated):a.unuseTheme(i.am4themes_animated),a.useTheme((function(e){e instanceof a.ColorSet&&l&&(e.list=l)}));const u="pie-chart"===s?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",n.altText||n.title),u.data=o.series.map((e=>({tooltip:e.tooltip,value:e.value}))).filter((e=>"pie-chart"!==s||e.value>0))}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:n}=i,o=r.create(t,n.PieChart);o.rtl=pL(this.container);const s=o.series.push(new n.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value="value",s.dataFields.category="tooltip",this._customizeChartTooltip(s.tooltip,r),s.slices.template.tooltipText=o.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",o}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.xAxes.push(new s.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",(()=>{a.tooltip.dy=-a.tooltip.contentHeight}));const l=e.yAxes.push(new s.ValueAxis),c=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,o),c.wrap=!0;const u=e.series.push(new s.ColumnSeries);u.dataFields.valueY="value",u.dataFields.categoryX="tooltip",e.cursor=new s.XYCursor,n.series.length>15&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.yAxes.push(new s.CategoryAxis);a.dataFields.category="tooltip",a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",(()=>{a.tooltip.dx=a.tooltip.contentWidth}));const l=e.xAxes.push(new s.ValueAxis),c=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,o),c.wrap=!0;const u=e.series.push(new s.ColumnSeries);u.dataFields.valueX="value",u.dataFields.categoryY="tooltip",e.cursor=new s.XYCursor,n.series.length>15&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:n}=r,{am4core:o,am4charts:s}=i,a=e.xAxes.push(new s.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,o),a.tooltip.events.on("sizechanged",(()=>{a.tooltip.dy=-a.tooltip.contentHeight}));const l=e.yAxes.push(new s.ValueAxis),c=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,o),c.wrap=!0;const u=e.series.push(new s.LineSeries);u.dataFields.categoryX="tooltip",u.dataFields.valueY="value",e.cursor=new s.XYCursor,n.series.length>15&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:n}=r,{am4core:o,am4charts:s}=i,a=o.create(t,s.XYChart);return a.rtl=pL(this.container),"column-chart"===n&&this._createColumnChart(a,e),"bar-chart"===n&&this._createBarChart(a,e),"line-chart"===n&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const n=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),r);this._refreshTimer=n}_getImageSource(e,t){const i=-1!==e.indexOf("?")?"&":"?",[r,n=""]=e.split("#");return`${r}${i}timestamp=${t}${n?"#":""}${n}`}};bl([gD("viewModel.attributes")],NG.prototype,"attributes",void 0),bl([gD("viewModel.activeMediaInfoIndex")],NG.prototype,"activeMediaInfoIndex",void 0),bl([gD("viewModel.description")],NG.prototype,"description",void 0),bl([gD("viewModel.fieldInfoMap")],NG.prototype,"fieldInfoMap",void 0),bl([gD("viewModel.layer")],NG.prototype,"layer",void 0),bl([gD("viewModel.mediaInfos")],NG.prototype,"mediaInfos",void 0),bl([gD("viewModel.popupTemplate")],NG.prototype,"popupTemplate",void 0),bl([gD("viewModel.relatedInfos")],NG.prototype,"relatedInfos",void 0),bl([gD("viewModel.title")],NG.prototype,"title",void 0),bl([Lh({type:dG})],NG.prototype,"viewModel",void 0),bl([Lh(),yj("esri/widgets/Feature/t9n/Feature")],NG.prototype,"messages",void 0),NG=bl([md("esri.widgets.Feature.FeatureMedia")],NG);const FG=NG;class jG{constructor(e,t){this.definition=null,this.context=null,this.definition=e,this.context=t}}class $G{constructor(e=[]){this._elements=e}length(){return this._elements.length}get(e){return this._elements[e]}toArray(){const e=[];for(let t=0;t<this.length();t++)e.push(this.get(t));return e}}class VG extends $G{constructor(e,t,i,r,n,o){super(e),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=i,this._hasM=r,this._cacheId=n,this._partId=o}get(e){if(void 0===this._lazyPt[e]){const t=this._elements[e];if(void 0===t)return;const i=this._hasZ,r=this._hasM;let n=null;n=i&&!r?new Qm(t[0],t[1],t[2],void 0,this._spRef):r&&!i?new Qm(t[0],t[1],void 0,t[2],this._spRef):i&&r?new Qm(t[0],t[1],t[2],t[3],this._spRef):new Qm(t[0],t[1],this._spRef),n.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+e.toString(),this._lazyPt[e]=n}return this._lazyPt[e]}equalityTest(e){return e===this||null!==e&&e instanceof VG!=0&&e.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class zG extends $G{constructor(e,t,i,r,n){super(e),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=r,this._spRef=t,this._cacheId=n}get(e){if(void 0===this._lazyPath[e]){const t=this._elements[e];if(void 0===t)return;this._lazyPath[e]=new VG(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]}equalityTest(e){return e===this||null!==e&&e instanceof zG!=0&&e.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class UG extends Error{}class qG extends UG{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class GG extends UG{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class BG extends UG{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class WG extends UG{}class HG extends UG{constructor(e){super(`Invalid unit ${e}`)}}class JG extends UG{}class YG extends UG{constructor(){super("Zone is an abstract class")}}const ZG="numeric",KG="short",XG="long",QG={year:ZG,month:ZG,day:ZG},eB={year:ZG,month:KG,day:ZG},tB={year:ZG,month:KG,day:ZG,weekday:KG},iB={year:ZG,month:XG,day:ZG},rB={year:ZG,month:XG,day:ZG,weekday:XG},nB={hour:ZG,minute:ZG},oB={hour:ZG,minute:ZG,second:ZG},sB={hour:ZG,minute:ZG,second:ZG,timeZoneName:KG},aB={hour:ZG,minute:ZG,second:ZG,timeZoneName:XG},lB={hour:ZG,minute:ZG,hourCycle:"h23"},cB={hour:ZG,minute:ZG,second:ZG,hourCycle:"h23"},uB={hour:ZG,minute:ZG,second:ZG,hourCycle:"h23",timeZoneName:KG},hB={hour:ZG,minute:ZG,second:ZG,hourCycle:"h23",timeZoneName:XG},dB={year:ZG,month:ZG,day:ZG,hour:ZG,minute:ZG},pB={year:ZG,month:ZG,day:ZG,hour:ZG,minute:ZG,second:ZG},fB={year:ZG,month:KG,day:ZG,hour:ZG,minute:ZG},mB={year:ZG,month:KG,day:ZG,hour:ZG,minute:ZG,second:ZG},gB={year:ZG,month:KG,day:ZG,weekday:KG,hour:ZG,minute:ZG},yB={year:ZG,month:XG,day:ZG,hour:ZG,minute:ZG,timeZoneName:KG},vB={year:ZG,month:XG,day:ZG,hour:ZG,minute:ZG,second:ZG,timeZoneName:KG},bB={year:ZG,month:XG,day:ZG,weekday:XG,hour:ZG,minute:ZG,timeZoneName:XG},wB={year:ZG,month:XG,day:ZG,weekday:XG,hour:ZG,minute:ZG,second:ZG,timeZoneName:XG};function _B(e){return void 0===e}function xB(e){return"number"==typeof e}function SB(e){return"number"==typeof e&&e%1==0}function kB(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function MB(e,t,i){if(0!==e.length)return e.reduce(((e,r)=>{const n=[t(r),r];return e&&i(e[0],n[0])===e[0]?e:n}),null)[1]}function TB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function EB(e,t,i){return SB(e)&&e>=t&&e<=i}function IB(e,t=2){let i;return i=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),i}function CB(e){return _B(e)||null===e||""===e?void 0:parseInt(e,10)}function OB(e){return _B(e)||null===e||""===e?void 0:parseFloat(e)}function AB(e){if(!_B(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function PB(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function RB(e){return e%4==0&&(e%100!=0||e%400==0)}function LB(e){return RB(e)?366:365}function DB(e,t){const i=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===i?RB(e+(t-i)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function NB(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function FB(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return 4===t||3===r?53:52}function jB(e){return e>99?e:e>60?1900+e:2e3+e}function $B(e,t,i,r=null){const n=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const s={timeZoneName:t,...o},a=new Intl.DateTimeFormat(i,s).formatToParts(n).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function VB(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0;return 60*i+(i<0||Object.is(i,-0)?-r:r)}function zB(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new JG(`Invalid unit value ${e}`);return t}function UB(e,t){const i={};for(const r in e)if(TB(e,r)){const n=e[r];if(null==n)continue;i[t(r)]=zB(n)}return i}function qB(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${IB(i,2)}:${IB(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${IB(i,2)}${IB(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function GB(e){return function(e,t){return t.reduce(((t,i)=>(t[i]=e[i],t)),{})}(e,["hour","minute","second","millisecond"])}const BB=["January","February","March","April","May","June","July","August","September","October","November","December"],WB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],HB=["J","F","M","A","M","J","J","A","S","O","N","D"];function JB(e){switch(e){case"narrow":return[...HB];case"short":return[...WB];case"long":return[...BB];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const YB=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ZB=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],KB=["M","T","W","T","F","S","S"];function XB(e){switch(e){case"narrow":return[...KB];case"short":return[...ZB];case"long":return[...YB];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const QB=["AM","PM"],eW=["Before Christ","Anno Domini"],tW=["BC","AD"],iW=["B","A"];function rW(e){switch(e){case"narrow":return[...iW];case"short":return[...tW];case"long":return[...eW];default:return null}}function nW(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const oW={D:QG,DD:eB,DDD:iB,DDDD:rB,t:nB,tt:oB,ttt:sB,tttt:aB,T:lB,TT:cB,TTT:uB,TTTT:hB,f:dB,ff:fB,fff:yB,ffff:bB,F:pB,FF:mB,FFF:vB,FFFF:wB};class sW{static create(e,t={}){return new sW(e,t)}static parseFormat(e){let t=null,i="",r=!1;const n=[];for(let o=0;o<e.length;o++){const s=e.charAt(o);"'"===s?(i.length>0&&n.push({literal:r,val:i}),t=null,i="",r=!r):r||s===t?i+=s:(i.length>0&&n.push({literal:!1,val:i}),i=s,t=s)}return i.length>0&&n.push({literal:r,val:i}),n}static macroTokenToFormatOpts(e){return oW[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTime(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTimeParts(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).formatToParts()}resolvedOptions(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return IB(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,n=(t,i)=>this.loc.extract(e,t,i),o=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",s=()=>i?function(e){return QB[e.hour<12?0:1]}(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(t,r)=>i?function(e,t){return JB(t)[e.month-1]}(e,t):n(r?{month:t}:{month:t,day:"numeric"},"month"),l=(t,r)=>i?function(e,t){return XB(t)[e.weekday-1]}(e,t):n(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const i=sW.macroTokenToFormatOpts(t);return i?this.formatWithSystemDefault(e,i):t},u=t=>i?function(e,t){return rW(t)[e.year<0?0:1]}(e,t):n({era:t},"era");return nW(sW.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return s();case"d":return r?n({day:"numeric"},"day"):this.num(e.day);case"dd":return r?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return r?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return r?n({month:"numeric"},"month"):this.num(e.month);case"MM":return r?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return r?n({year:"numeric"},"year"):this.num(e.year);case"yy":return r?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const i=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=sW.parseFormat(t),n=r.reduce(((e,{literal:t,val:i})=>t?e:e.concat(i)),[]),o=e.shiftTo(...n.map(i).filter((e=>e)));return nW(r,(e=>t=>{const r=i(t);return r?this.num(e.get(r),t.length):t})(o))}}class aW{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class lW{get type(){throw new YG}get name(){throw new YG}get isUniversal(){throw new YG}offsetName(e,t){throw new YG}formatOffset(e,t){throw new YG}offset(e){throw new YG}equals(e){throw new YG}get isValid(){throw new YG}}let cW=null;class uW extends lW{static get instance(){return null===cW&&(cW=new uW),cW}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return $B(e,t,i)}formatOffset(e,t){return qB(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let hW={};const dW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pW={};class fW extends lW{static create(e){return pW[e]||(pW[e]=new fW(e)),pW[e]}static resetCache(){pW={},hW={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=fW.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return $B(e,t,i,this.name)}formatOffset(e,t){return qB(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=(r=this.name,hW[r]||(hW[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),hW[r]);var r;let[n,o,s,a,l,c,u]=i.formatToParts?function(e,t){const i=e.formatToParts(t),r=[];for(let e=0;e<i.length;e++){const{type:t,value:n}=i[e],o=dW[t];"era"===t?r[o]=n:_B(o)||(r[o]=parseInt(n,10))}return r}(i,t):function(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,o,s,a,l,c,u]=r;return[s,n,o,a,l,c,u]}(i,t);"BC"===a&&(n=1-Math.abs(n));let h=+t;const d=h%1e3;return h-=d>=0?d:1e3+d,(NB({year:n,month:o,day:s,hour:24===l?0:l,minute:c,second:u,millisecond:0})-h)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let mW=null;class gW extends lW{static get utcInstance(){return null===mW&&(mW=new gW(0)),mW}static instance(e){return 0===e?gW.utcInstance:new gW(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new gW(VB(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${qB(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return qB(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class yW extends lW{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function vW(e,t){if(_B(e)||null===e)return t;if(e instanceof lW)return e;if(function(e){return"string"==typeof e}(e)){const i=e.toLowerCase();return"local"===i||"system"===i?t:"utc"===i||"gmt"===i?gW.utcInstance:gW.parseSpecifier(i)||fW.create(e)}return xB(e)?gW.instance(e):"object"==typeof e&&e.offset&&"number"==typeof e.offset?e:new yW(e)}let bW,wW=()=>Date.now(),_W="system",xW=null,SW=null,kW=null;class MW{static get now(){return wW}static set now(e){wW=e}static set defaultZone(e){_W=e}static get defaultZone(){return vW(_W,uW.instance)}static get defaultLocale(){return xW}static set defaultLocale(e){xW=e}static get defaultNumberingSystem(){return SW}static set defaultNumberingSystem(e){SW=e}static get defaultOutputCalendar(){return kW}static set defaultOutputCalendar(e){kW=e}static get throwOnInvalid(){return bW}static set throwOnInvalid(e){bW=e}static resetCaches(){NW.resetCache(),fW.resetCache()}}let TW={};let EW={};function IW(e,t={}){const i=JSON.stringify([e,t]);let r=EW[i];return r||(r=new Intl.DateTimeFormat(e,t),EW[i]=r),r}let CW={};let OW={};let AW=null;function PW(e,t,i,r,n){const o=e.listingMode(i);return"error"===o?null:"en"===o?r(t):n(t)}class RW{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:n,...o}=i;if(!t||Object.keys(o).length>0){const t={useGrouping:!1,...i};i.padTo>0&&(t.minimumIntegerDigits=i.padTo),this.inf=function(e,t={}){const i=JSON.stringify([e,t]);let r=CW[i];return r||(r=new Intl.NumberFormat(e,t),CW[i]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return IB(this.floor?Math.floor(e):PB(e,3),this.padTo)}}class LW{constructor(e,t,i){let r;if(this.opts=i,e.zone.isUniversal){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&fW.create(n).valid?(r=n,this.dt=e):(r="UTC",i.timeZoneName?this.dt=e:this.dt=0===e.offset?e:LJ.fromMillis(e.ts+60*e.offset*1e3))}else"system"===e.zone.type?this.dt=e:(this.dt=e,r=e.zone.name);const n={...this.opts};r&&(n.timeZone=r),this.dtf=IW(t,n)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class DW{constructor(e,t,i){this.opts={style:"long",...i},!t&&kB()&&(this.rtf=function(e,t={}){const{base:i,...r}=t,n=JSON.stringify([e,r]);let o=OW[n];return o||(o=new Intl.RelativeTimeFormat(e,t),OW[n]=o),o}(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===i&&o){const i="days"===e;switch(t){case 1:return i?"tomorrow":`next ${n[e][0]}`;case-1:return i?"yesterday":`last ${n[e][0]}`;case 0:return i?"today":`this ${n[e][0]}`}}const s=Object.is(t,-0)||t<0,a=Math.abs(t),l=1===a,c=n[e],u=r?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return s?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class NW{static fromOpts(e){return NW.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,i,r=!1){const n=e||MW.defaultLocale,o=n||(r?"en-US":AW||(AW=(new Intl.DateTimeFormat).resolvedOptions().locale,AW)),s=t||MW.defaultNumberingSystem,a=i||MW.defaultOutputCalendar;return new NW(o,s,a,n)}static resetCache(){AW=null,EW={},CW={},OW={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i}={}){return NW.create(e,t,i)}constructor(e,t,i,r){const[n,o,s]=function(e){const t=e.indexOf("-u-");if(-1===t)return[e];{let i;const r=e.substring(0,t);try{i=IW(e).resolvedOptions()}catch(e){i=IW(r).resolvedOptions()}const{numberingSystem:n,calendar:o}=i;return[r,n,o]}}(e);this.locale=n,this.numberingSystem=t||o||null,this.outputCalendar=i||s||null,this.intl=function(e,t,i){return i||t?(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?NW.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1,i=!0){return PW(this,e,i,JB,(()=>{const i=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let i=1;i<=12;i++){const r=LJ.utc(2016,i,1);t.push(e(r))}return t}((e=>this.extract(e,i,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1,i=!0){return PW(this,e,i,XB,(()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let i=1;i<=7;i++){const r=LJ.utc(2016,11,13+i);t.push(e(r))}return t}((e=>this.extract(e,i,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(e=!0){return PW(this,void 0,e,(()=>QB),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[LJ.utc(2016,11,13,9),LJ.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e,t=!0){return PW(this,e,t,rW,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[LJ.utc(-40,1,1),LJ.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,i){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===i));return r?r.value:null}numberFormatter(e={}){return new RW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new LW(e,this.intl,t)}relFormatter(e={}){return new DW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const i=JSON.stringify([e,t]);let r=TW[i];return r||(r=new Intl.ListFormat(e,t),TW[i]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}function FW(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function jW(...e){return t=>e.reduce((([e,i,r],n)=>{const[o,s,a]=n(t,r);return[{...e,...o},i||s,a]}),[{},null,1]).slice(0,2)}function $W(e,...t){if(null==e)return[null,null];for(const[i,r]of t){const t=i.exec(e);if(t)return r(t)}return[null,null]}function VW(...e){return(t,i)=>{const r={};let n;for(n=0;n<e.length;n++)r[e[n]]=CB(t[i+n]);return[r,null,i+n]}}const zW=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,UW=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,qW=RegExp(`${UW.source}${zW.source}?`),GW=RegExp(`(?:T${qW.source})?`),BW=VW("weekYear","weekNumber","weekDay"),WW=VW("year","ordinal"),HW=RegExp(`${UW.source} ?(?:${zW.source}|(${/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source}))?`),JW=RegExp(`(?: ${HW.source})?`);function YW(e,t,i){const r=e[t];return _B(r)?i:CB(r)}function ZW(e,t){return[{year:YW(e,t),month:YW(e,t+1,1),day:YW(e,t+2,1)},null,t+3]}function KW(e,t){return[{hours:YW(e,t,0),minutes:YW(e,t+1,0),seconds:YW(e,t+2,0),milliseconds:AB(e[t+3])},null,t+4]}function XW(e,t){const i=!e[t]&&!e[t+1],r=VB(e[t+1],e[t+2]);return[{},i?null:gW.instance(r),t+3]}function QW(e,t){return[{},e[t]?fW.create(e[t]):null,t+1]}const eH=RegExp(`^T?${UW.source}$`),tH=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function iH(e){const[t,i,r,n,o,s,a,l,c]=e,u="-"===t[0],h=l&&"-"===l[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(OB(i)),months:d(OB(r)),weeks:d(OB(n)),days:d(OB(o)),hours:d(OB(s)),minutes:d(OB(a)),seconds:d(OB(l),"-0"===l),milliseconds:d(AB(c),h)}]}const rH={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function nH(e,t,i,r,n,o,s){const a={year:2===t.length?jB(CB(t)):CB(t),month:WB.indexOf(i)+1,day:CB(r),hour:CB(n),minute:CB(o)};return s&&(a.second=CB(s)),e&&(a.weekday=e.length>3?YB.indexOf(e)+1:ZB.indexOf(e)+1),a}const oH=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function sH(e){const[,t,i,r,n,o,s,a,l,c,u,h]=e,d=nH(t,n,r,i,o,s,a);let p;return p=l?rH[l]:c?0:VB(u,h),[d,new gW(p)]}const aH=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,lH=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,cH=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function uH(e){const[,t,i,r,n,o,s,a]=e;return[nH(t,n,r,i,o,s,a),gW.utcInstance]}function hH(e){const[,t,i,r,n,o,s,a]=e;return[nH(t,a,i,r,n,o,s),gW.utcInstance]}const dH=FW(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,GW),pH=FW(/(\d{4})-?W(\d\d)(?:-?(\d))?/,GW),fH=FW(/(\d{4})-?(\d{3})/,GW),mH=FW(qW),gH=jW(ZW,KW,XW),yH=jW(BW,KW,XW),vH=jW(WW,KW,XW),bH=jW(KW,XW);const wH=jW(KW);const _H=FW(/(\d{4})-(\d\d)-(\d\d)/,JW),xH=FW(HW),SH=jW(ZW,KW,XW,QW),kH=jW(KW,XW,QW);const MH={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},TH={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...MH},EH={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...MH},IH=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],CH=IH.slice(0).reverse();function OH(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new PH(r)}function AH(e,t,i,r,n){const o=e[n][i],s=t[i]/o,a=!(Math.sign(s)===Math.sign(r[n]))&&0!==r[n]&&Math.abs(s)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(s):Math.trunc(s);r[n]+=a,t[i]-=a*o}class PH{constructor(e){const t="longterm"===e.conversionAccuracy||!1;this.values=e.values,this.loc=e.loc||NW.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=t?EH:TH,this.isLuxonDuration=!0}static fromMillis(e,t){return PH.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new JG("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new PH({values:UB(e,PH.normalizeUnit),loc:NW.fromObject(t),conversionAccuracy:t.conversionAccuracy})}static fromDurationLike(e){if(xB(e))return PH.fromMillis(e);if(PH.isDuration(e))return e;if("object"==typeof e)return PH.fromObject(e);throw new JG(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=function(e){return $W(e,[tH,iH])}(e);return i?PH.fromObject(i,t):PH.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=function(e){return $W(e,[eH,wH])}(e);return i?PH.fromObject(i,t):PH.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new JG("need to specify a reason the Duration is invalid");const i=e instanceof aW?e:new aW(e,t);if(MW.throwOnInvalid)throw new BG(i);return new PH({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new HG(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?sW.create(this.loc,i).formatDurationFromString(this,e):"Invalid Duration"}toHuman(e={}){const t=IH.map((t=>{const i=this.values[t];return _B(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(i)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=PB(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let r="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===i.seconds&&0===i.milliseconds||(r+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===i.milliseconds||(r+=".SSS"));let n=i.toFormat(r);return e.includePrefix&&(n="T"+n),n}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=PH.fromDurationLike(e),i={};for(const e of IH)(TB(t.values,e)||TB(this.values,e))&&(i[e]=t.get(e)+this.get(e));return OH(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=PH.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=zB(e(this.values[i],i));return OH(this,{values:t},!0)}get(e){return this[PH.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return OH(this,{values:{...this.values,...UB(e,PH.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t})};return i&&(r.conversionAccuracy=i),OH(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return function(e,t){CH.reduce(((i,r)=>_B(t[r])?i:(i&&AH(e,t,i,t,r),r)),null)}(this.matrix,e),OH(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>PH.normalizeUnit(e)));const t={},i={},r=this.toObject();let n;for(const o of IH)if(e.indexOf(o)>=0){n=o;let e=0;for(const t in i)e+=this.matrix[t][o]*i[t],i[t]=0;xB(r[o])&&(e+=r[o]);const s=Math.trunc(e);t[o]=s,i[o]=(1e3*e-1e3*s)/1e3;for(const e in r)IH.indexOf(e)>IH.indexOf(o)&&AH(this.matrix,r,e,t,o)}else xB(r[o])&&(i[o]=r[o]);for(const e in i)0!==i[e]&&(t[n]+=e===n?i[e]:i[e]/this.matrix[n][e]);return OH(this,{values:t},!0).normalize()}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return OH(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of IH)if(t=this.values[r],i=e.values[r],!(void 0===t||0===t?void 0===i||0===i:t===i))return!1;var t,i;return!0}}const RH="Invalid Interval";class LH{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new JG("need to specify a reason the Interval is invalid");const i=e instanceof aW?e:new aW(e,t);if(MW.throwOnInvalid)throw new GG(i);return new LH({invalid:i})}static fromDateTimes(e,t){const i=DJ(e),r=DJ(t),n=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?LH.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:LH.invalid("missing or invalid end"):LH.invalid("missing or invalid start")}(i,r);return null==n?new LH({start:i,end:r}):n}static after(e,t){const i=PH.fromDurationLike(t),r=DJ(e);return LH.fromDateTimes(r,r.plus(i))}static before(e,t){const i=PH.fromDurationLike(t),r=DJ(e);return LH.fromDateTimes(r.minus(i),r)}static fromISO(e,t){const[i,r]=(e||"").split("/",2);if(i&&r){let e,n,o,s;try{e=LJ.fromISO(i,t),n=e.isValid}catch(r){n=!1}try{o=LJ.fromISO(r,t),s=o.isValid}catch(r){s=!1}if(n&&s)return LH.fromDateTimes(e,o);if(n){const i=PH.fromISO(r,t);if(i.isValid)return LH.after(e,i)}else if(s){const e=PH.fromISO(i,t);if(e.isValid)return LH.before(o,e)}}return LH.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(t,e).get(e))+1}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?LH.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(DJ).filter((e=>this.contains(e))).sort(),i=[];let{s:r}=this,n=0;for(;r<this.e;){const e=t[n]||this.e,o=+e>+this.e?this.e:e;i.push(LH.fromDateTimes(r,o)),r=o,n+=1}return i}splitBy(e){const t=PH.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let i,{s:r}=this,n=1;const o=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*n)));i=+e>+this.e?this.e:e,o.push(LH.fromDateTimes(r,i)),r=i,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:LH.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return LH.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],i)=>t?t.overlaps(i)||t.abutsStart(i)?[e,t.union(i)]:[e.concat([t]),i]:[e,i]),[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const r=[],n=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),o=Array.prototype.concat(...n).sort(((e,t)=>e.time-t.time));for(const e of o)i+="s"===e.type?1:-1,1===i?t=e.time:(t&&+t!=+e.time&&r.push(LH.fromDateTimes(t,e.time)),t=null);return LH.merge(r)}difference(...e){return LH.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:RH}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:RH}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:RH}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:RH}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:RH}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):PH.invalid(this.invalidReason)}mapEndpoints(e){return LH.fromDateTimes(e(this.s),e(this.e))}}class DH{static hasDST(e=MW.defaultZone){const t=LJ.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return fW.isValidZone(e)}static normalizeZone(e){return vW(e,MW.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:n="gregory"}={}){return(r||NW.create(t,i,n)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:n="gregory"}={}){return(r||NW.create(t,i,n)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||NW.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||NW.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return NW.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return NW.create(t,null,"gregory").eras(e)}static features(){return{relative:kB()}}}function NH(e,t){const i=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(PH.fromMillis(r).as("days"))}function FH(e,t,i,r){let[n,o,s,a]=function(e,t,i){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const i=NH(e,t);return(i-i%7)/7}],["days",NH]],n={};let o,s;for(const[a,l]of r)if(i.indexOf(a)>=0){o=a;let i=l(e,t);s=e.plus({[a]:i}),s>t?(e=e.plus({[a]:i-1}),i-=1):e=s,n[a]=i}return[e,n,s,o]}(e,t,i);const l=t-n,c=i.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(s<t&&(s=n.plus({[a]:1})),s!==n&&(o[a]=(o[a]||0)+l/(s-n)));const u=PH.fromObject(o,r);return c.length>0?PH.fromMillis(l,r).shiftTo(...c).plus(u):u}const jH={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},$H={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},VH=jH.hanidec.replace(/[\[|\]]/g,"").split("");function zH({numberingSystem:e},t=""){return new RegExp(`${jH[e||"latn"]}${t}`)}function UH(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(-1!==e[i].search(jH.hanidec))t+=VH.indexOf(e[i]);else for(const e in $H){const[i,n]=$H[e];r>=i&&r<=n&&(t+=r-i)}}return parseInt(t,10)}return t}(e))}}const qH=`( |${String.fromCharCode(160)})`,GH=new RegExp(qH,"g");function BH(e){return e.replace(/\./g,"\\.?").replace(GH,qH)}function WH(e){return e.replace(/\./g,"").replace(GH," ").toLowerCase()}function HH(e,t){return null===e?null:{regex:RegExp(e.map(BH).join("|")),deser:([i])=>e.findIndex((e=>WH(i)===WH(e)))+t}}function JH(e,t){return{regex:e,deser:([,e,t])=>VB(e,t),groups:t}}function YH(e){return{regex:e,deser:([e])=>e}}const ZH={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let KH=null;function XH(e,t){if(e.literal)return e;const i=sW.macroTokenToFormatOpts(e.val);if(!i)return e;const r=sW.create(t,i).formatDateTimeParts((KH||(KH=LJ.fromMillis(1555555555555)),KH)).map((e=>function(e,t,i){const{type:r,value:n}=e;if("literal"===r)return{literal:!0,val:n};const o=i[r];let s=ZH[r];return"object"==typeof s&&(s=s[o]),s?{literal:!1,val:s}:void 0}(e,0,i)));return r.includes(void 0)?e:r}function QH(e,t,i){const r=function(e,t){return Array.prototype.concat(...e.map((e=>XH(e,t))))}(sW.parseFormat(i),e),n=r.map((t=>function(e,t){const i=zH(t),r=zH(t,"{2}"),n=zH(t,"{3}"),o=zH(t,"{4}"),s=zH(t,"{6}"),a=zH(t,"{1,2}"),l=zH(t,"{1,3}"),c=zH(t,"{1,6}"),u=zH(t,"{1,9}"),h=zH(t,"{2,4}"),d=zH(t,"{4,6}"),p=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},f=(f=>{if(e.literal)return p(f);switch(f.val){case"G":return HH(t.eras("short",!1),0);case"GG":return HH(t.eras("long",!1),0);case"y":return UH(c);case"yy":case"kk":return UH(h,jB);case"yyyy":case"kkkk":return UH(o);case"yyyyy":return UH(d);case"yyyyyy":return UH(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return UH(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return UH(r);case"MMM":return HH(t.months("short",!0,!1),1);case"MMMM":return HH(t.months("long",!0,!1),1);case"LLL":return HH(t.months("short",!1,!1),1);case"LLLL":return HH(t.months("long",!1,!1),1);case"o":case"S":return UH(l);case"ooo":case"SSS":return UH(n);case"u":return YH(u);case"uu":return YH(a);case"uuu":case"E":case"c":return UH(i);case"a":return HH(t.meridiems(),0);case"EEE":return HH(t.weekdays("short",!1,!1),1);case"EEEE":return HH(t.weekdays("long",!1,!1),1);case"ccc":return HH(t.weekdays("short",!0,!1),1);case"cccc":return HH(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return JH(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return JH(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return YH(/[a-z_+-/]{1,256}?/i);default:return p(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e))),o=n.find((e=>e.invalidReason));if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};{const[e,i]=function(e){const t=e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"");return[`^${t}$`,e]}(n),o=RegExp(e,"i"),[s,a]=function(e,t,i){const r=e.match(t);if(r){const e={};let t=1;for(const n in i)if(TB(i,n)){const o=i[n],s=o.groups?o.groups+1:1;!o.literal&&o.token&&(e[o.token.val[0]]=o.deser(r.slice(t,t+s))),t+=s}return[r,e]}return[r,{}]}(t,o,i),[l,c,u]=a?function(e){let t,i=null;_B(e.z)||(i=fW.create(e.z)),_B(e.Z)||(i||(i=new gW(e.Z)),t=e.Z),_B(e.q)||(e.M=3*(e.q-1)+1),_B(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),_B(e.u)||(e.S=AB(e.u));const r=Object.keys(e).reduce(((t,i)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(i);return r&&(t[r]=e[i]),t}),{});return[r,i,t]}(a):[null,null,void 0];if(TB(a,"a")&&TB(a,"H"))throw new WG("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:o,rawMatches:s,matches:a,result:l,zone:c,specificOffset:u}}}const eJ=[0,31,59,90,120,151,181,212,243,273,304,334],tJ=[0,31,60,91,121,152,182,213,244,274,305,335];function iJ(e,t){return new aW("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function rJ(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return 0===n?7:n}function nJ(e,t,i){return i+(RB(e)?tJ:eJ)[t-1]}function oJ(e,t){const i=RB(e)?tJ:eJ,r=i.findIndex((e=>e<t));return{month:r+1,day:t-i[r]}}function sJ(e){const{year:t,month:i,day:r}=e,n=nJ(t,i,r),o=rJ(t,i,r);let s,a=Math.floor((n-o+10)/7);return a<1?(s=t-1,a=FB(s)):a>FB(t)?(s=t+1,a=1):s=t,{weekYear:s,weekNumber:a,weekday:o,...GB(e)}}function aJ(e){const{weekYear:t,weekNumber:i,weekday:r}=e,n=rJ(t,1,4),o=LB(t);let s,a=7*i+r-n-3;a<1?(s=t-1,a+=LB(s)):a>o?(s=t+1,a-=LB(t)):s=t;const{month:l,day:c}=oJ(s,a);return{year:s,month:l,day:c,...GB(e)}}function lJ(e){const{year:t,month:i,day:r}=e;return{year:t,ordinal:nJ(t,i,r),...GB(e)}}function cJ(e){const{year:t,ordinal:i}=e,{month:r,day:n}=oJ(t,i);return{year:t,month:r,day:n,...GB(e)}}function uJ(e){const t=SB(e.year),i=EB(e.month,1,12),r=EB(e.day,1,DB(e.year,e.month));return t?i?!r&&iJ("day",e.day):iJ("month",e.month):iJ("year",e.year)}function hJ(e){const{hour:t,minute:i,second:r,millisecond:n}=e,o=EB(t,0,23)||24===t&&0===i&&0===r&&0===n,s=EB(i,0,59),a=EB(r,0,59),l=EB(n,0,999);return o?s?a?!l&&iJ("millisecond",n):iJ("second",r):iJ("minute",i):iJ("hour",t)}const dJ="Invalid DateTime";function pJ(e){return new aW("unsupported zone",`the zone "${e.name}" is not supported`)}function fJ(e){return null===e.weekData&&(e.weekData=sJ(e.c)),e.weekData}function mJ(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new LJ({...i,...t,old:i})}function gJ(e,t,i){let r=e-60*t*1e3;const n=i.offset(r);if(t===n)return[r,t];r-=60*(n-t)*1e3;const o=i.offset(r);return n===o?[r,n]:[e-60*Math.min(n,o)*1e3,Math.max(n,o)]}function yJ(e,t){const i=new Date(e+=60*t*1e3);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function vJ(e,t,i){return gJ(NB(e),t,i)}function bJ(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),o={...e.c,year:r,month:n,day:Math.min(e.c.day,DB(r,n))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},s=PH.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=NB(o);let[l,c]=gJ(a,i,e.zone);return 0!==s&&(l+=s,c=e.zone.offset(l)),{ts:l,o:c}}function wJ(e,t,i,r,n,o){const{setZone:s,zone:a}=i;if(e&&0!==Object.keys(e).length){const r=t||a,n=LJ.fromObject(e,{...i,zone:r,specificOffset:o});return s?n:n.setZone(a)}return LJ.invalid(new aW("unparsable",`the input "${n}" can't be parsed as ${r}`))}function _J(e,t,i=!0){return e.isValid?sW.create(NW.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function xJ(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=IB(e.c.year,i?6:4),t?(r+="-",r+=IB(e.c.month),r+="-",r+=IB(e.c.day)):(r+=IB(e.c.month),r+=IB(e.c.day)),r}function SJ(e,t,i,r,n){let o=IB(e.c.hour);return t?(o+=":",o+=IB(e.c.minute),0===e.c.second&&i||(o+=":")):o+=IB(e.c.minute),0===e.c.second&&i||(o+=IB(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=IB(e.c.millisecond,3))),n&&(e.isOffsetFixed&&0===e.offset?o+="Z":e.o<0?(o+="-",o+=IB(Math.trunc(-e.o/60)),o+=":",o+=IB(Math.trunc(-e.o%60))):(o+="+",o+=IB(Math.trunc(e.o/60)),o+=":",o+=IB(Math.trunc(e.o%60)))),o}const kJ={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},MJ={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},TJ={ordinal:1,hour:0,minute:0,second:0,millisecond:0},EJ=["year","month","day","hour","minute","second","millisecond"],IJ=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],CJ=["year","ordinal","hour","minute","second","millisecond"];function OJ(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new HG(e);return t}function AJ(e,t){const i=vW(t.zone,MW.defaultZone),r=NW.fromObject(t),n=MW.now();let o,s;if(_B(e.year))o=n;else{for(const t of EJ)_B(e[t])&&(e[t]=kJ[t]);const t=uJ(e)||hJ(e);if(t)return LJ.invalid(t);const r=i.offset(n);[o,s]=vJ(e,r,i)}return new LJ({ts:o,zone:i,loc:r,o:s})}function PJ(e,t,i){const r=!!_B(i.round)||i.round,n=(e,n)=>{e=PB(e,r||i.calendary?0:2,!0);return t.loc.clone(i).relFormatter(i).format(e,n)},o=r=>i.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(i.unit)return n(o(i.unit),i.unit);for(const e of i.units){const t=o(e);if(Math.abs(t)>=1)return n(t,e)}return n(e>t?-0:0,i.units[i.units.length-1])}function RJ(e){let t,i={};return e.length>0&&"object"==typeof e[e.length-1]?(i=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[i,t]}class LJ{constructor(e){const t=e.zone||MW.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new aW("invalid input"):null)||(t.isValid?null:pJ(t));this.ts=_B(e.ts)?MW.now():e.ts;let r=null,n=null;if(!i){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,n]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);r=yJ(this.ts,e),i=Number.isNaN(r.year)?new aW("invalid input"):null,r=i?null:r,n=i?null:e}}this._zone=t,this.loc=e.loc||NW.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=n,this.isLuxonDateTime=!0}static now(){return new LJ({})}static local(){const[e,t]=RJ(arguments),[i,r,n,o,s,a,l]=t;return AJ({year:i,month:r,day:n,hour:o,minute:s,second:a,millisecond:l},e)}static utc(){const[e,t]=RJ(arguments),[i,r,n,o,s,a,l]=t;return e.zone=gW.utcInstance,AJ({year:i,month:r,day:n,hour:o,minute:s,second:a,millisecond:l},e)}static fromJSDate(e,t={}){const i=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e.valueOf():NaN;if(Number.isNaN(i))return LJ.invalid("invalid input");const r=vW(t.zone,MW.defaultZone);return r.isValid?new LJ({ts:i,zone:r,loc:NW.fromObject(t)}):LJ.invalid(pJ(r))}static fromMillis(e,t={}){if(xB(e))return e<-864e13||e>864e13?LJ.invalid("Timestamp out of range"):new LJ({ts:e,zone:vW(t.zone,MW.defaultZone),loc:NW.fromObject(t)});throw new JG(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(xB(e))return new LJ({ts:1e3*e,zone:vW(t.zone,MW.defaultZone),loc:NW.fromObject(t)});throw new JG("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=vW(t.zone,MW.defaultZone);if(!i.isValid)return LJ.invalid(pJ(i));const r=MW.now(),n=_B(t.specificOffset)?i.offset(r):t.specificOffset,o=UB(e,OJ),s=!_B(o.ordinal),a=!_B(o.year),l=!_B(o.month)||!_B(o.day),c=a||l,u=o.weekYear||o.weekNumber,h=NW.fromObject(t);if((c||s)&&u)throw new WG("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&s)throw new WG("Can't mix ordinal dates with month/day");const d=u||o.weekday&&!c;let p,f,m=yJ(r,n);d?(p=IJ,f=MJ,m=sJ(m)):s?(p=CJ,f=TJ,m=lJ(m)):(p=EJ,f=kJ);let g=!1;for(const e of p){_B(o[e])?o[e]=g?f[e]:m[e]:g=!0}const y=d?function(e){const t=SB(e.weekYear),i=EB(e.weekNumber,1,FB(e.weekYear)),r=EB(e.weekday,1,7);return t?i?!r&&iJ("weekday",e.weekday):iJ("week",e.week):iJ("weekYear",e.weekYear)}(o):s?function(e){const t=SB(e.year),i=EB(e.ordinal,1,LB(e.year));return t?!i&&iJ("ordinal",e.ordinal):iJ("year",e.year)}(o):uJ(o),v=y||hJ(o);if(v)return LJ.invalid(v);const b=d?aJ(o):s?cJ(o):o,[w,_]=vJ(b,n,i),x=new LJ({ts:w,zone:i,o:_,loc:h});return o.weekday&&c&&e.weekday!==x.weekday?LJ.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${x.toISO()}`):x}static fromISO(e,t={}){const[i,r]=function(e){return $W(e,[dH,gH],[pH,yH],[fH,vH],[mH,bH])}(e);return wJ(i,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,r]=function(e){return $W(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[oH,sH])}(e);return wJ(i,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,r]=function(e){return $W(e,[aH,uH],[lH,uH],[cH,hH])}(e);return wJ(i,r,t,"HTTP",t)}static fromFormat(e,t,i={}){if(_B(e)||_B(t))throw new JG("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:n=null}=i,o=NW.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0}),[s,a,l,c]=function(e,t,i){const{result:r,zone:n,specificOffset:o,invalidReason:s}=QH(e,t,i);return[r,n,o,s]}(o,e,t);return c?LJ.invalid(c):wJ(s,a,i,`format ${t}`,e,l)}static fromString(e,t,i={}){return LJ.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,r]=function(e){return $W(e,[_H,SH],[xH,kH])}(e);return wJ(i,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new JG("need to specify a reason the DateTime is invalid");const i=e instanceof aW?e:new aW(e,t);if(MW.throwOnInvalid)throw new qG(i);return new LJ({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?fJ(this).weekYear:NaN}get weekNumber(){return this.isValid?fJ(this).weekNumber:NaN}get weekday(){return this.isValid?fJ(this).weekday:NaN}get ordinal(){return this.isValid?lJ(this.c).ordinal:NaN}get monthShort(){return this.isValid?DH.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?DH.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?DH.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?DH.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return RB(this.year)}get daysInMonth(){return DB(this.year,this.month)}get daysInYear(){return this.isValid?LB(this.year):NaN}get weeksInWeekYear(){return this.isValid?FB(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:r}=sW.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(gW.instance(e),t)}toLocal(){return this.setZone(MW.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if((e=vW(e,MW.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||i){const t=e.offset(this.ts),i=this.toObject();[r]=vJ(i,t,e)}return mJ(this,{ts:r,zone:e})}return LJ.invalid(pJ(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){return mJ(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=UB(e,OJ),i=!_B(t.weekYear)||!_B(t.weekNumber)||!_B(t.weekday),r=!_B(t.ordinal),n=!_B(t.year),o=!_B(t.month)||!_B(t.day),s=n||o,a=t.weekYear||t.weekNumber;if((s||r)&&a)throw new WG("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new WG("Can't mix ordinal dates with month/day");let l;i?l=aJ({...sJ(this.c),...t}):_B(t.ordinal)?(l={...this.toObject(),...t},_B(t.day)&&(l.day=Math.min(DB(l.year,l.month),l.day))):l=cJ({...lJ(this.c),...t});const[c,u]=vJ(l,this.o,this.zone);return mJ(this,{ts:c,o:u})}plus(e){if(!this.isValid)return this;return mJ(this,bJ(this,PH.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return mJ(this,bJ(this,PH.fromDurationLike(e).negate()))}startOf(e){if(!this.isValid)return this;const t={},i=PH.normalizeUnit(e);switch(i){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===i&&(t.weekday=1),"quarters"===i){const e=Math.ceil(this.month/3);t.month=3*(e-1)+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?sW.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):dJ}toLocaleString(e=QG,t={}){return this.isValid?sW.create(this.loc.clone(t),e).formatDateTime(this):dJ}toLocaleParts(e={}){return this.isValid?sW.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:r=!0}={}){if(!this.isValid)return null;const n="extended"===e;let o=xJ(this,n);return o+="T",o+=SJ(this,n,t,i,r),o}toISODate({format:e="extended"}={}){return this.isValid?xJ(this,"extended"===e):null}toISOWeekDate(){return _J(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:r=!1,format:n="extended"}={}){if(!this.isValid)return null;return(r?"T":"")+SJ(this,"extended"===n,t,e,i)}toRFC2822(){return _J(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _J(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?xJ(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(i&&(r+=" "),t?r+="z":e&&(r+="ZZ")),_J(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():dJ}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return PH.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=(a=t,Array.isArray(a)?a:[a]).map(PH.normalizeUnit),o=e.valueOf()>this.valueOf(),s=FH(o?this:e,o?e:this,n,r);var a;return o?s.negate():s}diffNow(e="milliseconds",t={}){return this.diff(LJ.now(),e,t)}until(e){return this.isValid?LH.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const i=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=i&&i<=r.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||LJ.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(r=e.unit,n=void 0),PJ(t,this.plus(i),{...e,numeric:"always",units:r,unit:n})}toRelativeCalendar(e={}){return this.isValid?PJ(e.base||LJ.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(LJ.isDateTime))throw new JG("min requires all arguments be DateTimes");return MB(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(LJ.isDateTime))throw new JG("max requires all arguments be DateTimes");return MB(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:r=null,numberingSystem:n=null}=i;return QH(NW.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,i={}){return LJ.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return QG}static get DATE_MED(){return eB}static get DATE_MED_WITH_WEEKDAY(){return tB}static get DATE_FULL(){return iB}static get DATE_HUGE(){return rB}static get TIME_SIMPLE(){return nB}static get TIME_WITH_SECONDS(){return oB}static get TIME_WITH_SHORT_OFFSET(){return sB}static get TIME_WITH_LONG_OFFSET(){return aB}static get TIME_24_SIMPLE(){return lB}static get TIME_24_WITH_SECONDS(){return cB}static get TIME_24_WITH_SHORT_OFFSET(){return uB}static get TIME_24_WITH_LONG_OFFSET(){return hB}static get DATETIME_SHORT(){return dB}static get DATETIME_SHORT_WITH_SECONDS(){return pB}static get DATETIME_MED(){return fB}static get DATETIME_MED_WITH_SECONDS(){return mB}static get DATETIME_MED_WITH_WEEKDAY(){return gB}static get DATETIME_FULL(){return yB}static get DATETIME_FULL_WITH_SECONDS(){return vB}static get DATETIME_HUGE(){return bB}static get DATETIME_HUGE_WITH_SECONDS(){return wB}}function DJ(e){if(LJ.isDateTime(e))return e;if(e&&e.valueOf&&xB(e.valueOf()))return LJ.fromJSDate(e);if(e&&"object"==typeof e)return LJ.fromObject(e);throw new JG(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const NJ={ar:[".",","],bg:[",",""],bs:[",","."],ca:[",","."],cs:[",",""],da:[",","."],de:[",","."],"de-ch":[".",""],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",",""],fi:[",",""],fr:[",",""],"fr-ch":[",",""],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",",""],id:[",","."],it:[",","."],"it-ch":[".",""],ja:[".",","],ko:[".",","],lt:[",",""],lv:[",",""],mk:[",","."],nb:[",",""],nl:[",","."],pl:[",",""],pt:[",","."],"pt-pt":[",",""],ro:[",","."],ru:[",",""],sk:[",",""],sl:[",","."],sr:[",","."],sv:[",",""],th:[".",","],tr:[",","."],uk:[",",""],vi:[",","."],zh:[".",","]};function FJ(e){e||(e=Lg());let t=e in NJ;if(!t){const i=e.split("-");i.length>1&&i[0]in NJ&&(e=i[0],t=!0),t||(e="en")}const[i,r,n="#,##0.###"]=NJ[e];return{decimal:i,group:r,pattern:n}}function jJ(e,t){const i=FJ((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const r=(i=i||{}).customs.group,n=i.customs.decimal,o=t.split(";"),s=o[0];if(-1!==(t=o[e<0?1:0]||"-"+s).indexOf("%"))e*=100;else if(-1!==t.indexOf(""))e*=1e3;else{if(-1!==t.indexOf(""))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const a=$J,l=s.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(a,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),n="string"==typeof i.places&&i.places.indexOf(",");let o=i.places;n?o=i.places.substring(n+1):o>=0||(o=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(o))));const s=String(Math.abs(e)).split("."),a=s[1]||"";if(r[1]||i.places){n&&(i.places=i.places.substring(0,n));const e=void 0!==i.places?i.places:r[1]&&r[1].lastIndexOf("0")+1;e>a.length&&(s[1]=a.padEnd(Number(e),"0")),o<a.length&&(s[1]=a.substr(0,Number(o)))}else s[1]&&s.pop();const l=r[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>s[0].length&&(s[0]=s[0].padStart(c,"0")),-1===l.indexOf("#")&&(s[0]=s[0].substr(s[0].length-c)));let u,h,d=r[0].lastIndexOf(",");if(-1!==d){u=r[0].length-d-1;const e=r[0].substr(0,d);d=e.lastIndexOf(","),-1!==d&&(h=e.length-d-1)}const p=[];for(let e=s[0];e;){const t=e.length-u;p.push(t>0?e.substr(t):e),e=t>0?e.slice(0,t):"",h&&(u=h,h=void 0)}return s[0]=p.reverse().join(i.group||","),s.join(i.decimal||".")}(e,l[0],{decimal:n,group:r,places:i.places,round:i.round}))}(e,r,t)}const $J=/[#0,]*[#0](?:\.0*#*)?/;function VJ(e){const t=FJ((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,n=t.decimal;let o=1;if(-1!==i.indexOf("%"))o/=100;else if(-1!==i.indexOf(""))o/=1e3;else if(-1!==i.indexOf(""))throw new Error("currency notation not supported");const s=i.split(";");1===s.length&&s.push("-"+s[0]);const a=qJ(s,(function(t){return(t="(?:"+Al(t,".")+")").replace($J,(function(t){const i={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:n,exponent:!1},s=t.split(".");let a=e.places;1===s.length&&1!==o&&(s[1]="###"),1===s.length||0===a?i.fractional=!1:(void 0===a&&(a=e.pattern?s[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(i.fractional=!0),!e.places&&a<s[1].length&&(a+=","+s[1].length),i.places=a);const l=s[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=UJ(e),i=qJ(e.fractional,(function(t){let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+qJ(e.exponent,(function(t){return t?"([eE]"+UJ({signed:e.eSigned})+")":""}))}(i)+")"}))}),!0);return{regexp:a.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:n,factor:o}}function zJ(e,t){const i=VJ(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let n=r[1];if(!r[1]){if(!r[2])return NaN;n=r[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function UJ(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",qJ(e.signed,(function(e){return e?"[-+]":""}),!0)+qJ(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=Al(t))?t="\\s":""===t&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const e="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const qJ=function(e,t,i){if(!(e instanceof Array))return t(e);const r=[];for(let i=0;i<e.length;i++)r.push(t(e[i]));return GJ(r.join("|"),i)},GJ=function(e,t){return"("+(t?"?:":"")+e+")"};var BJ,WJ;function HJ(e){return kV.fromJSON(e.toJSON())}function JJ(e){return e.toJSON?e.toJSON():e}function YJ(e){return"string"==typeof e||e instanceof String}function ZJ(e){return"number"==typeof e}function KJ(e){return e instanceof Date}function XJ(e,t){return e===t||!(!KJ(e)||!KJ(t))&&e.getTime()===t.getTime()}function QJ(e){if(void 0===e)return null;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function eY(e){if(null===e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Eg({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function tY(e){if(void 0===e)return null;if("number"==typeof e)return e;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}!function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"}(BJ||(BJ={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(WJ||(WJ={}));const iY=1e3,rY={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},nY={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},oY={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function sY(e,t){return Hc(((i,r)=>{const n=cu(!0);e.reduce(((e,i,r,n)=>e.then((e=>{try{return t(e,i,r,n)}catch(e){return lu(e)}}),(e=>lu(e)))),n).then(i,r)}))}function aY(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function lY(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const i="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(n=t.cmp,function(e){return function(t,i){const r={key:t,value:e[t]},o={key:i,value:e[i]};return n(r,o)}});var n;const o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let n,s;if(Array.isArray(t)){for(s="[",n=0;n<t.length;n++)n&&(s+=","),s+=e(t[n])||"null";return s+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const a=o.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(s="",n=0;n<l.length;n++){const i=l[n],r=e(t[i]);r&&(s&&(s+=","),s+=JSON.stringify(i)+":"+r)}return o.splice(a,1),"{"+s+"}"}(e)}class cY{constructor(e){this.value=e}}class uY{constructor(e){this.value=e}}class hY{constructor(e){this.fn=e}}class dY{constructor(e,t){this.paramCount=t,this.fn=e}}const pY=hY,fY=uY,mY=cY,gY=dY,yY={type:"VOID"},vY={type:"BREAK"},bY={type:"CONTINUE"};function wY(e,t,i){return""===t||null==t||t===i||t===i?e:e=e.split(t).join(i)}function _Y(e){return e instanceof hY||e instanceof jG||e instanceof dY}function xY(e){return!!(kY(e)||TY(e)||RY(e)||MY(e)||null===e||e===yY||"number"==typeof e)}function SY(e,t){return void 0===e?t:e}function kY(e){return"string"==typeof e||e instanceof String}function MY(e){return"boolean"==typeof e}function TY(e){return"number"==typeof e}function EY(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function IY(e){return e instanceof Array}function CY(e){return"esri.arcade.Feature"===(null==e?void 0:e.arcadeDeclaredClass)}function OY(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===e.declaredRootClass)}function AY(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureSetCollection"===e.declaredRootClass)}function PY(e){return e instanceof $G}function RY(e){return e instanceof Date}function LY(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function DY(e){return e<0?-Math.round(-e):Math.round(e)}function NY(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))}function FY(e,t){return!1===isNaN(e)?null==t||""===t?e.toString():(t=wY(t,"",""),jJ(e,{pattern:t=wY(t,"","")})):e.toString()}function jY(e,t){const i=LJ.fromJSDate(e);return null==t||""===t?i.toISO({suppressMilliseconds:!0}):i.toFormat($Y(t),{locale:Lg(),numberingSystem:"latn"})}function $Y(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&"["===r.slice(0,1)&&"]"===r.slice(-1)?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function VY(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function zY(e,t,i){if(null===e){if(null===t||t===yY)return VY(null,null,i);if(TY(t))return VY(0,t,i);if(kY(t))return VY(0,HY(t),i);if(MY(t))return VY(0,HY(t),i);if(RY(t))return VY(0,t.getTime(),i)}if(e===yY){if(null===t||t===yY)return VY(null,null,i);if(TY(t))return VY(0,t,i);if(kY(t))return VY(0,HY(t),i);if(MY(t))return VY(0,HY(t),i);if(RY(t))return VY(0,t.getTime(),i)}else if(TY(e)){if(TY(t))return VY(e,t,i);if(MY(t))return VY(e,HY(t),i);if(null===t||t===yY)return VY(e,0,i);if(kY(t))return VY(e,HY(t),i);if(RY(t))return VY(e,t.getTime(),i)}else if(kY(e)){if(kY(t))return VY(qY(e),qY(t),i);if(RY(t))return VY(HY(e),t.getTime(),i);if(TY(t))return VY(HY(e),t,i);if(null===t||t===yY)return VY(HY(e),0,i);if(MY(t))return VY(HY(e),HY(t),i)}else if(RY(e)){if(RY(t))return VY(e,t,i);if(null===t||t===yY)return VY(e.getTime(),0,i);if(TY(t))return VY(e.getTime(),t,i);if(MY(t))return VY(e.getTime(),HY(t),i);if(kY(t))return VY(e.getTime(),HY(t),i)}else if(MY(e)){if(MY(t))return VY(e,t,i);if(TY(t))return VY(HY(e),HY(t),i);if(RY(t))return VY(HY(e),t.getTime(),i);if(null===t||t===yY)return VY(HY(e),0,i);if(kY(t))return VY(HY(e),HY(t),i)}return!!UY(e,t)&&("<="===i||">="===i)}function UY(e,t){if(e===t)return!0;if(null===e&&t===yY||null===t&&e===yY)return!0;if(RY(e)&&RY(t))return e.getTime()===t.getTime();if(e instanceof zG)return e.equalityTest(t);if(e instanceof VG)return e.equalityTest(t);if(e instanceof Qm&&t instanceof Qm){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(null!=i)return i===r}if(void 0!==e&&void 0!==t&&null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t){if(e._arcadeCacheId===t._arcadeCacheId&&void 0!==e._arcadeCacheId&&null!==e._arcadeCacheId)return!0;if(e._underlyingGraphic===t._underlyingGraphic&&void 0!==e._underlyingGraphic&&null!==e._underlyingGraphic)return!0}return!1}function qY(e,t){if(kY(e))return e;if(null===e)return"";if(TY(e))return FY(e,t);if(MY(e))return e.toString();if(RY(e))return jY(e,t);if(e instanceof Em)return JSON.stringify(e.toJSON());if(IY(e)){const t=[];for(let i=0;i<e.length;i++)t[i]=WY(e[i]);return"["+t.join(",")+"]"}if(e instanceof $G){const t=[];for(let i=0;i<e.length();i++)t[i]=WY(e.get(i));return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():_Y(e)?"object, Function":""}function GY(e){const t=[];if(!1===IY(e))return null;if(e instanceof $G){for(let i=0;i<e.length();i++)t[i]=HY(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=HY(e[i]);return t}function BY(e,t){if(kY(e))return e;if(null===e)return"";if(TY(e))return FY(e,t);if(MY(e))return e.toString();if(RY(e))return jY(e,t);if(e instanceof Em)return e instanceof Eg?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+nZ(e.spatialReference)+"}":nZ(e.toJSON(),((e,t)=>e.key===t.key?0:"spatialReference"===e.key?1:"spatialReference"===t.key||e.key<t.key?-1:e.key>t.key?1:0));if(IY(e)){const t=[];for(let i=0;i<e.length;i++)t[i]=WY(e[i]);return"["+t.join(",")+"]"}if(e instanceof $G){const t=[];for(let i=0;i<e.length();i++)t[i]=WY(e.get(i));return"["+t.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():_Y(e)?"object, Function":""}function WY(e){if(null===e)return"null";if(MY(e)||TY(e)||kY(e))return JSON.stringify(e);if(e instanceof Em)return BY(e);if(e instanceof $G)return BY(e);if(e instanceof Array)return BY(e);if(e instanceof Date)return JSON.stringify(jY(e,""));if(null!==e&&"object"==typeof e){if(void 0!==e.castToText)return e.castToText()}else if(e===yY)return"null";return"null"}function HY(e,t){return TY(e)?e:null===e||""===e?0:RY(e)?NaN:MY(e)?e?1:0:IY(e)||""===e||void 0===e?NaN:void 0!==t&&kY(e)?(t=wY(t,"",""),zJ(e,{pattern:t=wY(t,"","")})):e===yY?0:Number(e)}function JY(e){if(RY(e))return e;if(kY(e)){const t=ZY(e);if(t)return t.toJSDate()}return null}function YY(e){return RY(e)?LJ.fromJSDate(e):kY(e)?ZY(e):null}function ZY(e){const t=/ (\d\d)/;let i=LJ.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=LJ.fromISO(e),i.isValid)?i:null}function KY(e){return MY(e)?e:kY(e)?"true"===(e=e.toLowerCase()):!!TY(e)&&0!==e&&!isNaN(e)}function XY(e,t){return xa(e)?null:(null!==e.spatialReference&&void 0!==e.spatialReference||(e.spatialReference=t),e)}function QY(e){if(null===e)return null;if(e instanceof Qm)return"NaN"===e.x||null===e.x||isNaN(e.x)?null:e;if(e instanceof Ww){if(0===e.rings.length)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Yw){if(0===e.paths.length)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof dw?0===e.points.length?null:e:e instanceof Eg?"NaN"===e.xmin||null===e.xmin||isNaN(e.xmin)?null:e:null}function eZ(e,t){if(!e)return t;if(!e.domain)return t;let i=null;if("string"===e.field.type||"esriFieldTypeString"===e.field.type)t=qY(t);else{if(null==t)return null;if(""===t)return t;t=HY(t)}for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.code===t&&(i=n)}return null===i?t:i.name}function tZ(e,t){if(!e)return t;if(!e.domain)return t;let i=null;t=qY(t);for(let r=0;r<e.domain.codedValues.length;r++){const n=e.domain.codedValues[r];n.name===t&&(i=n)}return null===i?t:i.code}function iZ(e,t,i=null,r=null){if(!t)return null;if(!t.fields)return null;let n,o,s=null;for(let i=0;i<t.fields.length;i++){const r=t.fields[i];r.name.toLowerCase()===e.toString().toLowerCase()&&(s=r)}if(null===s)throw new Error("Field not found");return null===r&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),null!=r&&t.types.some((function(e){return e.id===r&&(n=e.domains&&e.domains[s.name],n&&"inherited"===n.type&&(n=rZ(s.name,t),o=!0),!0)})),o||n||(n=rZ(e,t)),{field:s,domain:n}}function rZ(e,t){let i;return t.fields.some((function(t){return t.name.toLowerCase()===e.toLowerCase()&&(i=t.domain),!!i})),i}function nZ(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const i="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(n=t.cmp,function(e){return function(t,i){const r={key:t,value:e[t]},o={key:i,value:e[i]};return n(r,o)}});var n;const o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let n,s;if(Array.isArray(t)){for(s="[",n=0;n<t.length;n++)n&&(s+=","),s+=e(t[n])||"null";return s+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const a=o.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(s="",n=0;n<l.length;n++){const i=l[n],r=e(t[i]);r&&(s&&(s+=","),s+=JSON.stringify(i)+":"+r)}return o.splice(a,1),"{"+s+"}"}(e)}function oZ(e){if(null===e)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&"esri.arcade.Feature"===i.arcadeDeclaredClass?t.push(i.geometry()):t.push(i);return t}function sZ(e,t){if(!(t instanceof Qm))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function aZ(e,t){if(IY(e)||PY(e)){let i=!1,r=!1,n=[],o=t;if(IY(e)){for(const t of e)sZ(n,t);n.length>0&&(o=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof VG)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else{if(!PY(e))throw new Error("Invalid Argument");for(const t of e.toArray())sZ(n,t);n.length>0&&(o=e.get(0).spatialReference,i=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===n.length?null:(!1===gw(n,r,i)&&(n=n.slice(0).reverse()),new Ww({rings:[n],spatialReference:o,hasZ:i,hasM:r}))}return e}function lZ(e,t){if(IY(e)||PY(e)){let i=!1,r=!1,n=[],o=t;if(IY(e)){for(const t of e)sZ(n,t);n.length>0&&(o=e[0].spatialReference,i=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof VG)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(PY(e)){for(const t of e.toArray())sZ(n,t);n.length>0&&(o=e.get(0).spatialReference,i=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===n.length?null:new Yw({paths:[n],spatialReference:o,hasZ:i,hasM:r})}return e}function cZ(e,t){if(IY(e)||PY(e)){let i=!1,r=!1,n=[],o=t;if(IY(e)){for(const t of e)sZ(n,t);n.length>0&&(o=e[0].spatialReference,i=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof VG)n=e._elements,n.length>0&&(i=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(PY(e)){for(const t of e.toArray())sZ(n,t);n.length>0&&(o=e.get(0).spatialReference,i=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===n.length?null:new dw({points:n,spatialReference:o,hasZ:i,hasM:r})}return e}function uZ(e,t=!1){const i=[];if(null===e)return i;if(!0===IY(e)){for(let r=0;r<e.length;r++){const n=qY(e[r]);""===n&&!0!==t||i.push(n)}return i}if(e instanceof $G){for(let r=0;r<e.length();r++){const n=qY(e.get(r));""===n&&!0!==t||i.push(n)}return i}if(xY(e)){const r=qY(e);return""===r&&!0!==t||i.push(r),i}return[]}let hZ=0;function dZ(e){return hZ++,hZ%100==0?(hZ=0,Hc((t=>{setTimeout((()=>{t(e)}),0)}))):e}function pZ(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function fZ(e,t=null){return null==e?null:MY(e)||TY(e)||kY(e)?e:e instanceof Em?!0===(null==t?void 0:t.keepGeometryType)?e:e.toJSON():e instanceof $G?e.toArray().map((e=>fZ(e,t))):e instanceof Array?e.map((e=>fZ(e,t))):e instanceof Date?e:null!==e&&"object"==typeof e&&void 0!==e.castAsJson?e.castAsJson(t):null}function mZ(e,t,i,r,n){return gZ(e,t,i).then((e=>{n[r]=e}))}function gZ(e,t=null,i=null){if(e instanceof $G&&(e=e.toArray()),null==e)return cu(null);if(xY(e)||e instanceof Em||e instanceof Date)return cu(fZ(e,i));if(e instanceof Array){const r=[],n=[];for(const o of e)null===o||xY(o)||o instanceof Em||o instanceof Date?n.push(fZ(o,i)):(n.push(null),r.push(mZ(o,t,i,n.length-1,n)));return r.length>0?Wc(r).then((()=>n)):cu(n)}return null!==e&&"object"==typeof e&&void 0!==e.castAsJsonAsync?e.castAsJsonAsync(t,i):cu(null)}function yZ(e,t,i){const r=e.fullSchema();return null===r?null:r.fields?iZ(t,r,e,i):null}function vZ(e){const t=e.fullSchema();return null===t?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map((e=>({name:e.name,code:e.id}))):[]}:null}function bZ(e,t,i,r){const n=e.fullSchema();if(null===n)return null;if(!n.fields)return null;const o=iZ(t,n,e,r);if(void 0===i)try{i=e.field(t)}catch(e){return null}return eZ(o,i)}function wZ(e,t,i,r){const n=e.fullSchema();if(null===n)return null;if(!n.fields)return null;if(void 0===i){try{i=e.field(t)}catch(e){return null}return i}return tZ(iZ(t,n,e,r),i)}function _Z(e){const t=e.fullSchema();if(null===t)return null;if(!t.fields)return null;const i=[];for(const e of t.fields)i.push(JJ(e));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:void 0===nY[t.geometryType]?"":nY[t.geometryType],fields:i}}const xZ=Object.freeze({__proto__:null,ReturnResultE:cY,ImplicitResultE:uY,NativeFunctionE:hY,SizzleFunctionE:dY,NativeFunction:pY,ImplicitResult:fY,ReturnResult:mY,SizzleFunction:gY,voidOperation:yY,breakResult:vY,continueResult:bY,multiReplace:wY,isFunctionParameter:_Y,isSimpleType:xY,defaultUndefined:SY,isString:kY,isBoolean:MY,isNumber:TY,isInteger:EY,isArray:IY,isFeature:CY,isFeatureSet:OY,isFeatureSetCollection:AY,isImmutableArray:PY,isDate:RY,pcCheck:LY,absRound:DY,generateUUID:NY,formatNumber:FY,formatDate:jY,standardiseDateFormat:$Y,greaterThanLessThan:zY,equalityTest:UY,toString:qY,toNumberArray:GY,toStringExplicit:BY,toNumber:HY,toDate:JY,toDateTime:YY,toBoolean:KY,fixSpatialReference:XY,fixNullGeometry:QY,getDomainValue:eZ,getDomainCode:tZ,getDomain:iZ,stableStringify:nZ,autoCastFeatureToGeometry:oZ,autoCastArrayOfPointsToPolygon:aZ,autoCastArrayOfPointsToPolyline:lZ,autoCastArrayOfPointsToMultiPoint:cZ,toStringArray:uZ,tick:dZ,binaryOperator:pZ,castAsJson:fZ,castAsJsonAsync:gZ,featureFullDomain:yZ,featureSubtypes:vZ,featureDomainValueLookup:bZ,featureDomainCodeLookup:wZ,featureSchema:_Z});var SZ;let kZ=SZ=class extends tp{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new SZ({minValue:this.minValue,maxValue:this.maxValue})}};bl([Lh({type:Number,json:{write:!0}})],kZ.prototype,"minValue",void 0),bl([Lh({type:Number,json:{write:!0}})],kZ.prototype,"maxValue",void 0),kZ=SZ=bl([md("esri.renderer.support.AuthoringInfoClassBreakInfo")],kZ);const MZ=kZ;var TZ;let EZ=TZ=class extends tp{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new TZ({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ol(this.classBreakInfos)})}};bl([Lh({type:String,json:{write:!0}})],EZ.prototype,"field",void 0),bl([Lh({type:String,json:{write:!0}})],EZ.prototype,"normalizationField",void 0),bl([Lh({type:String,json:{write:!0}})],EZ.prototype,"label",void 0),bl([Lh({type:[MZ],json:{write:!0}})],EZ.prototype,"classBreakInfos",void 0),EZ=TZ=bl([md("esri.renderers.support.AuthoringInfoFieldInfo")],EZ);const IZ=EZ;var CZ;const OZ=new $g({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),AZ=new $g({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),PZ={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},RZ=["high-to-low","above-and-below","centered-on","extremes"],LZ=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],DZ=["seconds","minutes","hours","days","months","years"];let NZ=CZ=class extends tp{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new CZ({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};bl([Lh({types:PZ,json:{write:!0}})],NZ.prototype,"endTime",void 0),bl([Am("endTime")],NZ.prototype,"castEndTime",null),bl([Lh({type:String,json:{write:!0}})],NZ.prototype,"field",void 0),bl([Lh({type:Number,json:{write:!0}})],NZ.prototype,"maxSliderValue",void 0),bl([Lh({type:Number,json:{write:!0}})],NZ.prototype,"minSliderValue",void 0),bl([Lh({types:PZ,json:{write:!0}})],NZ.prototype,"startTime",void 0),bl([Am("startTime")],NZ.prototype,"castStartTime",null),bl([Lh({type:OZ.apiValues,value:null,json:{type:OZ.jsonValues,read:OZ.read,write:OZ.write}})],NZ.prototype,"style",null),bl([Lh({type:LZ,value:null,json:{type:LZ,origins:{"web-scene":{type:RZ,write:{writer:(e,t)=>{RZ.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],NZ.prototype,"theme",null),bl([Lh({type:AZ.apiValues,json:{type:AZ.jsonValues,read:AZ.read,write:AZ.write}})],NZ.prototype,"type",void 0),bl([Lh({type:DZ,json:{type:DZ,write:!0}})],NZ.prototype,"units",void 0),NZ=CZ=bl([md("esri.renderers.support.AuthoringInfoVisualVariable")],NZ);const FZ=NZ;let jZ=class extends tp{constructor(e){super(e),this.type=null}};bl([Lh({readOnly:!0,json:{read:!1,write:!0}})],jZ.prototype,"type",void 0),jZ=bl([md("esri.rest.support.ColorRamp")],jZ);const $Z=jZ;var VZ;let zZ=VZ=class extends $Z{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new VZ({fromColor:ol(this.fromColor),toColor:ol(this.toColor),algorithm:this.algorithm})}};bl([Cb({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],zZ.prototype,"algorithm",void 0),bl([Lh({type:Eb,json:{type:[Ch],write:!0}})],zZ.prototype,"fromColor",void 0),bl([Lh({type:Eb,json:{type:[Ch],write:!0}})],zZ.prototype,"toColor",void 0),bl([Lh({type:["algorithmic"]})],zZ.prototype,"type",void 0),zZ=VZ=bl([md("esri.rest.support.AlgorithmicColorRamp")],zZ);const UZ=zZ;var qZ;let GZ=qZ=class extends $Z{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new qZ({colorRamps:ol(this.colorRamps)})}};bl([Lh({type:[UZ],json:{write:!0}})],GZ.prototype,"colorRamps",void 0),bl([Lh({type:["multipart"]})],GZ.prototype,"type",void 0),GZ=qZ=bl([md("esri.rest.support.MultipartColorRamp")],GZ);const BZ=GZ,WZ={key:"type",base:$Z,typeMap:{algorithmic:UZ,multipart:BZ}};function HZ(e){return e&&e.type?"algorithmic"===e.type?UZ.fromJSON(e):"multipart"===e.type?BZ.fromJSON(e):null:null}var JZ;const YZ=new $g({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ZZ=new $g({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),KZ=new $g({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),XZ=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let QZ=JZ=class extends tp{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return HZ(e)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new JZ({classificationMethod:this.classificationMethod,colorRamp:ol(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:ol(this.field1),field2:ol(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};bl([Lh({type:YZ.apiValues,value:null,json:{type:YZ.jsonValues,read:YZ.read,write:YZ.write,origins:{"web-document":{default:"manual",type:YZ.jsonValues,read:YZ.read,write:YZ.write}}}})],QZ.prototype,"classificationMethod",null),bl([Lh({types:WZ,json:{write:!0}})],QZ.prototype,"colorRamp",void 0),bl([Mm("colorRamp")],QZ.prototype,"readColorRamp",null),bl([Lh({type:[String],value:null,json:{write:!0}})],QZ.prototype,"fields",null),bl([Lh({type:IZ,value:null,json:{write:!0}})],QZ.prototype,"field1",null),bl([Lh({type:IZ,value:null,json:{write:!0}})],QZ.prototype,"field2",null),bl([Lh({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],QZ.prototype,"flowTheme",null),bl([Lh({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],QZ.prototype,"focus",null),bl([Lh({type:Number,value:null,json:{type:Ch,write:!0}})],QZ.prototype,"numClasses",null),bl([Lh({type:XZ,json:{type:XZ,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],QZ.prototype,"lengthUnit",void 0),bl([Lh({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],QZ.prototype,"maxSliderValue",void 0),bl([Lh({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],QZ.prototype,"minSliderValue",void 0),bl([Lh({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],QZ.prototype,"statistics",null),bl([Lh({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],QZ.prototype,"standardDeviationInterval",null),bl([Lh({type:ZZ.apiValues,value:null,json:{type:ZZ.jsonValues,read:ZZ.read,write:ZZ.write,origins:{"web-scene":{type:KZ.jsonValues,write:{writer:KZ.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],QZ.prototype,"type",null),bl([Lh({type:[FZ],json:{write:!0}})],QZ.prototype,"visualVariables",void 0),bl([Lh({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],QZ.prototype,"univariateSymbolStyle",null),bl([Lh({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],QZ.prototype,"univariateTheme",null),QZ=JZ=bl([md("esri.renderers.support.AuthoringInfo")],QZ);const eK=QZ,tK=new $g({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let iK=class extends tp{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};bl([Lh({type:eK,json:{write:!0}})],iK.prototype,"authoringInfo",void 0),bl([Lh({type:tK.apiValues,readOnly:!0,json:{type:tK.jsonValues,read:!1,write:{writer:tK.write,ignoreOrigin:!0}}})],iK.prototype,"type",void 0),iK=bl([md("esri.renderers.Renderer")],iK);const rK=iK;var nK;let oK=nK=class extends tp{constructor(){super(...arguments),this.title=null}clone(){return new nK({title:this.title})}};bl([Lh({type:String,json:{write:!0}})],oK.prototype,"title",void 0),oK=nK=bl([md("esri.renderers.support.LegendOptions")],oK);const sK=oK;var aK;let lK=aK=class extends sK{constructor(){super(...arguments),this.showLegend=null}clone(){return new aK({title:this.title,showLegend:this.showLegend})}};bl([Lh({type:Boolean,json:{write:!0}})],lK.prototype,"showLegend",void 0),lK=aK=bl([md("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],lK);const cK=lK,uK=Dl.getLogger("esri.renderers.visualVariables.VisualVariable"),hK=new $g({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let dK=class extends tp{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(uK.error(".field: field must be a string value"),null):uh(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};bl([Lh()],dK.prototype,"index",void 0),bl([Lh({type:hK.apiValues,readOnly:!0,json:{read:hK.read,write:hK.write}})],dK.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],dK.prototype,"field",void 0),bl([Am("field")],dK.prototype,"castField",null),bl([Lh({type:String,json:{write:!0}})],dK.prototype,"valueExpression",void 0),bl([Lh({type:String,json:{write:!0}})],dK.prototype,"valueExpressionTitle",void 0),bl([Lh({readOnly:!0})],dK.prototype,"arcadeRequired",null),bl([Lh({type:cK,json:{write:!0}})],dK.prototype,"legendOptions",void 0),dK=bl([md("esri.renderers.visualVariables.VisualVariable")],dK);const pK=dK;var fK;let mK=fK=class extends tp{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=null==e?0:e}clone(){return new fK({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};bl([Lh({type:Eb,json:{type:[Ch],write:!0}})],mK.prototype,"color",void 0),bl([Lh({type:String,json:{write:!0}})],mK.prototype,"label",void 0),bl([Lh({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],mK.prototype,"value",void 0),bl([Mf("value")],mK.prototype,"writeValue",null),mK=fK=bl([md("esri.renderers.visualVariables.support.ColorStop")],mK);const gK=mK;var yK;let vK=yK=class extends pK{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new yK({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};bl([Lh({readOnly:!0})],vK.prototype,"cache",null),bl([Lh({type:["color"],json:{type:["colorInfo"]}})],vK.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],vK.prototype,"normalizationField",void 0),bl([Lh({type:[gK],json:{write:!0}})],vK.prototype,"stops",null),vK=yK=bl([md("esri.renderers.visualVariables.ColorVariable")],vK);const bK=vK;var wK;let _K=wK=class extends tp{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Rb(t.transparency)}writeOpacity(e,t,i){t[i]=Pb(e)}clone(){return new wK({label:this.label,opacity:this.opacity,value:this.value})}};bl([Lh({type:String,json:{write:!0}})],_K.prototype,"label",void 0),bl([Lh({type:Number,json:{type:Ch,write:{target:"transparency"}}})],_K.prototype,"opacity",void 0),bl([Mm("opacity",["transparency"])],_K.prototype,"readOpacity",null),bl([Mf("opacity")],_K.prototype,"writeOpacity",null),bl([Lh({type:Number,json:{write:!0}})],_K.prototype,"value",void 0),_K=wK=bl([md("esri.renderers.visualVariables.support.OpacityStop")],_K);const xK=_K;var SK;let kK=SK=class extends pK{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new SK({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};bl([Lh({readOnly:!0})],kK.prototype,"cache",null),bl([Lh({type:["opacity"],json:{type:["transparencyInfo"]}})],kK.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],kK.prototype,"normalizationField",void 0),bl([Lh({type:[xK],json:{write:!0}})],kK.prototype,"stops",null),kK=SK=bl([md("esri.renderers.visualVariables.OpacityVariable")],kK);const MK=kK;var TK;let EK=TK=class extends pK{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const e=`visualVariables[${this.index}]`;r.messages.push(new Ac("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:r}))}}clone(){return new TK({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};bl([Lh({readOnly:!0})],EK.prototype,"cache",null),bl([Lh({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],EK.prototype,"axis",void 0),bl([Lh({type:["rotation"],json:{type:["rotationInfo"]}})],EK.prototype,"type",void 0),bl([Lh({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],EK.prototype,"rotationType",void 0),bl([Lh({type:String,json:{write:!0}})],EK.prototype,"valueExpressionTitle",void 0),bl([Mf("web-scene","valueExpressionTitle")],EK.prototype,"writeValueExpressionTitleWebScene",null),EK=TK=bl([md("esri.renderers.visualVariables.RotationVariable")],EK);const IK=EK;var CK;let OK=CK=class extends tp{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new CK({label:this.label,size:this.size,value:this.value})}};bl([Lh({type:String,json:{write:!0}})],OK.prototype,"label",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],OK.prototype,"size",void 0),bl([Lh({type:Number,json:{write:!0}})],OK.prototype,"value",void 0),OK=CK=bl([md("esri.renderers.visualVariables.support.SizeStop")],OK);const AK=OK;var PK;let RK=PK=class extends cK{constructor(){super(...arguments),this.customValues=null}clone(){return new PK({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};bl([Lh({type:[Number],json:{write:!0}})],RK.prototype,"customValues",void 0),RK=PK=bl([md("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],RK);const LK=RK;var DK,NK;function FK(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function jK(e){return null!=e&&!isNaN(e)&&isFinite(e)}function $K(e){return e.valueExpression?DK.Expression:e.field&&"string"==typeof e.field?DK.Field:DK.Unknown}!function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(DK||(DK={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(NK||(NK={}));const VK={inches:xO(1,"meters","inches"),feet:xO(1,"meters","feet"),"us-feet":xO(1,"meters","us-feet"),yards:xO(1,"meters","yards"),miles:xO(1,"meters","miles"),"nautical-miles":xO(1,"meters","nautical-miles"),millimeters:xO(1,"meters","millimeters"),centimeters:xO(1,"meters","centimeters"),decimeters:xO(1,"meters","decimeters"),meters:xO(1,"meters","meters"),kilometers:xO(1,"meters","kilometers"),"decimal-degrees":1/function(e,t,i){return xO(e,t,"meters")/(i*Math.PI/180)}(1,"meters",Rm.radius)},zK=Dl.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),UK=new HI,qK=Math.PI,GK=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function BK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void zK.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n="number"==typeof t,o=n?null:t,s=o&&o.attributes;let a=n?t:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let h=r.cache.compiledFunc;if(!l&&!u){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof a)if(u){if(!_a(i)||!_a(i.arcade))return void zK.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(o,n);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}a=t.executeFunction(h,s)}else s&&(a=s[l]);const d=r.normalizationField,p=s?parseFloat(s[d]):void 0;if(null!=a&&(!d||n||!isNaN(p)&&0!==p)){isNaN(p)||n||(a/=p);const e=QK(a,c);if(e){const t=e[0],n=e[1],o=t===n?r.stops[t].color:Eb.blendColors(r.stops[t].color,r.stops[n].color,e[2],_a(i)?i.color:void 0);return new Eb(o)}}}function WK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void zK.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof t,o=n?null:t,s=o&&o.attributes;let a=n?t:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let h=r.cache.compiledFunc;if(!l&&!u){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof a)if(u){if(xa(i)||xa(i.arcade))return void zK.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(o,n);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}a=t.executeFunction(h,s)}else s&&(a=s[l]);const d=r.normalizationField,p=s?parseFloat(s[d]):void 0;if(null!=a&&(!d||n||!isNaN(p)&&0!==p)){isNaN(p)||n||(a/=p);const e=QK(a,c);if(e){const t=e[0],i=e[1];if(t===i)return r.stops[t].opacity;{const n=r.stops[t].opacity;return n+(r.stops[i].opacity-n)*e[2]}}}}function HK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void zK.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",o="heading"===n&&"arithmetic"===r.rotationType?90:0,s="heading"===n&&"arithmetic"===r.rotationType?-1:1,a="number"==typeof t?null:t,l=a&&a.attributes,c=r.field,{hasExpression:u}=r.cache;let h=r.cache.compiledFunc,d=0;if(!c&&!u)return d;if(u){if(xa(i)||xa(i.arcade))return void zK.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,n=t.getViewInfo(e),o=t.createExecContext(a,n);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}d=t.executeFunction(h,o)}else l&&(d=l[c]||0);return d="number"!=typeof d||isNaN(d)?null:o+s*d,d}function JK(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void zK.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=KK(function(e,t,i){const r="number"==typeof t,n=r?null:t,o=n&&n.attributes;let s=r?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const t=_a(i)?i.scale:void 0,r=_a(i)?i.view:void 0;s=null==t||"3d"===r?function(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!r)switch(e.inputValueType){case DK.Expression:{if(xa(i)||xa(i.arcade))return void zK.error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,o=r.getViewInfo(t),a=r.createExecContext(n,o);if(!l){const t=r.createSyntaxTree(e.valueExpression);l=r.createFunction(t),e.cache.compiledFunc=l}s=r.executeFunction(l,a);break}case DK.Field:o&&(s=o[e.field]);break;case DK.Unknown:s=null}if(!jK(s))return null;if(r||!e.normalizationField)return s;const c=o?parseFloat(o[e.normalizationField]):null;return jK(c)&&0!==c?s/c:null}(r,t,i),r,t,i,r.cache.ipData);return null==n||isNaN(n)?0:n}function YK(e,t,i){return null==e?null:FK(e)?JK(e,t,i):jK(e)?e:null}function ZK(e,t,i){return jK(i)&&e>i?i:jK(t)&&e<t?t:e}function KK(e,t,i,r,n){switch(t.transformationType){case NK.Additive:return function(e,t,i,r){return e+(YK(t.minSize,i,r)||t.minDataValue)}(e,t,i,r);case NK.Constant:return function(e,t,i){const r=e.stops;let n=r&&r.length&&r[0].size;return null==n&&(n=e.minSize),YK(n,t,i)}(t,i,r);case NK.ClampedLinear:return function(e,t,i,r){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=YK(t.minSize,i,r),s=YK(t.maxSize,i,r),a=_a(r)?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&a){const e="circle"===a,t=e?qK*(o/2)**2:o*o,i=t+n*((e?qK*(s/2)**2:s*s)-t);return e?2*Math.sqrt(i/qK):Math.sqrt(i)}return o+n*(s-o)}(e,t,i,r);case NK.Proportional:return function(e,t,i,r){const n=_a(r)?r.shape:void 0,o=e/t.minDataValue,s=YK(t.minSize,i,r),a=YK(t.maxSize,i,r);let l=null;return l="circle"===n?2*Math.sqrt(o*(s/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(o*s**2):o*s,ZK(l,s,a)}(e,t,i,r);case NK.Stops:return function(e,t,i,r,n){const[o,s,a]=QK(e,n);if(o===s)return YK(t.stops[o].size,i,r);{const e=YK(t.stops[o].size,i,r);return e+(YK(t.stops[s].size,i,r)-e)*a}}(e,t,i,r,n);case NK.RealWorldSize:return function(e,t,i,r){const n=(_a(r)&&r.resolution?r.resolution:1)*VK[t.valueUnit],o=YK(t.minSize,i,r),s=YK(t.maxSize,i,r),{valueRepresentation:a}=t;let l=null;return l="area"===a?2*Math.sqrt(e/qK)/n:"radius"===a||"distance"===a?2*e/n:e/n,ZK(l,o,s)}(e,t,i,r);case NK.Identity:return e;case NK.Unknown:return null}}function XK(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===i||t))return null;const n={scale:t,view:i};let o=YK(e.minSize,UK,n),s=YK(e.maxSize,UK,n);if(null!=o||null!=s){if(o>s){const e=s;s=o,o=e}return{minSize:o,maxSize:s}}}function QK(e,t){if(!t)return;let i=0,r=t.length-1;return t.some(((t,n)=>e<t?(r=n,!0):(i=n,!1))),[i,r,(e-t[i])/(t[r]-t[i])]}function eX(e,t,i){const r=["proportional","proportional","proportional"];for(const n of e){const e=n.useSymbolValue?"symbol-value":JK(n,t,i);switch(n.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:n.axis}}return r}var tX,iX=Object.freeze({__proto__:null,getAllSizes:eX,getColor:BK,getOpacity:WK,getRotationAngle:HK,getSize:JK,getSizeForValue:KK,getSizeFromNumberOrVariable:YK,getSizeRangeAtScale:XK,getVisualVariableValues:function(e,t,i){if(!e.visualVariables)return;const r=[],n=[],o=[],s=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":n.push(t);break;case"opacity":o.push(t);break;case"rotation":a.push(t);break;case"size":s.push(t)}return n.forEach((e=>{const n=BK(e,t,i);r.push({variable:e,value:n})})),o.forEach((e=>{const n=WK(e,t,i);r.push({variable:e,value:n})})),a.forEach((e=>{const n=HK(e,t,i);r.push({variable:e,value:n})})),s.forEach((e=>{const n=JK(e,t,i);r.push({variable:e,value:n})})),r.filter((e=>null!=e.value))},viewScaleRE:GK});const rX=Dl.getLogger("esri.renderers.visualVariables.SizeVariable"),nX=new $g({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),oX=new $g({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function sX(e){if(null!=e)return"string"==typeof e||"number"==typeof e?Pk(e):"size"===e.type?FK(e)?e:(delete(e={...e}).type,new lX(e)):void 0}function aX(e,t,i){if("object"!=typeof e)return e;const r=new lX;return r.read(e,i),r}let lX=tX=class extends pK{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:GK.test(this.valueExpression)}}set expression(e){rX.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){FK(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),FK(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return $K(this)}set maxDataValue(e){e&&this.stops&&(rX.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(rX.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return sX(e)}readMaxSize(e,t,i){return aX(e,0,i)}set minDataValue(e){e&&this.stops&&(rX.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(rX.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return sX(e)}readMinSize(e,t,i){return aX(e,0,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(rX.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return function(e,t){const i=t||$K(e),r=e.valueUnit||"unknown";return i===DK.Unknown?NK.Constant:e.stops?NK.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?NK.ClampedLinear:"unknown"===r?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?NK.Proportional:NK.Additive:NK.Identity:NK.RealWorldSize}(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if("$view.scale"===e){if(r&&r.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;r.messages.push(new Ac("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?oX.read(e):null}clone(){return new tX({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:FK(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:FK(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===NK.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===NK.Stops){const e=this.stops,t=e.map((e=>e.size)).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};bl([Lh({readOnly:!0})],lX.prototype,"cache",null),bl([Lh({type:nX.apiValues,json:{type:nX.jsonValues,origins:{"web-map":{read:!1}},read:nX.read,write:nX.write}})],lX.prototype,"axis",void 0),bl([Lh({type:String,value:null,json:{read:!1}})],lX.prototype,"expression",null),bl([Lh()],lX.prototype,"index",null),bl([Lh({type:String,readOnly:!0})],lX.prototype,"inputValueType",null),bl([Lh({type:LK,json:{write:!0}})],lX.prototype,"legendOptions",void 0),bl([Lh({type:Number,value:null,json:{write:!0}})],lX.prototype,"maxDataValue",null),bl([Lh({type:Number,value:null,json:{write:!0}})],lX.prototype,"maxSize",null),bl([Am("maxSize")],lX.prototype,"castMaxSize",null),bl([Mm("maxSize")],lX.prototype,"readMaxSize",null),bl([Lh({type:Number,value:null,json:{write:!0}})],lX.prototype,"minDataValue",null),bl([Lh({type:Number,value:null,json:{write:!0}})],lX.prototype,"minSize",null),bl([Am("minSize")],lX.prototype,"castMinSize",null),bl([Mm("minSize")],lX.prototype,"readMinSize",null),bl([Lh({type:String,json:{write:!0}})],lX.prototype,"normalizationField",void 0),bl([Lh({readOnly:!0})],lX.prototype,"arcadeRequired",null),bl([Lh({type:String})],lX.prototype,"scaleBy",void 0),bl([Lh({type:[AK],value:null,json:{write:!0}})],lX.prototype,"stops",null),bl([Lh({type:["outline"],json:{write:!0}})],lX.prototype,"target",void 0),bl([Lh({type:String,readOnly:!0})],lX.prototype,"transformationType",null),bl([Lh({type:["size"],json:{type:["sizeInfo"]}})],lX.prototype,"type",void 0),bl([Lh({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],lX.prototype,"useSymbolValue",void 0),bl([Lh({type:String,json:{write:!0}})],lX.prototype,"valueExpression",void 0),bl([Mm("valueExpression",["valueExpression","expression"])],lX.prototype,"readValueExpression",null),bl([Mf("web-scene","valueExpression")],lX.prototype,"writeValueExpressionWebScene",null),bl([Lh({type:["radius","diameter","area","width","distance"],json:{write:!0}})],lX.prototype,"valueRepresentation",void 0),bl([Lh({type:oX.apiValues,json:{write:oX.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],lX.prototype,"valueUnit",void 0),bl([Mm("valueUnit")],lX.prototype,"readValueUnit",null),lX=tX=bl([md("esri.renderers.visualVariables.SizeVariable")],lX);const cX=lX,uX=Dl.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),hX={color:bK,size:cX,opacity:MK,rotation:IK},dX=new $g({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),pX=/^\[([^\]]+)\]$/i;let fX=class extends vd{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter((e=>!!e)))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let i=null;return i=e.target===t.target?0:e.target?1:-1,i}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:n}=t,o=r&&r.match(pX),s=o&&o[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:s})),e)return e.map((e=>{const t=dX.read(e.type),r=hX[t];r||(uX.warn(`Unknown variable type: ${t}`),i&&i.messages&&i.messages.push(new Fh("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:i})));const n=new r;return n.read(e,i),n}))}writeVariables(e,t){const i=[];for(const r of e){const e=r.toJSON(t);e&&i.push(e)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};bl([Lh()],fX.prototype,"visualVariables",null),fX=bl([md("esri.renderers.visualVariables.VisualVariableFactory")],fX);const mX=fX,gX={base:pK,key:"type",typeMap:{opacity:MK,color:bK,rotation:IK,size:cX}},yX=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new mX}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,i){return this._vvFactory.readVariables(e,t,i)}writeVisualVariables(e,t,i,r){t[i]=this._vvFactory.writeVariables(e,r)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){const i=this.visualVariables;return i?i.filter((i=>i.type===e&&("string"==typeof t?i.target===t:!1!==t||!i.target))):[]}async collectVVRequiredFields(e,t){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const r of i)r&&(r.field&&V_(e,t,r.field),r.normalizationField&&V_(e,t,r.normalizationField),r.valueExpression&&await U_(e,t,r.valueExpression))}};return bl([Lh({types:[gX],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),bl([Mm("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),bl([Mf("visualVariables")],t.prototype,"writeVisualVariables",null),t=bl([md("esri.renderers.mixins.VisualVariablesMixin")],t),t},vX={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function bX(e,t,i,r){const n=_X(e,{},{context:r,isLabelSymbol:!1});_a(n)&&(t[i]=n)}function wX(e,t,i,r){const n=_X(e,{},{context:r,isLabelSymbol:!0});_a(n)&&(t[i]=n)}function _X(e,t,i){if(xa(e))return null;const{context:r,isLabelSymbol:n}=i;if(r&&"web-scene"===r.origin&&!(e instanceof IE)&&!(e instanceof LI)){const i=function(e,t=vX){if(!e)return{symbol:null};const{retainId:i=vX.retainId,ignoreDrivers:r=vX.ignoreDrivers,hasLabelingContext:n=vX.hasLabelingContext,retainCIM:o=vX.retainCIM}=t;let s;if(NI(e)||e instanceof LI)s=e.clone();else if("cim"===e.type){var a,l;const t=null==(a=e.data)||null==(l=a.symbol)?void 0:l.type;if("CIMPointSymbol"!==t)return{error:new Ac("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${t||"unknown"}' is unsupported in 3D`,{symbol:e})};s=o?e.clone():fI.fromCIMSymbol(e)}else if(e instanceof oM)s=YE.fromSimpleLineSymbol(e);else if(e instanceof EI)s=fI.fromSimpleMarkerSymbol(e);else if(e instanceof uI)s=fI.fromPictureMarkerSymbol(e);else if(e instanceof SI)s=bI.fromSimpleFillSymbol(e);else{if(!(e instanceof OI))return{error:new Ac("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};s=n?GE.fromTextSymbol(e):fI.fromTextSymbol(e)}if(i&&"cim"!==s.type&&(s.id=e.id),r&&NI(s))for(let e=0;e<s.symbolLayers.length;++e)s.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:s}}(e,{retainCIM:!0,hasLabelingContext:n});return _a(i.symbol)?i.symbol.write(t,r):(r.messages&&r.messages.push(new Ac("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:i.error})),null)}return r&&"web-map"===r.origin&&"web-style"===e.type?(r.messages&&r.messages.push(new Ac("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null):e.write(t,r)}function xX(e,t){return $I(e,null,t)}const SX={types:VI,json:{write:{writer:bX},origins:{"web-scene":{types:UI,write:{writer:bX},read:{reader:zh({types:UI})}}}}},kX={types:{base:Sk,key:"type",typeMap:{"simple-fill":FI.typeMap["simple-fill"],"picture-fill":FI.typeMap["picture-fill"],"polygon-3d":FI.typeMap["polygon-3d"]}},json:{write:{writer:bX},origins:{"web-scene":{type:bI,write:{writer:bX}}}}};var MX;let TX=MX=class extends tp{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new MX({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};bl([Lh({type:String,json:{write:!0}})],TX.prototype,"description",void 0),bl([Lh({type:String,json:{write:!0}})],TX.prototype,"label",void 0),bl([Lh({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],TX.prototype,"minValue",void 0),bl([Lh({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],TX.prototype,"maxValue",void 0),bl([Lh(SX)],TX.prototype,"symbol",void 0),TX=MX=bl([md("esri.renderers.support.ClassBreakInfo")],TX);const EX=TX;var IX;const CX=Dl.getLogger("esri.renderers.ClassBreaksRenderer"),OX="percent-of-total",AX="field",PX=new $g({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:OX,esriNormalizeByField:AX}),RX=xh(EX);let LX=IX=class extends(yX(rK)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map((e=>{const t=new EX;return t.read(e,i),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}writeClassBreakInfos(e,t,i,r){const n=e.map((e=>e.write({},r)));this._areClassBreaksConsecutive()&&n.forEach((e=>delete e.classMinValue)),t[i]=n}castField(e){return null==e?e:"function"==typeof e?(CX.error(".field: field must be a string value"),null):uh(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=(t?AX:i&&OX)||null,t&&i&&CX.warn("warning: both normalizationField and normalizationTotal are set!")):e!==AX&&e!==OX||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r="number"==typeof e?new EX({minValue:e,maxValue:t,symbol:GI(i)}):RX(ol(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(xa(t)||xa(t.arcade))&&CX.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(xa(t)||xa(t.arcade))&&(i={...i,arcade:await I_()});const r=this.getBreakIndex(e,i);return-1!==r?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(xa(t)||xa(t.arcade)))return void CX.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(xa(t)||xa(t.arcade))){const e=await I_(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new IX({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ol(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ol(this.visualVariables),legendOptions:ol(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),U_(e,t,this.valueExpression)];V_(e,t,this.field),V_(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=Ea(t,{});let s=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=o.arcadeUtils;if(!s){const e=a.createSyntaxTree(this.valueExpression);s=a.createFunction(e),this._compiledValueExpression.compiledFunction=s}this._compiledValueExpression.valueExpression=this.valueExpression;const l=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._getBreakIndexfromInfos(l)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let n=parseFloat(i[t]);if(r){const e=this.normalizationTotal,t=parseFloat(i[this.normalizationField]);if("log"===r)n=Math.log(n)*Math.LOG10E;else if(r!==OX||isNaN(e)){if(r===AX&&!isNaN(t)){if(isNaN(n)||isNaN(t))return-1;n/=t}}else n=n/e*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};bl([Lh(kX)],LX.prototype,"backgroundFillSymbol",void 0),bl([Lh({type:[EX]})],LX.prototype,"classBreakInfos",void 0),bl([Mm("classBreakInfos")],LX.prototype,"readClassBreakInfos",null),bl([Mf("classBreakInfos")],LX.prototype,"writeClassBreakInfos",null),bl([Lh({type:String,json:{write:!0}})],LX.prototype,"defaultLabel",void 0),bl([Lh(SX)],LX.prototype,"defaultSymbol",void 0),bl([Lh({type:String,json:{write:!0}})],LX.prototype,"field",void 0),bl([Am("field")],LX.prototype,"castField",null),bl([Lh({type:Boolean})],LX.prototype,"isMaxInclusive",void 0),bl([Lh({type:sK,json:{write:!0}})],LX.prototype,"legendOptions",void 0),bl([Lh({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],LX.prototype,"minValue",null),bl([Lh({type:String,json:{write:!0}})],LX.prototype,"normalizationField",void 0),bl([Lh({type:Number,cast:e=>hh(e),json:{write:!0}})],LX.prototype,"normalizationTotal",void 0),bl([Lh({type:PX.apiValues,value:null,json:{type:PX.jsonValues,read:PX.read,write:PX.write}})],LX.prototype,"normalizationType",null),bl([Cb({classBreaks:"class-breaks"})],LX.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],LX.prototype,"valueExpression",void 0),bl([Lh({type:String,json:{write:!0}})],LX.prototype,"valueExpressionTitle",void 0),LX=IX=bl([md("esri.renderers.ClassBreaksRenderer")],LX);const DX=LX;var NX;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(NX||(NX={}));class FX{constructor(e,t,i){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this._namespace+e,t,i,r)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,i){this._storage.updateSize(this._namespace+e,t,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class jX{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new jc,this._users=new jc}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,i,r){const n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemove(e,n.entry,NX.ALL)),i>this._maxSize)return void this._notifyRemove(e,t,NX.ALL);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const o=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:i,lifetime:o,lives:o}),this._size+=i,this._checkSizeLimit()}updateSize(e,t,i){const r=this._db.get(e);if(r&&r.entry===t){for(this._size-=r.size;i>this._maxSize;){const r=this._notifyRemove(e,t,NX.SOME);if(!(_a(r)&&r>0))return void this._db.delete(e);i=r}r.size=i,this._size+=i,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const n=i.namespace;if(r.startsWith(n)){const i=t[n]||0;t[n]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const n=Object.keys(t);n.sort(((e,i)=>t[i]-t[e])),n.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let t=i.length-1;t>=0;--t){const r=i[t];r&&(e["Priority "+(t+-3-1)]=Math.round(r/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,NX.ALL))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,NX.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i){let r;return this._removeFuncs.some((n=>{if(e.startsWith(n[0])){const e=n[1](t,i);return"number"==typeof e&&(r=e),!0}return!1})),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db){if(this._db.delete(e),t.lives<=1){this._size-=t.size;const i=this._notifyRemove(e,t.entry,NX.SOME);_a(i)&&i>0&&(this._size+=i,t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t);if(this._size<=.9*this.maxSize)return}}}class $X{constructor(e,t){this._storage=new jX,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,i){this._storage.put(e,t,i,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}const VX=Dl.getLogger("esri.renderers.support.DictionaryLoader"),zX={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class UX{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new $X(100),this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{i=await this._dictionaryPromise}catch(e){if(ru(e))return this._dictionaryPromise=null,null}const r={};if(this.fieldMap)for(const t of this._symbolFields){const i=this.fieldMap[t];if(i&&null!=e.attributes[i]){const n=""+e.attributes[i];r[t]=n}else r[t]=""}const n=i(r,t);if(!n||"string"!=typeof n)return null;const o=Pl(n).toString(),s=this._symbolCache.get(o);if(s)return s.catch((()=>{this._symbolCache.pop(o)})),s;const a=n.split(";"),l=[],c=[];for(const e of a)if(e)if(e.includes("po:")){const t=e.substr(3).split("|");if(3===t.length){const e=t[0],i=t[1];let r=t[2];if("DashTemplate"===i)r=r.split(" ").map((e=>Number(e)));else if("Color"===i){const e=new Eb(r).toRgba();r=[e[0],e[1],e[2],255*e[3]]}else r=Number(r);c.push({primitiveName:e,propertyName:i,value:r})}}else if(e.includes("|")){for(const t of e.split("|"))if(this._itemNames.has(t)){l.push(t);break}}else this._itemNames.has(e)&&l.push(e);const u=!_a(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,h=this._cimPartsToCIMSymbol(l,c,u,t);return this._symbolCache.put(o,h,1),h}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void VX.error("no valid URL!");const t=_a(e)?e.abortOptions:null,i=am(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...t}),[{data:r}]=await Promise.all([i,I_()]);if(!r)throw this._dictionaryPromise=null,new Ac("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=r.expression,o=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=o.symbol;const s={};if(this.config){const e=this.config;for(const t in e)s[t]=e[t]}if(o.configuration)for(const e of o.configuration)s.hasOwnProperty(e.name)||(s[e.name]=e.value);const a=[];if(_a(e)&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const i=this.fieldMap[t],r=e.fields.filter((e=>e.name===i));r.length>0&&a.push({...r[0],name:t})}return this._dictionaryPromise=((e,t,i,r)=>A_.create(e,t,i,r,["$feature","$view"]))(n,_a(e)?e.spatialReference:null,a,s).then((e=>{const t={scale:0};return(i,r)=>{const n=e.repurposeFeature({geometry:null,attributes:i});return t.scale=_a(r)?r.scale:void 0,e.evaluate({$feature:n,$view:t})}})).catch((e=>(VX.error("Creating dictinoary expression failed:",e),null))),this._dictionaryPromise}async _cimPartsToCIMSymbol(e,t,i,r){const n=new Array(e.length);for(let t=0;t<e.length;t++)n[t]=this._getSymbolPart(e[t],r);const o=await Promise.all(n),s=this.fieldMap;for(const e of o)qX(e,s);return new Tk({data:this._combineSymbolParts(o,t,i)})}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const i=am(this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,i);try{return(await i).data}catch(t){return this._ongoingRequests.delete(e),Promise.reject(t)}}_combineSymbolParts(e,t,i){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const t of e){const e=t;r.symbolLayers.unshift(...e.symbolLayers)}}return i&&(r.callout=zX),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}}function qX(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const e=i[r];e&&!1!==e.enable&&"CIMVectorMarker"===e.type&&GX(e,t)}}function GX(e,t){const i=e.markerGraphics;if(i)for(const e of i){if(!e)continue;const i=e.symbol;if(i)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":qX(i,t);break;case"CIMTextSymbol":i.fieldMap=t}}}var BX,WX=Object.freeze({__proto__:null,DictionaryLoader:UX});let HX=BX=class extends(yX(rK)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new UX(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){null!=r&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new BX({config:ol(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ol(this.fieldMap),url:ol(this.url),visualVariables:ol(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await U_(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};bl([Lh({type:UX})],HX.prototype,"_loader",null),bl([Lh({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],HX.prototype,"config",void 0),bl([Lh({type:Object,json:{write:!0}})],HX.prototype,"fieldMap",void 0),bl([Lh({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],HX.prototype,"scaleExpression",void 0),bl([Mf("scaleExpression")],HX.prototype,"writeData",null),bl([Lh({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],HX.prototype,"scaleExpressionTitle",void 0),bl([Lh({type:String,json:{write:!0}})],HX.prototype,"url",void 0),bl([Mf("visualVariables")],HX.prototype,"writeVisualVariables",null),HX=BX=bl([md("esri.renderers.DictionaryRenderer")],HX);const JX=HX;var YX;const ZX=Dl.getLogger("esri.renderers.support.AttributeColorInfo");let KX=YX=class extends tp{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(ZX.error(".field: field must be a string value"),null):uh(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new YX({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};bl([Lh({type:Eb,json:{type:[Number],write:!0}})],KX.prototype,"color",void 0),bl([Lh({type:String,json:{write:!0}})],KX.prototype,"field",void 0),bl([Am("field")],KX.prototype,"castField",null),bl([Lh({type:String,json:{write:!0}})],KX.prototype,"label",void 0),bl([Lh({type:String,json:{write:!0}})],KX.prototype,"valueExpression",void 0),bl([Lh({type:String,json:{write:!0}})],KX.prototype,"valueExpressionTitle",void 0),KX=YX=bl([md("esri.renderers.support.AttributeColorInfo")],KX);const XX=KX;var QX;let eQ=QX=class extends tp{constructor(){super(...arguments),this.unit=null}clone(){return new QX({unit:this.unit})}};bl([Lh({type:String,json:{write:!0}})],eQ.prototype,"unit",void 0),eQ=QX=bl([md("esri.renderers.support.DotDensityLegendOptions")],eQ);const tQ=eQ;var iQ;let rQ=iQ=class extends(yX(rK)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Eb([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new oM,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new SI({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new iQ({attributes:ol(this.attributes),backgroundColor:ol(this.backgroundColor),dotBlendingEnabled:ol(this.dotBlendingEnabled),dotShape:ol(this.dotShape),dotSize:ol(this.dotSize),dotValue:ol(this.dotValue),legendOptions:ol(this.legendOptions),outline:ol(this.outline),referenceScale:ol(this.referenceScale),visualVariables:ol(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await U_(e,t,i.valueExpression),i.field&&e.add(i.field)}};bl([Lh({type:[XX],json:{write:!0}})],rQ.prototype,"attributes",void 0),bl([Lh({type:Eb,json:{write:!0}})],rQ.prototype,"backgroundColor",void 0),bl([Lh({type:Boolean}),gD("dotBlendingEnabled")],rQ.prototype,"blendDots",void 0),bl([Lh({type:Boolean,json:{write:!0}})],rQ.prototype,"dotBlendingEnabled",void 0),bl([Lh({type:String,json:{write:!1}})],rQ.prototype,"dotShape",void 0),bl([Lh({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],rQ.prototype,"dotSize",void 0),bl([Lh({type:tQ,json:{write:!0}})],rQ.prototype,"legendOptions",void 0),bl([Lh({type:oM,json:{default:null,write:!0}})],rQ.prototype,"outline",void 0),bl([Lh({type:Number,json:{write:!0}})],rQ.prototype,"dotValue",void 0),bl([Lh({type:Number}),gD("dotValue")],rQ.prototype,"referenceDotValue",void 0),bl([Lh({type:Number,json:{write:!0}})],rQ.prototype,"referenceScale",void 0),bl([Lh({type:Number,json:{write:!0}})],rQ.prototype,"seed",void 0),bl([Cb({dotDensity:"dot-density"})],rQ.prototype,"type",void 0),rQ=iQ=bl([md("esri.renderers.DotDensityRenderer")],rQ);const nQ=rQ;var oQ;let sQ=oQ=class extends tp{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new oQ({color:this.color,ratio:this.ratio})}};bl([Lh({type:Eb,json:{write:!0}})],sQ.prototype,"color",void 0),bl([Lh({type:Number,json:{write:!0}})],sQ.prototype,"ratio",void 0),sQ=oQ=bl([md("esri.renderers.support.HeatmapColorStop")],sQ);const aQ=sQ;var lQ;let cQ=lQ=class extends rK{constructor(e){super(e),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new aQ({ratio:0,color:new Eb("rgba(255, 140, 0, 0)")}),new aQ({ratio:.75,color:new Eb("rgba(255, 140, 0, 1)")}),new aQ({ratio:.9,color:new Eb("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const i=this.field;i&&"string"==typeof i&&V_(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new lQ({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:ol(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};bl([Lh({type:Number,json:{write:!0}})],cQ.prototype,"blurRadius",void 0),bl([Lh({type:Number})],cQ.prototype,"referenceScale",void 0),bl([Lh({type:[aQ],json:{write:!0}})],cQ.prototype,"colorStops",void 0),bl([Lh({type:String,json:{write:!0}})],cQ.prototype,"field",void 0),bl([Lh({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:null==i})}}})],cQ.prototype,"fieldOffset",void 0),bl([Lh({type:Number,json:{write:!0}})],cQ.prototype,"maxPixelIntensity",void 0),bl([Lh({type:Number,json:{write:!0}})],cQ.prototype,"minPixelIntensity",void 0),bl([Cb({heatmap:"heatmap"})],cQ.prototype,"type",void 0),cQ=lQ=bl([md("esri.renderers.HeatmapRenderer")],cQ);const uQ=cQ;var hQ;let dQ=hQ=class extends(yX(rK)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((i=>i.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new hQ({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ol(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};bl([Lh({type:String,json:{write:!0}})],dQ.prototype,"description",void 0),bl([Lh({type:String,json:{write:!0}})],dQ.prototype,"label",void 0),bl([Lh(SX)],dQ.prototype,"symbol",void 0),bl([Cb({simple:"simple"})],dQ.prototype,"type",void 0),dQ=hQ=bl([md("esri.renderers.SimpleRenderer")],dQ);const pQ=dQ,fQ=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function mQ(e){return e instanceof vd}function gQ(e){return e instanceof Fd?Object.keys(e.items):mQ(e)?jl(e).keys():e?Object.keys(e):[]}function yQ(e,t){return e instanceof Fd?e.items[t]:e[t]}function vQ(e){return e?e.declaredClass:null}function bQ(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const r=gQ(e),n=gQ(t);if(0===r.length&&0===n.length)return;if(!r.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter((e=>-1===r.indexOf(e))),s=r.filter((e=>-1===n.indexOf(e))),a=r.filter((i=>n.indexOf(i)>-1&&yQ(e,i)!==yQ(t,i))).concat(o,s).sort(),l=vQ(e);if(l&&fQ.indexOf(l)>-1&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const u=mQ(e)&&mQ(t);for(const r of a){const n=yQ(e,r),o=yQ(t,r);let s;(u||"function"!=typeof n&&"function"!=typeof o)&&n!==o&&(null==n&&null==o||(s=i&&i[r]&&"function"==typeof i[r]?i[r](n,o):"object"==typeof n&&"object"==typeof o&&vQ(n)===vQ(o)?bQ(n,o):{type:"complete",oldValue:n,newValue:o},_a(s)&&(_a(c)?c.diff[r]=s:c={type:"partial",diff:{[r]:s}})))}return c}function wQ(e,t){if(xa(e))return!1;const i=t.split(".");let r=e;for(const e of i){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}function _Q(e,t){for(const i of t)if(wQ(e,i))return!0;return!1}function xQ(e,t){if(!("function"==typeof e||"function"==typeof t||xa(e)&&xa(t)))return xa(e)||xa(t)||"object"==typeof e&&"object"==typeof t&&vQ(e)!==vQ(t)?{type:"complete",oldValue:e,newValue:t}:bQ(e,t)}var SQ;let kQ=SQ=class extends tp{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return null==e||"string"==typeof e||"number"==typeof e?e:`${e}`}clone(){return new SQ({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};bl([Lh({type:String,json:{write:!0}})],kQ.prototype,"description",void 0),bl([Lh({type:String,json:{write:!0}})],kQ.prototype,"label",void 0),bl([Lh(SX)],kQ.prototype,"symbol",void 0),bl([Lh({json:{type:String,write:{writer:(e,t)=>{t.value=null==e?void 0:e.toString()}}}})],kQ.prototype,"value",void 0),bl([Am("value")],kQ.prototype,"castValue",null),kQ=SQ=bl([md("esri.renderers.support.UniqueValueInfo")],kQ);const MQ=kQ,TQ={};function EQ(e,t,i){const r=t&&t.portal||sy.getDefault();let n;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return TQ[o]||(TQ[o]=function(e,t,i){return t.load(i).then((()=>{const r=new Gg({disableExtraQuery:!0,query:`owner:${PQ} AND type:${RQ} AND typekeywords:"${e}"`});return t.queryItems(r,i)})).then((({results:t})=>{let r=null;const n=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===n))&&e.type===RQ&&e.owner===PQ){r=e;break}if(!r)throw new Ac("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return r.load(i)}))}(e,r,i).then((e=>(n=e,e.fetchData()))).then((t=>({data:t,baseUrl:n.itemUrl,styleName:e})))),TQ[o]}function IQ(e,t,i){return e.styleUrl?async function(e,t){try{return{data:(await AQ(e,t)).data,baseUrl:pf(e),styleUrl:e}}catch(e){return Xc(e),null}}(e.styleUrl,i):e.styleName?EQ(e.styleName,t,i):Promise.reject(new Ac("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function CQ(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function OQ(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!wa("enable-feature:force-wosr"))for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}function AQ(e,t){const i={responseType:"json",query:{f:"json"},...t};return am(Jp(e),i)}const PQ="esri_en",RQ="Style",LQ="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var DQ;const NQ=Dl.getLogger("esri.renderers.UniqueValueRenderer"),FQ=xh(MQ);let jQ=DQ=class extends(yX(rK)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let i=!1;const r={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<t.length;n++){const o=e.find((e=>e.value===t[n].value));o?xQ(o,t[n])?(r.changed.push({type:"complete",oldValue:o,newValue:t[n]}),i=!0):r.unchanged.push({oldValue:o,newValue:t[n]}):(r.added.push(t[n]),i=!0)}for(let n=0;n<e.length;n++)t.find((t=>t.value===e[n].value))||(r.removed.push(e[n]),i=!0);return i?r:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return null==e||"function"==typeof e?e:uh(e)}writeField(e,t,i,r){"string"==typeof e?t[i]=e:r&&r.messages?r.messages.push(new Ac("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):NQ.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||sy.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=bT(t.styleUrl,i);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=wT(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?NQ.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void NQ.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i="object"==typeof e?FQ(e):new MQ({value:e,symbol:GI(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)NQ.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(xa(t)||xa(t.arcade))&&(i={...i,arcade:await I_()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(xa(t)||xa(t.arcade)))return void NQ.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(xa(i)||xa(i.arcade))){const e=await I_(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new DQ({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ol(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ol(this.visualVariables),legendOptions:ol(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ol(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ol(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ol(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),U_(e,t,this.valueExpression)];V_(e,t,this.field),V_(e,t,this.field2),V_(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return IQ(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const r=new LI({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new MQ({value:i.name,symbol:r});t.push(n),this._valueInfoMap[i.name]=n})),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach((e=>this._valueInfoMap[e.value+""]=e))}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:n,arcade:o}=Ea(t,{});let s=this._cache.compiledFunc;const a=o.arcadeUtils;if(!s){const e=a.createSyntaxTree(this.valueExpression);s=a.createFunction(e),this._cache.compiledFunc=s}const l=a.executeFunction(s,a.createExecContext(e,a.getViewInfo({viewingMode:i,scale:r,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if("function"!=typeof t&&this.field2){const e=this.field2,n=this.field3,o=[];t&&o.push(i[t]),e&&o.push(i[e]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else"function"==typeof t?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new DQ(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||sy.getDefault());const r=i.populateFromStyle();return r.catch((t=>{NQ.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),r}static fromStyleUrl(e,t){const i=new DQ(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch((t=>{NQ.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),r}};bl([Lh({readOnly:!0})],jQ.prototype,"_cache",null),bl([Cb({uniqueValue:"unique-value"})],jQ.prototype,"type",void 0),bl([Lh(kX)],jQ.prototype,"backgroundFillSymbol",void 0),bl([Lh({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],jQ.prototype,"field",void 0),bl([Am("field")],jQ.prototype,"castField",null),bl([Mf("field")],jQ.prototype,"writeField",null),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"field2",void 0),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"field3",void 0),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"valueExpression",void 0),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"valueExpressionTitle",void 0),bl([Lh({type:sK,json:{write:!0}})],jQ.prototype,"legendOptions",void 0),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"defaultLabel",void 0),bl([Lh(dl({...SX},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],jQ.prototype,"defaultSymbol",null),bl([Lh({type:String,json:{write:!0}})],jQ.prototype,"fieldDelimiter",void 0),bl([Lh({type:sy,readOnly:!0})],jQ.prototype,"portal",void 0),bl([Mm("portal",["styleName"])],jQ.prototype,"readPortal",null),bl([Lh({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],jQ.prototype,"styleOrigin",void 0),bl([Mm("styleOrigin",["styleName","styleUrl"])],jQ.prototype,"readStyleOrigin",null),bl([Mf("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],jQ.prototype,"writeStyleOrigin",null),bl([Lh({type:[MQ],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],jQ.prototype,"uniqueValueInfos",null),jQ=DQ=bl([md("esri.renderers.UniqueValueRenderer")],jQ);const $Q=jQ,VQ={key:"type",base:rK,typeMap:{heatmap:uQ,simple:pQ,"unique-value":$Q,"class-breaks":DX,"dot-density":nQ,dictionary:JX},errorContext:"renderer"},zQ={key:"type",base:rK,typeMap:{simple:pQ,"unique-value":$Q,"class-breaks":DX},errorContext:"renderer"};function UQ(e,t){return GQ(e,null,t)}const qQ=zh({types:VQ});function GQ(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(i&&i.messages&&i.messages.push(new Fh("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):qQ(e,t,i):null}class BQ{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(rc),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new BQ,i=this._originStores[ic.DEFAULTS];i&&i.forEach(((e,i)=>{t.set(i,ol(e),ic.DEFAULTS)}));for(let i=ic.SERVICE;i<rc;i++){const r=this._originStores[i];r&&r.forEach(((r,n)=>{e&&e.has(n)||t.set(n,ol(r),i)}))}return t}get(e,t){const i=void 0===t?this._values:this._originStores[t];return i?i.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,i=ic.USER){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){const r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,i),r!==t}return!1}delete(e,t=ic.USER){const i=this._originStores[t];if(!i)return;const r=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let i=t-1;i>=0;i--){const t=this._originStores[i];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}has(e,t){const i=void 0===t?this._values:this._originStores[t];return!!i&&i.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const i=this._originStores[t],r=i&&i.get(e),n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),n!==r}originOf(e){return this._propertyOriginMap.get(e)||ic.DEFAULTS}forEach(e){this._values.forEach(e)}}const WQ=e=>{let t=class extends e{constructor(...e){super(...e);const t=jl(this),i=t.store,r=new BQ;t.store=r,Ud(t,i,r)}read(e,t){Hd(this,e,t)}getAtOrigin(e,t){const i=HQ(this),r=nc(t);if("string"==typeof e)return i.get(e,r);const n={};return e.forEach((e=>{n[e]=i.get(e,r)})),n}originOf(e){return oc(this.originIdOf(e))}originIdOf(e){return HQ(this).originOf(e)}revert(e,t){const i=HQ(this),r=nc(t),n=jl(this);let o;o="string"==typeof e?"*"===e?i.keys(r):[e]:e,o.forEach((e=>{n.invalidate(e),i.revert(e,r),n.commit(e)}))}};return t=bl([md("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function HQ(e){return jl(e).store}let JQ=class extends(WQ(vd)){};JQ=bl([md("esri.core.ReadOnlyMultiOriginJSONSupport")],JQ);const YQ=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return ZQ(this).delete(e,nc(t))}write(e={},t){return Xd(this,e=e||{},t),e}setAtOrigin(e,t,i){jl(this).setAtOrigin(e,t,nc(i))}removeOrigin(e){const t=ZQ(this),i=nc(e),r=t.keys(i);for(const e of r)t.originOf(e)===i&&t.set(e,t.get(e,i),ic.USER)}updateOrigin(e,t){const i=ZQ(this),r=nc(t),n=this.get(e);for(let t=r+1;t<rc;++t)i.delete(e,t);i.set(e,n,r)}toJSON(e){return this.write({},e)}};return t=bl([md("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ZQ(e){return jl(e).store}const KQ=e=>{let t=class extends(YQ(WQ(e))){constructor(...e){super(...e)}};return t=bl([md("esri.core.MultiOriginJSONSupport")],t),t};let XQ=class extends(KQ(vd)){};var QQ;XQ=bl([md("esri.core.MultiOriginJSONSupport")],XQ);let e0=QQ=class extends tp{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new QQ({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};bl([Lh({type:String,json:{write:!0}})],e0.prototype,"expression",void 0),bl([Lh({type:String,json:{write:!0}})],e0.prototype,"name",void 0),bl([Lh({type:["boolean","date","number","string"],json:{write:!0}})],e0.prototype,"returnType",void 0),bl([Lh({type:String,json:{write:!0}})],e0.prototype,"title",void 0),e0=QQ=bl([md("esri.form.ExpressionInfo")],e0);const t0=e0;let i0=class extends tp{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};bl([Lh({type:String,json:{write:!0}})],i0.prototype,"description",void 0),bl([Lh({type:String,json:{write:!0}})],i0.prototype,"label",void 0),bl([Lh()],i0.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],i0.prototype,"visibilityExpression",void 0),i0=bl([md("esri.form.elements.Element")],i0);const r0=i0;var n0;let o0=n0=class extends tp{constructor(e){super(e),this.type=null}clone(){return new n0({type:this.type})}};bl([Lh({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],o0.prototype,"type",void 0),o0=n0=bl([md("esri.form.elements.inputs.AttachmentInput")],o0);const s0=o0;var a0;let l0=a0=class extends r0{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new a0({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};bl([Lh({type:String,json:{write:!0}})],l0.prototype,"attachmentKeyword",void 0),bl([Lh({type:Boolean,json:{write:!0}})],l0.prototype,"editable",void 0),bl([Lh({type:s0,json:{read:{source:"inputType"},write:{target:"inputType"}}})],l0.prototype,"input",void 0),bl([Lh({type:["attachment"],json:{read:!1,write:!0}})],l0.prototype,"type",void 0),l0=a0=bl([md("esri.form.elements.AttachmentElement")],l0);const c0=l0;let u0=class extends tp{constructor(e){super(e),this.type=null}};bl([Lh()],u0.prototype,"type",void 0),u0=bl([md("esri.form.elements.inputs.Input")],u0);const h0=u0;let d0=class extends h0{constructor(e){super(e),this.maxLength=null,this.minLength=0}};bl([Lh({type:Number,json:{write:!0}})],d0.prototype,"maxLength",void 0),bl([Lh({type:Number,json:{write:!0}})],d0.prototype,"minLength",void 0),d0=bl([md("esri.form.elements.inputs.TextInput")],d0);const p0=d0;var f0;let m0=f0=class extends p0{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new f0({maxLength:this.maxLength,minLength:this.minLength})}};bl([Lh({type:["barcode-scanner"],json:{read:!1,write:!0}})],m0.prototype,"type",void 0),m0=f0=bl([md("esri.form.elements.inputs.BarcodeScannerInput")],m0);const g0=m0;var y0;let v0=y0=class extends h0{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new y0({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};bl([Lh({type:String,json:{write:!0}})],v0.prototype,"noValueOptionLabel",void 0),bl([Lh({type:Boolean,json:{write:!0}})],v0.prototype,"showNoValueOption",void 0),bl([Lh({type:["combo-box"],json:{read:!1,write:!0}})],v0.prototype,"type",void 0),v0=y0=bl([md("esri.form.elements.inputs.ComboBoxInput")],v0);const b0=v0;var w0;function _0(e){return null!=e?new Date(e):null}function x0(e){return e?e.getTime():null}let S0=w0=class extends h0{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return _0(t.max)}writeMax(e,t){t.max=x0(e)}readMin(e,t){return _0(t.min)}writeMin(e,t){t.min=x0(e)}clone(){return new w0({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};bl([Lh({type:Boolean,json:{write:!0}})],S0.prototype,"includeTime",void 0),bl([Lh({type:Date,json:{type:Number,write:!0}})],S0.prototype,"max",void 0),bl([Mm("max")],S0.prototype,"readMax",null),bl([Mf("max")],S0.prototype,"writeMax",null),bl([Lh({type:Date,json:{type:Number,write:!0}})],S0.prototype,"min",void 0),bl([Mm("min")],S0.prototype,"readMin",null),bl([Mf("min")],S0.prototype,"writeMin",null),bl([Lh({type:["datetime-picker"],json:{read:!1,write:!0}})],S0.prototype,"type",void 0),S0=w0=bl([md("esri.form.elements.inputs.DateTimePickerInput")],S0);const k0=S0;var M0;let T0=M0=class extends h0{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new M0({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};bl([Lh({type:String,json:{write:!0}})],T0.prototype,"noValueOptionLabel",void 0),bl([Lh({type:Boolean,json:{write:!0}})],T0.prototype,"showNoValueOption",void 0),bl([Lh({type:["radio-buttons"],json:{read:!1,write:!0}})],T0.prototype,"type",void 0),T0=M0=bl([md("esri.form.elements.inputs.RadioButtonsInput")],T0);const E0=T0;var I0;let C0=I0=class extends h0{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new I0({offValue:this.offValue,onValue:this.onValue})}};bl([Lh({type:[String,Number],json:{write:!0}})],C0.prototype,"offValue",void 0),bl([Lh({type:[String,Number],json:{write:!0}})],C0.prototype,"onValue",void 0),bl([Lh({type:["switch"],json:{read:!1,write:!0}})],C0.prototype,"type",void 0),C0=I0=bl([md("esri.form.elements.inputs.SwitchInput")],C0);const O0=C0;var A0;let P0=A0=class extends p0{constructor(e){super(e),this.type="text-area"}clone(){return new A0({maxLength:this.maxLength,minLength:this.minLength})}};bl([Lh({type:["text-area"],json:{read:!1,write:!0}})],P0.prototype,"type",void 0),P0=A0=bl([md("esri.form.elements.inputs.TextAreaInput")],P0);const R0=P0;var L0;let D0=L0=class extends p0{constructor(e){super(e),this.type="text-box"}clone(){return new L0({maxLength:this.maxLength,minLength:this.minLength})}};bl([Lh({type:["text-box"],json:{read:!1,write:!0}})],D0.prototype,"type",void 0),D0=L0=bl([md("esri.form.elements.inputs.TextBoxInput")],D0);const N0={base:h0,key:"type",typeMap:{"barcode-scanner":g0,"combo-box":b0,"datetime-picker":k0,"radio-buttons":E0,switch:O0,"text-area":R0,"text-box":D0}};var F0;let j0=F0=class extends r0{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new F0({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};bl([Lh({types:vV,json:{read:{reader:bV},write:!0}})],j0.prototype,"domain",void 0),bl([Lh({type:Boolean,json:{write:!0}})],j0.prototype,"editable",void 0),bl([Lh({type:String,json:{write:!0}})],j0.prototype,"editableExpression",void 0),bl([Lh({type:String,json:{write:!0}})],j0.prototype,"fieldName",void 0),bl([Lh({type:String,json:{write:!0}})],j0.prototype,"hint",void 0),bl([Lh({types:N0,json:{read:{source:"inputType"},write:{target:"inputType"}}})],j0.prototype,"input",void 0),bl([Lh({type:String,json:{write:!0}})],j0.prototype,"requiredExpression",void 0),bl([Lh({type:String,json:{read:!1,write:!0}})],j0.prototype,"type",void 0),bl([Lh({type:String,json:{write:!0}})],j0.prototype,"valueExpression",void 0),j0=F0=bl([md("esri.form.elements.FieldElement")],j0);const $0=j0;var V0;let z0=V0=class extends r0{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new V0({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:ol(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};bl([Lh({type:Number,json:{write:!0}})],z0.prototype,"displayCount",void 0),bl([Lh({type:["list"],json:{write:!0}})],z0.prototype,"displayType",void 0),bl([Lh({type:Boolean,json:{write:!0}})],z0.prototype,"editable",void 0),bl([Lh({type:[QS],json:{write:!0}})],z0.prototype,"orderByFields",void 0),bl([Lh({type:Number,json:{write:!0}})],z0.prototype,"relationshipId",void 0),bl([Lh({type:["relationship"],json:{read:!1,write:!0}})],z0.prototype,"type",void 0),z0=V0=bl([md("esri.form.elements.RelationshipElement")],z0);const U0=z0;function q0(e){return{typesWithGroup:{base:r0,key:"type",typeMap:{attachment:c0,field:$0,group:e,relationship:U0}},typesWithoutGroup:{base:r0,key:"type",typeMap:{attachment:c0,field:$0,relationship:U0}}}}function G0(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>r[e.type])).map((e=>r[e.type].fromJSON(e)))}function B0(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>r[e.type])).map((e=>e.toJSON()))}function W0(e,t,i=!0){return e?e.map((e=>Ih(i?t.typesWithGroup:t.typesWithoutGroup,e))):null}var H0;let J0=H0=class extends r0{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return W0(e,Y0,!1)}readElements(e,t){return G0(t.formElements,Y0,!1)}writeElements(e,t){t.formElements=B0(e,Y0,!1)}clone(){return new H0({description:this.description,elements:ol(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};bl([Lh({json:{write:!0}})],J0.prototype,"elements",void 0),bl([Am("elements")],J0.prototype,"castElements",null),bl([Mm("elements",["formElements"])],J0.prototype,"readElements",null),bl([Mf("elements")],J0.prototype,"writeElements",null),bl([Lh({type:["collapsed","expanded"],json:{write:!0}})],J0.prototype,"initialState",void 0),bl([Lh({type:String,json:{read:!1,write:!0}})],J0.prototype,"type",void 0),J0=H0=bl([md("esri.form.elements.GroupElement")],J0);const Y0=q0(J0);var Z0;const K0=q0(J0);let X0=Z0=class extends tp{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return W0(e,K0)}readElements(e,t){return G0(t.formElements,K0)}writeElements(e,t){t.formElements=B0(e,K0)}clone(){return new Z0({description:this.description,expressionInfos:ol(this.expressionInfos),elements:ol(this.elements),title:this.title})}};bl([Lh({type:String,json:{write:!0}})],X0.prototype,"description",void 0),bl([Lh({json:{write:!0}})],X0.prototype,"elements",void 0),bl([Am("elements")],X0.prototype,"castElements",null),bl([Mm("elements",["formElements"])],X0.prototype,"readElements",null),bl([Mf("elements")],X0.prototype,"writeElements",null),bl([Lh({type:[t0],json:{write:!0}})],X0.prototype,"expressionInfos",void 0),bl([Lh({type:String,json:{write:!0}})],X0.prototype,"title",void 0),X0=Z0=bl([md("esri.form.FormTemplate")],X0);const Q0=X0;var e1;const t1=Vg()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),i1=t1.jsonValues.slice();Ya(i1,"orthometric");const r1=Vg()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let n1=e1=class extends tp{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return t1.write(e,t,i)}readHeightModel(e,t,i){return t1.read(e)||(i&&i.messages&&i.messages.push(function(e,t){return new Fh("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:i})),null)}readHeightUnit(e,t,i){return r1.read(e)||(i&&i.messages&&i.messages.push(o1(e,{context:i})),null)}readHeightUnitService(e,t,i){return SO(e)||r1.read(e)||(i&&i.messages&&i.messages.push(o1(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new e1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=MO(t);return new e1({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new e1;return t.read(e,{origin:"web-scene"}),t}};function o1(e,t){return new Fh("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}bl([Lh({type:t1.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:i1,default:"ellipsoidal"}}}})],n1.prototype,"heightModel",void 0),bl([Mf("web-scene","heightModel")],n1.prototype,"writeHeightModel",null),bl([Mm(["web-scene","service"],"heightModel")],n1.prototype,"readHeightModel",null),bl([Lh({type:r1.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:r1.jsonValues,write:r1.write}}}})],n1.prototype,"heightUnit",void 0),bl([Mm("web-scene","heightUnit")],n1.prototype,"readHeightUnit",null),bl([Mm("service","heightUnit")],n1.prototype,"readHeightUnitService",null),bl([Lh({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],n1.prototype,"vertCRS",void 0),bl([Mm("service","vertCRS",["vertCRS","ellipsoid","geoid"])],n1.prototype,"readVertCRS",null),n1=e1=bl([md("esri.geometry.HeightModelInfo")],n1);const s1=n1;function a1(e,t,i){if(null==e.hasM||e.hasZ)for(const e of t)for(const t of e)t.length>2&&(t[2]*=i)}function l1(e,t,i){if(!e&&!t||!i)return;const r=kO(i);c1(e,i,r),c1(t,i,r)}function c1(e,t,i){if(e)for(const r of e)u1(r.geometry,t,i)}function u1(e,t,i){if(xa(e)||!e.spatialReference||Df(e.spatialReference,t))return;const r=kO(e.spatialReference)/i;if(1!==r)if("x"in e)null!=e.z&&(e.z*=r);else if("rings"in e)a1(e,e.rings,r);else if("paths"in e)a1(e,e.paths,r);else if("points"in e&&(null==e.hasM||e.hasZ))for(const t of e.points)t.length>2&&(t[2]*=r)}let h1=0;const d1=Dl.getLogger("esri.layers.graphics.sources.MemorySource");let p1=class extends(lp.LoadableMixin(np(ew(Fd)))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=_a(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null}get workerGeometryType(){var e;const t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);oU(e,this.layer.spatialReference,i);const r=xU.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const n=this.layer.objectIdField;for(const e of r.features){const t=e.attributes[n],i=this._idToClientGraphic.get(t);i&&(e.geometry=i.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new Ac("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return oU(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:Eg.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}async _applyEdits(e){if(!this._connection)throw new Ac("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const t of e.deleteFeatures){const e=o(t);null!=e&&r.push(e)}const s=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(const t of e.updateFeatures)if(n.push(this._serializeFeature(t)),s){const e=o(t);null!=e&&s.set(e,t)}l1(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:r});return this.fullExtent=a,i&&i.finish(l.uidToObjectId),this._updateClientGraphicIds(s,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if("mesh"!==this.layerOrSourceGeometryType||xa(e))return;const i=[];for(const{geometry:r}of e)!_a(r)||"mesh"!==r.type||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const t=e.get(i.objectId);null!=t&&this._addIdToClientGraphic(t)}for(const e of t.deleteResults)e.success&&this._idToClientGraphic.delete(e.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new Ac("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let n=0;n<e.length;n++){const o=e[n],s=this._serializeFeature(o);!r&&_a(o.geometry)&&(r=o.geometry.type),i[n]=s,t.set(`${s.uid}`,o)}const n=this;return{features:i,inferredGeometryType:r,finish(e){const i=n.sourceJSON.objectIdField;for(const r in e){const o=e[r],s=t.get(r);s&&(s.attributes||(s.attributes={}),-1===o?delete s.attributes[i]:s.attributes[i]=o,n._addIdToClientGraphic(s))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];null!=i&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(i=this.sourceJSON)?void 0:i.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return"mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(h1++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return xa(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Ww.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await QC("MemorySourceWorker",{strategy:wa("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:n,hasZ:o,timeInfo:s}=this.layer,a="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const l=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",(e=>{d1.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})));const c={features:l.features,fields:t&&t.map((e=>e.toJSON())),geometryType:Kw.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&n,hasZ:"mesh"===this.layerOrSourceGeometryType||o,objectIdField:r,spatialReference:a?null:i&&i.toJSON(),timeInfo:s?s.toJSON():null},u=await this._connection.invoke("load",c,{signal:e});for(const e of u.warnings)d1.warn(e.message,{layer:this.layer,warning:e});u.featureErrors.length&&d1.warn(`Encountered ${u.featureErrors.length} validation errors while loading features`,u.featureErrors);const h=u.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(l.inferredGeometryType)&&(h.geometryType=Kw.toJSON(l.inferredGeometryType)),this.sourceJSON=h,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),l.finish(u.assignedObjectIds)}};bl([Sd({Type:HI,ensureType:xh(HI)})],p1.prototype,"itemType",void 0),bl([Lh()],p1.prototype,"type",void 0),bl([Lh({constructOnly:!0})],p1.prototype,"layer",void 0),bl([Lh({readOnly:!0})],p1.prototype,"workerGeometryType",null),bl([Lh()],p1.prototype,"sourceJSON",void 0),p1=bl([md("esri.layers.graphics.sources.MemorySource")],p1);const f1=p1;const m1=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return bl([Lh({type:String})],t.prototype,"apiKey",null),t=bl([md("esri.layers.mixins.APIKeyMixin")],t),t},g1={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},y1=Object.values(g1),v1=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${y1.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),b1=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${y1.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),w1=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function _1(e){return!!v1.test(e)}function x1(e){const t=Ap(e),i=t.path.match(v1)||t.path.match(b1);if(!i)return null;const[,r,n,o,s]=i,a=n.indexOf("/");return{title:k1(-1!==a?n.slice(a+1):n),serverType:g1[o.toLowerCase()],sublayer:null!=s&&""!==s?parseInt(s,10):null,url:{path:r}}}function S1(e){const t=Ap(e).path.match(w1);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function k1(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function M1(e,t){const i=[];if(e){const t=x1(e);_a(t)&&t.title&&i.push(t.title)}if(t){const e=k1(t);i.push(e)}if(2===i.length){if(-1!==i[0].toLowerCase().indexOf(i[1].toLowerCase()))return i[0];if(-1!==i[1].toLowerCase().indexOf(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function T1(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),i=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&i}function E1(e,t){return e?mf(bf(e,t)):e}function I1(e){let{url:t}=e;if(!t)return{url:t};t=bf(t,e.logger);const i=Ap(t),r=x1(i.path);let n;if(_a(r))null!=r.sublayer&&null==e.layer.layerId&&(n=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const e=S1(i.path);_a(e)&&(t=e.serviceUrl,n=e.sublayerId)}return{url:mf(t),layerId:n}}function C1(e,t,i,r,n){xT(t,r,"url",n),r.url&&null!=e.layerId&&(r.url=Yp(r.url,i,e.layerId.toString()))}function O1(e){if(!e)return!1;const t=e.toLowerCase(),i=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),o=-1!==t.indexOf("/wmsserver");return i&&(r||n||o)}const A1=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=x1(this.url);if(_a(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",E1(e,Dl.getLogger(this.declaredClass)))}};return bl([Lh()],t.prototype,"title",null),bl([Lh({type:String})],t.prototype,"url",null),t=bl([md("esri.layers.mixins.ArcGISService")],t),t};function P1(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}const R1=P1();Object.freeze({__proto__:null,create:P1,clone:function(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(e,t,i,r,n,o,s,a,l,c,u,h,d,p,f,m){const g=new Float32Array(16);return g[0]=e,g[1]=t,g[2]=i,g[3]=r,g[4]=n,g[5]=o,g[6]=s,g[7]=a,g[8]=l,g[9]=c,g[10]=u,g[11]=h,g[12]=d,g[13]=p,g[14]=f,g[15]=m,g},createView:function(e,t){return new Float32Array(e,t,16)},IDENTITY:R1});class L1{constructor(e,t,i){this.strength=e,this.radius=t,this.threshold=i,this.type="bloom"}interpolate(e,t,i){this.strength=V1(e.strength,t.strength,i),this.radius=V1(e.radius,t.radius,i),this.threshold=V1(e.threshold,t.threshold,i)}clone(){return new L1(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:z1(this.radius),strength:this.strength,threshold:this.threshold}}}class D1{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,i){this.radius=Math.round(V1(e.radius,t.radius,i))}clone(){return new D1(this.radius)}toJSON(){return{type:"blur",radius:z1(this.radius)}}}class N1{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.amount=V1(e.amount,t.amount,i),this._updateMatrix()}clone(){return new N1(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||P1();switch(this.type){case"brightness":this._colorMatrix=((e,t)=>{const i=FO(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return $O(i,i)})(e,this.amount);break;case"contrast":this._colorMatrix=((e,t)=>{const i=FO(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return $O(i,i)})(e,this.amount);break;case"grayscale":this._colorMatrix=((e,t)=>{const i=1-t,r=FO(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return $O(r,r)})(e,this.amount);break;case"invert":this._colorMatrix=((e,t)=>{const i=1-2*t,r=FO(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return $O(r,r)})(e,this.amount);break;case"saturate":this._colorMatrix=((e,t)=>{const i=FO(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return $O(i,i)})(e,this.amount);break;case"sepia":this._colorMatrix=((e,t)=>{const i=1-t,r=FO(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return $O(r,r)})(e,this.amount)}}}class F1{constructor(e,t,i,r){this.offsetX=e,this.offsetY=t,this.blurRadius=i,this.color=r,this.type="drop-shadow"}interpolate(e,t,i){this.offsetX=V1(e.offsetX,t.offsetX,i),this.offsetY=V1(e.offsetY,t.offsetY,i),this.blurRadius=V1(e.blurRadius,t.blurRadius,i),this.color[0]=Math.round(V1(e.color[0],t.color[0],i)),this.color[1]=Math.round(V1(e.color[1],t.color[1],i)),this.color[2]=Math.round(V1(e.color[2],t.color[2],i)),this.color[3]=V1(e.color[3],t.color[3],i)}clone(){return new F1(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:z1(this.offsetX),yoffset:z1(this.offsetY),blurRadius:z1(this.blurRadius),color:e}}}class j1{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,i){this.angle=V1(e.angle,t.angle,i),this._updateMatrix()}clone(){return new j1(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||P1();this._colorMatrix=((e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),n=FO(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return $O(n,n)})(e,this.angle)}}class $1{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,i){this.amount=V1(e.amount,t.amount,i)}clone(){return new $1(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function V1(e,t,i){return e+(t-e)*i}function z1(e){return Math.round(1e3*Ak(e))/1e3}function U1(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new N1(e.type,0);case"saturate":case"brightness":case"contrast":return new N1(e.type,1);case"opacity":return new $1(1);case"hue-rotate":return new j1(0);case"blur":return new D1(0);case"drop-shadow":return new F1(0,0,0,[...qy("transparent")]);case"bloom":return new L1(0,0,1)}}function q1(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===i[t].type))}function G1(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let e=r.length;e<i.length;e++)r.push(U1(i[e]))}var B1,W1,H1={exports:{}};function J1(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=Y1(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new Ac("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:Y1(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!q1(t[e].effects,t[e+1].effects))throw new Ac("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});G1(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function Y1(e){let t;if(!e)return[];try{t=H1.exports.parse(e)}catch(t){throw new Ac("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return Z1(e.parameters,1),1===e.parameters.length&&(t=t2(e.parameters[0])),new N1(e.name,t)}(e);case"opacity":return function(e){let t=1;return Z1(e.parameters,1),1===e.parameters.length&&(t=t2(e.parameters[0])),new $1(t)}(e);case"hue-rotate":return function(e){let t=0;return Z1(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=Q1[e.unit]))throw new Ac("effect:type-error",`Expected <angle>, Actual: ${K1(e)}`,{term:e})}(e),e.value*Q1[e.unit]||0}(e.parameters[0])),new j1(t)}(e);case"blur":return function(e){let t=0;return Z1(e.parameters,1),1===e.parameters.length&&(t=r2(e.parameters[0]),X1(t,e.parameters[0])),new D1(t)}(e);case"drop-shadow":return function(e){const t=[];let i=null;for(const r of e.parameters)if("color"===r.type){if(t.length&&Object.freeze(t),i)throw new Ac("effect:type-error","Accepts only one color",{});i=n2(r)}else{const e=r2(r);if(Object.isFrozen(t))throw new Ac("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&X1(e,r)}if(t.length<2||t.length>3)throw new Ac("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new F1(t[0],t[1],t[2]||0,i||o2("black"))}(e);case"bloom":return function(e){let t=1,i=0,r=0;return Z1(e.parameters,3),e.parameters[0]&&(t=t2(e.parameters[0])),e.parameters[1]&&(i=r2(e.parameters[1]),X1(i,e.parameters[1])),e.parameters[2]&&(r=t2(e.parameters[2])),new L1(t,i,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new Ac("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function Z1(e,t){if(e.length>t)throw new Ac("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function K1(e){if("color"===e.type)return"<color>";if(e.unit){if(e2[e.unit])return"<length>";if(Q1[e.unit])return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function X1(e,t){if(e<0)throw new Ac("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}W1=function(){function e(t,i,r,n){var o=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(o,e.prototype),o.expected=i,o.found=r,o.location=n,o.name="SyntaxError",o}function t(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}return function(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}(e,Error),e.prototype.format=function(e){var i="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,s=this.location.source+":"+o.line+":"+o.column;if(n){var a=this.location.end,l=t("",o.line.toString().length),c=n[o.line-1],u=o.line===a.line?a.column:c.length+1;i+="\n --\x3e "+s+"\n"+l+" |\n"+o.line+" | "+c+"\n"+l+" | "+t("",o.column-1)+t("",u-o.column,"^")}else i+="\n at "+s}return i},e.buildMessage=function(e,t){var i={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return i[e.type](e)}return"Expected "+function(e){var t,i,r=e.map(s);if(r.sort(),r.length>0){for(t=1,i=1;t<r.length;t++)r[t-1]!==r[t]&&(r[i]=r[t],i++);r.length=i}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,i){var r,n={},o=(i=void 0!==i?i:{}).grammarSource,s={start:ce},a=ce,l="none",c=",",u="grad",h="turn",d=/^[ \t\n\r]/,p=/^[a-z\-]/,f=/^[0-9a-fA-F]/,m=/^[+\-]/,g=/^[0-9]/,y=oe("none"),v=re("none",!1),b=re(")",!1),w=re(",",!1),_=oe("whitespace"),x=ne([" ","\t","\n","\r"],!1,!1),S=oe("function"),k=re("(",!1),M=oe("identifier"),T=ne([["a","z"],"-"],!1,!1),E=oe("percentage"),I=re("%",!1),C=oe("length"),O=re("px",!1),A=re("cm",!1),P=re("mm",!1),R=re("in",!1),L=re("pt",!1),D=re("pc",!1),N=oe("angle"),F=re("deg",!1),j=re("rad",!1),$=re("grad",!1),V=re("turn",!1),z=oe("number"),U=oe("color"),q=re("#",!1),G=ne([["0","9"],["a","f"],["A","F"]],!1,!1),B=ne(["+","-"],!1,!1),W=ne([["0","9"]],!1,!1),H=re(".",!1),J=re("e",!1),Y=function(e,t){return t.length>0?function(e,t,i){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,i))}(e,t,3):[e]},Z=0,K=0,X=[{line:1,column:1}],Q=0,ee=[],te=0;if("startRule"in i){if(!(i.startRule in s))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=s[i.startRule]}function ie(){return t.substring(K,Z)}function re(e,t){return{type:"literal",text:e,ignoreCase:t}}function ne(e,t,i){return{type:"class",parts:e,inverted:t,ignoreCase:i}}function oe(e){return{type:"other",description:e}}function se(e){var i,r=X[e];if(r)return r;for(i=e-1;!X[i];)i--;for(r={line:(r=X[i]).line,column:r.column};i<e;)10===t.charCodeAt(i)?(r.line++,r.column=1):r.column++,i++;return X[e]=r,r}function ae(e,t){var i=se(e),r=se(t);return{source:o,start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:r.line,column:r.column}}}function le(e){Z<Q||(Z>Q&&(Q=Z,ee=[]),ee.push(e))}function ce(){var e;return(e=ue())===n&&(e=function(){var e,t;if(e=[],(t=he())!==n)for(;t!==n;)e.push(t),t=he();else e=n;return e}()),e}function ue(){var e,i;return te++,e=Z,pe(),t.substr(Z,4)===l?(i=l,Z+=4):(i=n,0===te&&le(v)),i!==n?(pe(),K=e,e=[]):(Z=e,e=n),te--,e===n&&0===te&&le(y),e}function he(){var e,i,r,o;return e=Z,pe(),(i=function(){var e,i,r;return te++,e=Z,(i=fe())!==n?(40===t.charCodeAt(Z)?(r="(",Z++):(r=n,0===te&&le(k)),r!==n?(K=e,e=i):(Z=e,e=n)):(Z=e,e=n),te--,e===n&&(i=n,0===te&&le(S)),e}())!==n?(pe(),(r=function(){var e,i,r,o,s,a,l,u;if(e=Z,(i=de())!==n){for(r=[],o=Z,s=pe(),44===t.charCodeAt(Z)?(a=c,Z++):(a=n,0===te&&le(w)),a===n&&(a=null),l=pe(),(u=de())!==n?o=s=[s,a,l,u]:(Z=o,o=n);o!==n;)r.push(o),o=Z,s=pe(),44===t.charCodeAt(Z)?(a=c,Z++):(a=n,0===te&&le(w)),a===n&&(a=null),l=pe(),(u=de())!==n?o=s=[s,a,l,u]:(Z=o,o=n);K=e,e=Y(i,r)}else Z=e,e=n;return e}())===n&&(r=null),pe(),41===t.charCodeAt(Z)?(o=")",Z++):(o=n,0===te&&le(b)),o!==n?(pe(),K=e,e=function(e,t){return{type:"function",name:e,parameters:t||[]}}(i,r)):(Z=e,e=n)):(Z=e,e=n),e}function de(){var e,t;return e=Z,(t=me())===n&&(t=ge())===n&&(t=ye())===n&&(t=function(){var e,t;return te++,e=Z,pe(),(t=be())!==n?(K=e,e=function(e){return{value:e,unit:null}}(t)):(Z=e,e=n),te--,e===n&&0===te&&le(z),e}()),t!==n&&(K=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),(e=t)===n&&(e=Z,(t=ve())!==n&&(K=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function pe(){var e,i;for(te++,e=[],d.test(t.charAt(Z))?(i=t.charAt(Z),Z++):(i=n,0===te&&le(x));i!==n;)e.push(i),d.test(t.charAt(Z))?(i=t.charAt(Z),Z++):(i=n,0===te&&le(x));return te--,i=n,0===te&&le(_),e}function fe(){var e,i,r;if(te++,e=Z,i=[],p.test(t.charAt(Z))?(r=t.charAt(Z),Z++):(r=n,0===te&&le(T)),r!==n)for(;r!==n;)i.push(r),p.test(t.charAt(Z))?(r=t.charAt(Z),Z++):(r=n,0===te&&le(T));else i=n;return i!==n&&(K=e,i=ie()),te--,(e=i)===n&&(i=n,0===te&&le(M)),e}function me(){var e,i,r;return te++,e=Z,pe(),(i=be())!==n?(37===t.charCodeAt(Z)?(r="%",Z++):(r=n,0===te&&le(I)),r!==n?(K=e,e=function(e){return{value:e,unit:"%"}}(i)):(Z=e,e=n)):(Z=e,e=n),te--,e===n&&0===te&&le(E),e}function ge(){var e,i,r;return te++,e=Z,pe(),(i=be())!==n?("px"===t.substr(Z,2)?(r="px",Z+=2):(r=n,0===te&&le(O)),r!==n?(K=e,e=function(e){return{value:e,unit:"px"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,pe(),(i=be())!==n?("cm"===t.substr(Z,2)?(r="cm",Z+=2):(r=n,0===te&&le(A)),r!==n?(K=e,e=function(e){return{value:e,unit:"cm"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,pe(),(i=be())!==n?("mm"===t.substr(Z,2)?(r="mm",Z+=2):(r=n,0===te&&le(P)),r!==n?(K=e,e=function(e){return{value:e,unit:"mm"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,pe(),(i=be())!==n?("in"===t.substr(Z,2)?(r="in",Z+=2):(r=n,0===te&&le(R)),r!==n?(K=e,e=function(e){return{value:e,unit:"in"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,pe(),(i=be())!==n?("pt"===t.substr(Z,2)?(r="pt",Z+=2):(r=n,0===te&&le(L)),r!==n?(K=e,e=function(e){return{value:e,unit:"pt"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,pe(),(i=be())!==n?("pc"===t.substr(Z,2)?(r="pc",Z+=2):(r=n,0===te&&le(D)),r!==n?(K=e,e=function(e){return{value:e,unit:"pc"}}(i)):(Z=e,e=n)):(Z=e,e=n)))))),te--,e===n&&0===te&&le(C),e}function ye(){var e,i,r;return te++,e=Z,(i=be())!==n?("deg"===t.substr(Z,3)?(r="deg",Z+=3):(r=n,0===te&&le(F)),r!==n?(K=e,e=function(e){return{value:e,unit:"deg"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,(i=be())!==n?("rad"===t.substr(Z,3)?(r="rad",Z+=3):(r=n,0===te&&le(j)),r!==n?(K=e,e=function(e){return{value:e,unit:"rad"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,(i=be())!==n?(t.substr(Z,4)===u?(r=u,Z+=4):(r=n,0===te&&le($)),r!==n?(K=e,e=function(e){return{value:e,unit:"grad"}}(i)):(Z=e,e=n)):(Z=e,e=n),e===n&&(e=Z,(i=be())!==n?(t.substr(Z,4)===h?(r=h,Z+=4):(r=n,0===te&&le(V)),r!==n?(K=e,e=function(e){return{value:e,unit:"turn"}}(i)):(Z=e,e=n)):(Z=e,e=n)))),te--,e===n&&(i=n,0===te&&le(N)),e}function ve(){var e,i,r,o;if(te++,e=Z,35===t.charCodeAt(Z)?(i="#",Z++):(i=n,0===te&&le(q)),i!==n){if(r=[],f.test(t.charAt(Z))?(o=t.charAt(Z),Z++):(o=n,0===te&&le(G)),o!==n)for(;o!==n;)r.push(o),f.test(t.charAt(Z))?(o=t.charAt(Z),Z++):(o=n,0===te&&le(G));else r=n;r!==n?(K=e,e={type:"hex",value:ie()}):(Z=e,e=n)}else Z=e,e=n;return e===n&&(e=Z,(i=he())!==n&&(K=e,i=function(e){return{type:"function",value:e}}(i)),(e=i)===n&&(e=Z,(i=fe())!==n&&(K=e,i={type:"named",value:ie()}),e=i)),te--,e===n&&(i=n,0===te&&le(U)),e}function be(){var e,i,r,o,s,a,l;for(e=Z,m.test(t.charAt(Z))?(t.charAt(Z),Z++):0===te&&le(B),i=Z,r=[],g.test(t.charAt(Z))?(o=t.charAt(Z),Z++):(o=n,0===te&&le(W));o!==n;)r.push(o),g.test(t.charAt(Z))?(o=t.charAt(Z),Z++):(o=n,0===te&&le(W));if(46===t.charCodeAt(Z)?(o=".",Z++):(o=n,0===te&&le(H)),o!==n){if(s=[],g.test(t.charAt(Z))?(a=t.charAt(Z),Z++):(a=n,0===te&&le(W)),a!==n)for(;a!==n;)s.push(a),g.test(t.charAt(Z))?(a=t.charAt(Z),Z++):(a=n,0===te&&le(W));else s=n;s!==n?i=r=[r,o,s]:(Z=i,i=n)}else Z=i,i=n;if(i===n)if(i=[],g.test(t.charAt(Z))?(r=t.charAt(Z),Z++):(r=n,0===te&&le(W)),r!==n)for(;r!==n;)i.push(r),g.test(t.charAt(Z))?(r=t.charAt(Z),Z++):(r=n,0===te&&le(W));else i=n;if(i!==n){if(r=Z,101===t.charCodeAt(Z)?(o="e",Z++):(o=n,0===te&&le(J)),o!==n){if(m.test(t.charAt(Z))?(s=t.charAt(Z),Z++):(s=n,0===te&&le(B)),s===n&&(s=null),a=[],g.test(t.charAt(Z))?(l=t.charAt(Z),Z++):(l=n,0===te&&le(W)),l!==n)for(;l!==n;)a.push(l),g.test(t.charAt(Z))?(l=t.charAt(Z),Z++):(l=n,0===te&&le(W));else a=n;a!==n?r=o=[o,s,a]:(Z=r,r=n)}else Z=r,r=n;r===n&&(r=null),K=e,e=parseFloat(ie())}else Z=e,e=n;return e}if((r=a())!==n&&Z===t.length)return r;throw r!==n&&Z<t.length&&le({type:"end"}),function(t,i,r){return new e(e.buildMessage(t,i),t,i,r)}(ee,Q<t.length?t.charAt(Q):null,Q<t.length?ae(Q,Q+1):ae(Q,Q))}}},(B1=H1).exports&&(B1.exports=W1());const Q1={deg:1,grad:.9,rad:180/Math.PI,turn:360};const e2={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function t2(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new Ac("effect:type-error",`Expected <double> or <percentage>, Actual: ${K1(e)}`,{term:e})}(e);const t=e.value;return X1(t,e),"%"===e.unit?.01*t:t}function i2(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new Ac("effect:type-error",`Expected <double>, Actual: ${K1(e)}`,{term:e})}(e),X1(e.value,e),e.value}function r2(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=e2[e.unit]))throw new Ac("effect:type-error",`Expected <length>, Actual: ${K1(e)}`,{term:e})}(e),e.value*e2[e.unit]||0}function n2(e){switch(e.colorType){case"hex":return function(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,n=t?1:17,o=t?9===e.length:5===e.length;let s=Number("0x"+e.substr(1));if(isNaN(s))return null;const a=[0,0,0,1];let l;return o&&(l=s&r,s>>=i,a[3]=n*l/255),l=s&r,s>>=i,a[2]=n*l,l=s&r,s>>=i,a[1]=n*l,l=s&r,s>>=i,a[0]=n*l,a}(e.value);case"named":return o2(e.value);case"function":return function(e){if(Z1(e.parameters,4),s2.test(e.name))return[t2(e.parameters[0]),t2(e.parameters[1]),t2(e.parameters[2]),e.parameters[3]?t2(e.parameters[3]):1];if(a2.test(e.name))return By(i2(e.parameters[0]),t2(e.parameters[1]),t2(e.parameters[2]),e.parameters[3]?t2(e.parameters[3]):1);throw new Ac("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function o2(e){if(!Uy(e))throw new Ac("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return function(e){return[...qy(e)]}(e)}const s2=/^rgba?/i,a2=/^hsla?/i;function l2(e,t,i){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:u2(i.value)});return t}return u2(e)}(e)}catch(e){var r;null==i||null==(r=i.messages)||r.push(e)}return null}function c2(e,t,i,r){try{const r=function(e){const t=J1(e);return t?function(e){const t=e[0];return!!t&&"type"in t}(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);fl(i,r,t)}catch(e){r.messages&&r.messages.push(e)}}function u2(e){if(!e||!e.length)return"";const t=[];for(const i of e){let e=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[h2(i,"amount")];break;case"blur":e=[h2(i,"radius","pt")];break;case"hue-rotate":e=[h2(i,"angle","deg")];break;case"drop-shadow":e=[h2(i,"xoffset","pt"),h2(i,"yoffset","pt"),h2(i,"blurRadius","pt"),d2(i,"color")];break;case"bloom":e=[h2(i,"strength"),h2(i,"radius","pt"),h2(i,"threshold")]}const r=`${i.type}(${e.filter(Boolean).join(" ")})`;J1(r),t.push(r)}return t.join(" ")}function h2(e,t,i){if(null==e[t])throw new Ac("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function d2(e,t){if(null==e[t])throw new Ac("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const p2=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return bl([Lh({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),bl([Lh({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:l2},write:{allowNull:!0,writer:c2}}}}})],t.prototype,"effect",void 0),t=bl([md("esri.layers.mixins.BlendLayer")],t),t},f2=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return bl([Lh({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=bl([md("esri.layers.mixins.CustomParametersMixin")],t),t};var m2;const g2=new $g({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y2=new $g({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let v2=m2=class extends tp{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:o,units:s,distance:a}=this;return new tz({geometry:ol(i),objectIds:ol(o),spatialRelationship:r,timeExtent:ol(n),where:t,units:s,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:n,units:o,distance:s}=this;return new m2({geometry:ol(t),objectIds:ol(n),spatialRelationship:i,timeExtent:ol(r),where:e,units:o,distance:s})}};bl([Lh({type:String,json:{write:!0}})],v2.prototype,"where",void 0),bl([Lh({types:a_,json:{write:!0}})],v2.prototype,"geometry",void 0),bl([Lh({type:g2.apiValues,json:{name:"spatialRel",read:{reader:g2.read},write:{allowNull:!1,writer:g2.write,overridePolicy(){return{enabled:_a(this.geometry)}}}}})],v2.prototype,"spatialRelationship",void 0),bl([Lh({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],v2.prototype,"distance",void 0),bl([Lh({type:[Number],json:{write:!0}})],v2.prototype,"objectIds",void 0),bl([Lh({type:y2.apiValues,json:{read:y2.read,write:{writer:y2.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],v2.prototype,"units",void 0),bl([Lh({type:iV,json:{write:!0}})],v2.prototype,"timeExtent",void 0),v2=m2=bl([md("esri.layers.support.FeatureFilter")],v2);const b2=v2;var w2;let _2=w2=class extends tp{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(null!=t&&t.origin){if(i.filter){const e=Object.keys(i.filter);var r;if(e.length>1||"where"!==e[0])return null==(r=t.messages)||r.push(new Ac("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var n;if("showExcludedLabels"in i)return null==(n=t.messages)||n.push(new Ac("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new w2({filter:_a(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};bl([Lh({type:b2,json:{write:{allowNull:!0,writer(e,t,i,r){const n=null==e?void 0:e.write({},r);n&&0!==Object.keys(n).length?fl(i,n,t):fl(i,null,t)}}}})],_2.prototype,"filter",void 0),bl([Lh({json:{write:!0,origins:{"web-map":{read:{reader:l2},write:{writer:c2,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}}}}})],_2.prototype,"includedEffect",void 0),bl([Lh({json:{write:!0,origins:{"web-map":{read:{reader:l2},write:{writer:c2,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}}}}})],_2.prototype,"excludedEffect",void 0),bl([Lh({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],_2.prototype,"excludedLabelsVisible",void 0),_2=w2=bl([md("esri.layers.support.FeatureEffect")],_2);const x2=_2,S2=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return bl([Lh({type:x2,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=bl([md("esri.layers.mixins.FeatureEffectLayer")],t),t},k2={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var M2;let T2=M2=class extends tp{async collectRequiredFields(e,t){return U_(e,t,this.expression)}clone(){return new M2({expression:this.expression,title:this.title})}};bl([Lh({type:String,json:{write:!0}})],T2.prototype,"expression",void 0),bl([Lh({type:String,json:{write:!0}})],T2.prototype,"title",void 0),T2=M2=bl([md("esri.layers.support.FeatureExpressionInfo")],T2);const E2=T2;const I2=function(){const e=Object.keys(VK);return e.sort(),e}();var C2;const O2=Vg()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),A2=new $g({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let P2=C2=class extends tp{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):_a(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new C2({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};bl([Lh({type:E2,json:{write:!0}})],P2.prototype,"featureExpressionInfo",void 0),bl([Mm("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],P2.prototype,"readFeatureExpressionInfo",null),bl([Mf("featureExpressionInfo",{featureExpressionInfo:{type:E2},"featureExpression.value":{type:[0]}})],P2.prototype,"writeFeatureExpressionInfo",null),bl([Lh({type:O2.apiValues,nonNullable:!0,json:{type:O2.jsonValues,read:O2.read,write:{writer:O2.write,isRequired:!0}}})],P2.prototype,"mode",null),bl([Lh({type:Number,json:{write:!0}})],P2.prototype,"offset",void 0),bl([Lh({type:I2,json:{type:String,read:A2.read,write:A2.write}})],P2.prototype,"unit",null),P2=C2=bl([md("esri.layers.support.ElevationInfo")],P2);const R2=P2,L2={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},D2={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},N2={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},F2={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:xT}}},j2={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},$2={value:null,type:R2,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function V2(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const z2={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},U2={...z2,json:{...z2.json,origins:{"web-document":{...z2.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&"service"!==i.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Rb(t.layerDefinition.drawingInfo.transparency):void 0:Rb(t.drawingInfo.transparency)}}},q2={type:iV,readOnly:!0,get(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:r,useViewTime:n}=this.layer,o=null==(t=this.view)?void 0:t.timeExtent;let s=this.layer.timeExtent;i&&(s=function(e){if(!e)return e;const{start:t,end:i}=e;return new iV({start:_a(t)?Z$(t,t.getTimezoneOffset(),"minutes"):t,end:_a(i)?Z$(i,i.getTimezoneOffset(),"minutes"):i})}(s));let a=n?o&&s?o.intersection(s):o||s:s;if(!a||a.isEmpty||a.isAllTime)return a;r&&(a=a.offset(-r.value,r.unit)),i&&(a=function(e){if(!e)return e;const{start:t,end:i}=e;return new iV({start:_a(t)?Z$(t,-t.getTimezoneOffset(),"minutes"):t,end:_a(i)?Z$(i,-i.getTimezoneOffset(),"minutes"):i})}(a));const l=this._get("timeExtent");return a.equals(l)?l:a}},G2={type:Eg,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Eg.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(i.spatialReference=Yf.fromJSON(t.spatialReference)),i}}}},read:!1}},B2={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},W2={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},H2={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},J2=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(e,t,i,r){(r&&"ground"===r.layerContainerType||e&&Kd(this,i,{},r))&&(t[i]=e)}writeOperationalLayerType(e,t,i,r){!e||r&&"tables"===r.layerContainerType||(t.layerType=e)}writeTitle(e,t){t.title=e||"Layer"}read(e,t){t&&(t.layer=this),function(e,t,i,r=Wd){var n;const o={...r,messages:[]};i(o),null==(n=o.messages)||n.forEach((t=>{"warning"!==t.type||e.loaded?r&&r.messages&&r.messages.push(t):e.loadWarnings.push(t)}))}(this,0,(t=>super.read(e,t)),t)}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=k2[e];let n=r&&r[this.operationalLayerType];var i;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(n=!1),!n)return null==(i=t.messages)||i.push(new Ac("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),n=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof Ac&&"web-document-write:property-required"===e.name)).length;var o;return Xp(null==r?void 0:r.url)?(null==t||null==(o=t.messages)||o.push(new Ac("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:r}beforeSave(){}};return bl([Lh({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),bl([Lh({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),bl([Mf("listMode")],t.prototype,"writeListMode",null),bl([Lh({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),bl([Mf("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),bl([Lh(z2)],t.prototype,"opacity",void 0),bl([Lh({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),bl([Mf("title")],t.prototype,"writeTitle",null),bl([Lh({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=bl([md("esri.layers.mixins.OperationalLayer")],t),t};var Y2;const Z2=new $g({asc:"ascending",desc:"descending"});let K2=Y2=class extends tp{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Y2({field:this.field,valueExpression:this.valueExpression,order:this.order})}};bl([Lh({type:String,json:{write:!0}})],K2.prototype,"field",void 0),bl([Lh({type:String,json:{write:!0}})],K2.prototype,"valueExpression",void 0),bl([Lh({type:Z2.apiValues,json:{read:Z2.read,write:Z2.write}})],K2.prototype,"order",void 0),K2=Y2=bl([md("esri.layers.support.OrderByInfo")],K2);const X2=K2;function Q2(e,t,i){if(!e)return null;const r=e.find((e=>!!e.field));if(!r)return null;const n=new X2;return n.read(r,i),[n]}function e3(e,t,i,r){const n=e.find((e=>!!e.field));n&&fl(i,[n.toJSON()],t)}const t3=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return bl([Lh({type:[X2],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Q2},write:{target:"layerDefinition.orderBy",writer:e3}}})],t.prototype,"orderBy",void 0),t=bl([md("esri.layers.mixins.OrderedLayer")],t),t},i3=Dl.getLogger("esri.layers.mixins.PortalLayer"),r3=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new gy({id:t.itemId,portal:i&&i.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await import("./chunks/layersLoader-22b207db.js").then((function(e){return e.l}));return Yc(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw ru(e)||i3.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>(Xc(e),!0))))}async _fetchUserHasEditingPrivileges(e){const t=this.url?null==em?void 0:em.findCredential(this.url):null;if(!t)return!0;const i=n3.credential===t?n3.user:await this._fetchEditingUser(e);return n3.credential=t,n3.user=i,xa(i)||null==i.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){var t,i;const r=null==(t=this.portalItem)||null==(i=t.portal)?void 0:i.user;if(r)return r;const n=em.findServerInfo(this.url);if(null==n||!n.owningSystemUrl)return null;const o=`${n.owningSystemUrl}/sharing/rest`,s=sy.getDefault();if(s&&s.loaded&&Jp(s.restUrl)===Jp(o))return s.user;const a=`${o}/community/self`,l=_a(e)?e.signal:null,c=await cp(am(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?ey.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||sy.getDefault());return i&&r&&!Vp(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new Ac("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return bl([Lh({type:gy})],t.prototype,"portalItem",null),bl([Mm("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),bl([Mf("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),bl([Lh({clonable:!1})],t.prototype,"resourceReferences",void 0),bl([Lh({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=bl([md("esri.layers.mixins.PortalLayer")],t),t},n3={credential:null,user:null},o3=new Fd,s3=new WeakMap;function a3(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function l3(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:l3(t,e%t):0}let c3=0,u3=0;function h3(){const e=Date.now();for(const i of o3)if(i.refreshInterval){var t;e-(null!=(t=s3.get(i))?t:0)+5>=6e4*i.refreshInterval&&(s3.set(i,e),i.refresh(e))}}Gu((()=>{const e=Date.now();let t=0;for(const i of o3)t=l3(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?s3.get(i)||s3.set(i,e):s3.delete(i);if(t!==u3){if(u3=t,clearInterval(c3),0===u3)return void(c3=0);c3=setInterval(h3,u3)}}));const d3=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=pu((()=>this.hasDataChanged())),this.when().then((()=>{!function(e){a3(e)&&o3.push(e)}(this)}),(()=>{}))}destroy(){!function(e){a3(e)&&o3.includes(e)&&o3.remove(e)}(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){nu(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{Dl.getLogger(this.declaredClass).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}};return bl([Lh({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),bl([Lh({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),bl([Lh()],t.prototype,"refreshParameters",null),t=bl([md("esri.layers.mixins.RefreshableLayer")],t),t},p3=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}};return bl([Lh({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),bl([Lh({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),bl([Lh({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=bl([md("esri.layers.mixins.ScaleRangeLayer")],t),t};const f3=Vg()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var m3;let g3=m3=class extends tp{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return function(e,t,i){return 0===e?0:e*J$[t]/J$[i]}(this.value,this.unit,"milliseconds")}clone(){return new m3({value:this.value,unit:this.unit})}};bl([Lh({type:Number,json:{write:!0},nonNullable:!0})],g3.prototype,"value",void 0),bl([Lh({type:f3.apiValues,json:{type:f3.jsonValues,read:f3.read,write:f3.write},nonNullable:!0})],g3.prototype,"unit",void 0),g3=m3=bl([md("esri.TimeInterval")],g3);const y3=g3;var v3;let b3=v3=class extends tp{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new v3({respectsDaylightSaving:e,timezone:t})}};bl([Lh({type:Boolean,json:{write:!0}})],b3.prototype,"respectsDaylightSaving",void 0),bl([Mm("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],b3.prototype,"readRespectsDaylightSaving",null),bl([Lh({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],b3.prototype,"timezone",void 0),b3=v3=bl([md("esri.layers.support.TimeReference")],b3);const w3=b3;var _3;let x3=_3=class extends tp{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new iV({start:i,end:r})}writeFullTimeExtent(e,t){e&&_a(e.start)&&_a(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new y3({value:t.timeInterval,unit:f3.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new y3({value:t.defaultTimeInterval,unit:f3.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:o,fullTimeExtent:s,trackIdField:a,useTime:l}=this;return new _3({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:n,timeReference:ol(o),fullTimeExtent:ol(s),trackIdField:a,useTime:l})}};bl([Lh({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],x3.prototype,"cumulative",void 0),bl([Lh({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],x3.prototype,"endField",void 0),bl([Lh({type:iV,json:{write:{enabled:!0,allowNull:!0}}})],x3.prototype,"fullTimeExtent",void 0),bl([Mm("fullTimeExtent",["timeExtent"])],x3.prototype,"readFullTimeExtent",null),bl([Mf("fullTimeExtent")],x3.prototype,"writeFullTimeExtent",null),bl([Lh({type:Boolean,json:{write:!0}})],x3.prototype,"hasLiveData",void 0),bl([Lh({type:y3,json:{write:{enabled:!0,allowNull:!0}}})],x3.prototype,"interval",void 0),bl([Mm("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],x3.prototype,"readInterval",null),bl([Mf("interval")],x3.prototype,"writeInterval",null),bl([Lh({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],x3.prototype,"startField",void 0),bl([Lh({type:w3,json:{write:{enabled:!0,allowNull:!0}}})],x3.prototype,"timeReference",void 0),bl([Lh({type:String,json:{write:{enabled:!0,allowNull:!0}}})],x3.prototype,"trackIdField",void 0),bl([Lh({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],x3.prototype,"useTime",void 0),x3=_3=bl([md("esri.layers.support.TimeInfo")],x3);const S3=x3,k3=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,n=f3.fromJSON(i.timeOffsetUnits);return r&&n?new y3({value:r,unit:n}):null}set timeInfo(e){N_(e,this.fieldsIndex),this._set("timeInfo",e)}};return bl([Lh({type:iV,json:{write:!1}})],t.prototype,"timeExtent",void 0),bl([Lh({type:y3})],t.prototype,"timeOffset",void 0),bl([Mm("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),bl([Lh({value:null,type:S3,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),bl([Lh({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=bl([md("esri.layers.mixins.TemporalLayer")],t),t};var M3;let T3=M3=class extends tp{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:n}=this;return new M3({name:e,fields:t,isAscending:i,isUnique:r,description:n})}};bl([Lh({constructOnly:!0})],T3.prototype,"name",void 0),bl([Lh({constructOnly:!0})],T3.prototype,"fields",void 0),bl([Lh({constructOnly:!0})],T3.prototype,"isAscending",void 0),bl([Lh({constructOnly:!0})],T3.prototype,"isUnique",void 0),bl([Lh({constructOnly:!0})],T3.prototype,"description",void 0),T3=M3=bl([md("esri.layers.support.FeatureIndex")],T3);let E3=class extends tp{constructor(){super(...arguments),this.type=null}};bl([Lh({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],E3.prototype,"type",void 0),E3=bl([md("esri.layers.support.FeatureReduction")],E3);const I3=E3;var C3;let O3=C3=class extends tp{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new C3({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};bl([Lh({type:String,json:{write:!0}})],O3.prototype,"statisticType",void 0),bl([Lh({type:String,json:{write:!0}})],O3.prototype,"onStatisticField",void 0),bl([Lh({type:String,json:{write:!0}})],O3.prototype,"onStatisticValueExpression",void 0),O3=C3=bl([md("esri.layers.support.OutStatistic")],O3);const A3=O3;var P3;let R3=P3=class extends tp{constructor(){super(...arguments),this.name=null}clone(){return new P3({name:this.name,outStatistic:this.outStatistic.clone()})}};bl([Lh({type:String,json:{write:!0}})],R3.prototype,"name",void 0),bl([Lh({type:A3,json:{write:!0}})],R3.prototype,"outStatistic",void 0),R3=P3=bl([md("esri.layers.support.AggregateField")],R3);const L3=R3,D3="__begin__",N3="__end__",F3=new RegExp(D3,"ig"),j3=new RegExp(N3,"ig"),$3=new RegExp("^"+D3,"i"),V3=new RegExp(N3+"$","i");function z3(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function U3(e){const t=z3(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e.match(G3);return t&&t[1].trim()||null}(t.expression);case"arcade":return J3(t.expression)}return null}function q3(e){let t;return e?(t=Ol(e,(e=>D3+'$feature["'+e+'"]'+N3)),t=$3.test(t)?t.replace($3,""):'"'+t,t=V3.test(t)?t.replace(V3,""):t+'"',t=t.replace(F3,'" + ').replace(j3,' + "')):t='""',t}const G3=/^\s*\{([^}]+)\}\s*$/i;const B3=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,W3=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,H3=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function J3(e){if(!e)return null;let t=B3.exec(e)||W3.exec(e);return t?t[1]||t[3]:(t=H3.exec(e),t?t[2]:null)}var Y3;let Z3=Y3=class extends tp{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?q3(t.value):e}writeExpression(e,t,i){null!=this.value&&(e=q3(this.value)),null!=e&&(t[i]=e)}clone(){return new Y3({expression:this.expression,title:this.title,value:this.value})}};bl([Lh({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Z3.prototype,"expression",void 0),bl([Mm("expression",["expression","value"])],Z3.prototype,"readExpression",null),bl([Mf("expression")],Z3.prototype,"writeExpression",null),bl([Lh({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Z3.prototype,"title",void 0),bl([Lh({json:{read:!1,write:!1}})],Z3.prototype,"value",void 0),Z3=Y3=bl([md("esri.layers.support.LabelExpressionInfo")],Z3);const K3=Z3,X3=[252,146,31,255],Q3={type:"esriSMS",style:"esriSMSCircle",size:6,color:X3,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},e5={type:"esriSLS",style:"esriSLSSolid",width:.75,color:X3},t5={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},i5={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},r5={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},n5={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};EI.fromJSON(Q3),oM.fromJSON(e5),SI.fromJSON(t5);const o5=OI.fromJSON({type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0}),s5=EI.fromJSON(i5),a5=oM.fromJSON(r5),l5=SI.fromJSON(n5);var c5;const u5=new $g({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function h5(e){return!e||"service"!==e.origin&&!d5(e.layer)}function d5(e){return"map-image"===(null==e?void 0:e.type)}function p5(e){var t,i;return!!d5(e)&&!(null==(t=e.capabilities)||null==(i=t.exportMap)||!i.supportsArcadeExpressionForLabeling)}let f5=c5=class extends tp{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=o5,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=function(e,t,i){switch(t){case"=":return e==i;case"<>":return e!=i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}return!1};try{if(null==e)return!0;const r=e.split(" ");if(3===r.length)return i(t[r[0]],r[1],r[2]);if(7===r.length){const e=i(t[r[0]],r[1],r[2]),n=r[3],o=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return e&&o;case"OR":return e||o}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=function(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=J3(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(null==e&&null!=this.labelExpression&&h5(r))e=new K3({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(r);n.expression&&(t[i]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return z3(this)}getLabelExpressionArcade(){return function(e){const t=z3(e);if(!t)return null;switch(t.type){case"conventional":return q3(t.expression);case"arcade":return t.expression}return null}(this)}getLabelExpressionSingleField(){return U3(this)}hash(){return JSON.stringify(this)}clone(){return new c5({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ol(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ol(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};bl([Lh({type:String,json:{write:!0}})],f5.prototype,"name",void 0),bl([Lh({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],f5.prototype,"allowOverrun",void 0),bl([Lh({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],f5.prototype,"deconflictionStrategy",void 0),bl([Lh({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&"service"===(null==i?void 0:i.origin)&&p5(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],f5.prototype,"labelExpression",void 0),bl([Mm("labelExpression")],f5.prototype,"readLabelExpression",null),bl([Mf("labelExpression")],f5.prototype,"writeLabelExpression",null),bl([Lh({type:K3,json:{write:{overridePolicy:(e,t,i)=>function(e){return h5(e)||p5(e.layer)}(i)?{allowNull:!0}:{enabled:!1}}}})],f5.prototype,"labelExpressionInfo",void 0),bl([Mf("labelExpressionInfo")],f5.prototype,"writeLabelExpressionInfo",null),bl([Lh({type:u5.apiValues,json:{type:u5.jsonValues,read:u5.read,write:u5.write}})],f5.prototype,"labelPlacement",void 0),bl([Lh({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],f5.prototype,"labelPosition",void 0),bl([Lh({type:Number})],f5.prototype,"maxScale",void 0),bl([Mf("maxScale")],f5.prototype,"writeMaxScale",null),bl([Lh({type:Number})],f5.prototype,"minScale",void 0),bl([Mf("minScale")],f5.prototype,"writeMinScale",null),bl([Lh({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],f5.prototype,"repeatLabel",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0,origins:{"web-scene":{write:!1}}}})],f5.prototype,"repeatLabelDistance",void 0),bl([Lh({types:zI,json:{origins:{"web-scene":{types:qI,write:wX,default:null}},write:wX,default:null}})],f5.prototype,"symbol",void 0),bl([Lh({type:Boolean,json:{write:!0}})],f5.prototype,"useCodedValues",void 0),bl([Lh({type:String,json:{write:!0}})],f5.prototype,"where",void 0),f5=c5=bl([md("esri.layers.support.LabelClass")],f5);const m5=f5;var g5;let y5=g5=class extends tp{constructor(e){super(e),this.type="cluster",this.clusterRadius=Pk("80px"),this.clusterMinSize=Pk("12px"),this.clusterMaxSize=Pk("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new g5({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ol(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ol(this.fields),popupEnabled:this.popupEnabled,popupTemplate:ol(this.popupTemplate)})}};bl([Lh({type:["cluster"],readOnly:!0,json:{write:!0}})],y5.prototype,"type",void 0),bl([Lh({type:Number,cast:e=>"auto"===e?e:Pk(e),json:{write:!0}})],y5.prototype,"clusterRadius",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],y5.prototype,"clusterMinSize",void 0),bl([Lh({type:Number,cast:Pk,json:{write:!0}})],y5.prototype,"clusterMaxSize",void 0),bl([Lh(D2)],y5.prototype,"popupEnabled",void 0),bl([Lh({type:bk,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],y5.prototype,"popupTemplate",void 0),bl([Lh({types:jI})],y5.prototype,"symbol",void 0),bl([Lh({type:[m5],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],y5.prototype,"labelingInfo",void 0),bl([Lh(N2)],y5.prototype,"labelsVisible",void 0),bl([Lh({type:[L3],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],y5.prototype,"fields",void 0),y5=g5=bl([md("esri.layers.support.FeatureReductionCluster")],y5);const v5=y5;var b5;let w5=b5=class extends I3{constructor(e){super(e),this.type="selection"}clone(){return new b5}};bl([Lh({type:["selection"]})],w5.prototype,"type",void 0),w5=b5=bl([md("esri.layers.support.FeatureReductionSelection")],w5);const _5=w5,x5={types:{key:"type",base:I3,typeMap:{selection:_5,cluster:v5}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:I3,typeMap:{selection:v5}}},"web-scene":{types:{key:"type",base:I3,typeMap:{selection:_5}}}}}},S5=new $g({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let k5=class extends(GT(tp)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};bl([Lh({json:{write:!0}})],k5.prototype,"name",void 0),bl([Lh({json:{write:!0}})],k5.prototype,"description",void 0),bl([Lh({json:{read:S5.read,write:S5.write}})],k5.prototype,"drawingTool",void 0),bl([Lh({json:{write:!0}})],k5.prototype,"prototype",void 0),bl([Lh({json:{write:!0}})],k5.prototype,"thumbnail",void 0),k5=bl([md("esri.layers.support.FeatureTemplate")],k5);const M5=k5;let T5=class extends(GT(tp)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=bV(e[i]);return t}writeDomains(e,t){const i={};for(const t of Object.keys(e)){var r;e[t]&&(i[t]=null==(r=e[t])?void 0:r.toJSON())}t.domains=i}};bl([Lh({json:{write:!0}})],T5.prototype,"id",void 0),bl([Lh({json:{write:!0}})],T5.prototype,"name",void 0),bl([Lh({json:{write:!0}})],T5.prototype,"domains",void 0),bl([Mm("domains")],T5.prototype,"readDomains",null),bl([Mf("domains")],T5.prototype,"writeDomains",null),bl([Lh({type:[M5],json:{write:!0}})],T5.prototype,"templates",void 0),T5=bl([md("esri.layers.support.FeatureType")],T5);const E5=T5;function I5(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function C5(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function O5(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}class A5{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;const t=[];for(const i of e){const e=i&&i.name;if(e){const r=P5(e);this._fieldsMap.set(e,i),this._fieldsMap.set(r,i),t.push(r),I5(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):ax(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),C5(i)||O5(i)||(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable)}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)C5(e)||O5(e)||e.nullable||void 0!==K_(e)||this._requiredFields.push(e)}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(P5(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function P5(e){return e.toLowerCase().trim()}const R5=Dl.getLogger("esri.layers.support.fieldProperties");function L5(){return{fields:{type:[kV],value:null},fieldsIndex:{readOnly:!0,get(){return new A5(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||R5.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return j_(this.fieldsIndex,e)}}}}let D5=class extends(GT(tp)){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};bl([Lh({type:String,json:{read:{source:"shapeAreaFieldName"}}})],D5.prototype,"shapeAreaField",void 0),bl([Lh({type:String,json:{read:{source:"shapeLengthFieldName"}}})],D5.prototype,"shapeLengthField",void 0),bl([Lh({type:String,json:{read:e=>DO.read(e)||NO.read(e)}})],D5.prototype,"units",void 0),D5=bl([md("esri.layers.support.GeometryFieldsInfo")],D5);const N5=D5,F5=/\[([^\[\]]+)\]/gi;function j5(e,t,i){return e?e.map((e=>{const r=new m5;if(r.read(e,i),r.labelExpression){const e=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;r.labelExpression=r.labelExpression.replace(F5,((t,i)=>`[${function(e,t){if(!t)return e;const i=e.toLowerCase();for(let e=0;e<t.length;e++){const r=t[e].name;if(r.toLowerCase()===i)return r}return e}(i,e)}]`))}return r})):null}var $5;let V5=$5=class extends tp{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Fd}clone(){return new $5({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};bl([Lh({type:String,json:{write:!0}})],V5.prototype,"floorField",void 0),bl([Lh({json:{read:!1,write:!1}})],V5.prototype,"viewAllMode",void 0),bl([Lh({json:{read:!1,write:!1}})],V5.prototype,"viewAllLevelIds",void 0),V5=$5=bl([md("esri.layers.support.LayerFloorInfo")],V5);const z5=V5,U5=new $g({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),q5=new $g({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let G5=class extends(GT(tp)){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};bl([Lh({json:{read:U5.read,write:U5.write}})],G5.prototype,"cardinality",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"composite",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"id",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"keyField",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"keyFieldInRelationshipTable",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"name",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"relatedTableId",void 0),bl([Lh({json:{read:!0,write:!0}})],G5.prototype,"relationshipTableId",void 0),bl([Lh({json:{read:q5.read,write:q5.write}})],G5.prototype,"role",void 0),G5=bl([md("esri.layers.support.Relationship")],G5);const B5=G5,W5=[];function H5(e,t){if(T1(e.url))return!0;const{wkid:i}=t;for(const t of W5){if(e.version>=t[0])return!0;if("function"==typeof t[1]&&(t[1]=t[1]()),t[1].has(i))return!1}return!0}async function J5(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&"unique-value"===r.type&&r.styleOrigin){const n=await cp(r.populateFromStyle());if(Yc(i),!1===n.ok){const i=n.error;t&&t.messages&&t.messages.push(new Fh("renderer:style-reference",`Failed to create unique value renderer from style reference: ${i.message}`,{error:i,context:t})),e.clear("renderer",t.origin)}}}W5.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102960;t++)e.add(t);return e}]),W5.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),W5.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),W5.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),W5.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),W5.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),W5.push([10.61,()=>new Set([102497])]),W5.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),W5.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),W5.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);const Y5=["oid","global-id"],Z5=["oid","global-id","guid"];function K5({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:n},o){if(!i)return null;const s=function({editFieldsInfo:e,fields:t,objectIdField:i},r){return function(e,t){const i=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===i&&(e=e.slice()),e.sort(e4),e}(t,(null==r?void 0:r.ignoreFieldTypes)||o4).map((t=>new nS({fieldName:t.name,isEditable:i4(t,e),label:t.alias,format:r4(t),visible:Q5(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:null==r?void 0:r.visibleFieldNames})})))}({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!s.length)return null;const a=function(e){const t=function({displayField:e,fields:t}){return e||(t&&t.length?G_(t,"name-or-title")||G_(t,"unique-identifier")||G_(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}({titleBase:n,fields:i,displayField:e}),l=[new aS,new kx];return new bk({title:a,content:l,fieldInfos:s})}const X5=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Q5=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!(t4(e.name,t)||i&&e.name===i||Y5.indexOf(e.type)>-1||X5.some((t=>t.test(e.name))));function e4(e,t){return"oid"===e.type?-1:"oid"===t.type?1:n4(e)?-1:n4(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function t4(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:n,editorField:o}=t;return-1!==[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),o&&o.toLowerCase()].indexOf(e.toLowerCase())}function i4(e,t){return e.editable&&-1===Z5.indexOf(e.type)&&!t4(e.name,t)}function r4(e){switch(e.type){case"small-integer":case"integer":case"single":return new tS({digitSeparator:!0,places:0});case"double":return new tS({digitSeparator:!0,places:2});case"date":return new tS({dateFormat:"long-month-day-year"});default:return null}}function n4(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}const o4=["geometry","blob","raster","guid","xml"],s4=new $g({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),a4={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},l4="FeatureLayer",c4=Dl.getLogger("esri.layers.FeatureLayer");function u4(e){return e&&e instanceof Fd}function h4(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function d4(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function p4(e){var t;const i=null==e||null==(t=e.supportedSpatialAggregationStatistics)?void 0:t.map((e=>e.toLowerCase()));return{envelope:!(null==i||!i.includes("envelopeaggregate")),centroid:!(null==i||!i.includes("centroidaggregate")),convexHull:!(null==i||!i.includes("convexhullaggregate"))}}const f4=L5();function m4(e,t,i){const r=!(null==i||!i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let g4=class extends(S2(p2(t3(k3(p3(d3(A1(J2(r3(KQ(f2(m1(GT(f_)))))))))))))){constructor(...e){super(...e),this._handles=new Vb,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Yf.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Fd.ofType(T3)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=Ca(this._handles)}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=_a(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then((e=>this._initLayerProperties(e))));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Xc).then((async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstLayerId(t);null!=e&&(this.layerId=e)}if(!this.url&&!this._hasMemorySource())throw new Ac("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:null!=i.lastEditDate?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}writeIsTable(e,t,i,r){null!=r&&r.writeLayerSchema&&fl(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeGlobalID"===e.type)return e.name}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeOID"===e.type)return e.name}get parsedUrl(){const e=this.url?Ap(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Yp(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Yp(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){L_(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const e=GQ(r,t,i)||void 0;return e||c4.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),e}if(t.defaultSymbol)return t.types&&t.types.length?new $Q({defaultSymbol:y4(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:y4(e.symbol,e,i)})))}):new pQ({symbol:y4(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(u4(t)&&this._resetMemorySource(t),u4(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Fd?new f1({layer:this,items:e}):e:null}readSource(e,t){const i=xU.fromJSON(t.featureSet);return new f1({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e=e&&e.map((e=>M5.fromJSON(e))),this._fixTemplates(e,r),this._fixTemplates(e,n),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const e=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?M1(this.url,i):i;let t=i;if(!t&&this.url){const e=x1(this.url);_a(e)&&(t=e.title)}if(!t)return;return"item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),k1(t)}if("item-title"===this.sublayerTitleMode&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===i));e&&(i=e.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,n=i&&i.editorField;return e&&e.map((e=>(e=E5.fromJSON(e),this._fixTemplates(e.templates,r),this._fixTemplates(e.templates,n),e)))}set url(e){const t=I1({layer:this,url:e,nonStandardUrlAllowed:!0,logger:c4});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){C1(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}addAttachment(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("addAttachment"in this.source))throw new Ac(l4,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)}))}updateAttachment(e,t,i){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("updateAttachment"in this.source))throw new Ac(l4,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)}))}async applyEdits(e,t){const i=await import("./chunks/editingSupport-8a384cb4.js");return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return K5(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await iu(import("./chunks/FeatureLayerSource-e09d6ff9.js"),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new tz,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:n}=this;return e.timeExtent=null!=r&&null!=n?n.offset(-r.value,r.unit):n||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("deleteAttachments"in this.source))throw new Ac(l4,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)}))}fetchRecomputedExtents(e){return this.load({signal:null==e?void 0:e.signal}).then((()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new Ac(l4,"Layer source does not support fetchUpdates capability")}))}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;let n=null;return i.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===r.toString()&&(n=e),!!n)})),n}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const t=r.domains&&r.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=OF.from(e),this.load().then((()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new Ac(l4,"this layer doesn't support attachments");const{attachmentTypes:t,objectIds:i,globalIds:r,num:n,size:o,start:s,where:a}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const l=i&&i.length>1,c=t&&t.length,u=r&&r.length,h=o&&o.length;if(l||c||u||h||n||s||a)throw new Ac(l4,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||a))throw new Ac(l4,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new Ac(l4,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)}))}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(tz.from(e)||this.createQuery(),t))).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(tz.from(e)||this.createQuery(),t);throw new Ac(l4,"Layer source does not support queryObjectIds capability")}))}queryFeatureCount(e,t){return this.load().then((()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(tz.from(e)||this.createQuery(),t);throw new Ac(l4,"Layer source does not support queryFeatureCount capability")}))}queryExtent(e,t){return this.load().then((()=>{if(this.source.queryExtent)return this.source.queryExtent(tz.from(e)||this.createQuery(),t);throw new Ac(l4,"Layer source does not support queryExtent capability")}))}queryRelatedFeatures(e,t){return this.load().then((()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(nz.from(e),t);throw new Ac(l4,"Layer source does not support queryRelatedFeatures capability")}))}queryRelatedFeaturesCount(e,t){return this.load().then((()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(nz.from(e),t);throw new Ac(l4,"Layer source does not support queryRelatedFeaturesCount capability")}))}queryTopFeatures(e,t){return this.load().then((()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Yq.from(e),t).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}));throw new Ac(l4,"Layer source does not support queryTopFeatures capability")}))}queryTopObjectIds(e,t){return this.load().then((()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Yq.from(e),t);throw new Ac(l4,"Layer source does not support queryTopObjectIds capability")}))}queryTopFeaturesExtent(e,t){return this.load().then((()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Yq.from(e),t);throw new Ac(l4,"Layer source does not support queryTopExtents capability")}))}queryTopFeatureCount(e,t){return this.load().then((()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Yq.from(e),t);throw new Ac(l4,"Layer source does not support queryFeatureCount capability")}))}read(e,t){const i=e.featureCollection;if(i){const e=i.layers;e&&1===e.length&&(super.read(e[0],t),null!=i.showLegend&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var i,r;const n=(t={...t,writeLayerSchema:null!=(i=null==(r=t)?void 0:r.writeLayerSchema)?i:this._hasMemorySource()}).origin,o=t.layerContainerType,s=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==o)return s&&s.push(new Ac("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return s&&s.push(new Ac("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===n&&"tables"===o)return s&&s.push(new Ac("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new Ac(l4,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&("memory"===this.source.type||H5(this,e))}_readEditingEnabled(e,t,i){var r;let n=null==(r=e.layerDefinition)?void 0:r.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,t&&"web-map"===(null==i?void 0:i.origin)&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,i,r){if(!e){var n,o;const e=null!=(n=this.capabilities)&&null!=(o=n.operations)&&o.supportsSync?"Query,Sync":"Query";fl("layerDefinition.capabilities",e,t),!i||null!=r&&r.writeLayerSchema||(t.capabilities=e)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new Ac(l4,`feature is missing the identifying attribute ${i}`)):Promise.reject(new Ac(l4,"'attributes' are required on a feature to query attachments")):Promise.reject(new Ac(l4,"A feature is required to add/delete/update attachments")):Promise.reject(new Ac(l4,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return am(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{const t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),L_(this.renderer,this.fieldsIndex),N_(this.timeInfo,this.fieldsIndex),J5(this,{origin:"service"})}async hasDataChanged(){var e;if(null!=(e=this.source)&&e.refresh)try{var t;const{dataChanged:e,updates:i}=await(null==(t=this.source)?void 0:t.refresh());if(_a(i)&&(this.sourceJSON={...this.sourceJSON,...i},this.read(i,{origin:"service",url:this.parsedUrl})),e)return!0}catch{}if(this.definitionExpression)try{return(await async function(e,t){const{WhereClause:i}=await import("./chunks/WhereClause-3a857400.js");return i.create(e,t)}(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach((e=>{const i=e.prototype&&e.prototype.attributes;i&&t&&delete i[t]}))}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Ac("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Ac("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this})),this._handles.add([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((e=>{const i=a4[e.name];i&&(t[i]=!!e.isEnabled)})),t}_readDataCapabilities(e){return{isVersioned:h4(e,"isDataVersioned",!1),supportsAttachment:h4(e,"hasAttachments",!1),supportsM:h4(e,"hasM",!1),supportsZ:h4(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:h4(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map((e=>e.trim())):[],r=i.includes("editing")&&!t.datesInUnknownTimezone;let n=r&&i.includes("create"),o=r&&i.includes("delete"),s=r&&i.includes("update");const a=i.includes("changetracking");return r&&!(n||o||s)&&(n=o=s=!0),{supportsCalculate:h4(t,"supportsCalculate",!1),supportsTruncate:h4(t,"supportsTruncate",!1),supportsValidateSql:h4(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:o,supportsEditing:r,supportsChangeTracking:a,supportsQuery:i.includes("query"),supportsQueryAttachments:h4(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:h4(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:s,supportsExceedsLimitStatistics:h4(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,o=null==(t=this.url)?void 0:t.includes("MapServer"),s=!wa("mapserver-pbf-enabled")&&o&&this.version<10.81,a=T1(this.url),l=(e.supportedQueryFormats||"").split(",").reduce(((e,t)=>{const i=t.toLowerCase().trim();return i&&e.add(i),e}),new Set);return{supportsStatistics:h4(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:h4(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:h4(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:p4(i),supportsCentroid:h4(i,"supportsReturningGeometryCentroid",!1),supportsDistance:h4(i,"supportsQueryWithDistance",!1),supportsDistinct:h4(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:h4(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:h4(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:h4(i,"supportsHavingClause",!1),supportsOrderBy:h4(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:h4(i,"supportsPagination",!1),supportsQuantization:h4(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:h4(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:h4(e,"supportsReturningQueryGeometry",!1),supportsResultType:h4(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:h4(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:h4(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:h4(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:h4(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:h4(r,"allowOthersToQuery",!0),supportsHistoricMoment:h4(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!s&&l.has("pbf"),supportsDisjointSpatialRelationship:h4(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:h4(i,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:h4(i,"supportsDefaultSR",!1),supportsCompactGeometry:a,maxRecordCountFactor:d4(e,"maxRecordCountFactor",void 0),maxRecordCount:d4(e,"maxRecordCount",void 0),standardMaxRecordCount:d4(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:d4(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=h4(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:h4(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:h4(e,"allowGeometryUpdates",!0),supportsGlobalId:h4(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:h4(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:h4(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:h4(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:h4(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:h4(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:h4(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:h4(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:h4(t,"allowOthersToUpdate",!0)}}};bl([Lh({readOnly:!0,json:{read:!1}})],g4.prototype,"capabilities",void 0),bl([Mm("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],g4.prototype,"readCapabilities",null),bl([Lh({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],g4.prototype,"charts",void 0),bl([Lh({readOnly:!0})],g4.prototype,"createQueryVersion",null),bl([Lh({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],g4.prototype,"copyright",void 0),bl([Lh({type:Boolean})],g4.prototype,"datesInUnknownTimezone",void 0),bl([Lh({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],g4.prototype,"displayField",void 0),bl([Lh({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],g4.prototype,"definitionExpression",void 0),bl([Lh({types:FI,readOnly:!0})],g4.prototype,"defaultSymbol",void 0),bl([Lh({type:UV})],g4.prototype,"dynamicDataSource",void 0),bl([Lh({readOnly:!0})],g4.prototype,"editFieldsInfo",void 0),bl([Lh({type:Boolean})],g4.prototype,"editingEnabled",null),bl([Mm(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],g4.prototype,"readEditingEnabled",null),bl([Mm("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],g4.prototype,"readEditingEnabledFromWebMap",null),bl([Mf(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],g4.prototype,"writeEditingEnabled",null),bl([Mf("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],g4.prototype,"writeEditingEnabledToWebMap",null),bl([Lh({readOnly:!0})],g4.prototype,"editingInfo",void 0),bl([Mm("editingInfo")],g4.prototype,"readEditingInfo",null),bl([Lh($2)],g4.prototype,"elevationInfo",void 0),bl([Lh(x5)],g4.prototype,"featureReduction",void 0),bl([Lh({...f4.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:m4}}}}})],g4.prototype,"fields",void 0),bl([Lh(f4.fieldsIndex)],g4.prototype,"fieldsIndex",void 0),bl([Lh({type:z5,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],g4.prototype,"floorInfo",void 0),bl([Lh({type:Q0,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],g4.prototype,"formTemplate",void 0),bl([Lh({type:Eg,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],g4.prototype,"fullExtent",void 0),bl([Lh()],g4.prototype,"gdbVersion",void 0),bl([Lh({readOnly:!0,type:N5,json:{read:{source:"geometryProperties"}}})],g4.prototype,"geometryFieldsInfo",void 0),bl([Lh({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:s4.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:m4,writer(e,t,i){const r=e?s4.toJSON(e):null;r&&fl(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:s4.read}}})],g4.prototype,"geometryType",void 0),bl([Lh({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],g4.prototype,"hasM",void 0),bl([Lh({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],g4.prototype,"hasZ",void 0),bl([Lh({readOnly:!0,type:s1})],g4.prototype,"heightModelInfo",void 0),bl([Lh({type:Date})],g4.prototype,"historicMoment",void 0),bl([Lh(B2)],g4.prototype,"id",void 0),bl([Lh({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],g4.prototype,"infoFor3D",void 0),bl([Lh({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],g4.prototype,"isTable",void 0),bl([Mm("service","isTable",["type","geometryType"]),Mm("isTable",["layerDefinition.type","layerDefinition.geometryType"])],g4.prototype,"readIsTable",null),bl([Mf("web-map","isTable")],g4.prototype,"writeIsTable",null),bl([Lh(N2)],g4.prototype,"labelsVisible",void 0),bl([Lh({type:[m5],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:j5},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:j5},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],g4.prototype,"labelingInfo",void 0),bl([Lh(U2)],g4.prototype,"opacity",void 0),bl([Lh({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],g4.prototype,"layerId",void 0),bl([Lh(j2)],g4.prototype,"legendEnabled",void 0),bl([Lh({type:["show","hide"]})],g4.prototype,"listMode",void 0),bl([Lh(W2)],g4.prototype,"minScale",void 0),bl([Mm("service","minScale",["minScale","effectiveMinScale"])],g4.prototype,"readMinScale",null),bl([Lh(H2)],g4.prototype,"maxScale",void 0),bl([Mm("service","maxScale",["maxScale","effectiveMaxScale"])],g4.prototype,"readMaxScale",null),bl([Lh({type:String})],g4.prototype,"globalIdField",void 0),bl([Mm("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Mm("service","globalIdField",["globalIdField","fields"])],g4.prototype,"readGlobalIdFieldFromService",null),bl([Lh({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:m4}}}}})],g4.prototype,"objectIdField",void 0),bl([Mm("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Mm("service","objectIdField",["objectIdField","fields"])],g4.prototype,"readObjectIdFieldFromService",null),bl([Lh({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],g4.prototype,"operationalLayerType",void 0),bl([Lh(f4.outFields)],g4.prototype,"outFields",void 0),bl([Lh({readOnly:!0})],g4.prototype,"parsedUrl",null),bl([Lh({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],g4.prototype,"path",void 0),bl([Lh(D2)],g4.prototype,"popupEnabled",void 0),bl([Lh({type:bk,json:{name:"popupInfo",write:!0}})],g4.prototype,"popupTemplate",void 0),bl([Lh({readOnly:!0})],g4.prototype,"defaultPopupTemplate",null),bl([Lh({type:[B5],readOnly:!0})],g4.prototype,"relationships",void 0),bl([Lh({types:VQ,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:zQ,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:null==i?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:null==i?void 0:i.writeLayerSchema})}}})],g4.prototype,"renderer",null),bl([Mm("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Mm("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],g4.prototype,"readRenderer",null),bl([Lh()],g4.prototype,"sourceJSON",void 0),bl([Lh({type:Boolean})],g4.prototype,"returnM",void 0),bl([Lh({type:Boolean})],g4.prototype,"returnZ",void 0),bl([Lh(L2)],g4.prototype,"screenSizePerspectiveEnabled",void 0),bl([Lh({clonable:!1})],g4.prototype,"source",null),bl([Am("source")],g4.prototype,"castSource",null),bl([Mm("portal-item","source",["featureSet"]),Mm("web-map","source",["featureSet"])],g4.prototype,"readSource",null),bl([Lh({readOnly:!0})],g4.prototype,"serviceDefinitionExpression",void 0),bl([Mm("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],g4.prototype,"readServiceDefinitionExpression",null),bl([Lh({type:Yf,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],g4.prototype,"spatialReference",void 0),bl([Lh({type:Number})],g4.prototype,"subtypeCode",void 0),bl([Lh({type:[M5]})],g4.prototype,"templates",void 0),bl([Mm("templates",["editFieldsInfo","creatorField","editorField","templates"])],g4.prototype,"readTemplates",null),bl([Lh({type:S3})],g4.prototype,"timeInfo",void 0),bl([Lh()],g4.prototype,"title",void 0),bl([Mm("service","title",["name"]),Mm("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],g4.prototype,"readTitle",null),bl([Mm("web-map","title",["layerDefinition.name","title"])],g4.prototype,"readTitleFromWebMap",null),bl([Lh({type:String})],g4.prototype,"sublayerTitleMode",void 0),bl([Lh({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],g4.prototype,"trackIdField",void 0),bl([Lh({json:{read:!1}})],g4.prototype,"type",void 0),bl([Lh({type:String})],g4.prototype,"typeIdField",void 0),bl([Mm("service","typeIdField"),Mm("typeIdField",["layerDefinition.typeIdField"])],g4.prototype,"readTypeIdField",null),bl([Lh({type:[E5]})],g4.prototype,"types",void 0),bl([Mm("service","types",["types"]),Mm("types",["layerDefinition.types"])],g4.prototype,"readTypes",null),bl([Lh({readOnly:!0,json:{write:!1}})],g4.prototype,"serverGens",void 0),bl([Lh({type:Fd.ofType(T3),readOnly:!0})],g4.prototype,"indexes",void 0),bl([Lh(F2)],g4.prototype,"url",null),bl([Mf("url")],g4.prototype,"writeUrl",null),bl([Lh({readOnly:!0})],g4.prototype,"userIsAdmin",void 0),bl([Lh({json:{origins:{service:{read:!0}},read:!1}})],g4.prototype,"version",void 0),bl([Mm("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],g4.prototype,"readVersion",null),bl([Lh({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],g4.prototype,"visible",void 0),bl([Mm("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],g4.prototype,"readVisible",null),g4=bl([md("esri.layers.FeatureLayer")],g4);const y4=zh({types:VI}),v4=g4;var b4=Object.freeze({__proto__:null,default:v4});const w4=["$datastore","$map","$layer","$aggregatedfeatures"],_4=Dl.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function x4(e){return"string"==typeof e?oj(nj(e)):Array.isArray(e)?function(e){return`<ul class="esri-widget__list">${e.map((e=>`<li>${"string"==typeof e?oj(nj(e)):e}</li>`)).join("")}</ul>`}(e):"esri.arcade.Dictionary"===(null==e?void 0:e.declaredClass)?function(e){return`<table class="esri-widget__table">${e.keys().map((t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${"string"==typeof i?oj(nj(i)):i}</td></tr>`})).join("")}</table>`}(e):e}function S4(){return import("./chunks/arcadeUtils-06d89b42.js").then((function(e){return e.q}))}async function k4({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||"2d"!==(null==t?void 0:t.type))return[];const n=await t.whenLayerView(r);if(!n.createQuery||!n.queryFeatures)return[];const o=n.createQuery();o.aggregateIds=[e.getObjectId()];const{features:s}=await n.queryFeatures(o);return s}async function M4({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:n,graphic:o,view:s}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=w4.filter((e=>t.hasVariable(a,e))),[c]=await Wc([k4({graphic:o,view:s}),t.loadScriptDependencies(a,!0,l)]),u=t.getViewInfo({spatialReference:r}),h=t.createExecContext(o,u);h.interceptor=i,h.useAsync=!0,function({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:n,map:o,graphic:s,interceptor:a}){i.forEach((i=>{const l=i.toLowerCase(),c={map:o,spatialReference:n.sr,interceptor:a};if("$map"===l&&(r.vars[l]=t.convertMapToFeatureSetCollection(c)),"$layer"===l&&(r.vars[l]=t.convertFeatureLayerToFeatureSet({layer:s.sourceLayer,spatialReference:n.sr,interceptor:a})),"$datastore"===l&&(r.vars[l]=t.convertServiceUrlToWorkspace({url:s.sourceLayer.url,spatialReference:n.sr,interceptor:a})),"$aggregatedfeatures"===l){const i=s.layer,{fields:o,objectIdField:c,geometryType:u,spatialReference:h,displayField:d}=i,p=new v4({fields:o,objectIdField:c,geometryType:u,spatialReference:h,displayField:d,..."feature"===i.type?{templates:i.templates,typeIdField:i.typeIdField,types:i.types}:null,source:e});r.vars[l]=t.convertFeatureLayerToFeatureSet({layer:p,spatialReference:n.sr,interceptor:a})}}))}({aggregatedFeatures:c,arcadeUtils:t,featureSetVars:l,context:h,viewInfo:u,map:n,graphic:o,interceptor:i});const d=t.createFunction(a,h);return t.executeAsyncFunction(d,h).catch((t=>_4.error("arcade-execution-error",{error:t,graphic:o,expressionInfo:e})))}async function T4({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:n,view:o}){if(!e||!e.length)return{};const s=await S4(),a={};for(const l of e)a[`expression/${l.name}`]=M4({expressionInfo:l,arcadeUtils:s,interceptor:r,spatialReference:t,map:n,graphic:i,view:o});const l=await su(a),c={};for(const e in l)c[e]=x4(l[e].value);return c}let E4=class extends(ew(vd)){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:e}=this;e&&e.abort(),this._abortController=null},this._createVM=()=>{var e,t;const i=null==(e=this.contentElement)?void 0:e.type;null==(t=this.contentElementViewModel)||t.destroy();const r="fields"===i?new j$:"media"===i?new dG:"text"===i?new I$:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const e=new AbortController;this._abortController=e,await this._compileExpression(),this._abortController===e&&(this._abortController=null)},this._compileThrottled=tD(this._compile,1,this),this._compileExpression=async()=>{const{expressionInfo:e,graphic:t,interceptor:i,spatialReference:r,map:n,view:o,_abortController:s}=this;if(!(e&&t&&r&&n))return void this._set("contentElement",null);const a=await S4();if(s!==this._abortController)return;const l=await M4({arcadeUtils:a,expressionInfo:e,graphic:t,interceptor:i,map:n,spatialReference:r,view:o});if(!l||"esri.arcade.Dictionary"!==l.declaredClass)return void this._set("contentElement",null);const c=await gZ(l,s.signal),u=null==c?void 0:c.type,h="media"===u?VS.fromJSON(c):"text"===u?qS.fromJSON(c):"fields"===u?aS.fromJSON(c):null;this._set("contentElement",h)},this.handles.add([rD(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),rD(this,"contentElement",this._createVM)])}destroy(){var e;this._cancelQuery(),null==(e=this.contentElementViewModel)||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return(null==(e=this.view)?void 0:e.spatialReference)||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return(null==(e=this.view)?void 0:e.map)||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map")}};bl([Lh()],E4.prototype,"_abortController",void 0),bl([Lh({type:Ox})],E4.prototype,"expressionInfo",void 0),bl([Lh({type:HI})],E4.prototype,"graphic",void 0),bl([Lh({readOnly:!0})],E4.prototype,"contentElement",void 0),bl([Lh({readOnly:!0})],E4.prototype,"contentElementViewModel",void 0),bl([Lh()],E4.prototype,"interceptor",void 0),bl([Lh()],E4.prototype,"spatialReference",null),bl([Lh({readOnly:!0})],E4.prototype,"state",null),bl([Lh()],E4.prototype,"map",null),bl([Lh()],E4.prototype,"view",void 0),E4=bl([md("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],E4);const I4=E4,C4="esri-icon-loading-indicator esri-rotating",O4="esri-feature-expression",A4="esri-feature__loading-container",P4="esri-feature__loading-spinner";let R4=class extends vF{constructor(e,t){super(e,t),this.viewModel=new I4}initialize(){rD(this,"viewModel.contentElementViewModel",(()=>this._setupExpressionWidget()))}destroy(){this._destroyContentWidget()}renderLoading(){return wj("div",{key:"loading-container",class:A4},wj("span",{class:this.classes(C4,P4)}))}render(){var e;const{state:t}=this.viewModel;return wj("div",{class:O4},"loading"===t?this.renderLoading():"disabled"===t?null:null==(e=this._contentWidget)?void 0:e.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=null==t?void 0:t.type;this._destroyContentWidget();const r=e?"fields"===i?new H$({viewModel:e}):"media"===i?new FG({viewModel:e}):"text"===i?new N$({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};bl([Lh({type:I4})],R4.prototype,"viewModel",void 0),R4=bl([md("esri.widgets.Feature.FeatureExpression")],R4);const L4=R4;var D4;const N4="content-view-models",F4="esri.widgets.FeatureViewModel",j4=Dl.getLogger(F4),$4={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let V4=D4=class extends vd{constructor(e){super(e),this._handles=new Vb,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=tD(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...$4},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return"attachments"===e.type&&t.attachmentsContent||"custom"===e.type&&t.customContent||"fields"===e.type&&t.fieldsContent||"media"===e.type&&t.mediaContent||"text"===e.type&&t.textContent||"expression"===e.type&&t.expressionContent},this._handles.add(rD(this,["graphic","_effectivePopupTemplate","abilities"],(()=>this.graphicChangedThrottled())))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return _a(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function(e,t){const i=new Map;return e&&e.forEach((e=>{const r=HF(e.fieldName,t);e.fieldName=r,i.set(r.toLowerCase(),e)})),i}(rj(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return UF(this.graphic)}castAbilities(e){return{...$4,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof dG&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof dG&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof dG&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(t){ru(t)||(this._error=t,j4.error("error","The popupTemplate could not be displayed for this feature.",{error:t,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):"expression"===e.type?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((e,t)=>this._compileContentElement(e,t))):"string"==typeof e?this._compileText(new qS({text:e}),0).text:e}_destroyContentViewModels(){var e;null==(e=this._handles)||e.remove(N4),this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:n}=e,o=null==r?void 0:r.type;n&&o&&("fields"===o&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createFieldsVMParams(r,t))),"media"===o&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),n.set(this._createMediaVMParams(r,t))),"text"===o&&n.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:n,spatialReference:o,view:s}=this,a=new I4({expressionInfo:i,graphic:r,interceptor:D4.interceptor,map:n,spatialReference:o,view:s});return this.contentViewModels[t]=a,this._handles.add(rD(a,"contentElementViewModel",(()=>this._setExpressionContentVM(a,t))),N4),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:n}=e;return this.contentViewModels[t]=new g$({graphic:i,...this._compileTitleAndDesc({title:n,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:n}=e;return this.contentViewModels[t]=new I$({graphic:i,creator:r,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:n,formattedAttributes:o,_expressionAttributes:s}=this,{attributes:a}=n,l=o.global;return{title:ZF({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:s,layer:r,text:e}),description:ZF({attributes:a,fieldInfoMap:i,globalAttributes:l,expressionAttributes:s,layer:r,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:i,formattedAttributes:r}=this,n={...r.global,...r.content[t]},o=(null==e?void 0:e.fieldInfos)||(null==i?void 0:i.fieldInfos),s=null==o?void 0:o.filter((({fieldName:e})=>BF(e)||cj(e)||n.hasOwnProperty(e))),a=null==i?void 0:i.expressionInfos,{description:l,title:c}=e;return{attributes:n,expressionInfos:a,fieldInfos:s,...this._compileTitleAndDesc({title:c,description:l})}}_compileFields(e,t){const i=e.clone(),r=new j$(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:n,formattedAttributes:o,_effectivePopupTemplate:s,relatedInfos:a,_sourceLayer:l,_expressionAttributes:c}=this,{attributes:u}=r,{description:h,mediaInfos:d,title:p}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:u,layer:l,fieldInfoMap:n,formattedAttributes:{...o.global,...o.content[t]},expressionAttributes:c,mediaInfos:d,popupTemplate:s,relatedInfos:a,...this._compileTitleAndDesc({title:p,description:h})}}_compileMedia(e,t){const i=e.clone(),r=new dG(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:o}=t,s=this.formattedAttributes.global;e.text=ZF({attributes:o,fieldInfoMap:i,globalAttributes:s,expressionAttributes:n,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new I$(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,n=null==t?void 0:t.editFieldsInfo;return r&&n?function(e,t){const{creatorField:i,creationDateField:r,editorField:n,editDateField:o}=e;if(!t)return;const s=t[o];if("number"==typeof s){const e=t[n];return{type:"edit",date:Hx(s,zF),user:e}}const a=t[r];if("number"==typeof a){const e=t[i];return{type:"create",date:Hx(a,zF),user:e}}return null}(n,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:n}=this,{attributes:o}=r;return ZF({attributes:o,fieldInfoMap:t,globalAttributes:this.formattedAttributes.global,expressionAttributes:n,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;return qF(null==e?void 0:e.title,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;return qF(null==e?void 0:e.content,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:n,spatialReference:o,map:s,view:a}=this,{content:{value:l},title:{value:c}}=await su({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await lj({graphic:r,popupTemplate:n,layer:i,spatialReference:o},e);const{expressionAttributes:{value:u}}=await su({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:T4({expressionInfos:null==n?void 0:n.expressionInfos,spatialReference:o,graphic:r,map:s,interceptor:D4.interceptor,view:a})});t===this._featureAbortController&&r&&(this._expressionAttributes=u,this._graphicExpressionAttributes={...r.attributes,...u},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:n,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[t]=aj({fieldInfos:null==r?void 0:r.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:s,fieldInfoMap:a,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:s,_graphicExpressionAttributes:a}=this;i.content[t]=aj({fieldInfos:e.fieldInfos,graphic:r,attributes:{...a,...e.attributes},layer:o,fieldInfoMap:s,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:s}=this,a={global:aj({fieldInfos:null==t?void 0:t.fieldInfos,graphic:i,attributes:s,layer:n,fieldInfoMap:o,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{"fields"===e.type&&this._createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:a}),"media"===e.type&&this._createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:a})})),a}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,rj(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:n}=this;r.clear();const o=_a(n.associatedLayer)?await n.associatedLayer.load(i):n;if(!o)return;const s=t.filter((e=>e&&cj(e.fieldName)));if(!s||!s.length)return;t.forEach((e=>this._configureRelatedInfo(e,o)));const a=await cG({relatedInfos:r,layer:o},i);Object.keys(a).forEach((e=>{var t;const i=r.get(e.toString()),n=null==(t=a[e])?void 0:t.value;i&&n&&(i.layerInfo=n.data)}));const l=await function({graphic:e,relatedInfos:t,layer:i},r){const n={};return t.forEach(((t,o)=>{t.layerInfo&&(n[o]=lG(e,t,i,r))})),su(n)}({graphic:e,relatedInfos:r,layer:o},i);Object.keys(l).forEach((e=>{var t;!function(e,t){if(!t)return;if(!e)return;const{features:i,statsFeatures:r}=e,n=i&&i.value;t.relatedFeatures=n?n.features:[];const o=r&&r.value;t.relatedStatsFeatures=o?o.features:[]}(null==(t=l[e])?void 0:t.value,r.get(e.toString()))}))}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=sG(e.fieldName);if(!r)return;const{layerId:n,fieldName:o}=r;if(!n)return;const s=i.get(n.toString())||aG(n,t);s&&(function({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new ZV({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}({relatedInfo:s,fieldName:o,fieldInfo:e}),this.relatedInfos.set(n,s))}};V4.interceptor=new class{constructor(e,t){this.preLayerQueryCallback=e,this.preRequestCallback=t,this.preLayerQueryCallback||(this.preLayerQueryCallback=e=>{}),this.preRequestCallback||(this.preLayerQueryCallback=e=>{})}}((({query:e,layer:t,method:i})=>{dj({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})}),(({queryPayload:e,layer:t,method:i})=>{dj({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})})),bl([Lh()],V4.prototype,"_error",void 0),bl([Lh()],V4.prototype,"_featureAbortController",void 0),bl([Lh({readOnly:!0})],V4.prototype,"_effectivePopupTemplate",null),bl([Lh({readOnly:!0})],V4.prototype,"_fieldInfoMap",null),bl([Lh({readOnly:!0})],V4.prototype,"_sourceLayer",null),bl([Lh()],V4.prototype,"abilities",void 0),bl([Am("abilities")],V4.prototype,"castAbilities",null),bl([Lh({readOnly:!0})],V4.prototype,"content",void 0),bl([Lh({readOnly:!0})],V4.prototype,"contentViewModels",void 0),bl([Lh({type:Boolean})],V4.prototype,"defaultPopupTemplateEnabled",void 0),bl([Lh({readOnly:!0})],V4.prototype,"state",null),bl([Lh({readOnly:!0})],V4.prototype,"formattedAttributes",void 0),bl([Lh({type:HI,value:null})],V4.prototype,"graphic",null),bl([Lh({readOnly:!0})],V4.prototype,"lastEditInfo",void 0),bl([Lh({readOnly:!0})],V4.prototype,"relatedInfos",void 0),bl([Lh()],V4.prototype,"spatialReference",null),bl([Lh({readOnly:!0})],V4.prototype,"title",void 0),bl([Lh()],V4.prototype,"map",null),bl([Lh({readOnly:!0})],V4.prototype,"waitingForContent",null),bl([Lh()],V4.prototype,"view",void 0),V4=D4=bl([md(F4)],V4);const z4=V4,U4=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=e=>A$(e)&&!e.destroyed?wj("div",{key:e},e.render()):e instanceof HTMLElement?wj("div",{key:e,bind:e,afterCreate:this._attachToNode}):function(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(e)?wj("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):null}_attachToNode(e){e.appendChild(this)}};return t=bl([md("esri.widgets.Feature.ContentMixin")],t),t},q4="esri-icon-loading-indicator esri-rotating",G4="esri-widget",B4="esri-feature",W4="esri-feature__size-container",H4="esri-feature__title",J4="esri-feature__main-container",Y4="esri-feature__content-element",Z4="esri-feature__text",K4="esri-feature__last-edited-info",X4="esri-feature__loading-container",Q4="esri-feature__loading-spinner",e6={title:!0,content:!0,lastEditedInfo:!0};let t6=class extends(U4(vF)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...e6},this.map=null,this.view=null,this.viewModel=new z4}initialize(){this.own(rD(this,"viewModel.contentViewModels",(()=>this._setupContentWidgets())))}loadDependencies(){return import("./chunks/calcite-notice-e0dad95f.js")}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...e6,...e}}render(){const{state:e}=this.viewModel,t=wj("div",{class:W4,key:"container"},this.renderTitle(),"error"===e?this.renderError():"loading"===e?this.renderLoading():this.renderContentContainer());return wj("div",{class:this.classes(B4,G4)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return wj("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?wj("div",{key:"error-title",slot:"title"},e.errorMessage):null,wj("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return wj("div",{key:"loading-container",class:X4},wj("span",{class:this.classes(q4,Q4)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?wj("div",{class:J4},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?wj(v$,{level:this.headingLevel,class:H4,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?wj("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return!e||e.destroyed?null:wj("div",{key:`${t}-content`},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if("boolean"!=typeof i.content&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return"loading"===i||r.length>0?wj("div",{key:this._buildKey("attachments-element",e),class:this.classes(Y4)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:wj("div",{key:this._buildKey("expression-element",e),class:Y4},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?wj("div",{key:this._buildKey("custom-element",t),class:Y4},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:wj("div",{key:this._buildKey("fields-element",e),class:Y4},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:wj("div",{key:this._buildKey("media-element",e),class:Y4},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:n}=i,o=MC("edit"===i.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,{date:r,user:n});return wj("div",{key:"edit-info-element",class:this.classes(K4,Y4)},o)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?wj("div",{key:this._buildKey("text-element",t),class:this.classes(Y4,Z4)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach(((i,n)=>{"attachments"===i.type&&(this._contentWidgets[n]=new T$({displayType:i.displayType,headingLevel:t.title?e+1:e,viewModel:r[n]})),"fields"===i.type&&(this._contentWidgets[n]=new H$({viewModel:r[n]})),"media"===i.type&&(this._contentWidgets[n]=new FG({viewModel:r[n]})),"text"===i.type&&(this._contentWidgets[n]=new N$({viewModel:r[n]})),"custom"===i.type&&(this._contentWidgets[n]=new N$({viewModel:r[n]})),"expression"===i.type&&(this._contentWidgets[n]=new L4({viewModel:r[n]}))}),this);else{const e=r[0];e&&!e.destroyed&&(this._contentWidgets[0]=new N$({viewModel:e}))}this.scheduleRender()}};bl([gD("viewModel.graphic")],t6.prototype,"graphic",void 0),bl([gD("viewModel.defaultPopupTemplateEnabled")],t6.prototype,"defaultPopupTemplateEnabled",void 0),bl([Lh()],t6.prototype,"headingLevel",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t6.prototype,"label",void 0),bl([Lh(),yj("esri/widgets/Feature/t9n/Feature")],t6.prototype,"messages",void 0),bl([Lh(),yj("esri/t9n/common")],t6.prototype,"messagesCommon",void 0),bl([Lh(),yj("esri/widgets/support/t9n/uriUtils")],t6.prototype,"messagesURIUtils",void 0),bl([gD("viewModel.spatialReference")],t6.prototype,"spatialReference",void 0),bl([gD("viewModel.title")],t6.prototype,"title",void 0),bl([Lh()],t6.prototype,"visibleElements",void 0),bl([Am("visibleElements")],t6.prototype,"castVisibleElements",null),bl([gD("viewModel.map")],t6.prototype,"map",void 0),bl([gD("viewModel.view")],t6.prototype,"view",void 0),bl([Lh({type:z4})],t6.prototype,"viewModel",void 0),t6=bl([md("esri.widgets.Feature")],t6);const i6=t6;let r6=class extends wd.EventedAccessor{constructor(e){super(e),this._anchorHandles=new Vb,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([nD(this,["screenLocationEnabled","location","view.size","view.stationary"],(()=>this._updateScreenPointAndHandle())),nD(this,["view","view.ready"],(()=>this._wireUpView()))])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e="view";if(this._anchorHandles.remove(e),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,i=function(e,t,i,r){let n=!1;const o=e.watch(t,((t,r,o,s)=>{n||i.call(e,t,r,o,s)}),r);return{remove(){o.remove()},pause(){n=!0},resume(){n=!1}}}(t,"3d"===t.type?"camera":"viewpoint",(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:i}=this;e&&(t&&i?e.resume():e.pause())}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,r=this.get("view.ready"),n=i&&r&&_a(e)?t.toScreen(e):null;this._set("screenLocation",n)}};bl([Lh()],r6.prototype,"location",void 0),bl([Lh({readOnly:!0})],r6.prototype,"screenLocation",void 0),bl([Lh()],r6.prototype,"screenLocationEnabled",void 0),bl([Lh()],r6.prototype,"view",void 0),r6=bl([md("esri.widgets.support.AnchorElementViewModel")],r6);const n6=r6;let o6=class extends n6{constructor(e){super(e),this.visible=!1}};bl([Lh()],o6.prototype,"visible",void 0),o6=bl([md("esri.widgets.CompassViewModel")],o6);const s6=o6,a6="esri-spinner",l6="esri-spinner--start",c6="esri-spinner--finish";let u6=class extends vF{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new s6,this.visible=!1}initialize(){this.own([nD(this,"visible",(e=>this._visibleChange(e)))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;i&&i.catch((()=>{})).then((()=>this.hide()))}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r={[l6]:e&&i,[c6]:!e&&i},n=this._getPositionStyles();return wj("div",{class:this.classes(a6,r),styles:n})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=uu(this._animationDelay);this._animationPromise=t,t.catch((()=>{})).then((()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(!t||xa(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};bl([gD("viewModel.location")],u6.prototype,"location",void 0),bl([gD("viewModel.view")],u6.prototype,"view",void 0),bl([Lh({type:s6})],u6.prototype,"viewModel",void 0),bl([gD("viewModel.visible")],u6.prototype,"visible",void 0),u6=bl([md("esri.widgets.Spinner")],u6);const h6=u6;var d6;!function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"}(d6||(d6={}));class p6{constructor(e,t){this._storage=new jX,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t){this._storage.put(e,t,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new p6(1e3),new Eb([128,128,128]);const f6=new Eb("white");function m6(e,t){if(null==t)return e;const i=e.toRgba();return i[3]=i[3]*t,new Eb(i)}function g6(e,t,i){e&&(t||null!=i)&&(t&&(t=new Eb(t)),NI(e)?function(e,t,i){const r=e.symbolLayers;if(!r)return;const n=e=>{const r=_a(e)?e:null;return m6(t=t||r||null!=i&&f6,i)};r.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=n(e.color);else{const t=_a(e.material)?e.material.color:null,r=n(t);xa(e.material)?e.material=new Wk({color:r}):e.material.color=r,null!=i&&"outline"in e&&_a(e.outline)&&_a(e.outline.color)&&(e.outline.color=m6(e.outline.color,i))}}))}(e,t,i):DI(e)&&function(e,t,i){(t=t||e.color)&&(e.color=m6(t,i)),null!=i&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=m6(e.outline.color,i))}(e,t,i))}async function y6(e,t){const i=e.symbolLayers;i&&await function(e,t,i){return su(e.map(((e,r)=>t.apply(i,[e,r]))))}(i,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const i=v6(t);_a(i)&&(e.size=i)}(e,t);break;case"path":!function(e,t){const i=b6(t,rv,[e.width,void 0,e.height]);e.width=w6(t[0],e.width,1,i),e.height=w6(t[2],e.height,1,i)}(e,t);break;case"object":await async function(e,t){const{resourceSize:i,symbolSize:r}=await async function(e){const t=await import("./chunks/symbolLayerUtils-17d846c8.js"),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:n,depth:o}=e,s=[r,o,n];let a=1;for(let e=0;e<3;e++)if(null!=s[e]){a=s[e]/i[e];break}for(let e=0;e<3;e++)null==s[e]&&(s[e]=i[e]*a);return{resourceSize:i,symbolSize:s}}(e),n=b6(t,i,r);e.width=w6(t[0],r[0],i[0],n),e.depth=w6(t[1],r[1],i[1],n),e.height=w6(t[2],r[2],i[2],n)}(e,t)}}(e,t)))}function v6(e){for(const t of e)if("number"==typeof t)return t;return null}function b6(e,t,i){for(let r=0;r<3;r++){const n=e[r];switch(n){case"symbol-value":return null!=i[r]?i[r]/t[r]:1;case"proportional":break;default:if(n&&t[r])return n/t[r]}}return 1}function w6(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return null!=t?t:i;default:return e}}async function _6(e,t){if(e&&t)return NI(e)?y6(e,t):void(DI(e)&&function(e,t){const i=v6(t);if(!xa(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=i,e.height=i*t):(e.width=i*t,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}(e,t))}function x6(e,t,i){if(e&&null!=t)if(NI(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(i){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else DI(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function S6(e){return e&&"opacity"in e?e.opacity*S6(e.parent):1}async function k6(e,t){var i,r;if(!e)return;const n=e.sourceLayer,o=null!=(i=_a(t)&&null!=(r=t.useSourceLayer)&&r?n:e.layer)?i:n,s=S6(o);if(_a(e.symbol)&&(!_a(t)||!0!==t.ignoreGraphicSymbol)){const i="web-style"===e.symbol.type?await e.symbol.fetchSymbol(_a(t)?t.abortOptions:null):e.symbol.clone();return g6(i,null,s),i}const a=_a(t)&&t.renderer||o&&"renderer"in o&&o.renderer;let l=a&&"getSymbolAsync"in a?await a.getSymbolAsync(e,t):null;if(!l)return;if(l="web-style"===l.type?await l.fetchSymbol(_a(t)?t.abortOptions:null):l.clone(),!("visualVariables"in a)||!a.visualVariables||!a.visualVariables.length)return g6(l,null,s),l;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&(xa(t)||xa(t.arcade))){const e={...t};e.arcade=await I_(),t=e}const c=await Promise.resolve().then((function(){return iX})),u=[],h=[],d=[],p=[];for(const e of a.visualVariables)switch(e.type){case"color":u.push(e);break;case"opacity":h.push(e);break;case"rotation":p.push(e);break;case"size":e.target||d.push(e)}const f=!!u.length&&u[u.length-1],m=f?c.getColor(f,e,t):null,g=!!h.length&&h[h.length-1];let y=g?c.getOpacity(g,e,t):null;if(null!=s&&(y=null!=y?y*s:s),g6(l,m,y),d.length){const i=c.getAllSizes(d,e,t);await _6(l,i)}for(const i of p)x6(l,c.getRotationAngle(i,e,t),i.axis);return l}class M6{constructor(e=(e=>e.values().next().value)){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let e;for(e of this._items);return e}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach((t=>{e(t)||this._items.delete(t)})),this}}const T6=wa("mac")?"Meta":"Ctrl",E6={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)E6[e]=String.fromCharCode(e);for(let e=1;e<25;e++)E6[111+e]=`F${e}`;for(let e=65;e<91;e++)E6[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function I6(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class C6{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const t=e.modifiers;for(const e of this.keyModifiers)if(!t.has(e))return!1;return!0}}const O6=Dl.getLogger("esri.views.input.InputHandler");class A6{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?O6.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,t,i){let r;"function"==typeof t?(i=t,r=[]):r=t||[];const n="string"==typeof e?new C6(e,r):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},s=e=>{const t=this._incoming[e.match.eventType];if(t){const i=t.indexOf(e);t.splice(i,1),o(),this._manager&&this._manager.updateDependencies()}},a=new P6(n,i,{onPause:s,onRemove:s,onResume:e=>{const t=this._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),o(),this._manager&&this._manager.updateDependencies())}});let l=this._incoming[n.eventType];return l||(l=[],this._incoming[n.eventType]=l),l.push(a),o(),this._manager&&this._manager.updateDependencies(),a}registerOutgoing(e){if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new R6(e,{onEmit:(e,t,i,r)=>{this._manager.emit(e.eventType,t,i,r)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):O6.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const i of t)if(i.match.matches(e)&&(i.callback(e),e.shouldStopPropagation()))break}}class P6{constructor(e,t,i){this.match=e,this._callback=t,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class R6{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,i){this._removed||this._handler.onEmit(this,e,t,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class L6 extends A6{constructor(e){super(!0),this._onChange=e,this._value="mouse",this.registerIncoming("pointer-down",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse")})),this._moveHandler=this.registerIncoming("pointer-move",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse")})),this._moveHandler.pause()}_setValue(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e))}}const D6=Dl.getLogger("esri.views.input.InputManager");let N6=class extends vd{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=T6,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}installHandlers(e,t,i=$6.INTERNAL){if(this._nameToGroup[e])return void D6.error("There is already an InputHandler group registered under the name `"+e+"`");if(0===t.length)return void D6.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=r;for(let e=r.handlers.length-1;e>=0;e--){const t=r.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(e,i,r,n,o)=>{this._emitInputEvent(t.priorityIndex+1,e,i,r,o,n)},setPointerCapture:(e,i)=>{this._setPointerCapture(r,t,e,i)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):D6.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){const t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let n=r.handler.hasSideEffects;if(!n)for(const t of r.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const i of r.handler.incomingEventMatches){e.add(i.eventType);for(const e of i.keyModifiers)I6(e)||t.add(e)}r.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(e){this._set("latestPointerType",e)}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const i=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t)})),this._activeKeyModifiers=e,i=!0}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(r(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(r(),this._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){const i=t.key;this._keyModifiers.has(i)&&n(i,"key-down"===e)}const o=t.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new L6((e=>this._setLatestPointerType(e))),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,$6.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],$6.INTERNAL)}_setPointerCapture(e,t,i,r){const n=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),r?(o.add(n),1===o.size&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),0===o.size&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,n,o){const s=void 0!==r?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,l={event:new F6(t,i,s,o||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new M6,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(null==r||!this._stoppedPropagationEventIds.has(r))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){null!=r&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new M6;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(i.eventType!==e.eventType)continue;const t=i.keyModifiers.filter((t=>-1!==e.keyModifiers.indexOf(t)));if(t.length===i.keyModifiers.length!=(t.length===e.keyModifiers.length))return i.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(i,t[e])>=0;)e++;t.splice(e,0,i)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,i)=>{e((()=>{this._onEventReceived(t,i)}))},disablePointerCapture:e}}};bl([Lh({readOnly:!0})],N6.prototype,"hasPendingInputs",null),bl([Lh()],N6.prototype,"eventSource",void 0),bl([Lh()],N6.prototype,"recognizers",void 0),bl([Lh({readOnly:!0})],N6.prototype,"latestPointerType",void 0),N6=bl([md("esri.views.input.InputManager")],N6);class F6{constructor(e,t,i,r,n){this.type=e,this.data=t,this.timestamp=i,this.modifiers=r,this.cancelable=n,this._propagationState=j6.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=j6.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&j6.STOPPED)}async(e){this._propagationState|=j6.PAUSED;const t=(e,t)=>{this._propagationState&=~j6.PAUSED;const i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),t)throw e;return e};return("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(this._propagationState&j6.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var j6;!function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"}(j6||(j6={}));const $6={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};const V6="esri-icon-zoom-in-magnifying-glass",z6="esri-icon-trash",U6="esri-icon-table",q6=new lk({id:"zoom-to-feature",title:"{messages.zoom}",className:V6}),G6=new lk({id:"remove-selected-feature",title:"{messages.remove}",className:z6}),B6=new lk({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:V6}),W6=new lk({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:U6}),H6=Dl.getLogger("esri.widgets.Popup.PopupViewModel"),J6=function(e){const{event:t,view:i}=e,{action:r}=t,n=i&&i.popup;if(!r)return Promise.reject(new Ac("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new Ac("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:s}=r;if(!s)return Promise.reject(new Ac("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new Ac("trigger-action:invalid-action","Action is disabled"));if(s===q6.id)return async function(e){const{location:t,selectedFeature:i,view:r,zoomFactor:n}=e,o=Y6(e);if(!o){const e=new Ac("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:r});return H6.error(e),Promise.reject(e)}const s=r.scale/n,a=e.get("selectedFeature.geometry")||t,l=a&&"point"===a.type&&function(e,t){if("3d"!==(null==t?void 0:t.type)||!e||"esri.Graphic"!==e.declaredClass)return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let t=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then((e=>{t=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]})).catch((()=>{const t=new Ac("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});H6.error(t)})),t}return!0}(i,r);q6.active=!0,q6.disabled=!0;try{await e.view.goTo({target:o,scale:l?s:void 0})}finally{q6.active=!1,q6.disabled=!1,e.zoomToLocation=null,l&&(e.location=a)}}(n.viewModel).catch(Qc);if(s===B6.id)return async function(e){const{selectedFeature:t,view:i}=e;if("2d"!==(null==i?void 0:i.type)){const e=new Ac("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw H6.error(e),e}if(!t.isAggregate){const e=new Ac("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw H6.error(e),e}const r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],B6.active=!0,B6.disabled=!0;const{extent:s}=await n.queryExtent(o);await i.goTo({target:s}),B6.active=!1,B6.disabled=!1}(n.viewModel);if(s===W6.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,s===G6.id){n.close();const{selectedFeature:e}=n;if(!e)return Promise.reject(new Ac(`trigger-action:${G6.id}`,"selectedFeature is required",{selectedFeature:e}));const{sourceLayer:t}=e;return t?t.remove(e):i.graphics.remove(e),Promise.resolve()}return Promise.resolve()};function Y6(e){const{selectedFeature:t,location:i,view:r}=e;return r?"3d"===r.type?t||i:e.get("selectedFeature.geometry")||i:null}const Z6=e=>{let t=class extends e{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){const{view:t}=this;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}};return bl([Lh()],t.prototype,"goToOverride",void 0),bl([Lh()],t.prototype,"view",void 0),t=bl([md("esri.widgets.support.GoTo")],t),t},K6=Fd.ofType({key:"type",defaultKeyValue:"button",base:ok,typeMap:{button:lk,toggle:hk}}),X6="esri.widgets.Popup.PopupViewModel",Q6=Dl.getLogger(X6);let e8=class extends(Z6(n6)){constructor(e){super(e),this._handles=new Vb,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new K6,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new HI({symbol:new SI({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some((e=>e.waitingForContent))}initialize(){this._handles.add([rD(this,["autoOpenEnabled","view"],(()=>this._autoOpenEnabledChange())),this.on("view-change",(()=>this._autoClose())),nD(this,["highlightEnabled","selectedFeature","visible","view"],(()=>this._highlightFeature())),nD(this,"view.animation.state",(e=>this._animationStateChange(e))),nD(this,"location",(e=>this._locationChange(e))),nD(this,"selectedFeature",(e=>this._selectedFeatureChange(e))),nD(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(()=>this._selectedFeatureIndexChange())),nD(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(()=>this._setGraphicOnFeatureViewModels())),nD(this,"featureViewModels",(()=>this._featureViewModelsChange())),this.on("trigger-action",(e=>J6({event:e,view:this.view}))),cD(this,"waitingForResult",(()=>this._waitingForResultChange()),!0),nD(this,["features","view","view.map","view.spatialReference"],(()=>this._updateFeatureVMs())),nD(this,["view.scale"],this._viewScaleChange),cD(this,"visible",(()=>this.browseClusterEnabled=!1)),nD(this,"browseClusterEnabled",(e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing()))])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new K6;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:n,selectedFeature:o}=this,s=n?i.concat(t):t,a=o&&("function"==typeof o.getEffectivePopupTemplate&&o.getEffectivePopupTemplate(r)||o.popupTemplate),l=a&&a.actions,c=a&&a.overwriteActions?l:l?l.concat(s):s;return c&&c.filter(Boolean).forEach((t=>e.add(t))),e}get defaultActions(){var e;const t=this._get("defaultActions")||new K6;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?[B6.clone(),W6.clone()]:[q6.clone()]),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:n}=this,o=r&&t.length;o&&i&&-1===n?this.selectedFeatureIndex=0:o&&-1!==n||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Wm(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((e=>{this._pendingPromises.add(e);e.then((t=>{this._pendingPromises.has(e)&&this._updateFeatures(t),this._updatePendingPromises(e)}),(()=>this._updatePendingPromises(e)))})),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return-1===t?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Y6(this);if(!t){const i=new Ac("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return Q6.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const t=new Ac("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return Q6.error(t),Promise.reject(t)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const e of r)delete t[e];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function(e){var t;null!=(t=e.selectedFeature)&&t.isAggregate&&(e.features=e.features.filter((e=>e.isAggregate)))})(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){await async function(e){const{selectedFeature:t,view:i}=e;if("2d"!==(null==i?void 0:i.type)){const e=new Ac("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:i});throw H6.error(e),e}if(!t.isAggregate){const e=new Ac("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw H6.error(e),e}const r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()];const{extent:s}=await n.queryExtent(o);e.selectedClusterBoundaryFeature.geometry=s,i.graphics.add(e.selectedClusterBoundaryFeature)}(this),await async function(e){const{selectedFeature:t,view:i}=e;if("2d"!==(null==i?void 0:i.type)){const e=new Ac("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:i});throw H6.error(e),e}if(!t.isAggregate){const e=new Ac("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw H6.error(e),e}const r=t.sourceLayer,n=await i.whenLayerView(r),o=n.createQuery();o.aggregateIds=[t.getObjectId()],W6.active=!0,W6.disabled=!0;const{features:s}=await n.queryFeatures(o);W6.active=!1,W6.disabled=!1,i.popup.open({features:[t].concat(s),featureMenuOpen:!0})}(this)}_animationStateChange(e){this.zoomToLocation||(q6.disabled="waiting-for-target"===e)}_clearBrowsedClusterGraphics(){var e;const t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var e;if(null!=(e=this.selectedFeature)&&e.isAggregate)return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:n}=this;if(null===i)return;const o=((i-1)*r+t)%t,s=o+r;n.slice(o,s).forEach(((t,i)=>{t&&!t.graphic&&(t.graphic=e[o+i])}))}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled){if(this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate)return;return e.symbol=await k6(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature)}!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then((()=>{this.location=r.center.clone()})):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:i}=e,r=Promise.resolve(t),n=i.map((e=>e.promise));this.promises=[r,...n]}))}_destroyFeatureVMs(){this.featureViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(null!=e&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),n=[];t.forEach(((t,i)=>{if(!t)return;let o=null;if(r.some(((e,i)=>(e&&e.graphic===t&&(o=e,r.splice(i,1)),!!o))),o)n[i]=o;else{var s,a;const r=new z4({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(s=this.view)?void 0:s.spatialReference,graphic:t===e?t:null,map:null==(a=this.view)?void 0:a.map,view:this.view});n[i]=r}})),r.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const i=this.view.on("click",(e=>{"mouse"===e.pointerType&&0!==e.button||this._fetchFeaturesAndOpen(e)}),$6.WIDGET);t.add(i,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:r,event:t});return n.catch((()=>{})).then((()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")})),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:n,location:o}=e,s=[Promise.resolve(t),...n.map((e=>e.promise))];return r.popup.open({location:o||i,promises:s}),e}))}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return xa(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:n}=this;if(!(t&&r&&i&&n))return;let{layer:o,sourceLayer:s}=t;if("map-notes"!==(null==s?void 0:s.type)&&"subtype-group"!==(null==s?void 0:s.type)||(o=s),!(o&&o instanceof f_))return;const a=this._getLayerView(r,o);this._highlightPromise=a;const l=await a;if(!(l&&function(e){return e&&"function"==typeof e.highlight}(l)&&this._highlightPromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const c="imagery"===o.type?void 0:"objectIdField"in o&&o.objectIdField,u=t.attributes,h=u&&c&&u[c],d=l.highlight(h||t);this._handles.add(d,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter((e=>-1===t.indexOf(e)));this.features=t.concat(i)}};bl([Lh()],e8.prototype,"featurePage",void 0),bl([Lh()],e8.prototype,"isLoadingFeature",null),bl([Lh({type:K6})],e8.prototype,"actions",void 0),bl([Lh({readOnly:!0})],e8.prototype,"active",null),bl([Lh({readOnly:!0})],e8.prototype,"allActions",null),bl([Lh({type:Boolean})],e8.prototype,"defaultPopupTemplateEnabled",void 0),bl([Lh()],e8.prototype,"autoCloseEnabled",void 0),bl([Lh()],e8.prototype,"autoOpenEnabled",void 0),bl([Lh()],e8.prototype,"browseClusterEnabled",void 0),bl([Lh()],e8.prototype,"content",void 0),bl([Lh({type:K6,readOnly:!0})],e8.prototype,"defaultActions",null),bl([Lh({readOnly:!0})],e8.prototype,"featureCount",null),bl([Lh()],e8.prototype,"features",null),bl([Lh()],e8.prototype,"featuresPerPage",void 0),bl([Lh()],e8.prototype,"featureViewModelAbilities",void 0),bl([Lh({readOnly:!0})],e8.prototype,"featureViewModels",void 0),bl([Lh()],e8.prototype,"highlightEnabled",void 0),bl([Lh()],e8.prototype,"includeDefaultActions",void 0),bl([Lh({type:Qm})],e8.prototype,"location",null),bl([Lh({readOnly:!0})],e8.prototype,"pendingPromisesCount",null),bl([Lh({readOnly:!0})],e8.prototype,"selectedClusterBoundaryFeature",void 0),bl([Lh({readOnly:!0})],e8.prototype,"waitingForResult",null),bl([Lh({readOnly:!0})],e8.prototype,"promiseCount",null),bl([Lh()],e8.prototype,"promises",null),bl([Lh({value:null,readOnly:!0})],e8.prototype,"selectedFeature",null),bl([Lh({value:-1})],e8.prototype,"selectedFeatureIndex",null),bl([Lh({readOnly:!0})],e8.prototype,"selectedFeatureViewModel",null),bl([Lh({readOnly:!0})],e8.prototype,"state",null),bl([Lh()],e8.prototype,"title",void 0),bl([Lh()],e8.prototype,"updateLocationEnabled",void 0),bl([Lh()],e8.prototype,"view",void 0),bl([Lh()],e8.prototype,"visible",void 0),bl([Lh()],e8.prototype,"zoomFactor",void 0),bl([Lh()],e8.prototype,"zoomToLocation",void 0),bl([Lh()],e8.prototype,"centerAtLocation",null),e8=bl([md(X6)],e8);const t8=e8,i8="selected-index",r8="popup-spinner",n8="esri-icon-left-triangle-arrow",o8="esri-icon-right-triangle-arrow",s8="esri-icon-maximize",a8="esri-icon-dock-bottom",l8="esri-icon-dock-left",c8="esri-icon-dock-right",u8="esri-icon-close",h8="esri-icon-minimize",d8="esri-icon-check-mark",p8="esri-icon-loading-indicator",f8="esri-icon-default-action",m8="esri-icon-handle-horizontal",g8="esri-rotating",y8="esri-popup",v8="esri-widget",b8="esri-popup__main-container",w8="esri-popup__loading-container",_8="esri-popup--is-collapsible",x8="esri-popup--is-collapsed",S8="esri-popup--shadow",k8="esri-popup--is-docked",M8="esri-popup--is-docked-top-left",T8="esri-popup--is-docked-top-center",E8="esri-popup--is-docked-top-right",I8="esri-popup--is-docked-bottom-left",C8="esri-popup--is-docked-bottom-center",O8="esri-popup--is-docked-bottom-right",A8="esri-popup--aligned-top-center",P8="esri-popup--aligned-bottom-center",R8="esri-popup--aligned-top-left",L8="esri-popup--aligned-bottom-left",D8="esri-popup--aligned-top-right",N8="esri-popup--aligned-bottom-right",F8="esri-popup--feature-menu-open",j8="esri-popup--actions-menu-open",$8="esri-popup--feature-updated",V8="esri-popup__header",z8="esri-popup__header-buttons",U8="esri-popup__header-container",q8="esri-popup__header-container--button",G8="esri-popup__header-title",B8="esri-popup__content",W8="esri-popup__footer",H8="esri-popup__footer--has-pagination",J8="esri-popup__footer--has-actions",Y8="esri-popup__footer--has-actions-menu",Z8="esri-popup__button",K8="esri-popup__button--disabled",X8="esri-popup__button--dock",Q8="esri-popup__icon",e9="esri-popup__icon--dock-icon",t9="esri-popup__inline-actions-container",i9="esri-popup__actions-menu-button",r9="esri-popup__actions",n9="esri-popup__action",o9="esri-popup__action-image",s9="esri-popup__action-text",a9="esri-popup__action-toggle",l9="esri-popup__action-toggle--on",c9="esri-popup__pointer",u9="esri-popup__pointer-direction",h9="esri-popup__navigation",d9="esri-popup__pagination-previous",p9="esri-popup__pagination-next",f9="esri-popup__pagination-previous-icon",m9="esri-popup__pagination-previous-icon--rtl",g9="esri-popup__pagination-next-icon",y9="esri-popup__pagination-next-icon--rtl",v9="esri-popup__feature-menu",b9="esri-popup__feature-menu-list",w9="esri-popup__feature-menu-item",_9="esri-popup__feature-menu-viewport",x9="esri-popup__feature-menu-header",S9="esri-popup__feature-menu-item--selected",k9="esri-popup__feature-menu-button",M9="esri-popup__feature-menu-title",T9="esri-popup__feature-menu-observer",E9="esri-popup__feature-menu-loader",I9={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},C9="esri-popup";function O9(e,t){return void 0===t?`${C9}__${e}`:`${C9}__${e}-${t}`}const A9="esri.widgets.Popup",P9=Dl.getLogger(A9),R9={closeButton:!0,featureNavigation:!0};let L9=class extends(U4(vF)){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Vb,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([e])=>{null!=e&&e.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=tD((()=>this._displaySpinner()),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new t8,this.visible=null,this.visibleElements={...R9},this._addSelectedFeatureIndexHandle(),this.own([nD(this,"viewModel.screenLocation",(()=>this._positionContainer())),nD(this,["viewModel.active","dockEnabled"],(()=>this._toggleScreenLocationEnabled())),nD(this,"viewModel.screenLocation",((e,t)=>{!!e!=!!t&&this.reposition()})),nD(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(()=>this.reposition())),nD(this,"spinnerEnabled",(e=>this._spinnerEnabledChange(e))),nD(this,"viewModel.view.size",((e,t)=>this._updateDockEnabledForViewSize(e,t))),nD(this,"viewModel.view",((e,t)=>this._viewChange(e,t))),nD(this,"viewModel.view.ready",((e,t)=>this._viewReadyChange(e,t))),nD(this,["viewModel.waitingForResult","viewModel.location"],(()=>{this._hideSpinner(),this._displaySpinnerThrottled()})),nD(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],(()=>this._setTitleFromFeatureWidget())),nD(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],(()=>this._setContentFromFeatureWidget())),cD(this,"collapsed",(()=>{var e,t;"xsmall"===(null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()})),uD(this,"viewModel.allActions","change",(()=>this._watchActions())),rD(this,"viewModel.allActions",(()=>this._watchActions())),nD(this,"viewModel.featureViewModels",(()=>this._featureMenuViewportScrollTop()))])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,n,o,s;return!!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||"error"===(null==(i=this.selectedFeatureWidget)||null==(r=i.viewModel)?void 0:r.state)||(null==(n=this.selectedFeatureWidget)||null==(o=n.viewModel)?void 0:o.content):null==(s=this.viewModel)?void 0:s.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||I9}set dockOptions(e){const t={...I9},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const n={...t,...e},o={...t.breakpoint,...r},{breakpoint:s}=n;!0===s?n.breakpoint=o:"object"==typeof s&&(n.breakpoint={...o,...s}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,n={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=n):this._feature=new i6({headingLevel:i+1,viewModel:r,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...R9,...e}}blur(){const{active:e}=this.viewModel;e||P9.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||P9.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove(i8);const r=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,o={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:r};"xsmall"===(null==(t=this.viewModel)||null==(i=t.view)?void 0:i.widthBreakpoint)&&(o.collapsed=!0),this.set(o),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var e,t,i,r;const{actionsMenuOpen:n,dockEnabled:o,featureMenuVisible:s,dividedActions:a,currentAlignment:l,currentDockPosition:c}=this,{active:u}=this.viewModel,{menuActions:h}=a,d=u&&h.length>1&&n,p=u&&o,f=u&&!o,m=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,g=null==(i=this.selectedFeature)||null==(r=i.layer)?void 0:r.id,y={[A8]:"top-center"===l,[P8]:"bottom-center"===l,[R8]:"top-left"===l,[L8]:"bottom-left"===l,[D8]:"top-right"===l,[N8]:"bottom-right"===l,[k8]:p,[S8]:f,[M8]:"top-left"===c,[T8]:"top-center"===c,[E8]:"top-right"===c,[I8]:"bottom-left"===c,[C8]:"bottom-center"===c,[O8]:"bottom-right"===c,[F8]:s,[j8]:d};return wj("div",{class:this.classes(y8,y),role:"presentation","data-layer-title":m,"data-layer-id":g,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},u?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return wj("span",{"aria-hidden":"true",class:this.classes(Q8,p8,g8)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?wj("div",{key:O9("loading-container"),role:"presentation",class:w8,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=pL(this.container),t={[o8]:e,[m9]:e,[n8]:!e,[f9]:!e};return wj("span",{"aria-hidden":"true",class:this.classes(Q8,t)})}renderPreviousButton(){const{messages:e}=this;return wj("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(Z8,d9),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=pL(this.container),t={[n8]:e,[y9]:e,[o8]:!e,[g9]:!e};return wj("span",{"aria-hidden":"true",class:this.classes(Q8,t)})}renderNextButton(){const{messages:e}=this;return wj("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(Z8,p9),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:n}=this.viewModel;return wj("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(Z8,k9),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[h8]:e,[e9]:!e,[c8]:!e&&("top-right"===t||"bottom-right"===t),[l8]:!e&&("top-left"===t||"bottom-left"===t),[s8]:!e&&"top-center"===t,[a8]:!e&&"bottom-center"===t};return wj("span",{"aria-hidden":"true",class:this.classes(i,Q8)})}renderDockButton(){var e,t,i;const{dockEnabled:r,messages:n}=this,o=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,s=r?n.undock:n.dock;return"xsmall"!==o&&null!=(i=this.dockOptions)&&i.buttonEnabled?wj("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(Z8,X8)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:n}=this,o={[q8]:i},s=wj(v$,{level:this.headingLevel,class:G8,innerHTML:e}),a=i?wj("button",{key:`${e}--collapsible`,id:t,title:r?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(U8,o),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},s):wj("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(U8,o)},s);return e?a:null}renderCloseIcon(){return wj("span",{"aria-hidden":"true",class:this.classes(Q8,u8)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?wj("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:Z8,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return wj("header",{class:V8},this.renderTitle(),wj("div",{class:z8},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?wj("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:B8},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:n}=this,o=i?n.close:n.open,{menuActions:s}=r;return s.length?wj("div",{key:O9("actions-menu-button"),class:this.classes(Z8,i9),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},wj("span",{"aria-hidden":"true",class:m8})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:n}=r;return n.length&&i?wj("ul",{id:e,role:"menu","aria-labelledby":t,key:O9("actions"),class:r9,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map((e=>this.renderAction({action:e,type:"menu-item"})))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map((e=>this.renderAction({action:e,type:"inline"})))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?wj("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:t9},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?wj("section",{key:O9("navigation"),class:this.classes(h9)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,n=!!i.length,o=!!r.length,s={[H8]:e,[J8]:n,[Y8]:o};return e||n?wj("div",{key:O9("feature-buttons"),class:this.classes(W8,s)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=MC(e.selectedFeatures,{total:t.length});return wj("section",{key:O9("menu"),class:v9},wj("strong",{class:x9},r),wj("nav",{bind:this,class:_9,"data-node-ref":"_featureMenuViewportNode",afterCreate:mL},this.renderFeatureMenu(),wj("div",{class:T9,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?wj("div",{class:E9},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:wj("div",{key:O9("pointer"),class:c9,role:"presentation"},wj("div",{class:this.classes(u9,S8)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:n,collapsible:o,hasContent:s,contentCollapsed:a,visibleElements:l}=this,{title:c}=this.viewModel,u="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===i||"top-center"===i||"top-right"===i,h="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===i||"bottom-center"===i||"bottom-right"===i,d={[S8]:e,[_8]:o,[x8]:a};return wj("div",{class:this.classes(b8,v8,d),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":c?r:"","aria-describedby":s&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},u?this.renderFooter():null,u?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?wj("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return wj("span",{key:"text",class:s9},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[p8]:e.active,[g8]:e.active,[Q8]:!!t,[o9]:!e.active&&!!i};return t&&(r[t]=!e.active),wj("span",{key:"icon","aria-hidden":"true",class:this.classes(Q8,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),n={[n9]:"toggle"!==t.type,[a9]:"toggle"===t.type,[l9]:"toggle"===t.type&&t.value,[K8]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(r)],s="menu-item"===i?wj("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(Z8,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):wj("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(Z8,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?s:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:o}=this.viewModel,s=e===o,a={[S9]:s},l=s?wj("span",{key:O9(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:d8}):null,c=wj("span",{innerHTML:e.title||r.untitled});return wj("li",{role:"menuitem",tabIndex:-1,key:O9(`feature-menu-feature-${n}`),class:this.classes(a,w9),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},wj("span",{class:M9},c,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?wj("ol",{class:b9,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter((e=>!!e.graphic)).map(((e,t)=>this.renderFeatureMenuItem(e,t)))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:n}=e,o=null==i?void 0:i.attributes,s="zoom-to-feature"===n?MC(e.title,{messages:t}):"remove-selected-feature"===n?MC(e.title,{messages:r}):"zoom-to-clustered-features"===n||"browse-clustered-features"===n?MC(e.title,{messages:t}):e.title;return s&&o?MC(s,o):s}_getActionClass(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{className:r,image:n}=e,o=n||r?r:f8;return o&&i?MC(o,i):o}_getActionImage(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{image:r}=e;return r&&i?MC(r,i):r}_createFeatureUpdatedAnimation(){return gL("enter",$8)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach((e=>{this._handles.add(nD(e,["uid","active","className","disabled","id","title","image","visible"],(()=>this.scheduleRender())),t)}))}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter((e=>e.visible)),i=this._getInlineActionCount(),r=null===i,n=0===i;return{inlineActions:r?t.slice(0):n?new Fd:t.slice(0,i),menuActions:r?new Fd:n?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var i,r;e&&(this.viewModel.title="error"===(null==(i=e.viewModel)?void 0:i.state)?t.errorMessage:(null==(r=e.viewModel)?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){"Escape"===Bc(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){"Escape"===Bc(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(e){const t=Bc(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const n=i.querySelectorAll("li"),o=n.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(r+1+o)%o].focus()):(e.stopPropagation(),n[(r-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=Bc(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,o=n.findIndex((e=>e.uid===r));if(!i)return;const s=i.querySelectorAll("li"),a=s.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(o+1+a)%a].focus()):(e.stopPropagation(),s[(o-1+a)%a].focus())}_handleMainKeyup(e){const t=Bc(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await Bb((()=>{var e;return!0===(null==(e=this.viewModel)?void 0:e.active)})),this.focus())}_addSelectedFeatureIndexHandle(){const e=nD(this,"viewModel.selectedFeatureIndex",((e,t)=>this._selectedFeatureIndexUpdated(e,t)));this._handles.add(e,i8)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:n,view:o}=e;if(isNaN(i)||isNaN(t)||!o||!r)return!1;const s=o.padding;return"right"===n&&r.x+i/2>o.width-s.right||"left"===n&&r.x-i/2<s.left||"top"===n&&r.y-t<s.top||"bottom"===n&&r.y+t>o.height-s.bottom}_calculateAutoAlignment(e){if("auto"!==e)return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:n}=this,{screenLocation:o,view:s}=n;if(xa(o)||!s||!i)return"top-center";if(!this._isScreenLocationWithinView(o,s))return this._get("currentAlignment")||"top-center";function a(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}const l=r?window.getComputedStyle(r,null):null,c=l?a(l.getPropertyValue("max-height")):0,u=l?a(l.getPropertyValue("height")):0,{height:h,width:d}=i.getBoundingClientRect(),p=d+t,f=Math.max(h,c,u)+t,m=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:o,side:"right",view:s}),g=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:o,side:"left",view:s}),y=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:o,side:"top",view:s}),v=this._isOutsideView({popupHeight:f,popupWidth:p,screenLocation:o,side:"bottom",view:s});return g?y?"bottom-right":"top-right":m?y?"bottom-left":"top-left":y?v?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return"function"==typeof e?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return pL(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return"function"==typeof e?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if("auto"!==e)return e;const i=null==(t=this.viewModel)?void 0:t.view,r=pL(this.container)?"top-left":"top-right";if(!i)return r;const n=i.padding||{left:0,right:0,top:0,bottom:0},o=i.width-n.left-n.right,{breakpoints:s}=i;return s&&o<=s.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:n,_pointerOffsetInPx:o}=this,s=r/2,a=i.height-t,l=i.width-e,{padding:c}=this.view;return"bottom-center"===n?{top:t+o-c.top,left:e-s-c.left}:"top-left"===n?{bottom:a+o-c.bottom,right:l+o-c.right}:"bottom-left"===n?{top:t+o-c.top,right:l+o-c.right}:"top-right"===n?{bottom:a+o-c.bottom,left:e+o-c.left}:"bottom-right"===n?{top:t+o-c.top,left:e+o-c.left}:"top-center"===n?{bottom:a+o-c.bottom,left:e-s-c.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(xa(e)||!t)return;const n=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,r,n);return o?{top:void 0!==o.top?`${o.top}px`:"auto",left:void 0!==o.left?`${o.left}px`:"auto",bottom:void 0!==o.bottom?`${o.bottom}px`:"auto",right:void 0!==o.right?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const e=this.get("viewModel.view");this._wireUpView(e)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,n]=e,[o,s]=t,{width:a,height:l}=i;return r<=a&&o>a||r>a&&o<=a||n<=l&&s>l||n>l&&s<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,n=i.top+i.bottom,o=[],s=[];o[0]=e[0]-r,o[1]=e[1]-n,s[0]=t[0]-r,s[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(o,s,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var t,i;const r=e.breakpoint,n=null==(t=this.viewModel)||null==(i=t.view)?void 0:i.ui;if(!n)return!1;const{width:o,height:s}=n;if(isNaN(o)||isNaN(s))return!1;const a=r.hasOwnProperty("width")&&o<=r.width,l=r.hasOwnProperty("height")&&s<=r.height;return a||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?MC(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,r8),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new h6({view:e}),e.ui.add(this._spinner,{key:r8,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex((e=>e.uid===t)),n=i.getItemAt(r);n&&"toggle"===n.type&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};bl([Lh({readOnly:!0})],L9.prototype,"actionsMenuId",null),bl([Lh({readOnly:!0})],L9.prototype,"actionsMenuButtonId",null),bl([Lh({readOnly:!0})],L9.prototype,"featureMenuId",null),bl([Lh({readOnly:!0})],L9.prototype,"titleId",null),bl([Lh({readOnly:!0})],L9.prototype,"contentId",null),bl([Lh({readOnly:!0})],L9.prototype,"hasContent",null),bl([Lh({readOnly:!0})],L9.prototype,"featureNavigationVisible",null),bl([Lh({readOnly:!0})],L9.prototype,"collapsible",null),bl([Lh({readOnly:!0})],L9.prototype,"featureMenuVisible",null),bl([Lh({readOnly:!0})],L9.prototype,"contentCollapsed",null),bl([Lh({readOnly:!0})],L9.prototype,"dividedActions",null),bl([gD("viewModel.actions")],L9.prototype,"actions",void 0),bl([Lh()],L9.prototype,"actionsMenuOpen",null),bl([Lh()],L9.prototype,"alignment",void 0),bl([gD("viewModel.autoCloseEnabled")],L9.prototype,"autoCloseEnabled",void 0),bl([gD("viewModel.autoOpenEnabled")],L9.prototype,"autoOpenEnabled",void 0),bl([gD("viewModel.defaultPopupTemplateEnabled")],L9.prototype,"defaultPopupTemplateEnabled",void 0),bl([gD("viewModel.content")],L9.prototype,"content",void 0),bl([Lh()],L9.prototype,"collapsed",void 0),bl([Lh()],L9.prototype,"collapseEnabled",void 0),bl([Lh({readOnly:!0})],L9.prototype,"currentAlignment",null),bl([Lh({readOnly:!0})],L9.prototype,"currentDockPosition",null),bl([Lh()],L9.prototype,"dockOptions",null),bl([Lh()],L9.prototype,"dockEnabled",void 0),bl([gD("viewModel.featureCount")],L9.prototype,"featureCount",void 0),bl([Lh()],L9.prototype,"featureMenuOpen",void 0),bl([gD("viewModel.features")],L9.prototype,"features",void 0),bl([gD("viewModel.goToOverride")],L9.prototype,"goToOverride",void 0),bl([Lh()],L9.prototype,"headingLevel",void 0),bl([gD("viewModel.highlightEnabled")],L9.prototype,"highlightEnabled",void 0),bl([gD("viewModel.location")],L9.prototype,"location",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],L9.prototype,"label",void 0),bl([Lh()],L9.prototype,"maxInlineActions",void 0),bl([Lh(),yj("esri/widgets/Popup/t9n/Popup")],L9.prototype,"messages",void 0),bl([Lh(),yj("esri/t9n/common")],L9.prototype,"messagesCommon",void 0),bl([gD("viewModel.promises")],L9.prototype,"promises",void 0),bl([gD("viewModel.selectedFeature")],L9.prototype,"selectedFeature",void 0),bl([gD("viewModel.selectedFeatureIndex")],L9.prototype,"selectedFeatureIndex",void 0),bl([Lh({readOnly:!0})],L9.prototype,"selectedFeatureWidget",null),bl([Lh()],L9.prototype,"spinnerEnabled",void 0),bl([gD("viewModel.title")],L9.prototype,"title",void 0),bl([gD("viewModel.updateLocationEnabled")],L9.prototype,"updateLocationEnabled",void 0),bl([gD("viewModel.view")],L9.prototype,"view",void 0),bl([Lh({type:t8}),function(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);i.push(...r)}}(["triggerAction","trigger-action"])],L9.prototype,"viewModel",void 0),bl([gD("viewModel.visible")],L9.prototype,"visible",void 0),bl([Lh()],L9.prototype,"visibleElements",void 0),bl([Am("visibleElements")],L9.prototype,"castVisibleElements",null),bl([C$()],L9.prototype,"_close",null),bl([C$()],L9.prototype,"_toggleDockEnabled",null),bl([C$()],L9.prototype,"_toggleFeatureMenu",null),bl([C$()],L9.prototype,"_toggleActionsMenu",null),bl([C$()],L9.prototype,"_triggerAction",null),bl([C$()],L9.prototype,"_selectFeature",null),bl([C$()],L9.prototype,"_next",null),bl([C$()],L9.prototype,"_previous",null),L9=bl([md(A9)],L9);const D9=L9,N9=[0,0];function F9(e){e&&(qP(e),e.parentNode&&e.parentNode.removeChild(e))}const j9=e=>{let t=class extends e{constructor(...e){super(...e),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",(e=>{const t=this.surface;t&&t.setAttribute("data-cursor",e)})),this.watch("interacting",(e=>{const t=this.surface;t&&t.setAttribute("data-interacting",e.toString())}))])}initialize(){this.handles.add(this.watch("ui",((e,t)=>this._handleUIChange(e,t)))),this._wireUI(this.ui),this.handles.add([this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(e){const t=this._get("container");if(t===e)return;const i="dom-size";if(this.handles.remove(i),this._stopMeasuring(),t&&(t.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),F9(this.root),this._set("root",null),BP(this.userContent,t),F9(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");const t=document.createElement("div");t.className="esri-view-user-storage",BP(e,t),e.appendChild(t),this._set("userContent",t);const r=document.createElement("div");r.className="esri-view-root",e.insertBefore(r,e.firstChild),this._set("root",r);const n=document.createElement("div");n.className="esri-view-surface",n.setAttribute("role","application"),n.tabIndex=0,r.appendChild(n),this._set("surface",n);const o=new eD;r.appendChild(o.surface),this._set("overlay",o),o.watch("needsRender",(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Iu({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)})),this.forceDOMReadyCycle(),this.handles.add(zb((()=>this.size),(e=>{const[t,i]=e,r="esri-view-surface--inset-outline";t>=document.body.clientWidth||i>=document.body.clientHeight?n.classList.add(r):n.classList.remove(r)}),Yb),i),this._set("container",e),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get popup(){return this._get("popup")||new D9({view:this})}set popup(e){const t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(e,t,i){const r=this.position;return e-=r[0],t-=r[1],i?(i[0]=e,i[1]=t):i=[e,t],i}containerToPage(e,t,i){const r=this.position;return e+=r[0],t+=r[1],i?(i[0]=e,i[1]=t):i=[e,t],i}_handleUIChange(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e)}_wireUI(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([zb((()=>this.root),(t=>{e.container=t?function(e){const t=document.createElement("div");return e.appendChild(t),t}(t):null}),Yb),zb((()=>this.popup),((t,i)=>{const r="popup";i&&e.remove(i,r),t&&(t.view=e.view,e.add(t,{key:r,position:"manual"}))}),Yb)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const e=this._freqInfo;e.freq=16,e.time=750,this.handles.add([(()=>{const t=()=>{e.freq=16,e.time=750};return window.addEventListener("resize",t),{remove(){window.removeEventListener("resize",t)}}})(),Iu({prepare:e=>{const t=this._measure(),i=this._freqInfo;if(i.time+=e.deltaTime,t&&(i.freq=16,this._get("resizing")||this._set("resizing",!0)),i.time<i.freq)return;i.time=0;const r=this._position();i.freq=r||t?16:Math.min(750,2*i.freq),!t&&i.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const e=this.container,t=e?e.clientWidth:0,i=e?e.clientHeight:0;if(0===t||0===i)return this.suspended||this._set("suspended",!0),!1;const r=this.width,n=this.height;return t===r&&i===n?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:n,width:t,height:i}),!0)}_position(){const e=this.container,t=this.position,i=function(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return N9[0]=i.left+t.pageXOffset,N9[1]=i.top+t.pageYOffset,N9}(e);return!(t&&i[0]===t[0]&&i[1]===t[1]||(this._set("position",[i[0],i[1]]),0))}forceDOMReadyCycle(){}};return bl([Lh({value:null,cast:e=>UP(e)})],t.prototype,"container",null),bl([Lh({readOnly:!0})],t.prototype,"focused",null),bl([Lh({readOnly:!0})],t.prototype,"height",void 0),bl([Lh({type:D9})],t.prototype,"popup",null),bl([Lh({type:eD})],t.prototype,"overlay",void 0),bl([Lh({readOnly:!0})],t.prototype,"position",void 0),bl([Lh({readOnly:!0})],t.prototype,"resizing",void 0),bl([Lh({readOnly:!0})],t.prototype,"root",void 0),bl([Lh({value:null,readOnly:!0})],t.prototype,"size",null),bl([Lh({readOnly:!0})],t.prototype,"surface",void 0),bl([Lh({readOnly:!0})],t.prototype,"suspended",void 0),bl([Lh()],t.prototype,"ui",void 0),bl([Lh({readOnly:!0})],t.prototype,"userContent",void 0),bl([Lh({readOnly:!0})],t.prototype,"width",void 0),bl([Lh()],t.prototype,"widthBreakpoint",void 0),t=bl([md("esri.views.DOMContainer")],t),t},$9=e=>{let t=class extends e{async fetchPopupFeatures(e,t){await this.when();const{location:i,queryArea:r,layerViewsAndGraphics:n,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(e,t),s=Promise.resolve(o),a=this._queryLayerPopupFeatures(r,n,t),l=a.map((e=>e.promise));return{location:i,clientOnlyGraphics:o,allGraphicsPromise:au([s,...l]).then((e=>Array.from(new Set(e.flat())))),promisesPerLayerView:a}}_queryLayerPopupFeatures(e,t,i){return t.map((({layerView:t,graphics:r})=>{const n={clientGraphics:r,event:_a(i)?i.event:null,signal:_a(i)?i.signal:null,defaultPopupTemplateEnabled:!!_a(i)&&!!i.defaultPopupTemplateEnabled},o=t.fetchPopupFeatures(e,n);return{layerView:t,promise:o}}))}_isValidPopupGraphic(e,t){return e&&!!e.getEffectivePopupTemplate(_a(t)&&t.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,t){const{clientGraphics:i,queryArea:r,location:n}=await this._popupHitTestGraphics(e,t),o=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:s,clientOnlyGraphics:a}=this._graphicsPerFetchPopupLayerView(i,o);return{clientOnlyGraphics:a,layerViewsAndGraphics:s,queryArea:r,location:n}}async _popupHitTestGraphics(e,t){const{results:i,mapPoint:r}=await this.popupHitTest(e),n=i.filter((e=>this._isValidPopupGraphic(e.graphic,t))),o=n.length?n[0].mapPoint:null;return{clientGraphics:n.map((e=>e.graphic)),queryArea:r,location:r||o}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((t=>{this._isValidPopupLayerView(t)&&e.push(t)})),_a(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return _a(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,t){const i=[],r=new Map,n=t.map((e=>{const t=[];return"layer"in e?r.set(e.layer,t):r.set(e.graphics,t),{layerView:e,graphics:t}}));for(const t of e){const e=r.get(t.layer)||r.get(t.sourceLayer)||null;e?e.push(t):i.push(t)}return{layerViewsAndGraphics:n,clientOnlyGraphics:i}}};return t=bl([md("esri.views.PopupView")],t),t};Dl.getLogger("esri.core.support.OwningCollection");let V9=class extends(ew(Fd)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{xa(e.item)&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Fd.ofType(this.itemType.Type))(e):new Fd(e)}};function z9(e,t){return{type:e,cast:$d,set(i){const r=jd(i,this._get(t),e);r.owner=this,this._set(t,r)}}}bl([Lh()],V9.prototype,"owner",null),V9=bl([md("esri.core.support.OwningCollection")],V9);const U9=Dl.getLogger("esri.support.AnalysesCollection");let q9=class extends V9{constructor(e){super(e),this.handles.add(this.on("before-add",(e=>{xa(e.item)||e.item.parent===this.owner&&(U9.warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};q9=bl([md("esri.support.AnalysesCollection")],q9);let G9=class extends V9{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};bl([Sd({Type:HI,ensureType:xh(HI)})],G9.prototype,"itemType",void 0),G9=bl([md("esri.support.GraphicsCollection")],G9);let B9=class extends vd{constructor(e){super(e),this.view=null,this.baseLayerViews=new Fd,this.referenceLayerViews=new Fd,this._loadingHandle=rD(this,"view.map.basemap",(e=>{e&&e.load().catch((()=>{}))}))}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var e,t;if(this.view&&this.view.suspended)return!1;const i=null==(e=this.view)||null==(t=e.map)?void 0:t.basemap;return!!i&&!!i.loaded&&(this.baseLayerViews.some((e=>e.updating))||this.referenceLayerViews.some((e=>e.updating)))}};bl([Lh({constructOnly:!0})],B9.prototype,"view",void 0),bl([Lh({readOnly:!0})],B9.prototype,"baseLayerViews",void 0),bl([Lh({readOnly:!0})],B9.prototype,"referenceLayerViews",void 0),bl([Lh({readOnly:!0})],B9.prototype,"suspended",null),bl([Lh({type:Boolean,readOnly:!0})],B9.prototype,"updating",null),B9=bl([md("esri.views.BasemapView")],B9);const W9=Dl.getLogger("esri.views.LayerViewManager");class H9{constructor(e,t,i){this.layer=e,this.view=t,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=ou(),this._started=!1,this.done=!1,eu(this._controller.signal,(()=>{const t=new Ac("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(t)}))}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:i}=this;t.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:i}=this;this._map=i.map;try{var r,n;let o,s;if(await t.load({signal:e}),"prefetchResources"in t&&await t.prefetchResources({signal:e}),t.createLayerView)o=await t.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new Ac("layer:view-not-supported","No layerview implementation was found");const r=await this.layerViewImporter.importLayerView(t);Yc(e),o="default"in r?new r.default({layer:t,view:i}):new r({layer:t,view:i})}const a=()=>{s=Aa(s),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};s=eu(e,a),Yc(e);try{await o.when()}catch(e){throw a(),e}if(!(null==(r=this._map)||null==(n=r.allLayers)?void 0:n.includes(t)))return a(),void this._deferred.reject(new Ac("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=o,t.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:t,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(e){t.emit("layerview-create-error",{view:i,error:e}),i.emit("layerview-create-error",{layer:t,error:e}),this.done=!0,this._deferred.reject(new Ac("layerview:create-error","layerview creation failed",{layer:t,error:e}))}}}let J9=class extends tw{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Kb,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var e;const t=null==(e=this.view.map)?void 0:e.allLayers;if(t)for(const e of t)this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e)},this._reschedule=()=>(xa(this._workPromise)&&(this._workPromise=ou()),this.handles.remove("reschedule"),this.handles.add(Eu(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var e,t,i;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),xa(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const n=new rw({getCollections:()=>this._rootCollectionNames.map((e=>this.get(e))),getChildrenFunction:e=>e&&"layers"in e?e.layers:null});if(!n)return this._workPromise.resolve(),void(this._workPromise=null);for(const e of n)this._createLayerView(e);this._refreshCollections();for(const[e,t]of this._layerLayerViewInfoMap)n.includes(e)||(this._layerLayerViewInfoMap.delete(t.layer),t.destroy());const o=n.filter((e=>"group"===e.type)).map((e=>e.layers)),s=[null==r||null==(e=r.ground)?void 0:e.layers,null==r||null==(t=r.basemap)?void 0:t.baseLayers,null==r||null==(i=r.basemap)?void 0:i.referenceLayers,null==r?void 0:r.layers,...o].filter((e=>!!e));this.handles.add(s.map((e=>this._watchUpdatingTracking.addOnCollectionChange((()=>e),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([Gb((()=>{var e,t;return null==(e=this.view)||null==(t=e.map)?void 0:t.allLayers}),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),zb((()=>{const e=this.view,t=null==e?void 0:e.map;return[null==t?void 0:t.basemap,null==t?void 0:t.ground,null==t?void 0:t.layers,null==e?void 0:e.ready]}),(()=>this._reschedule()),Zb)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return _a(this._workPromise)||this._watchUpdatingTracking.updating||oh(this._layerLayerViewInfoMap,(e=>!e.done))}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new Ac("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const n of e){const e=this._layerLayerViewInfoMap.get(n);if(!e||!e.layerView)continue;const o=e.layerView;o.layer=n,o.parent=i,t.getItemAt(r)!==o&&t.splice(r,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new H9(e,this.view,this.layerViewImporter);t.promise.then((()=>this._refreshCollections()),(t=>{var i,r;t&&(ru(t)||"cancelled:layerview-create"===t.name)||W9.error(`Failed to create layerview for layer title:'${null!=(i=e.title)?i:"no title"}', id:'${null!=(r=e.id)?r:"no id"}' of type '${e.type}'.`,{layer:e,error:t}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};bl([Lh()],J9.prototype,"_workPromise",void 0),bl([Lh({readOnly:!0})],J9.prototype,"_watchUpdatingTracking",void 0),bl([Lh({readOnly:!0})],J9.prototype,"_layersToLayerViews",null),bl([Lh({readOnly:!0})],J9.prototype,"_rootCollectionNames",null),bl([Lh()],J9.prototype,"layerViewImporter",void 0),bl([Lh()],J9.prototype,"supportsGround",void 0),bl([Lh({readOnly:!0})],J9.prototype,"updating",null),bl([Lh({readOnly:!0})],J9.prototype,"updatingRemaining",null),bl([Lh({constructOnly:!0})],J9.prototype,"view",void 0),J9=bl([md("esri.views.LayerViewManager")],J9);const Y9=J9;let Z9=class extends vd{constructor(e){super(e),this.factor=1.5,this.offset=Rk(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};bl([Lh({type:Number})],Z9.prototype,"factor",void 0),bl([Lh({nonNullable:!0})],Z9.prototype,"offset",void 0),bl([Lh()],Z9.prototype,"position",void 0),bl([Lh({type:Number,range:{min:0}})],Z9.prototype,"size",void 0),bl([Lh()],Z9.prototype,"maskUrl",void 0),bl([Lh()],Z9.prototype,"maskEnabled",void 0),bl([Lh()],Z9.prototype,"overlayUrl",void 0),bl([Lh()],Z9.prototype,"overlayEnabled",void 0),bl([Lh({readOnly:!0})],Z9.prototype,"version",null),bl([Lh({type:Boolean})],Z9.prototype,"visible",void 0),Z9=bl([md("esri.views.Magnifier")],Z9);const K9=Z9;let X9=class extends vd{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise(((r,n)=>this._tasks.push(new Q9(r,n,e,t,i))))}unshift(e,t,i){return this.running=!0,new Promise(((r,n)=>this._tasks.unshift(new Q9(r,n,e,t,i))))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const i=Kc(t.signal);if(i&&!t.abortCallback)t.reject(Jc());else{const r=i?t.abortCallback(Jc()):t.callback(e);hu(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(e){t.reject(e)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Jc();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};bl([Lh()],X9.prototype,"running",void 0),X9=bl([md("esri.layers.support.PromiseQueue")],X9);class Q9{constructor(e,t,i,r,n){this.resolve=e,this.reject=t,this.callback=i,this.signal=r,this.abortCallback=n}}let e7=class extends vd{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};bl([Lh()],e7.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),bl([Lh()],e7.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),e7=bl([md("esri.views.support.DebugFlags")],e7);const t7=new e7,i7=Dl.getLogger("esri.views.support.Scheduler");var r7;!function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"}(r7||(r7={}));const n7=new Map([[r7.RESOURCE_CONTROLLER,0],[r7.SLIDE,0],[r7.STREAM_DATA_LOADER,0],[r7.ELEVATION_QUERY,0],[r7.TERRAIN_SURFACE,1],[r7.SURFACE_GEOMETRY_UPDATES,1],[r7.GRAPHICS_CORE,2],[r7.I3S_CONTROLLER,2],[r7.POINT_CLOUD_LAYER,2],[r7.FEATURE_TILE_FETCHER,2],[r7.OVERLAY,4],[r7.STAGE,4],[r7.GRAPHICS_DECONFLICTOR,4],[r7.FILTER_VISIBILITY,4],[r7.SCALE_VISIBILITY,4],[r7.FRUSTUM_VISIBILITY,4],[r7.POINT_OF_INTEREST_FREQUENT,6],[r7.POINT_OF_INTEREST_INFREQUENT,30],[r7.LABELER,8],[r7.FEATURE_QUERY_ENGINE,8],[r7.FEATURE_TILE_TREE,16],[r7.FEATURE_TILE_TREE_ACTIVE,0],[r7.ELEVATION_ALIGNMENT,12],[r7.TEXT_TEXTURE_ATLAS,12],[r7.CLOUDS_GENERATOR,12],[r7.TEXTURE_UNLOAD,12],[r7.LINE_OF_SIGHT_TOOL,16],[r7.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[r7.SNAPPING,0],[r7.SHADOW_ACCUMULATOR,30]]);function o7(e){return n7.has(e)?n7.get(e):"number"==typeof e?e:1}var s7;!function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(s7||(s7={}));const a7=1e3/30;var l7,c7;!function(e){let t=class extends vd{constructor(e){super(e),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new Dc("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=s7.INTERACTING,this._tasks=new jc,this._runQueue=new jc,this._load=0,this._idleStateCallbacks=new jc,this._idleUpdatesStartFired=!1,this._maxReschedule=d7,this._forceTask=!1,this._debug=!1,this._debugHandle=zb((()=>t7.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),Yb),this._budget=new r(e.nowFunc);for(const e of Object.keys(r7))this.performanceInfo.tasks.set(r7[e],new Dc(r7[e]));let t;const i=this;this._test={get state(){return Ea(t,i._state)},set state(e){t=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:a7,IDLE_BUDGET:100,get budget(){return i._budget.budget},usedBudget:0,setBudget:e=>i._budget=e,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),Aa(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=d7,this._schedule(),this.frame()))})))}registerTask(e,t){const r=o7(e),n=new i(this,e,t,r);return this._tasks.push(n),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new Dc(e)),n}registerIdleStateCallbacks(e,t){const i={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(i),this.state===s7.IDLE&&this._idleUpdatesStartFired&&i.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(i),set idleBegin(e){r._idleUpdatesStartFired&&(i.idleEnd(),r._state===s7.IDLE&&e()),i.idleBegin=e},set idleEnd(e){i.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==s7.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return xa(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=6.5,i=e.frameDuration,r=1;switch(this.state){case s7.IDLE:t=0,i=Math.max(100,e.frameDuration),r=30;break;case s7.INTERACTING:i=Math.max(a7,e.frameDuration);case s7.ANIMATING:}return i=i-e.elapsedFrameTime-t,this.state!==s7.IDLE&&i<1&&!this._forceTask?(this._forceTask=!0,!1):(i=Math.max(i,r),this._budget.reset(i,this.state),this._maxReschedule=d7,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case s7.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case s7.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return c7.SCHEDULED;let t=c7.IDLE;return this._tasks.forAll((i=>{i.name===e&&i.needsUpdate&&(i.schedulePriority<=1?t=c7.READY:t!==c7.READY&&(t=c7.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((i=>{i.name===e&&(t+=i.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,i)=>{t+=e>1?` ${e}x ${i}`:` ${i}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((i=>{i.needsUpdate&&0!==i.schedulePriority&&0!==i.basePriority&&(e=!0,t=Math.max(t,i.basePriority),1===i.schedulePriority?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)})),!e)return this.updating=!1,!1;this._maxReschedule===d7&&(this._maxReschedule=t),--this._maxReschedule}return this.updating=!0,!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const t=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)}catch(e){i7.error(`Exception in task "${i.name}"`,e)}i.schedulePriority=i.basePriority;const r=this._budget.now()-t;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",i.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some((e=>e.needsUpdate)),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this.updating=this._tasks.some((e=>e.needsUpdate)),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(r7))this._frameTaskTimes.set(r7[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){return this._test}};bl([Lh()],t.prototype,"updating",void 0),bl([Lh()],t.prototype,"nowFunc",void 0),t=bl([md("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends vd{constructor(e,t,i,r){super({}),this._scheduler=e,this.name=t,this._basePriority=r,this.runtime=0,this._queue=new X9,this._handles=new Vb,this.schedulePriority=this._basePriority,this.task=_a(i)?i:this._queue,this._handles.add(Ub((()=>this.task.running),(()=>e.activate())))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(u7),this._scheduler.removeTask(this),this.schedule=h7.schedule,this.reschedule=h7.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=o7(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,i){return this._queue.push(e,t,i)}reschedule(e,t,i){return this._queue.unshift(e,t,i)}processQueue(e){this._queue.runTask(e)}};bl([Lh({constructOnly:!0})],i.prototype,"task",void 0),bl([Lh({readOnly:!0})],i.prototype,"updating",null),i=bl([md("esri.views.support.SchedulerTask")],i);class r{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=s7.IDLE,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r}(l7||(l7={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(c7||(c7={}));const u7=(()=>{const e=new l7.Budget((()=>performance.now()));return e.enabled=!1,e})();const h7=new class{remove(){}processQueue(){}schedule(e,t,i){try{if(Kc(t)){const e=Jc();return i?Promise.resolve(i(e)):Promise.reject(e)}return du(e(u7))}catch(e){return Promise.reject(e)}}reschedule(e,t,i){return this.schedule(e,t,i)}},d7=Number.MAX_SAFE_INTEGER;let p7=class extends vd{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=null!=(i=null==t?void 0:t.registerTask(r7.TEXTURE_UNLOAD))?i:h7}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach((e=>this._releaseTextureRequest(e))),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let n=this._textureRequests.get(r);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(r,n)),n.referenceCount++,{uid:r,texture:n.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(e)))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?null==(t=this._stage)||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return _a(t)?`${e}.${t}px`:e}};var f7;bl([Lh()],p7.prototype,"_frameTask",void 0),bl([Lh()],p7.prototype,"updating",null),p7=bl([md("esri.views.3d.support.TextureCollection")],p7),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(f7||(f7={}));const m7=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],g7={};function y7(e){return!!g7[e]}m7.forEach((e=>{g7[e]=!0}));class v7{constructor(e){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this.handlers.forEach((({handler:e,priority:t},i)=>this.inputManager.installHandlers(i,[e],t)))}disconnect(){this.inputManager&&this.handlers.forEach(((e,t)=>this.inputManager.uninstallHandlers(t))),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(e,t,i,r){const n=Array.isArray(e)?e:e.split(",");if(!function(e){for(const t of e)if(!y7(t))return!1;return!0}(n))return n.some(y7)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,s;Array.isArray(t)?s=t:(o=t,s=[]),"function"==typeof i?o=i:r=i,r=null!=r?r:$6.DEFAULT;const a=this._createUniqueGroupName(),l=new b7(this.view,n,s,o);this.handlers.set(a,{handler:l,priority:r});for(const e of n){const t=this.handlerCounts.get(e)||0;this.handlerCounts.set(e,t+1)}return this.inputManager&&this.inputManager.installHandlers(a,[l],r),{remove:()=>this._removeHandler(a,n)}}hasHandler(e){return!!this.handlerCounts.get(e)}_removeHandler(e,t){if(this.handlers.has(e)){this.handlers.delete(e);for(const e of t){const t=this.handlerCounts.get(e);void 0===t?console.error("Trying to remove handler for event that has no handlers registered: ",e):1===t?this.handlerCounts.delete(e):this.handlerCounts.set(e,t-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class b7 extends A6{constructor(e,t,i,r){super(!0),this.view=e;for(const e of t)switch(e){case"click":this.registerIncoming("click",i,(e=>r(this._wrapClick(e))));break;case"double-click":this.registerIncoming("double-click",i,(e=>r(this._wrapDoubleClick(e))));break;case"immediate-click":this.registerIncoming("immediate-click",i,(e=>r(this._wrapImmediateClick(e))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,(e=>r(this._wrapImmediateDoubleClick(e))));break;case"hold":this.registerIncoming("hold",i,(e=>r(this._wrapHold(e))));break;case"drag":this.registerIncoming("drag",i,(e=>{const t=this._wrapDrag(e);t&&r(t)}));break;case"key-down":this.registerIncoming("key-down",i,(e=>r(this._wrapKeyDown(e))));break;case"key-up":this.registerIncoming("key-up",i,(e=>r(this._wrapKeyUp(e))));break;case"pointer-down":this.registerIncoming("pointer-down",i,(e=>r(this._wrapPointer(e,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",i,(e=>r(this._wrapPointer(e,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",i,(e=>r(this._wrapPointer(e,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,(e=>r(this._wrapPointerDrag(e))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,(e=>r(this._wrapMouseWheel(e))));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,(e=>r(this._wrapPointer(e,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,(e=>r(this._wrapPointer(e,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",i,(e=>{r(this._wrapGamepad(e))}));break;case"focus":this.registerIncoming("focus",i,(e=>{r(this._wrapFocus(e))}));break;case"blur":this.registerIncoming("blur",i,(e=>{r(this._wrapBlur(e))}))}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:o,native:s,eventId:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"click",pointerType:t,button:i,buttons:r,x:n,y:o,native:s,timestamp:c,screenPoint:Rk(n,o),mapPoint:this._getMapPoint(n,o),eventId:a,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:o,native:s,eventId:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"double-click",pointerType:t,button:i,buttons:r,x:n,y:o,native:s,timestamp:c,mapPoint:this._getMapPoint(n,o),eventId:a,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:o,native:s,eventId:a}=e.data,l=s.pointerId,{cancelable:c,timestamp:u}=e;return{type:"immediate-click",pointerId:l,pointerType:t,button:i,buttons:r,x:n,y:o,native:s,timestamp:u,mapPoint:this._getMapPoint(n,o),eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:i,buttons:r,x:n,y:o,native:s,eventId:a}=e.data,l=s.pointerId,{cancelable:c,timestamp:u}=e;return{type:"immediate-double-click",pointerId:l,pointerType:t,button:i,buttons:r,x:n,y:o,native:s,timestamp:u,mapPoint:this._getMapPoint(n,o),eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:i,buttons:r,x:n,y:o,native:s}=e.data,{cancelable:a,timestamp:l}=e;return{type:"hold",pointerType:t,button:i,buttons:r,x:n,y:o,native:s,timestamp:l,mapPoint:this._getMapPoint(n,o),cancelable:a,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap(Rk(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:i,y:r}=t.center,{action:n,pointerType:o,button:s}=t;if("start"===n&&(this.latestDragStart=t),!this.latestDragStart)return;const a=t.pointer.native,l=t.buttons,{cancelable:c,timestamp:u}=e,h={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===n&&(this.latestDragStart=void 0),{type:"drag",action:n,x:i,y:r,origin:h,pointerType:o,button:s,buttons:l,radius:t.radius,angle:yb(t.angle),native:a,timestamp:u,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:n}=e;return{type:"key-up",key:t,native:i,timestamp:n,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:i,y:r,button:n,buttons:o,native:s,eventId:a}=e.data,l=s.pointerId,c=s.pointerType,{cancelable:u,timestamp:h}=e;return{type:t,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:o,native:s,timestamp:h,eventId:a,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:i,buttons:r,native:n,eventId:o}=e.data.currentEvent,{button:s}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,u={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:d}=e;return{type:"pointer-drag",x:t,y:i,pointerId:a,pointerType:l,button:s,buttons:r,action:c,origin:u,native:n,timestamp:d,eventId:o,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:i,timestamp:r}=e,{x:n,y:o,deltaY:s,native:a}=i;return{type:"mouse-wheel",x:n,y:o,deltaY:s,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:i,device:r}=e.data,{cancelable:n,timestamp:o}=e,{buttons:s,axes:a}=i;return{type:"gamepad",device:r,timestamp:o,action:t,buttons:s,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}}var w7,_7,x7;!function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(w7||(w7={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(_7||(_7={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(x7||(x7={}));const S7=Dl.getLogger("esri.views.interactive.interactiveToolUtils");function k7(e){return[e.on("before-add",(t=>{const i=t.item;if(null==i||e.includes(i))return S7.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault()})),e.on("after-remove",(e=>{const t=e.item;t.visible=!1,t.active&&(t.view.activeTool=null),t.destroy()}))]}function M7(e){return e.visible&&e.getEditableFlag(w7.USER)&&e.getEditableFlag(w7.MANAGER)}function T7(e){return Rk(e.x,e.y)}function E7(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Rk(t.clientX-i.left,t.clientY-i.top)}function I7(e,t){return t instanceof Event?E7(e,t):T7(t)}function C7(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class O7{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const i=()=>e.stopPropagation();switch(e.type){case"pointer-move":A7(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!P7(e))break;const r=T7(e),n=this._intersect(r,e.pointerType,t.forEachTool);if(xa(n))break;const o=this._findToolAndManipulatorByKey(n,t.forEachTool,R7),s=ka(o,(e=>e.manipulator)),a=ka(o,(e=>e.tool));!(_a(s)&&_a(a)&&s.interactive)||s.grabbable&&s.grabbableForEvent(e)||!s.grabbing||s.dragging||this._ungrabManipulatorBeforeDragging(s,a,e),_a(s)&&s.interactive&&s.grabbable&&s.grabbableForEvent(e)&&!s.grabbing&&(this._grabbedManipulators.set(e.pointerId,{key:n,start:r,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&t.activeTool!==n.tool&&(this._currentlyActiveTool=t.activeTool,this._revertToActiveTool=!0,t.setActiveTool(n.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),i());break}case"pointer-up":this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!P7(e))break;const r=this._grabbedManipulators.get(e.pointerId),n=this._draggedManipulators.get(e.pointerId),o=ka(r||n,(({key:e})=>e)),s=this._findManipulatorByKey(o,t.forEachTool);if(xa(s))break;const a=T7(e);a.x=db(a.x,0,t.view.width),a.y=db(a.y,0,t.view.height);const l=(r||n).start;switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(s.dragging=!0,n?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{key:o,start:l}));break;case"end":s.dragging=!1,n&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}i();break}case"immediate-click":{const r=T7(e),n=this._intersect(r,e.pointerType,t.forEachTool),o=this._findToolAndManipulatorByKey(n,t.forEachTool,R7);if(function(e){return!!e.native.shiftKey}(e)||t.forEachTool((e=>{if((!_a(o)||o.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach((({manipulator:e})=>{e.selected&&(e.selected=!1,t=!0)})),t&&e.manipulatorSelectionChanged&&e.manipulatorSelectionChanged()}})),xa(o))break;const{manipulator:s,tool:a}=o;if(!s.interactive)break;s.selectable&&a.automaticManipulatorSelection&&(s.selected=!s.selected,a.manipulatorSelectionChanged&&a.manipulatorSelectionChanged());const l=e.native.shiftKey;s.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i});break}case"click":{const r=T7(e),n=this._intersect(r,e.pointerType,t.forEachTool),o=this._findManipulatorByKey(n,t.forEachTool);if(xa(o)||!o.interactive)break;const s=e.native.shiftKey;o.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:s}),i();break}case"double-click":{const r=T7(e),n=this._intersect(r,e.pointerType,t.forEachTool),o=this._findManipulatorByKey(n,t.forEachTool);if(xa(o)||!o.interactive)break;const s=e.native.shiftKey;o.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:s,stopPropagation:i});break}case"immediate-double-click":{const r=T7(e),n=this._intersect(r,e.pointerType,t.forEachTool),o=this._findManipulatorByKey(n,t.forEachTool);if(xa(o)||!o.interactive)break;const s=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:s,stopPropagation:i});break}}this._updateCursor(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:T7(i)}),this._grabbedManipulators.forEach((({key:i},r)=>{i.tool===t&&t.manipulators.findById(i.manipulatorId)===e&&this._grabbedManipulators.delete(r)}))}_handlePointerEnd(e,t){const i=ka(this._grabbedManipulators.get(e.pointerId),(({key:e})=>e)),r=this._findManipulatorByKey(i,t.forEachTool);_a(r)&&!r.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(t.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:T7(e)})),this._grabbedManipulators.delete(e.pointerId))}_cursorFromMap(e,t){let i=null;return oh(e,(({key:e})=>{const r=this._findManipulatorByKey(e,t);return!!(_a(r)&&r.interactive&&"cursor"in r&&r.cursor)&&(i=r.cursor,!0)})),i}_updateCursor(e){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,e)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,e)||"pointer":this._cursor=null}clearPointers(e,t,i=!0,r){const n=t=>t.tool===e&&(xa(r)||t.manipulatorId===r);this._grabbedManipulators.forEach((({key:e,pointerType:i},r)=>{if(n(e)){this._grabbedManipulators.delete(r);const n=this._findManipulatorByKey(e,t);_a(n)&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}))}})),this._draggedManipulators.forEach((({key:e},i)=>{if(n(e)){this._draggedManipulators.delete(i);const r=this._findManipulatorByKey(e,t);_a(r)&&(r.dragging=!1,r.events.emit("drag",{action:"cancel"}))}})),i&&this._hoveredManipulators.forEach((({key:e},i)=>{if(n(e)){this._hoveredManipulators.delete(i);const r=this._findManipulatorByKey(e,t);_a(r)&&(r.hovering=!1)}})),this._updateCursor(t)}_intersect(e,t,i){let r=null;return i((i=>{if(null==i.manipulators||!M7(i))return!1;const n=i.manipulators.intersect(e,t);return!xa(n)&&(r={manipulatorId:n.id,tool:i},!0)})),r}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((t,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Rk(t.x,t.y),i,t.pointerType,e)}))}handleHoverEvent(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!A7(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(T7(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,i,r){const n=this._intersect(e,i,r);let o=this._findManipulatorByKey(n,r);const s=ka(this._hoveredManipulators.get(t),(({key:e})=>e)),a=this._findManipulatorByKey(s,r);_a(o)&&!o.interactive&&(o=null),a!==o&&(_a(a)&&(a.hovering=!1),_a(o)?(o.hovering=!0,this._hoveredManipulators.set(t,{key:n})):this._hoveredManipulators.delete(t),this._updateCursor(r))}_findManipulatorByKey(e,t){return this._findToolAndManipulatorByKey(e,t,R7)?R7.manipulator:null}_findToolAndManipulatorByKey(e,t,i){return xa(e)?null:(i.tool=null,i.manipulator=null,t((t=>{if(t!==e.tool||null==t.manipulators||!M7(t))return!1;const r=t.manipulators.findById(e.manipulatorId);return!!_a(r)&&(i.manipulator=r,i.tool=t,!0)})),i.manipulator?i:null)}}function A7(e){return"mouse"===e}function P7(e){return"mouse"!==e.pointerType||0===e.button}const R7={manipulator:null,tool:null},L7=Dl.getLogger("esri.views.ToolViewManager");let D7=class extends tw{constructor(e){super(e),this._manipulatorState=new O7,this.tools=new Fd,this.cursor=null,this._forEachTool=e=>{for(const t of this.tools.items)if(e(t))return}}initialize(){this.handles.add([this.view.on(m7,(e=>{this._handleInputEvent(e)}),$6.TOOL),...k7(this.tools),this.tools.on("before-remove",(({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(_a(e)&&!this.view.ready)return void L7.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return void(_a(e)&&L7.warn("Tool is already active - ignoring activation request."));const t=this.activeTool;this._set("activeTool",e),_a(t)&&t.deactivate(),_a(e)&&e.activate(),this._removeIncompleteTools(e);const i=xa(this.activeTool);for(const e of this.tools){e.setEditableFlag(w7.MANAGER,i||e===this.activeTool);const t=M7(e);!i&&t||this._manipulatorState.clearPointers(e,this._forEachTool,!t)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some((e=>e.updating))||null!=(e=null==(t=this.textures)?void 0:t.updating)&&e}attach(){"3d"===this.view.type?(this._set("textures",new p7(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",(()=>{this._forEachManipulator((e=>{null!=e.onViewChange&&e.onViewChange()}))})),this.view.elevationProvider.on("elevation-change",(e=>{this._forEachManipulator((t=>{null!=t.onElevationChange&&t.onElevationChange(e)}))})),Fl((()=>this._set("textures",Ca(this.textures))))],"attached")):this.handles.add(this.view.watch("extent",(()=>{this._forEachManipulator((e=>{null!=e.onViewChange&&e.onViewChange()}))})))}detach(){_a(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove("attached")}_forEachManipulator(e){this._forEachTool((t=>{t.manipulators&&t.manipulators.forEach((({manipulator:i})=>e(i,t)))}))}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};_a(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool((e=>{!t&&e.visible&&e.handleInputEvent(i)})),!t&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}),!t&&_a(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove("tools"),this._forEachTool((e=>{if(e instanceof vd){const t=nD(e,["cursor","visible","editable"],(()=>{M7(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()}));this.handles.add(t,"tools")}e.manipulators&&this.handles.add(e.manipulators.on("change",(t=>{t.removed.forEach((({id:t})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,t)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})),"tools")})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let e=this._manipulatorState.cursor;this._forEachTool((t=>!(!_a(t.cursor)||!t.visible||(e=t.cursor,0)))),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter((t=>(xa(e)||t!==e)&&!t.created)).forEach((e=>{this.tools.remove(e)}))}};bl([Lh({constructOnly:!0,nonNullable:!0})],D7.prototype,"view",void 0),bl([Lh({readOnly:!0,nonNullable:!0})],D7.prototype,"textures",void 0),bl([Lh({value:null})],D7.prototype,"activeTool",null),bl([Lh({readOnly:!0,type:Fd})],D7.prototype,"tools",void 0),bl([Lh({readOnly:!0})],D7.prototype,"cursor",void 0),bl([Lh({readOnly:!0})],D7.prototype,"updating",null),D7=bl([md("esri.views.ToolViewManager")],D7);const N7=D7;let F7=class extends vd{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":j7.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return $7[this.deviceType]}};bl([Lh({nonNullable:!0,readOnly:!0})],F7.prototype,"nativeIndex",void 0),bl([Lh({type:String,readOnly:!0})],F7.prototype,"deviceType",null),bl([Lh({type:Number,readOnly:!0})],F7.prototype,"axisThreshold",null),F7=bl([md("esri.views.input.gamepad.GamepadInputDevice")],F7);const j7=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),$7={standard:.15,spacemouse:.025,unknown:0},V7=F7;let z7=class extends vd{constructor(...e){super(...e),this.devices=new Fd,this.enabledFocusMode="document"}};bl([Lh({type:Fd.ofType(V7),readOnly:!0})],z7.prototype,"devices",void 0),bl([Lh({type:["document","view","none"]})],z7.prototype,"enabledFocusMode",void 0),z7=bl([md("esri.views.input.gamepad.GamepadSettings")],z7);const U7=z7;let q7=class extends vd{constructor(){super(...arguments),this.gamepad=new U7}};bl([Lh({readOnly:!0})],q7.prototype,"gamepad",void 0),q7=bl([md("esri.views.input.Input")],q7);const G7=q7;let B7=class extends vd{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};bl([Lh({type:Boolean,nonNullable:!0})],B7.prototype,"enabled",void 0),bl([Lh({type:V7})],B7.prototype,"device",void 0),bl([Lh({type:["pan","zoom"],nonNullable:!0})],B7.prototype,"mode",void 0),bl([Lh({type:["forward-down","forward-up"],nonNullable:!0})],B7.prototype,"tiltDirection",void 0),bl([Lh({type:Number,nonNullable:!0})],B7.prototype,"velocityFactor",void 0),B7=bl([md("esri.views.navigation.gamepad.GamepadSettings")],B7);const W7=B7;let H7=class extends vd{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new W7,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};bl([Lh({type:Boolean})],H7.prototype,"browserTouchPanEnabled",void 0),bl([Lh({type:W7,nonNullable:!0})],H7.prototype,"gamepad",void 0),bl([Lh({type:Boolean})],H7.prototype,"momentumEnabled",void 0),bl([Lh({type:Boolean})],H7.prototype,"mouseWheelZoomEnabled",void 0),H7=bl([md("esri.views.navigation.Navigation")],H7);const J7=H7;var Y7;function Z7(e){const t=e.url&&x1(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&_a(t)&&"ImageServer"===t.serverType||!K7(e)||!e.heightModelInfo?function(e){return X7(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):eee(e)}(e)?s1.deriveUnitFromSR(tee,e.spatialReference):null:e.heightModelInfo}function K7(e){return"heightModelInfo"in e}function X7(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Q7(e){return null!=e.layers||eee(e)||X7(e)||K7(e)}function eee(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}!function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"}(Y7||(Y7={}));const tee=new s1({heightModel:"gravity-related-height"});var iee;function ree(e){return e===iee.Global?"global":"local"}!function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(iee||(iee={}));let nee,oee=null;async function see(e){oee||(oee=import("./chunks/geometryServiceUtils-fecad1fc.js").then((e=>nee=e))),await oee,Yc(e)}async function aee(e,t,i,r){if(!e)return null;const n=e.spatialReference;return FA()||GA(n,t)?$A(e,t):nee?nee.projectGeometry(e,t,i,r):(await Promise.race([see(r),jA(r)]),aee(e,t,i,r))}const lee=Dl.getLogger("esri.views.support.DefaultsFromMap");lee.level="info";let cee=class extends vd{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.logDebugInformation=!1,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=Pa(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return _a(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return xa(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var e,t,i,r;const n=null==(e=this.map)?void 0:e.call(this),o=[];return _a(this.priorityCollection)&&o.push(this.priorityCollection),o.push({parent:null==n?void 0:n.basemap,layers:null==n||null==(t=n.basemap)?void 0:t.baseLayers},{layers:null==n?void 0:n.layers},{parent:null==n?void 0:n.ground,layers:null==n||null==(i=n.ground)?void 0:i.layers},{parent:null==n?void 0:n.basemap,layers:null==n||null==(r=n.basemap)?void 0:r.referenceLayers}),o}get _allLayers(){var e,t;const i=this._collectLayers(this.mapCollections);return this._debug("Collected",null!=(e=null==(t=i.layers)?void 0:t.length)?e:0,"layers, updating",i.updating),i}get _spatialReferenceTask(){var e,t;if(this.suspended)return null!=(t=this._get("_spatialReferenceTask"))?t:{updating:!1};const{layers:i,updating:r}=this._allLayers,n={candidates:null};for(const e of i)if(this._processSpatialReferenceCandidates(e,n),n.candidates&&1===n.candidates.length)break;if(1!==(null==(e=n.candidates)?void 0:e.length)&&r)return{updating:!0};const o=this._pickSpatialReferenceCandidate(n.candidates);return this._debug("Finished spatial reference",_a(o)?`${o.spatialReference.wkid}:${_a(o.viewingMode)?ree(o.viewingMode):"global/local"}`:"none available"),{spatialReference:_a(o)?o.spatialReference:null,viewingMode:_a(o)?o.viewingMode:null,updating:!1}}get _tileInfoTask(){var e,t,i,r,n,o,s,a;if(!this.required.tileInfo)return null!=(a=this._get("_tileInfoTask"))?a:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:l,updating:c}=this._collectLayers([{parent:null==(e=this.map)||null==(t=e.call(this))?void 0:t.basemap,layers:null==(i=this.map)||null==(r=i.call(this))||null==(n=r.basemap)?void 0:n.baseLayers},{layers:null==(o=this.map)||null==(s=o.call(this))?void 0:s.layers}]);if(l&&l.length>0&&"tileInfo"in l[0]){const e=l[0].tileInfo;return{tileInfo:e&&e.spatialReference.equals(this.spatialReference)?e:null,updating:!1}}return{updating:c}}get _heightModelInfoTask(){var e,t;if(!this.required.heightModelInfo||this.suspended&&null!=(e=this._get("_heightModelInfoTask"))&&e.heightModelInfo)return null!=(t=this._get("_heightModelInfoTask"))?t:{updating:!1};const{layers:i,updating:r}=this._allLayers;for(const e of i){var n,o;if(this._debug("Considering",null!=(n=null!=(o=e.title)?o:e.id)?n:e.declaredClass,"for height model info"),Q7(e)){const t=Z7(e);var s,a;if(t)return this._debug("Derived height model info",t),{heightModelInfo:t,vcsWkid:null==(s=e.spatialReference)?void 0:s.vcsWkid,latestVcsWkid:null==(a=e.spatialReference)?void 0:a.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",r),{updating:r}}get _extentCandidatesTask(){var e;if(this.suspended||!this.required.extent)return null!=(e=this._get("_extentCandidatesTask"))?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,i=t.updating,r=[];for(const e of t.layers){var n;const t="fullExtents"in e&&e.fullExtents||(_a(e.fullExtent)?[e.fullExtent]:[]),i=this.requiresExtentInSpatialReference?null:t[0],o=null!=(n=t.find((e=>e.spatialReference.equals(this.spatialReference))))?n:i;if(o)return{candidates:[{extent:o,layer:e}],updating:!1};if(this._getSupportedSpatialReferences(e).length>0)for(const i of t)r.push({extent:i,layer:e})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(xa(e)||0===e.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:_a(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(_a(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=Pa(this._projectExtentTask.task)),this._debug("Starting project extent task for",i.extent),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:mu((async e=>{try{const t=await aee(i.extent,r,i.layer.portalItem,e);this._debug("Project extent task finished",t),this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch(t){if(Kc(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_processSpatialReferenceCandidates(e,t){var i;const r=this._getSupportedSpatialReferences(e);if(0!==r.length)if(this._debug("Spatial reference candidates from",null!=(i=e.title)?i:e.id,":",r.map((e=>`${e.spatialReference.wkid}:${_a(e.viewingMode)?ree(e.viewingMode):"global/local"}`)).join(", ")),t.candidates){const e=[],i=(e,t)=>xa(e.viewingMode)?t.viewingMode:(xa(t.viewingMode)||e.viewingMode===t.viewingMode)&&e.viewingMode;for(const n of t.candidates)for(const t of r){if(!n.spatialReference.equals(t.spatialReference))continue;const r=i(n,t);if(!1!==r){e.push({spatialReference:n.spatialReference,viewingMode:r});break}}e.length>0&&(t.candidates=e)}else t.candidates=r}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return!e||e.length<1?_a(t)?{spatialReference:t,viewingMode:null}:null:(_a(t)&&e.length>1&&e.some((({spatialReference:e})=>e.equals(t)))&&(e=e.filter((({spatialReference:e})=>e.equals(t)))),e.length>1&&e.some((({viewingMode:e})=>e!==iee.Local))&&(e=e.filter((({viewingMode:e})=>e!==iee.Local))),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];const i=[];for(const r of t){const t=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(_a(t)){const e=_a(t.constraints)?t.constraints:[{spatialReference:r}];for(const{spatialReference:t,viewingMode:r}of e)(!this.requiresExtentInSpatialReference||xa(this.userSpatialReference)||t.equals(this.userSpatialReference))&&i.push({spatialReference:t,viewingMode:r})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find((({extent:e})=>t.equals(e.spatialReference)))||e[0]}_collectLayers(e){var t;if("loaded"!==this._loadMaybe(null==(t=this.map)?void 0:t.call(this)))return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const t of e)if(this._collectCollection(t,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":var i,r;t.updating||(this._debug("Considering layer",null!=(i=null!=(r=n.title)?r:n.id)?i:n.declaredClass),t.layers.push(n)),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?"not-loaded"===e.loadStatus?(this._debug("Triggering load",null!=(t=null!=(i=e.title)?i:e.id)?t:e.declaredClass),e.load(),"loading"):e.loadStatus:"loaded";var t,i}_debug(...e){this.logDebugInformation&&lee.info(...e)}};bl([Lh()],cee.prototype,"required",void 0),bl([Lh({constructOnly:!0})],cee.prototype,"map",void 0),bl([Lh({constructOnly:!0})],cee.prototype,"getSpatialReferenceSupport",void 0),bl([Lh()],cee.prototype,"defaultSpatialReference",void 0),bl([Lh()],cee.prototype,"userSpatialReference",void 0),bl([Lh()],cee.prototype,"sourcePreloadCount",void 0),bl([Lh()],cee.prototype,"priorityCollection",void 0),bl([Lh()],cee.prototype,"logDebugInformation",void 0),bl([Lh()],cee.prototype,"requiresExtentInSpatialReference",void 0),bl([Lh()],cee.prototype,"suspended",void 0),bl([Lh({readOnly:!0})],cee.prototype,"ready",null),bl([Lh({readOnly:!0})],cee.prototype,"heightModelInfoReady",null),bl([Lh({readOnly:!0})],cee.prototype,"spatialReference",null),bl([Lh({readOnly:!0})],cee.prototype,"extent",null),bl([Lh({readOnly:!0})],cee.prototype,"heightModelInfo",null),bl([Lh({readOnly:!0})],cee.prototype,"vcsWkid",null),bl([Lh({readOnly:!0})],cee.prototype,"latestVcsWkid",null),bl([Lh({readOnly:!0})],cee.prototype,"viewingMode",null),bl([Lh({readOnly:!0})],cee.prototype,"tileInfo",null),bl([Lh({readOnly:!0})],cee.prototype,"mapCollections",null),bl([Lh({readOnly:!0})],cee.prototype,"_allLayers",null),bl([Lh({readOnly:!0})],cee.prototype,"_spatialReferenceTask",null),bl([Lh({readOnly:!0})],cee.prototype,"_tileInfoTask",null),bl([Lh({readOnly:!0})],cee.prototype,"_heightModelInfoTask",null),bl([Lh({readOnly:!0})],cee.prototype,"_extentCandidatesTask",null),bl([Lh()],cee.prototype,"_extentTask",null),bl([Lh()],cee.prototype,"_projectExtentTask",void 0),cee=bl([md("esri.views.support.DefaultsFromMap")],cee);const uee=cee;var hee;const dee=Dl.getLogger("esri.views.View");let pee=hee=class extends(ew(wd.EventedMixin(np(vd)))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new rw({getCollections:()=>{var e,t,i;return[null==(e=this.basemapView)?void 0:e.baseLayerViews,null==(t=this.groundView)?void 0:t.layerViews,this.layerViews,null==(i=this.basemapView)?void 0:i.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new G9,this.analyses=new q9,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Fd,this.magnifier=new K9,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new G7,this.navigation=new J7,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new v7(this),this.persistableViewModels=new Fd,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",(e=>{var t,i;e?(this._currentSpatialReference=this.spatialReference,hee.views.add(this)):(this._currentSpatialReference=null,hee.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(null==(t=this.layerViewManager)||t.clear(),null==(i=this.toolViewManager)||i.detach(),_a(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):e&&!this.ready&&(_a(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())}),!0))}initialize(){this.addResolvingPromise(this.validate().then((()=>(this._isValid=!0,Bb((()=>this.ready)))))),this.basemapView=new B9({view:this}),this.layerViewManager=new Y9({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new N7({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([zb((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),{sync:!0,initial:!0}),zb((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),{sync:!0}),zb((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([zb((()=>{var e;return null==(e=this.defaultsFromMap)?void 0:e.ready}),(t=>{var i;const r=(null==(i=this.map)?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(_a(e))return;const t=Fl((()=>e=Pa(e)));e=mu((async t=>{try{await uu(this.spatialReferenceWarningDelay,null,t)}catch{return}finally{e=null}dee.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.handles.add(t,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")}),{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ca(this.graphics),this.analyses=Ca(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=Ca(this.toolViewManager),this.layerViewManager=Ca(this.layerViewManager),this.basemapView=Ca(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,null==e||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return dee.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new uee({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||lp.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||null!=(e=this.defaultsFromMap)&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){var t;e!==this._get("map")&&(null!=(t=e)&&t.destroyed&&(dee.warn("#map","The provided map is already destroyed",{map:e}),e=null),lp.isLoadable(e)&&e.load().catch((()=>{})),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&null!=(e=this.defaultsFromMap)&&null!=(t=e.required)&&t.heightModelInfo&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(e){const t=!Df(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return null==(e=this.defaultsFromMap)?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return _a(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return null==(e=this.defaultsFromMap)?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return null!=(e=null!=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)?t:null==(i=this.defaultsFromMap)?void 0:i.heightModelInfo)?e:null}importLayerView(e){throw new Ac("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(e){return _a(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&dee.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Ub((()=>!1===this.preconditionsReady),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};pee.views=new Fd,bl([Lh()],pee.prototype,"_userSpatialReference",void 0),bl([gD("toolViewManager.activeTool")],pee.prototype,"activeTool",void 0),bl([Lh({readOnly:!0})],pee.prototype,"allLayerViews",void 0),bl([Lh()],pee.prototype,"groundView",void 0),bl([Lh()],pee.prototype,"animation",void 0),bl([Lh()],pee.prototype,"basemapView",void 0),bl([Lh({readOnly:!0})],pee.prototype,"_defaultsFromMapSettings",null),bl([Lh()],pee.prototype,"defaultsFromMap",null),bl([Lh()],pee.prototype,"fatalError",void 0),bl([Lh({type:Eg})],pee.prototype,"extent",void 0),bl([Lh(z9(G9,"graphics"))],pee.prototype,"graphics",void 0),bl([Lh(z9(q9,"analyses"))],pee.prototype,"analyses",void 0),bl([Lh({readOnly:!0,type:s1})],pee.prototype,"heightModelInfo",null),bl([Lh({readOnly:!0})],pee.prototype,"interacting",null),bl([Lh({readOnly:!0})],pee.prototype,"navigating",void 0),bl([Lh({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],pee.prototype,"preconditionsReady",null),bl([Lh({readOnly:!0})],pee.prototype,"typeSpecificPreconditionsReady",void 0),bl([Lh({type:Fd,readOnly:!0})],pee.prototype,"layerViews",void 0),bl([Lh({type:K9})],pee.prototype,"magnifier",void 0),bl([Lh({value:null,type:M_})],pee.prototype,"map",null),bl([Lh()],pee.prototype,"padding",void 0),bl([Lh({readOnly:!0})],pee.prototype,"ready",void 0),bl([Lh({type:Yf})],pee.prototype,"spatialReference",null),bl([Lh()],pee.prototype,"spatialReferenceWarningDelay",void 0),bl([Lh()],pee.prototype,"stationary",null),bl([Lh({readOnly:!0})],pee.prototype,"supportsGround",void 0),bl([Lh({type:iV})],pee.prototype,"timeExtent",void 0),bl([gD("toolViewManager.tools")],pee.prototype,"tools",void 0),bl([Lh()],pee.prototype,"toolViewManager",void 0),bl([Lh({readOnly:!0})],pee.prototype,"type",void 0),bl([Lh({type:Number})],pee.prototype,"scale",void 0),bl([Lh({readOnly:!0})],pee.prototype,"updating",void 0),bl([Lh({readOnly:!0})],pee.prototype,"initialExtentRequired",void 0),bl([Lh({readOnly:!0})],pee.prototype,"initialExtent",null),bl([Lh()],pee.prototype,"cursor",null),bl([Lh({readOnly:!0})],pee.prototype,"input",void 0),bl([Lh({type:J7,nonNullable:!0})],pee.prototype,"navigation",void 0),bl([Lh()],pee.prototype,"layerViewManager",void 0),bl([Lh()],pee.prototype,"analysisViewManager",void 0),bl([Lh()],pee.prototype,"width",void 0),bl([Lh()],pee.prototype,"height",void 0),bl([Lh({readOnly:!0})],pee.prototype,"resizing",void 0),bl([Lh({value:null,readOnly:!0})],pee.prototype,"size",null),bl([Lh({readOnly:!0})],pee.prototype,"suspended",void 0),bl([Lh({readOnly:!0})],pee.prototype,"viewEvents",void 0),bl([Lh({readOnly:!0})],pee.prototype,"persistableViewModels",void 0),bl([Lh()],pee.prototype,"_isValid",void 0),bl([Lh()],pee.prototype,"_readyCycleForced",void 0),bl([Lh()],pee.prototype,"_currentSpatialReference",void 0),pee=hee=bl([md("esri.views.View")],pee);const fee=pee;let mee=class extends op{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise(((e,t)=>this._dfd={resolve:e,reject:t})))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new Ac("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=hu(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};bl([Lh({readOnly:!0})],mee.prototype,"done",null),bl([Lh({readOnly:!0,type:String})],mee.prototype,"state",void 0),bl([Lh()],mee.prototype,"target",void 0),mee=bl([md("esri.views.ViewAnimation")],mee),(mee||(mee={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};const gee=mee;function yee(e,t,i,r){const n=3*e,o=3*(i-e)-n,s=1-n-o,a=3*t,l=3*(r-t)-a,c=1-a-l;function u(e){return((s*e+o)*e+n)*e}function h(e){return(3*s*e+2*o)*e+n}return function(e,t=1e-6){return function(e){return((c*e+l)*e+a)*e}(function(e,t){let i,r,n,o,s,a;for(n=e,a=0;a<8;a++){if(o=u(n)-e,Math.abs(o)<t)return n;if(s=h(n),Math.abs(s)<1e-6)break;n-=o/s}if(i=0,r=1,n=e,n<i)return i;if(n>r)return r;for(;i<r;){if(o=u(n),Math.abs(o-e)<t)return n;e>o?i=n:r=n,n=.5*(r-i)+i}return n}(e,t))}}const vee=/^cubic-bezier\((.*)\)/,bee={};function wee(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5];let l=i*o-r*n;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*a-o*s)*l,e[5]=(r*s-i*a)*l,e):null}function _ee(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=i[0],u=i[1],h=i[2],d=i[3],p=i[4],f=i[5];return e[0]=r*c+o*u,e[1]=n*c+s*u,e[2]=r*h+o*d,e[3]=n*h+s*d,e[4]=r*p+o*f+a,e[5]=n*p+s*f+l,e}function xee(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=Math.sin(i),u=Math.cos(i);return e[0]=r*u+o*c,e[1]=n*u+s*c,e[2]=r*-c+o*u,e[3]=n*-c+s*u,e[4]=a,e[5]=l,e}function See(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=i[0],u=i[1];return e[0]=r*c,e[1]=n*c,e[2]=o*u,e[3]=s*u,e[4]=a,e[5]=l,e}function kee(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=i[0],u=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=r*c+o*u+a,e[5]=n*c+s*u+l,e}function Mee(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function Tee(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Eee(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Iee(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}bee.ease=yee(.25,.1,.25,1),bee.linear=yee(0,0,1,1),bee.easeIn=bee["ease-in"]=yee(.42,0,1,1),bee.easeOut=bee["ease-out"]=yee(0,0,.58,1),bee.easeInOut=bee["ease-in-out"]=yee(.42,0,.58,1);const Cee=_ee,Oee=Iee;function Aee(){return[1,0,0,1,0,0]}function Pee(e,t){return e[0]=t[0],e[1]=t[1],e}function Ree(e,t,i){return e[0]=t,e[1]=i,e}function Lee(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Dee(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Nee(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function Fee(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function jee(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function $ee(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function Vee(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function zee(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Uee(e){const t=e[0],i=e[1];return t*t+i*i}function qee(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Gee(e,t){const i=t[0],r=t[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function Bee(e,t){return e[0]*t[0]+e[1]*t[1]}function Wee(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function Hee(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},set:function(e,t,i,r,n,o,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e},invert:wee,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:_ee,rotate:xee,scale:See,translate:kee,fromRotation:Mee,fromScaling:Tee,fromTranslation:Eee,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e},subtract:Iee,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=t[0],c=t[1],u=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(i-l)<=av*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=av*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-u)<=av*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-h)<=av*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=av*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-p)<=av*Math.max(1,Math.abs(a),Math.abs(p))},mul:Cee,sub:Oee}),Object.freeze({__proto__:null,create:Aee,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]},fromValues:function(e,t,i,r,n,o){return[e,t,i,r,n,o]},createView:function(e,t){return new Float64Array(e,t,6)}});const Jee=zee,Yee=Dee,Zee=Nee,Kee=Fee,Xee=$ee,Qee=Vee,ete=Uee;function tte(){return[0,0]}function ite(e,t){return[e,t]}function rte(e,t){return new Float64Array(e,t,2)}function nte(){return[0,0]}function ote(){return ite(1,1)}function ste(){return ite(1,0)}function ate(){return ite(0,1)}Object.freeze({__proto__:null,copy:Pee,set:Ree,add:Lee,subtract:Dee,multiply:Nee,divide:Fee,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e},max:function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:jee,scaleAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e},distance:$ee,squaredDistance:Vee,length:zee,squaredLength:Uee,negate:qee,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:Gee,dot:Bee,cross:Wee,lerp:function(e,t,i,r){const n=t[0],o=t[1];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e},random:function(e,t){t=t||1;const i=2*lv()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e},transformMat2:function(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e},transformMat2d:Hee,transformMat3:function(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e},transformMat4:function(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e},rotate:function(e,t,i,r){const n=t[0]-i[0],o=t[1]-i[1],s=Math.sin(r),a=Math.cos(r);return e[0]=n*a-o*s+i[0],e[1]=n*s+o*a+i[1],e},angle:function(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];let s=i*i+r*r;s>0&&(s=1/Math.sqrt(s));let a=n*n+o*o;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*o)*s*a;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]},equals:function(e,t){const i=e[0],r=e[1],n=t[0],o=t[1];return Math.abs(i-n)<=av*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=av*Math.max(1,Math.abs(r),Math.abs(o))},projectAndScale:function(e,t,i,r,n){let o=t[0]-i[0],s=t[1]-i[1];const a=(r[0]*o+r[1]*s)*(n-1);return o=r[0]*a,s=r[1]*a,e[0]=t[0]+o,e[1]=t[1]+s,e},len:Jee,sub:Yee,mul:Zee,div:Kee,dist:Xee,sqrDist:Qee,sqrLen:ete});const lte=[0,0],cte=ote(),ute=ste(),hte=ate();Object.freeze({__proto__:null,create:tte,clone:function(e){return[e[0],e[1]]},fromValues:ite,fromArray:function(e){const t=[0,0],i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t},createView:rte,zeros:nte,ones:ote,unitX:ste,unitY:ate,ZEROS:lte,ONES:cte,UNIT_X:ute,UNIT_Y:hte});const dte=180/Math.PI;function pte(e){return e.wkid?e:e.spatialReference||Yf.WGS84}function fte(e,t){return t.type?Ree(e,t.x,t.y):Pee(e,t)}function mte(e){return TO(e)}function gte(e,t){return Math.max(e.width/t[0],e.height/t[1])*function(e){return Bf(e)?39.37*mte(e)*96:1}(e.spatialReference)}async function yte(e,t,i,r){let n,o;if(!e)return null;if(Array.isArray(e)&&!e.length)return null;if(Fd.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&"object"==typeof e[0]){const n=e.every((e=>"attributes"in e)),o=e.some((e=>!e.geometry));let s=e;if(n&&o&&t&&t.allLayerViews){const i=new Map;for(const t of e){const e=t.layer,r=i.get(e)||[],n=t.attributes[e.objectIdField];null!=n&&r.push(n),i.set(e,r)}const r=[];i.forEach(((e,i)=>{const n=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in n){const t=i.createQuery();t.objectIds=e,t.returnGeometry=!0,r.push(n.queryFeatures(t))}}));const n=await Promise.all(r),o=[];for(const e of n)if(e&&e.features&&e.features.length)for(const t of e.features)_a(t.geometry)&&o.push(t.geometry);s=o}for(const e of s)r=await yte(e,t,i,r);return r}if(Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])n=new Qm(e);else if(e instanceof Em)n=e;else if("geometry"in e)if(e.geometry)n=e.geometry;else if(e.layer){const i=e.layer,r=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in r){const t=i.createQuery();t.objectIds=[e.attributes[i.objectIdField]],t.returnGeometry=!0;n=ja(await r.queryFeatures(t),"features",0,"geometry")}}if(xa(n))return null;if(o="point"===n.type?new Eg({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!o)return null;FA()||GA(o.spatialReference,i)||await jA();const s=$A(o,i);return s?r=r?r.union(s):s:null}function vte(e,t){return Df(pte(e),t)?e:$A(e,t)}async function bte(e,t){if(!e||!t)return new iC({targetGeometry:new Qm,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:n,viewpoint:o,size:s}=t,a=[n?s[0]-n.left-n.right:s[0],n?s[1]-n.top-n.bottom:s[1]];let l=null;e instanceof iC?l=e:e.viewpoint?l=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(l=e.target);let c=null;l&&l.targetGeometry?c=l.targetGeometry:e instanceof Eg?c=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(c=await yte(e.center,t,i)||await yte(e.extent,t,i)||await yte(e.target,t,i)||await yte(e,t,i)),!c&&o&&o.targetGeometry?c=o.targetGeometry:!c&&t.extent&&(c=t.extent),i||(i=pte(t.spatialReference||t.extent||c)),FA()||Df(c.spatialReference,i)||GA(c,i)||await jA();const u=vte(c.center?c.center:c,i);let h=null;if(l&&_a(l.targetGeometry)&&"point"===l.targetGeometry.type)h=l.scale;else if("scale"in e&&e.scale)h=e.scale;else if("zoom"in e&&-1!==e.zoom&&r&&r.effectiveLODs)h=r.zoomToScale(e.zoom);else if(Array.isArray(c)||"point"===c.type||"extent"===c.type&&0===c.width&&0===c.height){const e=vte(t.extent,i);h=_a(e)?gte(e,a):t.extent?gte(t.extent,a):o.scale}else h=gte(vte(c.extent,i),a);const d=function(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((e=>"layer"in e))){let t=0,i=0;for(const r of e){const e=r.layer;e&&e.minScale&&e.maxScale&&(t=e.minScale<t?e.minScale:t,i=e.maxScale>i?e.maxScale:i)}return t&&i?{min:t,max:i}:null}}}(e);d&&(d.min&&d.min>h?h=d.min:d.max&&d.max<h&&(h=d.max));let p=0;l?p=l.rotation:e.hasOwnProperty("rotation")?p=e.rotation:o&&(p=o.rotation);let f=new iC({targetGeometry:u,scale:h,rotation:p});return r&&(f=r.fit(f),r.constrainByGeometry(f),r.rotationEnabled||(f.rotation=p)),f}function wte(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function _te(e,t,i){return i?Ree(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):jee(e,t,.5)}const xte=function(){const e=[0,0];return function(t,i,r){const n=i.targetGeometry;fte(e,n);const o=.5*Mte(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=n.spatialReference,t}}();const Ste=function(){const e=[0,0];return function(t,i,r){return Yee(t,function(e,t){return jee(e,t,.5)}(t,i),_te(e,i,r))}}(),kte=function(){const e=[1,0,0,1,0,0],t=[0,0];return function(i,r,n,o){const s=Mte(r),a=Tte(r);return Ree(t,s,s),Tee(e,t),xee(e,e,a),kee(e,e,Ste(t,n,o)),kee(e,e,[0,o.top-o.bottom]),Ree(i,e[4],e[5])}}();function Mte(e){return e.scale*function(e){return _a(e)&&Bf(e.spatialReference)?1/(39.37*mte(e.spatialReference)*96):1}(e.targetGeometry)}function Tte(e){return hv(e.rotation)||0}const Ete=function(){const e=[0,0],t=[0,0],i=[0,0];return function(r,n,o,s,a,l){return qee(e,n),jee(t,o,.5*l),Ree(i,1/s*l,-1/s*l),Eee(r,t),a&&xee(r,r,a),See(r,r,i),kee(r,r,e),r}}(),Ite=function(){const e=[0,0];return function(t,i,r,n){const o=Mte(i),s=Tte(i);return fte(e,i.targetGeometry),Ete(t,e,r,o,s,n)}}(),Cte=function(){const e=[0,0];return function(t,i,r,n){const o=Mte(i);return fte(e,i.targetGeometry),Ete(t,e,r,o,0,n)}}();function Ote(e){if(e.isWrappable){const t=Nf(e);return t.valid[1]-t.valid[0]}return 0}const Ate=function(){const e=[0,0],t=[0,0],i=[0,0,0];return function(r,n,o){Dee(e,r,n),Gee(e,e),Dee(t,r,o),Gee(t,t),Wee(i,e,t);let s=Math.acos(Bee(e,t)/(zee(e)*zee(t)))*dte;return i[2]<0&&(s=-s),isNaN(s)&&(s=0),s}}(),Pte=function(){const e=[0,0];return function(t,i,r,n){const o=t.targetGeometry;return wte(t,i),kte(e,i,r,n),o.x+=e[0],o.y+=e[1],t}}(),Rte=function(e,t,i){wte(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},Lte=function(){const e=[0,0];return function(t,i,r,n,o){o||(o="center"),Yee(e,r,n),jee(e,e,.5);const s=e[0],a=e[1];switch(o){case"center":Ree(e,0,0);break;case"left":Ree(e,-s,0);break;case"top":Ree(e,0,a);break;case"right":Ree(e,s,0);break;case"bottom":Ree(e,0,-a);break;case"top-left":Ree(e,-s,a);break;case"bottom-left":Ree(e,-s,-a);break;case"top-right":Ree(e,s,a);break;case"bottom-right":Ree(e,s,-a)}return Ute(t,i,e),t}}();function Dte(e,t,i){return wte(e,t),e.rotation+=i,e}const Nte=function(){const e=[0,0];return function(t,i,r,n,o){return wte(t,i),isNaN(r)||0===r||(Vte(e,n,i,o),t.scale=i.scale*r,zte(e,e,t,o),Ute(t,t,Ree(e,e[0]-n[0],n[1]-e[1]))),t}}();function Fte(e,t,i){return wte(e,t),e.scale=i,e}const jte=function(){const e=[0,0];return function(t,i,r,n,o,s){return wte(t,i),isNaN(r)||0===r||(Vte(e,o,i,s),t.scale=i.scale*r,t.rotation+=n,zte(e,e,t,s),Ute(t,t,Ree(e,e[0]-o[0],o[1]-e[1]))),t}}(),$te=function(){const e=[0,0],t=[0,0];return function(i,r,n,o,s,a,l){return Ste(t,a,l),Lee(e,s,t),o?jte(i,r,n,o,e,a):Nte(i,r,n,e,a)}}(),Vte=function(){const e=[1,0,0,1,0,0];return function(t,i,r,n){return Hee(t,i,function(e,t,i,r){return Ite(e,t,i,r),wee(e,e)}(e,r,n,1))}}(),zte=function(){const e=[1,0,0,1,0,0];return function(t,i,r,n){return Hee(t,i,Ite(e,r,n,1))}}(),Ute=function(){const e=[0,0],t=[1,0,0,1,0,0];return function(i,r,n){wte(i,r);const o=Mte(r),s=i.targetGeometry;return Mee(t,Tte(r)),See(t,t,ite(o,o)),Hee(e,n,t),s.x+=e[0],s.y+=e[1],i}}();class qte{constructor(e,t,i,r){const n=e.targetGeometry,o=t.targetGeometry;r?"string"==typeof r&&(r=function(e){let t=bee[e]||null;if(!t){const i=vee.exec(e);if(i){const e=i[1].split(",").map((e=>parseFloat(e.trim())));4!==e.length||e.some((e=>isNaN(e)))||(t=yee.apply(yee,e))}}return t}(r)||bee.ease):r=bee.ease,this.easing=r,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const i=this.easing(t);let r,n,o,s;t>=1?(r=this.tCenterX,n=this.tCenterY,o=this.tRotation,s=this.tScale):(r=this.sCenterX+i*this.dCenterX,n=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,s=this.sScale+i*this.dScale),e.targetGeometry.x=r,e.targetGeometry.y=n,e.scale=s,e.rotation=o}}let Gte=class extends vd{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=bee.ease,this.view=null,this.viewpoint=null,this.viewpoint=new iC({targetGeometry:new Qm,scale:0,rotation:0}),this._updateTask=Iu({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();wte(this.viewpoint,t),this.transition=new qte(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const r=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new gee({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==gee.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=(performance.now()-this._startTime)/this.transition.duration,t=e>=1;this.transition.applyRatio(this.viewpoint,e),t&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};bl([Lh()],Gte.prototype,"animation",void 0),bl([Lh()],Gte.prototype,"duration",void 0),bl([Lh()],Gte.prototype,"transition",void 0),bl([Lh()],Gte.prototype,"easing",void 0),bl([Lh()],Gte.prototype,"view",void 0),bl([Lh()],Gte.prototype,"viewpoint",void 0),Gte=bl([md("esri.views.2d.AnimationManager")],Gte);const Bte=Gte;class Wte{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:e,graphicsView:t,labelManager:i,layerViews:r,state:{id:n}}=this.view;e.baseLayerViews.forEach(this._updateLayerView,this),r.forEach(this._updateLayerView,this),e.referenceLayerViews.forEach(this._updateLayerView,this),_a(i)&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),_a(t)&&(t.lastUpdateId!==n&&(t.viewChange(),t.lastUpdateId=n),t.updateRequested&&t.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=Iu(this),this.requestUpdate())}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}function Hte(){return Promise.all([import("./chunks/webglDeps-ab8546d6.js"),import("./chunks/mapViewDeps-080fc0bc.js")])}const Jte=()=>Hte().then((()=>import("./chunks/TileLayerView2D-0f8bbc6a.js"))),Yte=()=>Hte().then((()=>import("./chunks/FeatureLayerView2D-0103f1b4.js"))),Zte={"base-dynamic":()=>Hte().then((()=>import("./chunks/BaseDynamicLayerView2D-a28f40a0.js"))),"base-tile":Jte,"bing-maps":Jte,csv:Yte,"geo-rss":()=>Hte().then((()=>import("./chunks/GeoRSSLayerView2D-5053a4f8.js"))),feature:Yte,geojson:Yte,graphics:()=>Hte().then((()=>import("./chunks/GraphicsLayerView2D-2b44737c.js"))),group:()=>Hte().then((()=>import("./chunks/GroupLayerView2D-e559ff67.js"))),imagery:()=>Hte().then((()=>import("./chunks/ImageryLayerView2D-ff06cb37.js"))),"imagery-tile":()=>Hte().then((()=>import("./chunks/ImageryTileLayerView2D-cb3c1222.js"))),kml:()=>Hte().then((()=>import("./chunks/KMLLayerView2D-1af56ab5.js"))),"map-image":()=>Hte().then((()=>import("./chunks/MapImageLayerView2D-e3e3edc3.js"))),"map-notes":()=>Hte().then((()=>import("./chunks/MapNotesLayerView2D-366774d4.js"))),"ogc-feature":()=>Hte().then((()=>import("./chunks/OGCFeatureLayerView2D-723466fa.js"))),"open-street-map":Jte,route:()=>Hte().then((()=>import("./chunks/RouteLayerView2D-fff7e349.js"))),stream:()=>Hte().then((()=>import("./chunks/StreamLayerView2D-393f0fef.js"))),"subtype-group":()=>Hte().then((()=>import("./chunks/SubtypeGroupLayerView2D-b244b91d.js"))),tile:Jte,"vector-tile":()=>Hte().then((()=>import("./chunks/VectorTileLayerView2D-25a8b74a.js"))),wcs:()=>Hte().then((()=>import("./chunks/ImageryTileLayerView2D-cb3c1222.js"))),"web-tile":Jte,wfs:Yte,wms:()=>Hte().then((()=>import("./chunks/WMSLayerView2D-04136557.js"))),wmts:()=>Hte().then((()=>import("./chunks/WMTSLayerView2D-ebd5b82d.js"))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};const Kte=e=>_a(Zte[e.type]),Xte=e=>{const t=Zte[e.type];if(!_a(t))throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Ac(`${i}:view-not-supported`,`${t} is not supported in 2D`)}(e);return t(e)};var Qte;const eie=Dl.getLogger("esri.views.MapView");let tie=Qte=class extends vd{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(xa(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return $A(this.geometry,this.spatialReference)}catch(e){return eie.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(xa(this.normalizedGeometry))return e;const i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?tg(this.normalizedGeometry,i):sg(this.normalizedGeometry,i))return e;const{coordinate:r}=function(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,s=0;const a=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const e of l)for(let t=0;t<e.length-1;t++){fw(a,r,e,t);const i=$ee(r,a);i<n&&(n=i,o=a[0],s=a[1])}return{coordinate:new Qm({x:o,y:s,spatialReference:i}),distance:n}}(this.normalizedGeometry,i);return r?(e.targetGeometry=r,e):e}clone(){var e,t;return new Qte({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}};var iie;bl([Lh({constructOnly:!0})],tie.prototype,"geometry",void 0),bl([Lh({readOnly:!0})],tie.prototype,"normalizedGeometry",null),bl([Lh({constructOnly:!0})],tie.prototype,"spatialReference",void 0),tie=Qte=bl([md("esri.views.2d.constraints.GeometryConstraint")],tie);let rie=iie=class extends vd{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new iie({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};bl([Lh()],rie.prototype,"enabled",void 0),bl([Lh()],rie.prototype,"rotationEnabled",void 0),rie=iie=bl([md("esri.views.2d.constraints.RotationConstraint")],rie);const nie=rie;var oie;let sie=oie=class extends vd{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:n,maxZoom:o}=this,s=-1,a=-1,l=!1,c=!1;if(0!==i&&0!==r&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const n of t)!l&&i>0&&i>=n.scale&&(s=n.level,l=!0),!c&&r>0&&r>=n.scale&&(a=e?e.level:-1,c=!0),e=n;-1===n&&(n=0===i?0:s),-1===o&&(o=0===r?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,r=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,s=0!==r&&e.scale<r,a=0!==i&&e.scale>i;if(s||a){const s=a?i:r;if(o){const i=(s-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*i,n.y=o.y+(n.y-o.y)*i}e.scale=s}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],r===e)return n+this.effectiveMinZoom+1;if(i>e&&r<e)return n+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new oie({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t),this._scales[0])),this._lodByScale[e].scale}};bl([Lh({readOnly:!0})],sie.prototype,"effectiveLODs",void 0),bl([Lh({readOnly:!0})],sie.prototype,"effectiveMinZoom",void 0),bl([Lh({readOnly:!0})],sie.prototype,"effectiveMaxZoom",void 0),bl([Lh({readOnly:!0})],sie.prototype,"effectiveMinScale",void 0),bl([Lh({readOnly:!0})],sie.prototype,"effectiveMaxScale",void 0),bl([Lh()],sie.prototype,"lods",void 0),bl([Lh()],sie.prototype,"minZoom",void 0),bl([Lh()],sie.prototype,"maxZoom",void 0),bl([Lh()],sie.prototype,"minScale",void 0),bl([Lh()],sie.prototype,"maxScale",void 0),bl([Lh()],sie.prototype,"snapToZoom",void 0),sie=oie=bl([md("esri.views.2d.constraints.ZoomConstraint")],sie);const aie=sie,lie={base:null,key:"type",typeMap:{extent:Eg,polygon:Ww}};let cie=class extends vd{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),(null!=(e=this._get("version"))?e:0)+1}get _defaultLODs(){var e,t,i;const r=null==(e=this.view)||null==(t=e.defaultsFromMap)?void 0:t.tileInfo,n=null==(i=this.view)?void 0:i.spatialReference;return r&&n&&r.spatialReference.equals(n)?r.lods:null}get _geometry(){var e;return new tie({geometry:this.geometry,spatialReference:null==(e=this.view)?void 0:e.spatialReference})}get _rotation(){return new nie({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,n=this.minScale,o=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===s?e:new aie({lods:t,minZoom:i,maxZoom:r,minScale:n,maxScale:o,snapToZoom:s})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};bl([Lh({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],cie.prototype,"effectiveLODs",void 0),bl([Lh({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],cie.prototype,"effectiveMinScale",void 0),bl([Lh({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],cie.prototype,"effectiveMaxScale",void 0),bl([Lh({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],cie.prototype,"effectiveMinZoom",void 0),bl([Lh({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],cie.prototype,"effectiveMaxZoom",void 0),bl([Lh({types:lie,value:null})],cie.prototype,"geometry",null),bl([Lh({type:[RP]})],cie.prototype,"lods",void 0),bl([Lh()],cie.prototype,"minScale",void 0),bl([Lh()],cie.prototype,"maxScale",void 0),bl([Lh()],cie.prototype,"minZoom",void 0),bl([Lh()],cie.prototype,"maxZoom",void 0),bl([Lh()],cie.prototype,"rotationEnabled",void 0),bl([Lh()],cie.prototype,"snapToZoom",void 0),bl([Lh()],cie.prototype,"view",void 0),bl([Lh({readOnly:!0})],cie.prototype,"version",null),bl([Lh()],cie.prototype,"_defaultLODs",null),bl([Lh({type:tie})],cie.prototype,"_geometry",null),bl([Lh({type:nie})],cie.prototype,"_rotation",null),bl([Lh({readOnly:!0,type:aie})],cie.prototype,"_zoom",null),cie=bl([md("esri.views.2d.MapViewConstraints")],cie);const uie=cie;function hie(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function die(e,t,i,r){const n=t[r],o=t[r+1];e[r]=i[0]*n+i[2]*o+i[4],e[r+1]=i[1]*n+i[3]*o+i[5]}function pie(e,t,i,r=0,n=0,o=2){const s=n||t.length/o;for(let n=r;n<s;n++)die(e,t,i,n*o)}function fie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function mie(e,t,i,r,n,o,s,a,l,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=c,e}function gie(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function yie(e,t){if(e===t){const i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function vie(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],p=i[1],f=i[2],m=i[3],g=i[4],y=i[5],v=i[6],b=i[7],w=i[8];return e[0]=d*r+p*s+f*c,e[1]=d*n+p*a+f*u,e[2]=d*o+p*l+f*h,e[3]=m*r+g*s+y*c,e[4]=m*n+g*a+y*u,e[5]=m*o+g*l+y*h,e[6]=v*r+b*s+w*c,e[7]=v*n+b*a+w*u,e[8]=v*o+b*l+w*h,e}function bie(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],p=i[1];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=d*r+p*s+c,e[7]=d*n+p*a+u,e[8]=d*o+p*l+h,e}function wie(e,t,i){const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(i),p=Math.cos(i);return e[0]=p*r+d*s,e[1]=p*n+d*a,e[2]=p*o+d*l,e[3]=p*s-d*r,e[4]=p*a-d*n,e[5]=p*l-d*o,e[6]=c,e[7]=u,e[8]=h,e}function _ie(e,t,i){const r=i[0],n=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function xie(e,t,i){const r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Sie(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function kie(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=i*a-r*s,b=i*l-n*s,w=i*c-o*s,_=r*l-n*a,x=r*c-o*a,S=n*c-o*l,k=u*m-h*f,M=u*g-d*f,T=u*y-p*f,E=h*g-d*m,I=h*y-p*m,C=d*y-p*g;let O=v*C-b*I+w*E+_*T-x*M+S*k;return O?(O=1/O,e[0]=(a*C-l*I+c*E)*O,e[1]=(l*T-s*C-c*M)*O,e[2]=(s*I-a*T+c*k)*O,e[3]=(n*I-r*C-o*E)*O,e[4]=(i*C-n*T+o*M)*O,e[5]=(r*T-i*I-o*k)*O,e[6]=(m*S-g*x+y*_)*O,e[7]=(g*w-f*S-y*b)*O,e[8]=(f*x-m*w+y*v)*O,e):null}function Mie(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Tie(e){const t=av,i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return Math.abs(1-(i*i+o*o+l*l))<=t&&Math.abs(1-(r*r+s*s+c*c))<=t&&Math.abs(1-(n*n+a*a+u*u))<=t}Object.freeze({__proto__:null,create:hie,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,i,r,n,o){const s=new Float32Array(6);return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=o,s},createView:function(e,t){return new Float32Array(e,t,6)},transform:die,transformMany:pie});const Eie=vie,Iie=Mie;function Cie(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Oie(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Aie(){return new Float32Array(2)}function Pie(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Rie(){return Aie()}function Lie(){return Pie(1,1)}function Die(){return Pie(1,0)}function Nie(){return Pie(0,1)}Object.freeze({__proto__:null,fromMat4:fie,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:mie,identity:gie,transpose:yie,invert:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=u*s-a*c,d=-u*o+a*l,p=c*o-s*l;let f=i*h+r*d+n*p;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+n*c)*f,e[2]=(a*r-n*s)*f,e[3]=d*f,e[4]=(u*i-n*l)*f,e[5]=(-a*i+n*o)*f,e[6]=p*f,e[7]=(-c*i+r*l)*f,e[8]=(s*i-r*o)*f,e):null},adjoint:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e[0]=s*u-a*c,e[1]=n*c-r*u,e[2]=r*a-n*s,e[3]=a*l-o*u,e[4]=i*u-n*l,e[5]=n*o-i*a,e[6]=o*c-s*l,e[7]=r*l-i*c,e[8]=i*s-r*o,e},determinant:function(e){const t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*(c*o-s*l)+i*(-c*n+s*a)+r*(l*n-o*a)},multiply:vie,translate:bie,rotate:wie,scale:_ie,scaleByVec2:xie,fromTranslation:Sie,fromRotation:function(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[3],s=i+i,a=r+r,l=n+n,c=i*s,u=r*s,h=r*a,d=n*s,p=n*a,f=n*l,m=o*s,g=o*a,y=o*l;return e[0]=1-h-f,e[3]=u-y,e[6]=d+g,e[1]=u+y,e[4]=1-c-f,e[7]=p-m,e[2]=d-g,e[5]=p+m,e[8]=1-c-h,e},normalFromMat4Legacy:function(e,t){const i=t[0],r=t[1],n=t[2],o=t[4],s=t[5],a=t[6],l=t[8],c=t[9],u=t[10],h=u*s-a*c,d=-u*o+a*l,p=c*o-s*l,f=i*h+r*d+n*p;if(!f)return null;const m=1/f;return e[0]=h*m,e[1]=(-u*r+n*c)*m,e[2]=(a*r-n*s)*m,e[3]=d*m,e[4]=(u*i-n*l)*m,e[5]=(-a*i+n*o)*m,e[6]=p*m,e[7]=(-c*i+r*l)*m,e[8]=(s*i-r*o)*m,e},normalFromMat4:kie,projection:function(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e},subtract:Mie,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e},multiplyScalarAndAdd:function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){const i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=t[0],d=t[1],p=t[2],f=t[3],m=t[4],g=t[5],y=t[6],v=t[7],b=t[8];return Math.abs(i-h)<=av*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-d)<=av*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=av*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-f)<=av*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-m)<=av*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-g)<=av*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=av*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-v)<=av*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(u-b)<=av*Math.max(1,Math.abs(u),Math.abs(b))},isOrthoNormal:Tie,mul:Eie,sub:Iie}),Object.freeze({__proto__:null,create:Cie,clone:Oie,fromValues:function(e,t,i,r,n,o,s,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=o,c[6]=s,c[7]=a,c[8]=l,c},createView:function(e,t){return new Float32Array(e,t,9)}});const Fie=Rie(),jie=Lie(),$ie=Die(),Vie=Nie();function zie(e){return function(e){return e instanceof Float32Array&&e.length>=2}(e)||function(e){return Array.isArray(e)&&e.length>=2}(e)}var Uie;Object.freeze({__proto__:null,create:Aie,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:Pie,createView:function(e,t){return new Float32Array(e,t,2)},zeros:Rie,ones:Lie,unitX:Die,unitY:Nie,ZEROS:Fie,ONES:jie,UNIT_X:$ie,UNIT_Y:Vie});const qie=[0,0];let Gie=Uie=class extends tp{constructor(e){super(e),this._viewpoint2D={center:[0,0],rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Eg,this.id=0,this.inverseTransform=[1,0,0,1,0,0],this.resolution=0,this.rotation=0,this.scale=0,this.transform=[1,0,0,1,0,0],this.transformNoRotation=[1,0,0,1,0,0],this.displayMat3=Cie(),this.displayViewMat3=Cie(),this.viewMat3=Cie(),this.viewMat2d=hie(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=wte(i,e.viewpoint),this._set("size",Pee(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Uie({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return zie(t)?Hee(e,t,this.inverseTransform):(qie[0]=t,qie[1]=i,Hee(e,qie,this.inverseTransform))}toScreen(e,t,i){return zie(t)?Hee(e,t,this.transform):(qie[0]=t,qie[1]=i,Hee(e,qie,this.transform))}toScreenNoRotation(e,t,i){return zie(t)?Hee(e,t,this.transformNoRotation):(qie[0]=t,qie[1]=i,Hee(e,qie,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return Ete(e,i,n,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),s=new iC({targetGeometry:new Qm(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",s),!o||!t||!i)return;this.resolution=Mte(s),this.rotation=r,this.scale=i,this.spatialReference=t,Pee(this.center,e);const a=0!==o[0]?2/o[0]:0,l=0!==o[1]?-2/o[1]:0;mie(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=gie(this.viewMat3),u=Pie(o[0]/2,o[1]/2),h=Pie(-o[0]/2,-o[1]/2),d=hv(r);bie(c,c,u),wie(c,c,d),bie(c,c,h),vie(this.displayViewMat3,this.displayMat3,c);const p=Eee(this.viewMat2d,u);return xee(p,p,d),kee(p,p,h),xte(this.extent,s,o),Ite(this.transform,s,o,n),wee(this.inverseTransform,this.transform),Cte(this.transformNoRotation,s,o,n),this.worldScreenWidth=function(e,t){return Math.round(Ote(e)/t)}(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};bl([Lh({readOnly:!0})],Gie.prototype,"id",void 0),bl([Lh({value:1,json:{write:!0}})],Gie.prototype,"pixelRatio",null),bl([Lh({json:{write:!0}})],Gie.prototype,"size",null),bl([Lh()],Gie.prototype,"spatialReference",void 0),bl([Lh({type:iC,json:{write:!0}})],Gie.prototype,"viewpoint",null),Gie=Uie=bl([md("esri.views.2d.ViewState")],Gie);const Bie=Gie;var Wie,Hie;let Jie=Wie=class extends vd{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Wie({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};bl([Lh()],Jie.prototype,"left",void 0),bl([Lh()],Jie.prototype,"top",void 0),bl([Lh()],Jie.prototype,"right",void 0),bl([Lh()],Jie.prototype,"bottom",void 0),Jie=Wie=bl([md("esri.views.2d.PaddedViewState.Padding")],Jie);let Yie=Hie=class extends Bie{constructor(...e){super(...e),this.paddedViewState=new Bie,this._updateContent=(()=>{const e=[0,0];return()=>{const t=this._get("size"),i=this._get("padding");if(!t||!i)return;const r=this.paddedViewState;Ree(e,i.left+i.right,i.top+i.bottom),Dee(e,t,e),Pee(r.size,e);const n=r.viewpoint;n&&(this.viewpoint=n)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Jie,this.size=[0,0]}set padding(e){this._set("padding",e||new Jie)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Pte(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new Hie({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};bl([Lh()],Yie.prototype,"paddedViewState",void 0),bl([Lh({type:Jie})],Yie.prototype,"padding",null),bl([Lh()],Yie.prototype,"viewpoint",null),Yie=Hie=bl([md("esri.views.2d.PaddedViewState")],Yie);const Zie=Yie;class Kie{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class Xie{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new M6(e.peeker),this.process=e.process;const t=e.scheduler;e.priority&&_a(t)&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,i)=>e(i)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,t){const i=this.get(e);if(i)return i;const r=new AbortController;let n=null;t&&(n=eu(t,(()=>r.abort())));const o=()=>{s.remove(),_a(n)&&n.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},s=tu(r.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),o(),a.reject(Jc())})),a=ou();return this._deferreds.set(e,a),this._controllers.set(e,r),a.promise.then(o,o),this._queue.push(e),this._scheduleNext(),a.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach((t=>e.push(t))),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Eu((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(xa(e))return;let t;const i=new AbortController,r=new Kie(e,i);this._processingItems.set(e,r);try{t=this.process(e,i.signal)}catch(e){this._processError(r,e)}hu(t)?(r.promise=t,t.then((e=>this._processResult(r,e)),(e=>this._processError(r,e)))):this._processResult(r,t)}get test(){return{update:e=>this.runTask(e)}}}const Qie=new Set,ere=[],tre=new Map,ire=[0,0];let rre=class extends vd{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new Xie({concurrency:e,process:(e,i)=>{const r=this._keyToItem.get(e);return t(r,{signal:i})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(n,n),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);tre.has(n)||(tre.set(n,[]),i=Math.max(n,i),r=Math.min(n,r)),tre.get(n).push(t.key),Qie.add(n)}));let n=this.state.scale;tre.has(n)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(ere,Qie),ere.sort(((e,t)=>e-t)),n=ere.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),ere[0])),n=Math.min(n,i),n=Math.max(n,r);const o=tre.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),l=s.getRowForY(this.state.center[1]);return o.sort(((e,t)=>{const i=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((a-i)*(a-i)+(l-e.row)*(l-e.row))-Math.sqrt((a-r)*(a-r)+(l-t.row)*(l-t.row))})),Qie.clear(),tre.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(ire,o.key);const s=$ee(ire,i);s<r&&(r=s,n=o.key)})),n.id}};bl([Lh({constructOnly:!0})],rre.prototype,"concurrency",void 0),bl([Lh({constructOnly:!0})],rre.prototype,"process",void 0),bl([Lh()],rre.prototype,"state",void 0),bl([Lh({constructOnly:!0})],rre.prototype,"strategy",void 0),bl([Lh({constructOnly:!0})],rre.prototype,"tileInfoView",void 0),bl([Lh({readOnly:!0})],rre.prototype,"updating",null),rre=bl([md("esri.views.2d.tiling.PagedTileQueue")],rre);class nre{constructor(e,t,i,r){this.set(e,t,i,r)}static getId(e,t,i,r){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${i}/${r}`}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,t=4095&this.col,i=63&this.level;return(3&this.world)<<30|t<<22|e<<8|i}acquire(e,t,i,r){this.set(e,t,i,r)}contains(e){const t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new nre(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,i,r){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,i,r,n]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(i),this.col=parseFloat(r),this.world=parseFloat(n)}else this.level=+e,this.row=+t,this.col=+i,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new nre(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,t=this.row<<1,i=this.col<<1,r=this.world;return[new nre(e,t,i,r),new nre(e,t,i+1,r),new nre(e,t+1,i,r),new nre(e,t+1,i+1,r)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}function ore(e,t){return[e,t]}function sre(e,t,i){return e[0]=t,e[1]=i,e}nre.pool=new wl(nre,null,null,25,50);const are=new nre("0/0/0/0");class lre{constructor(e,t,i,r,n,o,s,a,l,c,u,h){this.level=e,this.resolution=t,this.scale=i,this.origin=r,this.first=n,this.last=o,this.size=s,this.norm=a,this.worldStart=l,this.worldEnd=c,this.worldSize=u,this.wrap=h}static create(e,t,i=null){const r=Nf(e.spatialReference),n=t.origin||ore(e.origin.x,e.origin.y),o=ore(e.size[0]*t.resolution,e.size[1]*t.resolution),s=ore(-1/0,-1/0),a=ore(1/0,1/0),l=ore(1/0,1/0);_a(i)&&(sre(s,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),sre(a,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),sre(l,a[0]-s[0]+1,a[1]-s[1]+1));const{cols:c,rows:u}=t;let h,d,p,f;return!i&&c&&u&&(sre(s,c[0],u[0]),sre(a,c[1],u[1]),sre(l,c[1]-c[0]+1,u[1]-u[0]+1)),e.isWrappable?(h=ore(Math.ceil(Math.round((r.valid[1]-r.valid[0])/t.resolution)/e.size[0]),l[1]),d=ore(Math.floor((r.origin[0]-n[0])/o[0]),s[1]),p=ore(h[0]+d[0]-1,a[1]),f=!0):(d=s,p=a,h=l,f=!1),new lre(t.level,t.resolution,t.scale,n,s,a,l,o,d,p,h,f)}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,i=!1){are.set(t);const r=i?are.col:this.denormalizeCol(are.col,are.world),n=are.row;return function(e,t,i,r,n){e[0]=t,e[1]=i,e[2]=r,e[3]=n}(e,this.getXForColumn(r),this.getYForRow(n+1),this.getXForColumn(r+1),this.getYForRow(n)),e}getTileCoords(e,t,i=!1){are.set(t);const r=i?are.col:this.denormalizeCol(are.col,are.world);return Array.isArray(e)?sre(e,this.getXForColumn(r),this.getYForRow(are.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(are.row)),e}}class cre{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,t){const{spans:i,lodInfo:r}=this,{level:n}=r;if(0!==i.length)for(const{row:o,colFrom:s,colTo:a}of i)for(let i=s;i<=a;i++)e.call(t,n,o,r.normalizeCol(i),r.getWorldForColumn(i))}}cre.pool=new wl(cre);class ure{constructor(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}}const hre=new nre("0/0/0/0");class dre{constructor(e,t,i,r,n,o,s,a){this.x=e,this.ymin=t,this.ymax=i,this.invM=r,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=s,this.rightBound=a}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[i,r]=e,[n,o]=t,s=n-i,a=o-r,l=0!==a?s/a:0,c=(Math.ceil(r)-r)*l,u=(Math.floor(r)-r)*l;return new dre(i,Math.floor(r),Math.ceil(o),l,s<0?c:u,s<0?u:c,s<0?n:i,s<0?i:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const pre=[[0,0],[0,0],[0,0],[0,0]];class fre{constructor(e,t=null){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=e.lods.slice();i.sort((function(e,t){return t.scale-e.scale}));const r=this._lodInfos=i.map((i=>lre.create(e,i,t)));i.forEach(((e,t)=>{this._infoByLevel[e.level]=r[t],this._infoByScale[e.scale]=r[t],this.scales[t]=e.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,i=!1){hre.set(t);const r=this._infoByLevel[hre.level];return r?r.getTileBounds(e,hre,i):e}getTileCoords(e,t,i=!1){hre.set(t);const r=this._infoByLevel[hre.level];return r?r.getTileCoords(e,hre,i):e}getTileCoverage(e,t=192,i="closest"){const r="closest"===i?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),n=cre.pool.acquire(r),o=this._wrap;let s,a,l,c=1/0,u=-1/0;const h=n.spans;pre[0][0]=pre[0][1]=pre[1][1]=pre[3][0]=-t,pre[1][0]=pre[2][0]=e.size[0]+t,pre[2][1]=pre[3][1]=e.size[1]+t;for(const t of pre)e.toMap(t,t),t[0]=r.getColumnForX(t[0]),t[1]=r.getRowForY(t[1]);const d=[];let p=3;for(let e=0;e<4;e++){if(pre[e][1]===pre[p][1]){p=e;continue}const t=dre.create(pre[e],pre[p]);c=Math.min(t.ymin,c),u=Math.max(t.ymax,u),void 0===d[t.ymin]&&(d[t.ymin]=[]),d[t.ymin].push(t),p=e}if(null==c||null==u||u-c>100)return null;let f=[];for(s=c;s<u;){null!=d[s]&&(f=f.concat(d[s])),a=1/0,l=-1/0;for(let e=f.length-1;e>=0;e--){const t=f[e];a=Math.min(a,t.getLeftCol()),l=Math.max(l,t.getRightCol())}if(a=Math.floor(a),l=Math.floor(l),s>=r.first[1]&&s<=r.last[1])if(o)if(r.size[0]<r.worldSize[0]){const e=Math.floor(l/r.worldSize[0]);for(let t=Math.floor(a/r.worldSize[0]);t<=e;t++)h.push(new ure(s,Math.max(r.getFirstColumnForWorld(t),a),Math.min(r.getLastColumnForWorld(t),l)))}else h.push(new ure(s,a,l));else a>r.last[0]||l<r.first[0]||(a=Math.max(a,r.first[0]),l=Math.min(l,r.last[0]),h.push(new ure(s,a,l)));s+=1;for(let e=f.length-1;e>=0;e--){const t=f[e];t.ymax>=s?t.incrRow():f.splice(e,1)}}return n}getTileParentId(e){hre.set(e);const t=this._infoByLevel[hre.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(hre,this._lodInfos[i],hre),hre.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){hre.set(t);const i=this._infoByLevel[hre.level],r=e.lodInfo;if(r.resolution>i.resolution){this._getTileIdAtLOD(hre,r,hre);const t=r.denormalizeCol(hre.col,hre.world);for(const i of e.spans)if(i.row===hre.row&&i.colFrom<=t&&i.colTo>=t)return!0}if(r.resolution<i.resolution){const[t,n,o,s]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=i.denormalizeCol(hre.col,hre.world),l=r.getColumnForX(i.getXForColumn(a)),c=r.getRowForY(i.getYForRow(hre.row)),u=r.getColumnForX(i.getXForColumn(a+1))-1,h=r.getRowForY(i.getYForRow(hre.row+1))-1;return!(l>s||u<o||c>n||h<t)}const n=r.denormalizeCol(hre.col,hre.world);return e.spans.some((e=>e.row===hre.row&&e.colFrom<=n&&e.colTo>=n))}normalizeBounds(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=Nf(this.tileInfo.spatialReference),r=-i*(t.valid[1]-t.valid[0]);e[0]+=r,e[2]+=r}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,i){const r=this._infoByLevel[i.level];return e.set(i),t.resolution<r.resolution?null:(t.resolution===r.resolution||(e.level=t.level,e.col=Math.floor(i.col*r.resolution/t.resolution+.01),e.row=Math.floor(i.row*r.resolution/t.resolution+.01)),e)}}const mre=new Set,gre=[],yre=new Map,vre=[0,0];let bre=class extends vd{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new Xie({concurrency:e,process:(e,i)=>{const r=this._keyToItem.get(e);return t(r,{signal:i})},peeker:"scale-first"===i?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);yre.has(n)||(yre.set(n,[]),i=Math.max(n,i),r=Math.min(n,r)),yre.get(n).push(t.key),mre.add(n)}));let n=this.state.scale;yre.has(n)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(gre,mre),gre.sort(((e,t)=>e-t)),n=gre.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),gre[0])),n=Math.min(n,i),n=Math.max(n,r);const o=yre.get(n),s=t.getClosestInfoForScale(n),a=s.getColumnForX(this.state.center[0]),l=s.getRowForY(this.state.center[1]);return o.sort(((e,t)=>{const i=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((a-i)*(a-i)+(l-e.row)*(l-e.row))-Math.sqrt((a-r)*(a-r)+(l-t.row)*(l-t.row))})),mre.clear(),yre.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(vre,o.key);const s=$ee(vre,i);s<r&&(r=s,n=o.key)})),n.id}};bl([Lh({constructOnly:!0})],bre.prototype,"concurrency",void 0),bl([Lh({constructOnly:!0})],bre.prototype,"process",void 0),bl([Lh()],bre.prototype,"state",void 0),bl([Lh({constructOnly:!0})],bre.prototype,"strategy",void 0),bl([Lh({constructOnly:!0})],bre.prototype,"tileInfoView",void 0),bl([Lh({readOnly:!0})],bre.prototype,"updating",null),bre=bl([md("esri.views.2d.tiling.TileQueue")],bre);const wre=bre;class _re{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const i=t.key.level,r=this._tileKeysPerLevel[i];xre(this._tilePerId,e);for(let t=0;t<r.length;t++)if(r[t].id===e){r.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t)}prune(e,t,i){let r=this._tilePerId.size;if(r<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&n>=0;)n!==e&&(r=this._pruneAroundCenterTile(r,t,i,n)),n--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,i,e))}_pruneAroundCenterTile(e,t,i,r){const n=this._tileKeysPerLevel[r];if(!n||0===n.length)return e;const{size:o,origin:s}=this.tileInfoView.tileInfo,a=i*o[0],l=i*o[1],c=[0,0],u=[0,0];for(n.sort(((e,i)=>(c[0]=s.x+a*(e.col+.5),c[1]=s.y-l*(e.row+.5),u[0]=s.x+a*(i.col+.5),u[1]=s.y-l*(i.row+.5),Vee(c,t)-Vee(u,t))));n.length>0;){const t=n.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),xre(this._tilePerId,e)}}function xre(e,t){e.delete(t)}const Sre=new nre(0,0,0,0),kre=new Map,Mre=[],Tre=[];class Ere{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new _re(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:i}=this,r=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(Tre.length=0,Mre.length=0,kre.clear(),!r)return;const{minScale:n,maxScale:o}=this.tileInfoView.tileInfo,{spans:s,lodInfo:a}=r,{level:l}=a,{scale:c,center:u,resolution:h}=e.state,d=!e.stationary&&c>this._previousScale;if(this._previousScale=c,this.tiles.length=0,!t&&(c>n||c<o))return this.tiles.length=0,kre.clear(),i.forEach((e=>{this.releaseTile(e)})),i.clear(),Tre.length=0,Mre.length=0,kre.clear(),cre.pool.release(r),!0;i.forEach((e=>e.visible=!0));let p=0,f=0;if(s.length>0)for(const{row:e,colFrom:t,colTo:r}of s)for(let n=t;n<=r;n++){p++;const t=Sre.set(l,e,a.normalizeCol(n),a.getWorldForColumn(n)).id;if(i.has(t)){const e=i.get(t);e.isReady?(kre.set(t,e),f++):d||this._addParentTile(t,kre)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){kre.set(t,e),f++;continue}}else e=this.acquireTile(Sre),this.tileIndex.set(t,e);d||this._addParentTile(t,kre)}}const m=f===p;i.forEach(((e,t)=>{if(Sre.set(t),kre.has(t))return;const i=this.tileInfoView.intersects(r,Sre),n="purge"===this.cachePolicy?Sre.level!==l:Sre.level>l;!i||!d&&m?!n&&i||Mre.push(t):e.isReady?n&&"purge"===this.cachePolicy&&this._hasReadyAncestor(Sre,l)?Mre.push(t):Tre.push(t):n&&Mre.push(t)}));for(const e of Tre){const t=i.get(e);t&&t.isReady&&kre.set(e,t)}for(const e of Mre){const t=i.get(e);this._tileCache?this._tileCache.add(t):this.releaseTile(t),i.delete(e)}return kre.forEach((e=>this.tiles.push(e))),i.forEach((e=>{kre.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(l,u,h),cre.pool.release(r),kre.clear(),m}clear(e=!0){const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let i=e,r=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(r=this.tileIndex.get(i),r&&r.isReady){t.has(r.key.id)||t.set(r.key.id,r);break}}else if(this._tileCache&&this._tileCache.has(i)&&(r=this._tileCache.pop(i),this.tileIndex.set(i,r),r&&r.isReady)){t.has(r.key.id)||t.set(r.key.id,r);break}}_hasReadyAncestor(e,t){const i=MM();this.tileInfoView.getTileBounds(i,e,!0);for(const r of this.tileIndex.values())if(r.isReady&&r.key.level>=t&&r.key.level<e.level){const e=MM();if(this.tileInfoView.getTileBounds(e,r.key,!0),NM(e,i))return!0}return!1}}function Ire(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}class Cre extends A6{constructor(e,t){super(!0),this.view=e,this.registerIncoming("double-click",t,(e=>this._handleDoubleClick(e,t)))}_handleDoubleClick(e,t){Ire(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class Ore extends A6{constructor(e,t,i){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",i,(e=>this._handleDoubleTapDrag(e)))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:i}=t;if(i!==this.pointerType)return;e.stopPropagation();const{action:r,delta:n}=t,{view:o}=this,{mapViewNavigation:s}=o;switch(r){case"begin":{const{scale:e}=o;this._startScale=e,this._currentScale=e,this._previousDelta=n,s.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const e=1.015**n.y,t=this._startScale*e,i=t/this._currentScale;s.setViewpointImmediate(i),this._currentScale=t;break}case"end":{const{constraints:e}=o,{effectiveLODs:t,snapToZoom:i}=e;if(!i||!t)return void s.end();const r=e.snapScale(this._currentScale),a=(n.y>0?Math.max(r,e.snapToPreviousScale(this._startScale)):Math.min(r,e.snapToNextScale(this._startScale)))/this._currentScale;s.zoom(a);break}}}}class Are{constructor(e){this.callbacks=e,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(e){const t=e.data,i=t.pointers.size;switch(t.action){case"start":this.currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this.currentCount=0}this.previousEvent=e}_emitStart(e){this.startEvent=e,this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)}_emitUpdate(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)}_emitEnd(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent),this.startEvent=null}}class Pre extends A6{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",i,(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(e){super.onInstall(e),this.dragEventSeparator=new Are({start:(e,t)=>{this.view.mapViewNavigation.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{this.view.mapViewNavigation.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{this.view.mapViewNavigation.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&Ire(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Rre extends A6{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t;const r=this.view.mapViewNavigation;this.dragEventSeparator=new Are({start:(e,t)=>{r.rotate.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{r.rotate.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{r.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&Ire(t.data,this.pointerAction)}),this.registerIncoming("drag",i,(e=>this.dragEventSeparator.handle(e)))}}function Lre(e){let t=e*e;return e<0&&(t*=-1),t}class Dre extends A6{constructor(e){super(!0),this.view=e,this.frameTask=null,this.watchHandles=new Vb,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(e=>this._handleGamePadEvent(e))),this.handle.pause()}onInstall(e){super.onInstall(e),this.watchHandles.add([rD(this.view.navigation.gamepad,"enabled",(e=>{e?(this.handle.resume(),this.frameTask||(this.frameTask=Iu({update:e=>this._frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}))])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this.transformation)):(this.currentDevice=e.data.device,function(e,t,i){const r=i,n=e.state,o=e.device,s="forward-down"===t.tiltDirection?1:-1;"standard"===o.deviceType?(r.translation[0]=Lre(n.axes[0]),r.translation[1]=Lre(n.axes[1]),r.translation[2]=Lre(n.buttons[7])-Lre(n.buttons[6]),r.heading=Lre(n.axes[2]),r.tilt=Lre(n.axes[3])):"spacemouse"===o.deviceType&&(r.translation[0]=1.2*Lre(n.axes[0]),r.translation[1]=1.2*Lre(n.axes[1]),r.translation[2]=2*-Lre(n.axes[2]),r.heading=1.2*Lre(n.axes[5]),r.tilt=1.2*Lre(n.axes[3])),r.tilt*=s,bv(r.translation,r.translation,1)}(e.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(e){const t=this.transformation;if(function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t))return;const i=this.view.viewpoint.clone(),r=this.view.navigation.gamepad.velocityFactor,n=Fre*r*e;Ute(i,i,[t.translation[0]*n,-t.translation[1]*n]);const o=1+t.translation[2]*jre*e,s=this.view.constraints.rotationEnabled?-t.heading*Nre*e:0,a=this.view.size,l=[a[0]/2,a[1]];jte(i,i,o,s,l,a);const c=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=c}}const Nre=.06,Fre=.7,jre=6e-4;class $re extends A6{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=this._keyMap[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class Vre extends A6{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const r=this._keyToDirection[e.data.key];if(this._pressed=null!=r,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}var zre;!function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"}(zre||(zre={}));class Ure extends A6{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),t.zoomIn.forEach((e=>this._keysToZoomAction[e]=zre.IN)),t.zoomOut.forEach((e=>this._keysToZoomAction[e]=zre.OUT))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const r=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(r){case zre.IN:o=n.zoomIn();break;case zre.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then((()=>n.end())),e.stopPropagation()}}class qre extends A6{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:i,y:r,deltaY:n}=e.data,o=1/.6**(1/60*n),s=t.zoom(o,[i,r]);s&&(this._canZoom=!1,s.catch((()=>{})).then((()=>{this._canZoom=!0,t.end()})))}}class Gre extends A6{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const t=this.view.mapViewNavigation;this.dragEventSeparator=new Are({start:(e,i)=>{t.pinch.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{t.pinch.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{t.pinch.end(this.view),i.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this.dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function Bre(e){const t=e.native;return t?{buttons:t.buttons.map((e=>e.pressed?e.value?e.value:1:0)),axes:t.axes.map((t=>function(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}(t,e.axisThreshold)))}:{buttons:[],axes:[]}}class Wre{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,r=this.inputDevices[i];r&&(this._emitGamepadEvent(t,Bre(r),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(r),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,r=window.isSecureContext;this.supported=i&&r,this.supported&&(this._forEachGamepad((e=>this._connectGamepad(e))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e}_connectGamepad(e){const t=new V7(e);"unknown"!==t.deviceType&&(this.inputDevices[e.index]=t,this.input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this.frameTask&&(this.frameTask=Iu({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),i="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this._forEachGamepad((e=>{const t=this.inputDevices[e.index];if(!t)return;const r=this.latestUpdate[e.index],n=Bre(t),o=i||function(e){for(let t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(let t=0;t<e.buttons.length;t++)if(0!==e.buttons[t])return!1;return!0}(n);if(r){if(r.timestamp===e.timestamp)return;if(!r.active&&o)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}(r.state,n))return}this._emitGamepadEvent(e,n,!o)}))}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let i=0;i<t.length;i++){const r=t[i];this._validate(r)&&e(r)}}_emitGamepadEvent(e,t,i){const r=this.latestUpdate[e.index],n=r&&r.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:i},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:o})}_validate(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}const Hre=wa("trident"),Jre=wa("edge"),Yre=wa("chrome"),Zre=wa("ff"),Kre=wa("safari"),Xre="esri-view-surface--touch-none",Qre="esri-view-surface--touch-pan";class ene{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Wre(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(tne[t],e),delete this._active[t]}e&&e.forEach((e=>{if(!this._active[e]&&tne[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(tne[e],t),this._active[e]=t}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Xre:Qre),this._element.classList.add(this._browserTouchPanningEnabled?Qre:Xre)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Xre),this._element.classList.remove(Qre),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(e){}}_updateNormalizedPointerLikeEvent(e,t){const i=E7(this._element,e);return ene.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),t.x=i.x,t.y=i.y,t}_handleKey(e,t){const i=function(e){if(void 0!==e.key)return Bc(e);const t=E6[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}(t);i&&"key-up"===e&&this._keyDownState.delete(i);const r={native:t,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(r.key),this._callback(e,r)}_handlePointer(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,t){let i=t.deltaY;switch(t.deltaMode){case 0:(Hre||Jre)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Hre||Jre?i*=.7:Yre||Kre?i*=.6:Zre&&(i*=1.375);const r=Math.abs(i);if(r>100){const e=.02;i=i/r*200/(1+Math.exp(-e*(r-100)))}const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:i});this._callback(e,n)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const i={native:t};t.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}ene.test={disableSubpixelCoordinates:!1};const tne={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class ine extends A6{constructor(){super(!0),this.registerIncoming("context-menu",(e=>{e.data.native.preventDefault()}))}}function rne(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}const nne=250,one=10,sne=350,ane=35;class lne extends A6{constructor(e=nne,t=one,i=sne,r=ane,n=Vc){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=r,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimeout=Aa(e.doubleClickTimeout)))}get hasPendingInputs(){return oh(this._pointerState,(e=>null!=e.doubleClickTimeout))}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),r=this._pointerState.get(i);if(r){const n="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;rne(r.event.data,t)>n?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(r.event.data,void 0,r.event.modifiers))}else this._startClick(e)}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(t)),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0)}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0)}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}}class cne extends A6{constructor(e=nne,t=one,i=sne,r=ane,n=Vc){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=r,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Rk(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Are({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",(e=>this._dragEventSeparator.handle(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}get hasPendingInputs(){return oh(this._pointerState,(e=>null!=e.doubleTapTimeout))}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,i){const{button:r,buttons:n,pointer:o,pointers:s,pointerType:a,timestamp:l}=i;return{action:e,delta:t,button:r,buttons:n,pointer:o,pointers:s,pointerType:a,timestamp:l}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:r}=t,{center:n}=i;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",Rk(0,0),i);this._doubleTapDrag.emit(o,void 0,r),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:r}=t,n=Rk(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,t);this._doubleTapDrag.emit(o,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:r}=t,n=Rk(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,t);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,i=this._pointerId(t),r=this._pointerState.get(i),{pointerType:n}=t.native;if(r){const o="touch"===n?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),rne(r.event.data,t)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(e){const{native:t}=e,{pointerId:i,button:r,pointerType:n}=t;return"mouse"===n?`${i}:${r}`:`${n}`}_storePointerDown(e){const{data:t}=e,{pointerType:i}=t.native,r=this._pointerId(t),n="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(r)),n);this._pointerState.set(r,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class une extends A6{constructor(e){super(!1),this.navigationTouch=e,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,i,r){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:t.buttons,timestamp:r,pointers:pne(this.activePointerMap),pointer:t,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){const t=e.native.pointerId,i=dne(this.activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(t,r);const n=fne(r,hne(this.activePointerMap));r.initialAngle=n,r.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(e){if(e&&null==e.x&&null==e.y)return;const t=e.native.pointerId,i=this.activePointerMap.get(t);i?i.event=e:this._addPointer(e)}_removePointer(e){const t=dne(this.activePointerMap).angle;this.activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=dne(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=fne(i,t)-e,i.lastAngle=fne(i,t)-e}))}_emitEvent(e,t,i){const r=dne(this.activePointerMap);this.drag.emit(this._createPayload(e,t,r,i),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,i=e.timestamp;this.activePointerMap.get(t)&&(1===this.activePointerMap.size?(this._updatePointer(e.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const t=e.data,i=t.currentEvent,r=e.timestamp;switch(t.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this.isCurrentDragSuppressed&&this._emitEvent("update",i,r)):(this._addPointer(i),this._emitEvent("added",i,r),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(i),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",i,r))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function hne(e){const t=[];return e.forEach((e=>{t.push(Rk(e.event.x,e.event.y))})),function(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Rk()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){const[i,r]=e,[n,o]=[r.x-i.x,r.y-i.y];return t.radius=Math.sqrt(n*n+o*o)/2,t.center.x=(i.x+r.x)/2,t.center.y=(i.y+r.y)/2,t}let i=0,r=0;for(let t=0;t<e.length;t++)i+=e[t].x,r+=e[t].y;i/=e.length,r/=e.length;const n=e.map((e=>e.x-i)),o=e.map((e=>e.y-r));let s=0,a=0,l=0,c=0,u=0,h=0,d=0;for(let e=0;e<n.length;e++){const t=n[e],i=o[e],r=t*t,p=i*i;s+=r,a+=p,l+=t*i,c+=r*t,u+=p*i,h+=t*p,d+=i*r}const p=.5*(c+h),f=.5*(u+d),m=s*a-l*l,g=(p*a-f*l)/m,y=(s*f-l*p)/m,v=Rk(g+i,y+r);return{radius:Math.sqrt(g*g+y*y+(s+a)/e.length),center:v}}(t)}function dne(e){const t=hne(e);let i=0;return e.forEach((e=>{let r=fne(e,t),n=r-e.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;r=e.lastAngle+n,e.lastAngle=r;const o=r-e.initialAngle;i+=o})),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function pne(e){const t=new Map;return e.forEach(((e,i)=>t.set(i,e.event))),t}function fne(e,t){const i=e.event,r=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,r)}var mne;!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"}(mne||(mne={}));class gne extends A6{constructor(e=nne,t=one,i=sne,r=ane,n=Vc){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=r,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")}))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=this._pointerId(t);if(!this._pointerState.has(i)){const e={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(i,e),this.startCapturingPointer(t.native)}}_handlePointerLoss(e,t){const i=e.data,r=this._pointerId(i),n=this._pointerState.get(r);if(n&&"pointer-up"===t&&n.downButton===i.native.button){const t=n.immediateDoubleClick;if(t){t.timeoutHandle.remove();const r="touch"===e.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;rne(t,e.data)>r?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,t.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),i)}}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_removeState(e){const t=this._pointerId(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}const yne=300,vne=1.5,bne=6,wne=6,_ne=500;class xne extends A6{constructor(e=yne,t=vne,i=bne,r=wne,n=_ne,o=Vc){super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=t,this.movementUntilPenDrag=i,this.movementUntilTouchDrag=r,this.holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null)})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=t.native.pointerId;let r=null;0===this._pointerState.size&&(r=this._clock.setTimeout((()=>{const t=this._pointerState.get(i);if(t){if(!t.isDragging){const i=t.previousEvent;this._pointerHold.emit(i,void 0,e.modifiers),t.holdEmitted=!0}t.holdTimeout=null}}),this.holdDelay));const n={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}_handlePointerMove(e){const t=e.data,i=t.native.pointerId,r=this._pointerState.get(i);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,t),void 0,r.modifiers):function(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}(t,r.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),r.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(e){const t=e.data,i=t.native.pointerId;this._pointerState.forEach((r=>{null!=r.holdTimeout&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,i===r.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",r,t)):this._pointerDrag.emit(this._createPointerDragData("start",r,r.previousEvent),e.timestamp))}))}_handlePointerLoss(e,t){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",n,"pointer-up"===t?i:n.previousEvent),void 0,n.modifiers):"pointer-up"===t&&n.downButton===i.native.button&&e.timestamp-n.startTimestamp<=this.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(r),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause())}}const Sne="Ctrl",kne={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},Mne={zoomIn:["=","+"],zoomOut:["-","_"]},Tne={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Ene=class extends vd{constructor(){super(...arguments),this._handles=new Vb}initialize(){this._handles.add([sD(this.view,"ready",(()=>this._disconnect())),oD(this.view,"ready",(()=>this._connect()))])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new ene(e,this.view.input),i=[new gne,new xne,new lne,new une(this.view.navigation),new cne],r=new N6({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new ine],$6.INTERNAL),r.installHandlers("navigation",[new Gre(this.view),new Dre(this.view),new qre(this.view),new Cre(this.view),new Cre(this.view,[Sne]),new Pre(this.view,"primary"),new $re(this.view,kne),new Ure(this.view,Mne),new Vre(this.view,Tne),new Rre(this.view,"secondary"),new Ore(this.view,"touch")],$6.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,rD(this.view.navigation,"browserTouchPanEnabled",(e=>{this._source.browserTouchPanningEnabled=!e}))}get test(){return{inputManager:this._inputManager}}};bl([Lh()],Ene.prototype,"view",void 0),Ene=bl([md("esri.views.2d.input.MapViewInputManager")],Ene);const Ine=Ene;var Cne,One,Ane,Pne={exports:{}};Cne=Pne,One=function(){function e(i,r,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,l=r-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);e(i,r,Math.max(n,Math.floor(r-l*u/a+h)),Math.min(o,Math.floor(r+(a-l)*u/a+h)),s)}var d=i[r],p=n,f=o;for(t(i,n,r),s(i[o],d)>0&&t(i,n,o);p<f;){for(t(i,p,f),p++,f--;s(i[p],d)<0;)p++;for(;s(i[f],d)>0;)f--}0===s(i[n],d)?t(i,n,f):t(i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}function t(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function i(e,t){return e<t?-1:e>t?1:0}return function(t,r,n,o,s){e(t,r,n||0,o||t.length-1,s||i)}},void 0!==(Ane=One())&&(Cne.exports=Ane);const Rne=Pne.exports;function Lne(e,t){if(!(this instanceof Lne))return new Lne(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function Dne(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Nne(e,t){Fne(e,0,e.children.length,t,e)}function Fne(e,t,i,r,n){n||(n=Hne(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=t;s<i;s++)o=e.children[s],jne(n,e.leaf?r(o):o);return n}function jne(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function $ne(e,t){return e.minX-t.minX}function Vne(e,t){return e.minY-t.minY}function zne(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Une(e){return e.maxX-e.minX+(e.maxY-e.minY)}function qne(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Gne(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function Bne(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Wne(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Hne(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Jne(e,t,i,r,n){for(var o,s=[t,i];s.length;)(i=s.pop())-(t=s.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,Rne(e,o,t,i,n),s.push(t,o,o,i))}Lne.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!Wne(e,t))return i;for(var n,o,s,a,l=[];t;){for(n=0,o=t.children.length;n<o;n++)s=t.children[n],Wne(e,a=t.leaf?r(s):s)&&(t.leaf?i.push(s):Bne(e,a)?this._all(s,i):l.push(s));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!Wne(e,t))return!1;for(var r,n,o,s,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],Wne(e,s=t.leaf?i(o):o)){if(t.leaf||Bne(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Hne([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,o,s=this.data,a=this.toBBox(e),l=[],c=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],i=c.pop(),o=!0),s.leaf&&-1!==(n=Dne(e,s.children,t)))return s.children.splice(n,1),l.push(s),this._condense(l),this;o||s.leaf||!Bne(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(l.push(s),c.push(i),i=0,r=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:$ne,compareMinY:Vne,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,o=i-t+1,s=this._maxEntries;if(o<=s)return Nne(n=Hne(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(n=Hne([])).leaf=!1,n.height=r;var a,l,c,u,h=Math.ceil(o/s),d=h*Math.ceil(Math.sqrt(s));for(Jne(e,t,i,d,this.compareMinX),a=t;a<=i;a+=d)for(Jne(e,a,c=Math.min(a+d-1,i),h,this.compareMinY),l=a;l<=c;l+=h)u=Math.min(l+h-1,c),n.children.push(this._build(e,l,u,r-1));return Nne(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,o,s,a,l,c,u,h;r.push(t),!t.leaf&&r.length-1!==i;){for(u=h=1/0,n=0,o=t.children.length;n<o;n++)l=zne(s=t.children[n]),(c=qne(e,s)-l)<h?(h=c,u=l<u?l:u,a=s):c===h&&l<u&&(u=l,a=s);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),o=[],s=this._chooseSubtree(n,this.data,t,o);for(s.children.push(e),jne(s,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),s=Hne(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Nne(i,this.toBBox),Nne(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(e,t){this.data=Hne([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Nne(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,o,s,a,l,c,u;for(l=c=1/0,r=t;r<=i-t;r++)s=Gne(n=Fne(e,0,r,this.toBBox),o=Fne(e,r,i,this.toBBox)),a=zne(n)+zne(o),s<l?(l=s,u=r,c=a<c?a:c):s===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:$ne,n=e.leaf?this.compareMinY:Vne;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,o,s=this.toBBox,a=Fne(e,0,t,s),l=Fne(e,i-t,i,s),c=Une(a)+Une(l);for(n=t;n<i-t;n++)o=e.children[n],jne(a,e.leaf?s(o):o),c+=Une(a);for(n=i-t-1;n>=t;n--)o=e.children[n],jne(l,e.leaf?s(o):o),c+=Une(l);return c},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)jne(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Nne(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class Yne{constructor(e,t){this.key=new nre(0,0,0,0),this.bounds=MM(),this.objectIds=new Set,this.key.set(t);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return Eg.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),t=xl.acquire();for(let i=0;i<e.length;i++)t[i]=new Yne(this.tileInfoView,e[i]);return t}getQuantizationParameters(){return WV.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Zne={added:[],removed:[]},Kne=new Set,Xne=new nre(0,0,0,0);class Qne extends wd{constructor(e){super(),this._tiles=new Map,this._index=Lne(9,wa("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const i of e.added)if(!this.has(i)){const e=new Yne(this.tileScheme,i);this._tiles.set(i,e),this._index.insert(e),t.added.push(e)}for(const i of e.removed)if(this.has(i)){const e=this.get(i);this._tiles.delete(i),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:i,lodInfo:r}=t,{level:n}=r;if(i.length>0)for(const{row:e,colFrom:t,colTo:o}of i)for(let i=t;i<=o;i++){const t=Xne.set(n,e,r.normalizeCol(i),r.getWorldForColumn(i)).id;if(Kne.add(t),!this.has(t)){const e=new Yne(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),Zne.added.push(e)}}for(let e=this.tiles.length-1;e>=0;e--){const t=this.tiles[e];Kne.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(e,1),this._index.remove(t),Zne.removed.push(t))}(Zne.added.length||Zne.removed.length)&&this.emit("update",Zne),cre.pool.release(t),Kne.clear(),Zne.added.length=0,Zne.removed.length=0}}let eoe=0,toe=class extends vd{constructor(){super(...arguments),this.color=new Eb([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return eoe++}};bl([Lh({readOnly:!0})],toe.prototype,"version",null),bl([Lh({type:Eb})],toe.prototype,"color",void 0),bl([Lh({type:Eb})],toe.prototype,"haloColor",void 0),bl([Lh()],toe.prototype,"haloOpacity",void 0),bl([Lh()],toe.prototype,"fillOpacity",void 0),toe=bl([md("esri.views.2d.support.HighlightOptions")],toe);const ioe=toe;class roe{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),(e=>-1!==e.indexOf("Brush"))(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}function noe(e,t,i,r){r.premultipliedAlpha&&function(e){const t=e.data,i=t.length;for(let e=0;e<i;e+=4){const i=t[e+3];if(i>0){const r=i/255;t[e+0]=t[e+0]/r,t[e+1]=t[e+1]/r,t[e+2]=t[e+2]/r}}}(e),i.width=e.width,i.height=e.height;const n=i.getContext("2d");n.putImageData(e,0,0),r.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(n);const o=n.getImageData(0,0,e.width,e.height),s=function(e,t){const i=doe[t.format],r=t.quality/100;return e.toDataURL(i,r)}(i,t);return i.width=0,i.height=0,{dataUrl:s,data:o}}function ooe(e,t){const i=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return poe}}(e),r=foe[i];return{format:i,quality:db(null!=t?t:r,0,100)}}function soe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(hoe)try{return new ImageData(e,t)}catch(e){hoe=!1}return coe(e,t,i)}function aoe(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(hoe)try{return new ImageData(e,t,i)}catch(e){hoe=!1}const n=coe(t,i,r);return n.data.set(e,0),n}function loe(e,t,i,r=0,n=0,o=e.width-r,s=e.height-n,a=!1){const{data:l}=e,{width:c,height:u,data:h}=t,d=o/c,p=s/u,f=Math.ceil(d/2),m=Math.ceil(p/2),g=e.width;for(let e=0;e<u;e++)for(let t=0;t<c;t++){const o=4*(t+(a?u-e-1:e)*c);let s=0,y=0,v=0,b=0,w=0,_=0;const x=(e+.5)*p;for(let o=Math.floor(e*p);o<(e+1)*p;o++){const e=Math.abs(x-(o+.5))/m,a=(t+.5)*d,c=e*e;for(let e=Math.floor(t*d);e<(t+1)*d;e++){const t=Math.abs(a-(e+.5))/f,u=Math.sqrt(c+t*t);if(u>=1)continue;let h=2*u*u*u-3*u*u+1;const d=4*(r+e+(n+o)*g);_+=h*l[d+3],y+=h,!i&&l[d+3]<255&&(h=h*l[d+3]/255),v+=h*l[d],b+=h*l[d+1],w+=h*l[d+2],s+=h}}h[o]=v/s,h[o+1]=b/s,h[o+2]=w/s,h[o+3]=_/y}return t}function coe(e,t,i){return i||(uoe||(uoe=document.createElement("canvas"),uoe.width=1,uoe.height=1),i=uoe),i.getContext("2d").createImageData(e,t)}let uoe=null,hoe=!0;const doe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},poe="png",foe={png:100,jpg:98,jpeg:98};var moe;function goe(e,t,i={}){const r=yoe(e);for(;r.length>1;){const e=voe(t,r.shift(),i);if(_a(e))return e}return function(e,t,i={}){if(!window.WebGLRenderingContext)return boe(e,woe),null;const r=voe(e,t,i);return xa(r)&&boe(e,_oe),r}(t,r.shift(),i)}function yoe(e){const t=wa("esri-force-webgl");if(t===moe.WEBGL1||t===moe.WEBGL2)return[t];switch(e){case"2d":return[moe.WEBGL1];case"3d":return[moe.WEBGL2,moe.WEBGL1]}}function voe(e,t,i={}){const r=t===moe.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const t of r){try{n=e.getContext(t,i)}catch(e){}if(n)break}return n}function boe(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}!function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"}(moe||(moe={}));const woe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',_oe='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';let xoe,Soe;function koe(e){switch(e){case moe.WEBGL1:return Moe();case moe.WEBGL2:return Soe||(Soe=function(){const e=new Ioe;return xa(Coe(moe.WEBGL2,e)),e}()),Soe}}function Moe(){return xoe||(xoe=function(){const e=new Eoe,t=Coe(moe.WEBGL1,e);return xa(t)||(e.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==t.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==t.getExtension("OES_texture_float")),e}()),xoe}class Toe{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1}}class Eoe extends Toe{constructor(){super(...arguments),this.type=moe.WEBGL1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1}}class Ioe extends Toe{constructor(){super(...arguments),this.type=moe.WEBGL2}}function Coe(e,t){if(e===moe.WEBGL1&&void 0===typeof WebGLRenderingContext||e===moe.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const i=document.createElement("canvas");if(!i)return null;let r=voe(i,e,{failIfMajorPerformanceCaveat:!0});if(xa(r)&&(r=voe(i,e),_a(r)&&(t.majorPerformanceCaveat=!0)),xa(r))return r;if(e===moe.WEBGL1){const e=r.getParameter(r.VERSION),i=null==e?void 0:e.match(/^WebGL\s+([\d.]*)/);if(i){const e=parseFloat(i[1]);t.available=e>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),r}function Ooe(e){const t=function(e){const t=yoe(e);for(;t.length>1;){const e=koe(t.shift());if(e.available)return e}return koe(t.shift())}(e);if(!t.available)return new Ac("webgl:required","WebGL is required but not supported.");if("3d"===e&&t.majorPerformanceCaveat)return new Ac("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new Ac("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new Ac("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===moe.WEBGL1){if(!t.supportsElementIndexUint)return new Ac("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new Ac("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new Ac("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}const Aoe="esri-component";let Poe=class extends vd{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Aoe),t&&t.classList.remove(Aoe),this._set("node",e))}castNode(e){return e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),UP(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};bl([Lh({dependsOn:[]})],Poe.prototype,"id",null),bl([Lh()],Poe.prototype,"node",null),bl([Am("node")],Poe.prototype,"castNode",null),bl([Lh({readOnly:!0})],Poe.prototype,"widget",void 0),Poe=bl([md("esri.views.ui.Component")],Poe);const Roe=Poe,Loe={left:0,top:0,bottom:0,right:0},Doe={bottom:30,top:15,right:15,left:15},Noe="manual",Foe="esri-ui",joe="esri-ui-corner",$oe="esri-ui-inner-container",Voe="esri-ui-manual-container",zoe="esri-ui-corner-container",Uoe="esri-ui-top-left",qoe="esri-ui-top-right",Goe="esri-ui-bottom-left",Boe="esri-ui-bottom-right";function Woe(e){const t=e,i="object"==typeof t&&null!==t&&Object.getPrototypeOf(t);return null!==i&&i!==Object.prototype||!("component"in t||"index"in t||"position"in t)?null:e}function Hoe(e,{top:t,bottom:i,left:r,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=n}let Joe=class extends wd.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Vb,this.view=null,this._applyViewPadding=()=>{const e=this.container;e&&Hoe(e,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const e=this._innerContainer;e&&Hoe(e,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([zb((()=>{var e;return[null==(e=this.view)?void 0:e.padding,this.container]}),this._applyViewPadding,Yb),zb((()=>this.padding),this._applyUIPadding,Yb)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Foe),e.classList.add("calcite-theme-"+(cF()?"dark":"light")),this._attachContainers(e)),t&&(t.classList.remove(Foe),Hoe(t,{top:"",bottom:"",left:"",right:""}),qP(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:{...Doe,...e}}get width(){const e=this.get("view.width")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach((e=>this.add(e,t)));const n=Woe(e);n&&({index:i,position:t,component:e,key:r}=n),t&&"object"==typeof t&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map((e=>this.remove(e,t)));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map((e=>this.empty(e))).reduce(((e,t)=>e.concat(t))):(e=e||Noe)===Noe?Array.prototype.slice.call(this._manualContainer.children).filter((e=>!e.classList.contains(joe))).map((e=>this.remove(e))):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach((e=>this.move(e,t))),!e)return;let i;const r=Woe(e)||Woe(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Roe||(e=new Roe({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Roe?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Loe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add($oe),e.classList.add(zoe);const t=document.createElement("div");t.classList.add($oe),t.classList.add(Voe);const i=document.createElement("div");i.classList.add(Uoe),i.classList.add(joe),e.appendChild(i);const r=document.createElement("div");r.classList.add(qoe),r.classList.add(joe),e.appendChild(r);const n=document.createElement("div");n.classList.add(Goe),n.classList.add(joe),e.appendChild(n);const o=document.createElement("div");o.classList.add(Boe),o.classList.add(joe),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const s=pL();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":n,"bottom-right":o,"top-leading":s?r:i,"top-trailing":s?i:r,"bottom-leading":s?o:n,"bottom-trailing":s?n:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||Noe,r=e.index,n=this._positionNameToContainerLookup[i],o=r>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(t.widget)&&t.widget.startup(),!o)return void n.appendChild(t.node);const s=Array.prototype.slice.call(n.children);0!==r?r>=s.length?n.appendChild(t.node):GP(t.node,s[r]):n.firstChild?GP(t.node,n.firstChild):n.appendChild(t.node)}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return 0===e?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some((r=>(t=r===e,t&&(i=r),t))),i}_findById(e){let t,i=null;return this._components.some((r=>(t=r.id===e,t&&(i=r),t))),i}_findByNode(e){let t,i=null;return this._components.some((r=>(t=r.node===e,t&&(i=r),t))),i}};bl([Lh()],Joe.prototype,"container",null),bl([Lh()],Joe.prototype,"height",null),bl([Lh({value:Doe})],Joe.prototype,"padding",null),bl([Am("padding")],Joe.prototype,"castPadding",null),bl([Lh()],Joe.prototype,"view",void 0),bl([Lh()],Joe.prototype,"width",null),Joe=bl([md("esri.views.ui.UI")],Joe);const Yoe=Joe;function Zoe(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function Koe(e,t,i){i&&t&&(e.find((e=>e.layerView===t&&e.text===i))||e.push({text:i,layerView:t}))}const Xoe=[];let Qoe=class extends tw{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Fd,this.view=null,this._allLayerViewsChange=e=>{this.handles.remove("suspension");const t=this.get("view.allLayerViews");t&&this.handles.add(t.map((e=>e.watch(["suspended","attributionVisible"],this._updateAttributionItems))),"suspension"),e&&e.removed&&e.removed.forEach((e=>{this._pendingAttributions.delete(e),this._fetchedAttributionData.delete(e)})),this._updateAttributionItems()},this._updateAttributionItems=()=>{const e=this.get("view.allLayerViews");Xoe.length=0,e?(e.forEach((e=>{if(e.suspended||!e.get("layer.attributionVisible"))return;const t=e.layer;if(Zoe(t,"user"))return void Koe(Xoe,e,t.copyright);if(t.hasAttributionData){if(this._fetchedAttributionData.has(e)){const i=this._fetchedAttributionData.get(e);return void(i?Koe(Xoe,e,this._getDynamicAttribution(i,this.view,t)):Zoe(t)&&Koe(Xoe,e,t.copyright))}return void this._fetchAttributionData(e)}const i=t.get("portalItem.accessInformation");Koe(Xoe,e,i||t.copyright)})),function(e,t){return e.length!==t.length||e.some(((e,i)=>e.text!==t[i].text))}(this.items,Xoe)&&(this.items.removeAll(),this.items.addMany(Xoe)),Xoe.length=0,this.notifyChange("state")):this._clear()},this.handles.add([uD(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this._clear),lD(this,"view.stationary",(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await cp(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,function(e){return"bing-maps"===e.type}(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let e=0;e<i.length;e++){const n=i[e],o=n.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,s=i.zoomMin-(t&&i.zoomMin?1:0),a=i.zoomMax-(t&&i.zoomMax?1:0),l={extent:Wm({xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:Yf.WGS84}),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:e};for(let e=s;e<=a;e++)r[e]=r[e]||[],r[e].push(l)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:n}=t;let o=i.tileInfo.scaleToZoom(n);if(o=Math.min(e.maxKey,Math.round(o)),!r||null==o||o<=-1)return"";const s=e[o],a=qm(r.center.clone().normalize(),t.spatialReference),l={};return s?s.filter((e=>{const t=!l[e.id]&&a&&tg(e.extent,a);return t&&(l[e.id]=!0),t})).sort(((e,t)=>t.score-e.score||e.objectId-t.objectId)).map((e=>e.attribution)).join(", "):""}};bl([Lh({readOnly:!0,type:Fd})],Qoe.prototype,"items",void 0),bl([Lh({readOnly:!0})],Qoe.prototype,"state",null),bl([Lh()],Qoe.prototype,"view",void 0),Qoe=bl([md("esri.widgets.Attribution.AttributionViewModel")],Qoe);const ese=Qoe,tse="esri-attribution esri-widget",ise="esri-attribution__powered-by",rse="esri-attribution__sources",nse="esri-attribution--open",ose="esri-attribution__sources--open",sse="esri-attribution__link",ase="esri-icon-description",lse="esri-interactive";let cse=class extends vF{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=ase,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new ese}initialize(){this.own(uD(this,"viewModel.items","change",(()=>this.scheduleRender())))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={[nse]:this._isOpen};return wj("div",{bind:this,class:this.classes(tse,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return wj("div",{class:ise},"Powered by"," ",wj("a",{class:sse,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:-1,{attributionText:r}=this,n=t?"button":void 0,o={[ose]:e,[lse]:t};return wj("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(rse,o),innerHTML:r,role:n,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:n}=e,o=n>=r,s=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,s&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};bl([Lh()],cse.prototype,"_isOpen",void 0),bl([Lh()],cse.prototype,"_isInteractive",null),bl([Lh()],cse.prototype,"_attributionTextOverflowed",void 0),bl([Lh()],cse.prototype,"_prevSourceNodeHeight",void 0),bl([Lh({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],cse.prototype,"attributionText",null),bl([Lh()],cse.prototype,"iconClass",void 0),bl([Lh()],cse.prototype,"itemDelimiter",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],cse.prototype,"label",void 0),bl([Lh(),yj("esri/widgets/Attribution/t9n/Attribution")],cse.prototype,"messages",void 0),bl([gD("viewModel.view")],cse.prototype,"view",void 0),bl([Lh({type:ese})],cse.prototype,"viewModel",void 0),bl([C$()],cse.prototype,"_toggleState",null),cse=bl([md("esri.widgets.Attribution")],cse);const use=cse;let hse=class extends(Z6(vd)){constructor(e){super(e),this._handles=new Vb,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(rD(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};"2d"===this.view.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){null!=e&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&("2d"===e.type?this._handles.add(rD(this,"view.rotation",this._updateForRotation)):this._handles.add(rD(this,"view.camera",this._updateForCamera)))}};bl([Lh({readOnly:!0})],hse.prototype,"canShowNorth",null),bl([Lh()],hse.prototype,"orientation",void 0),bl([Lh({readOnly:!0})],hse.prototype,"state",null),bl([Lh()],hse.prototype,"view",void 0),hse=bl([md("esri.widgets.CompassViewModel")],hse);const dse=hse,pse="esri-compass esri-widget--button esri-widget",fse="esri-icon-font-fallback-text",mse="esri-compass__icon",gse="esri-icon-dial",yse="esri-icon-compass",vse="esri-icon-locate-circled",bse="esri-interactive",wse="esri-disabled";let _se=class extends vF{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=vse,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new dse}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i="disabled"===t,r="compass"==("rotation"===t?"rotation":"compass"),n=i?-1:0,o={[wse]:i,[bse]:!i},s={[yse]:r,[gse]:!r},{messages:a}=this;return wj("div",{bind:this,class:this.classes(pse,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},wj("span",{"aria-hidden":"true",class:this.classes(mse,s),styles:this._toRotationTransform(e)}),wj("span",{class:fse},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};bl([gD("viewModel.goToOverride")],_se.prototype,"goToOverride",void 0),bl([Lh()],_se.prototype,"iconClass",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_se.prototype,"label",void 0),bl([Lh(),yj("esri/widgets/Compass/t9n/Compass")],_se.prototype,"messages",void 0),bl([gD("viewModel.view")],_se.prototype,"view",void 0),bl([Lh({type:dse})],_se.prototype,"viewModel",void 0),bl([C$()],_se.prototype,"_reset",null),_se=bl([md("esri.widgets.Compass")],_se);const xse=_se;let Sse=class extends vd{constructor(e){super(e),this._handles=new Vb,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(oD(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};bl([Lh({readOnly:!0})],Sse.prototype,"state",null),bl([Lh()],Sse.prototype,"navigationMode",void 0),bl([Lh()],Sse.prototype,"view",void 0),Sse=bl([md("esri.widgets.NavigationToggleViewModel")],Sse);const kse=Sse,Mse="esri-navigation-toggle esri-widget",Tse="esri-navigation-toggle__button esri-widget--button",Ese="esri-navigation-toggle__button--active",Ise="esri-navigation-toggle__button--pan",Cse="esri-navigation-toggle__button--rotate",Ose="esri-navigation-toggle--horizontal",Ase="esri-icon-rotate",Pse="esri-icon-pan",Rse="esri-icon-pan2",Lse="esri-disabled";let Dse=class extends vF{constructor(e,t){super(e,t),this.iconClass=Rse,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new kse}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e="disabled"===this.get("viewModel.state"),t="pan"===this.get("viewModel.navigationMode"),i={[Lse]:e,[Ose]:"horizontal"===this.layout},r={[Ese]:t},n={[Ese]:!t},o=e?-1:0,s=this.messages.toggle;return wj("div",{bind:this,class:this.classes(Mse,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":s,title:s},wj("div",{class:this.classes(Tse,Ise,r)},wj("span",{class:Pse})),wj("div",{class:this.classes(Tse,Cse,n)},wj("span",{class:Ase})))}_toggle(){this.toggle()}};bl([Lh()],Dse.prototype,"iconClass",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Dse.prototype,"label",void 0),bl([Lh({value:"vertical"})],Dse.prototype,"layout",null),bl([Lh(),yj("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Dse.prototype,"messages",void 0),bl([gD("viewModel.view")],Dse.prototype,"view",void 0),bl([Lh({type:kse})],Dse.prototype,"viewModel",void 0),bl([C$()],Dse.prototype,"_toggle",null),Dse=bl([md("esri.widgets.NavigationToggle")],Dse);const Nse=Dse,Fse="esri-widget--button esri-widget",jse="esri-disabled",$se="esri-interactive",Vse="esri-icon-font-fallback-text",zse="esri-icon";let Use=class extends vF{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[jse]:!this.enabled,[$se]:this.enabled},i={[this.iconClass]:!!this.iconClass};return wj("div",{bind:this,class:this.classes(Fse,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},wj("span",{"aria-hidden":"true",role:"presentation",class:this.classes(zse,i)}),wj("span",{class:Vse},this.title))}_triggerAction(){this.action.call(this)}};bl([Lh()],Use.prototype,"action",void 0),bl([Lh()],Use.prototype,"enabled",void 0),bl([Lh()],Use.prototype,"iconClass",void 0),bl([Lh()],Use.prototype,"title",void 0),bl([C$()],Use.prototype,"_triggerAction",null),Use=bl([md("esri.widgets.IconButton")],Use);const qse=Use;let Gse=class extends vd{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};bl([Lh({readOnly:!0})],Gse.prototype,"canZoomIn",null),bl([Lh({readOnly:!0})],Gse.prototype,"canZoomOut",null),bl([Lh()],Gse.prototype,"view",void 0),Gse=bl([md("esri.widgets.Zoom.ZoomConditions2D")],Gse);const Bse=Gse;let Wse=class extends vd{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};bl([Lh({readOnly:!0})],Wse.prototype,"canZoomIn",null),bl([Lh({readOnly:!0})],Wse.prototype,"canZoomOut",null),bl([Lh()],Wse.prototype,"view",void 0),Wse=bl([md("esri.widgets.Zoom.ZoomConditions3D")],Wse);const Hse=Wse;let Jse=class extends vd{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new Bse({view:e}):"3d"===e.type&&(this._zoomConditions=new Hse({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():nu(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():nu(e.goTo({zoomFactor:.5}))}};bl([Lh()],Jse.prototype,"_zoomConditions",void 0),bl([Lh({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Jse.prototype,"canZoomIn",void 0),bl([Lh({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Jse.prototype,"canZoomOut",void 0),bl([Lh({readOnly:!0})],Jse.prototype,"state",null),bl([Lh()],Jse.prototype,"view",null),Jse=bl([md("esri.widgets.Zoom.ZoomViewModel")],Jse);const Yse=Jse,Zse="esri-zoom esri-widget",Kse="esri-zoom--horizontal",Xse="esri-icon-plus",Qse="esri-icon-minus",eae="esri-icon-zoom-in-magnifying-glass";let tae=class extends vF{constructor(e,t){super(e,t),this.iconClass=eae,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Yse}initialize(){this._zoomInButton=new qse({action:this.zoomIn.bind(this),iconClass:Xse}),this._zoomOutButton=new qse({action:this.zoomOut.bind(this),iconClass:Qse})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Kse]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===e.state&&e.canZoomIn,this._zoomOutButton.enabled="ready"===e.state&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,wj("div",{class:this.classes(Zse,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};bl([Lh()],tae.prototype,"iconClass",void 0),bl([Lh({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],tae.prototype,"label",void 0),bl([Lh({value:"vertical"})],tae.prototype,"layout",null),bl([Lh(),yj("esri/widgets/Zoom/t9n/Zoom")],tae.prototype,"messages",void 0),bl([gD("viewModel.view")],tae.prototype,"view",void 0),bl([Lh({type:Yse})],tae.prototype,"viewModel",void 0),tae=bl([md("esri.widgets.Zoom")],tae);const iae=tae,rae="esri.views.ui.DefaultUI";Dl.getLogger(rae);let nae=class extends Yoe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([zb((()=>this.components),this._componentsWatcher.bind(this),Yb),zb((()=>this.view),this._updateViewAwareWidgets.bind(this),Yb)])}_add(e,t,i,r){if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach((e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())}))}_updateViewAwareWidgets(e){this.components.forEach((t=>{const i=this._find(t),r=i&&i.widget;(function(e){return e&&void 0!==e.view})(r)&&(r.view=e)}))}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(-1===e.indexOf("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(e){this.initialized&&e.forEach((e=>this.add(this._createComponent(e),this._defaultPositionLookup[e])))}_createComponent(e){const t=this._createWidget(e);if(t)return new Roe({id:e,node:t})}_createWidget(e){return"attribution"===e?this._createAttribution():"compass"===e?this._createCompass():"navigation-toggle"===e?this._createNavigationToggle():"zoom"===e?this._createZoom():void 0}_createAttribution(){return new use({view:this.view})}_createCompass(){return new xse({view:this.view})}_createNavigationToggle(){return new Nse({view:this.view})}_createZoom(){return new iae({view:this.view})}};bl([Lh()],nae.prototype,"components",void 0),nae=bl([md(rae)],nae);const oae=nae;let sae=class extends oae{constructor(e){super(e),this.components=["attribution","zoom"]}};bl([Lh()],sae.prototype,"components",void 0),sae=bl([md("esri.views.ui.2d.DefaultUI2D")],sae);const aae=sae;var lae;let cae=lae=class extends tp{constructor(e){super(e),this.color=new Eb([0,0,0,1])}clone(){return new lae(ol({color:this.color}))}};bl([Lh({type:Eb,json:{write:!0}})],cae.prototype,"color",void 0),cae=lae=bl([md("esri.webmap.background.ColorBackground")],cae);const uae=cae,hae=Dl.getLogger("esri.views.MapView");let dae,pae,fae,mae,gae,yae;let vae=class extends(zP(j9($9(fee)))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new rw({getCollections:()=>{var e,t;return[null==(e=this.basemapView)?void 0:e.baseLayerViews,this.layerViews,null==(t=this.basemapView)?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new Wte(this),this._pePromise=null,this.floors=new Fd,this.highlightOptions=new ioe,this.inputManager=new Ine({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new roe,this.type="2d",this.ui=new aae,this.constraints=new uie,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([zb((()=>this.viewpoint),(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)}),Jb),this.on("resize",(e=>this._resizeHandler(e))),zb((()=>{var e;return null==(e=this.animationManager)?void 0:e.animation}),(e=>{this.animation=e}))]),tO()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Qne(this.featuresTilingScheme)}get initialExtentRequired(){var e;const{scale:t,constraints:i,center:r,viewpoint:n,extent:o}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&null!=(e=this.map.initialViewProperties)&&e.viewpoint||o||(null!=i&&i.effectiveLODs||(s=-1),r&&(0!==t||-1!==s)||n&&_a(n.targetGeometry)&&("extent"===n.targetGeometry.type||n.scale)))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!FA()||(this._pePromise||(this._pePromise=jA().finally((()=>{this._pePromise=null}))),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference;return!!GA(e.targetGeometry.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new Qm({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(t){return void hae.error(new Ac("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:t}))}const i=this.viewpoint;Rte(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(zb((()=>e.version),(()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))}),Jb),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(null==e)return;if(!e.width||!e.height)return void hae.error(new Ac("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(e){return void hae.error(new Ac("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:e}))}const i=this.viewpoint;(function(e,t,i,r,n){Rte(e,t,i.center),e.scale=gte(i,r),n&&n.constraints&&n.constraints.constrain(e)})(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;(function(e,t,i){wte(e,t),e.rotation=i})(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Fte(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(null==e)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new Ac("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):xa(e.targetGeometry)&&(i=new Ac("mapview:invalid-viewpoint","geometry not defined"))}catch(e){i=new Ac("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:e})}if(i)return void hae.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new iC({targetGeometry:new Qm,scale:0,rotation:0});wte(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(null==e)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;Fte(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Bb((()=>this.ready),t).then((()=>{const i={animate:!0,...t},r=bte(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)}));hae.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=C7(e)?I7(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,n=!1,o=null,s=null;null!=t&&t.include?xae(t.include,_ae(this,(e=>r.add(e)),(e=>{o||(o=new Set),o.add(e)}),(e=>r.add(e)),(()=>n=!0))):(n=!0,r=new Set(this.allLayerViews)),null!=t&&t.exclude&&xae(t.exclude,_ae(this,(e=>r.delete(e)),(e=>{s||(s=new Set),s.add(e)})));const a=this.allLayerViews.filter((e=>!e.suspended&&r.has(e))).reverse(),l=this.toMap(i);let c=(await Promise.all([n?this.graphicsView.hitTest(l):null,...a.map((e=>e.hitTest(l,i)))])).filter(_a).flat();return o&&(c=c.filter((e=>o.has(wae(e))))),s&&(c=c.filter((e=>!s.has(wae(e))))),{screenPoint:i,results:c.map((e=>({mapPoint:l,graphic:e})))}}takeScreenshot(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,function(e,t){return t/Math.max(e[0],e[1])}(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach((e=>{const t=this.allLayerViews.find((t=>t.layer.id===e.id));t&&"container"in t&&t.container&&i.push(t.container)}))):i=this._stage.children;const{format:r,quality:n}=ooe(e.format,e.quality),o=function(e,t,i,r,n,o,s,a){let l;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),null!=e.width&&null!=e.height?l=[e.width,e.height]:null==e.width&&null!=e.height?l=[e.height,e.height]:null!=e.width&&null==e.height?l=[e.width,e.width]:null==e.width&&null==e.height&&(l=null);const c=i[0]-(r.left+r.right),u=i[1]-(r.top+r.bottom);let h,d,p=e.area||{x:0,y:0,width:c,height:u};if(l){const e=c/u,t=l[0]/l[1];if(t>e){const e=p.width/t;p={x:p.x,y:Math.round(p.y+(p.height-e)/2),width:p.width,height:Math.round(e)}}else{const e=p.height*t;p={x:Math.round(p.x+(p.width-e)/2),y:p.y,width:Math.round(e),height:p.height}}}else l=[p.width,p.height];return l[0]>p.width?(h=Math.min(l[0]/p.width,t),d=l[0]/p.width/h):(h=1,d=l[0]/p.width),{resolutionScale:h,cropArea:{x:Math.round((p.x+r.left)*h),y:Math.round((p.y+r.top)*h),width:Math.round(p.width*h),height:Math.round(p.height*h)},outputScale:d,format:n,quality:o,children:s,rotation:a}}(e,t,this.size,this.padding,r,n,i,e.rotation);return this._stage.takeScreenshot(o)}toMap(e){if(!this.ready)return null;const t=C7(e)?I7(this,e):e,[i,r]=this.state.toMap([0,0],[t.x,t.y]),n=this.spatialReference;return new Qm({x:i,y:r,spatialReference:n})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Rk(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&(null==(e=this.map)||null==(t=e.initialViewProperties)?void 0:t.spatialReference)||(null==(i=this.defaultsFromMap)?void 0:i.spatialReference)||null}hasLayerViewModule(e){return Kte(e)}importLayerView(e){return Xte(e)}pixelSizeAt(){return this.ready?this.state.resolution:(hae.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then((t=>({...t,mapPoint:this.toMap(e)})))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=Ooe(this.type);return wa("safari")&&wa("safari")<9&&(e=new Ac("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:wa("safari")})),_a(e)?(hae.warn("#validate()",e.message),Promise.reject(e)):async function(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:o}]=await Promise.all([import("./chunks/webglDeps-ab8546d6.js"),import("./chunks/mapViewDeps-080fc0bc.js")]);pae=e,fae=t,mae=i,gae=r,yae=n,dae=o}()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new gee),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,n=i.then((()=>{r()&&(this.animation=null)})).catch((e=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),e})),o=new Promise((e=>e(n)));return t.when().catch((()=>{r()&&o.cancel&&o.cancel()})),o}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,n=e.then((e=>{if(Yc(t),i!==this._gotoTask)throw new Ac("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=e,r.finish()}));return this._cancellableGoTo(i,r,n)}_flipStationary(e){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<160&&(this._stationaryTimer=this._flipStationary(e))}),e)),this._stationaryTimer}_getDefaultViewpoint(){var e,t,i,r;const{constraints:n,initialExtent:o,map:s}=this;if(!n)return null;const a=s&&"initialViewProperties"in s&&s.initialViewProperties,l={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};n.effectiveLODs?-1!==l.zoom&&(l.scale=n.zoomToScale(l.zoom)):l.zoom=-1;let c=null,u=null,h=0;const d=l.viewpoint&&l.viewpoint.rotation,p=l.viewpoint&&l.viewpoint.targetGeometry;_a(p)&&("extent"===p.type?c=p:"point"===p.type&&(u=p,h=l.viewpoint.scale));const f=l.extent||c||(null==(e=null==a||null==(t=a.viewpoint)?void 0:t.targetGeometry)?void 0:e.extent)||o,m=l.center||u||(null==f?void 0:f.center),g=l.scale||h||(null==a||null==(i=a.viewpoint)?void 0:i.scale)||f&&gte(f,this.size),y=l.rotation||d||(null==a||null==(r=a.viewpoint)?void 0:r.rotation)||0;return m&&g?new iC({targetGeometry:m,scale:g,rotation:y}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,n=e.then((e=>{if(Yc(t),i!==this._gotoTask)throw new Ac("view:goto-interrupted","Goto was interrupted");return r.update(e),this.animationManager.animate(r,this.viewpoint,t),r.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,r,n)}_project(e,t){var i;const r=e&&e.targetGeometry||e;if(!t)return e;if(!r)return null;if(t.imageCoordinateSystem||null!=(i=r.spatialReference)&&i.imageCoordinateSystem)return e;if(Df(t,r.spatialReference))return e;const n=$A(r,t);if(!n)throw new Ac("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:t});return function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=n,e):n}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Lte(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var e;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint(),i=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(e){var r;hae.warn(new Fh("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:this.spatialReference,error:e})),t.targetGeometry=(null==(r=this.defaultsFromMap.extent)?void 0:r.center)||new Qm({x:0,y:0,spatialReference:this.spatialReference})}null==(e=this.constraints)||e.fit(t),this._set("state",new Zie({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;const n=new dae(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=n,this._magnifierView=new yae,this._magnifierView.magnifier=this.magnifier;const o=new mae({view:this});this._set("labelManager",o);const s=new Bte({view:this});this._set("animationManager",s);const a=new gae({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),n.on("post-render",(()=>this._set("rendering",n.renderRequested))),n.on("will-render",(()=>this._set("rendering",n.renderRequested))),n.on("webgl-error",(e=>this.fatalError=e.error)),zb((()=>this.stationary),(e=>n.stationary=e),Zb),zb((()=>this.background),(e=>{n.background=e,this._magnifierView.background=e}),Zb),zb((()=>this.magnifier),(e=>this._magnifierView.magnifier=e),Zb),zb((()=>this.renderingOptions),(e=>n.renderingOptions=e),Zb),zb((()=>this.highlightOptions),(e=>n.highlightOptions=e),Zb),zb((()=>this.state.id),(()=>n.state=this.state),Zb)],"map-view"),this._updateStageChildren();const l=this._resolveWhenReady;this._resolveWhenReady=[],l.forEach((e=>e(this))),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:n}=this.state.paddedViewState,o=new Qm({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container)}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new fre(FP.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new pae({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new fae(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(xa(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const e=t.viewpoint.clone();e.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=e}const i=t.clone(),[r,n]=t.center;let o=null;try{o=this._project(new Qm({x:r,y:n,spatialReference:t.spatialReference}),e)}catch(t){FA()||hae.warn(new Fh("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o.toJSON(),spatialReference:e,error:t}))}o||(o=new Qm({x:0,y:0,spatialReference:e}));const s=Rte(new iC({targetGeometry:new Qm,scale:0,rotation:0}),t.viewpoint,o);i.viewpoint=s;try{const r=20,n=[t.size[0]/2,t.size[1]/2],o=[n[0]+r,n[1]],a=t.toMap([0,0],o),{x:l,y:c}=this._project(new Qm({x:a[0],y:a[1],spatialReference:t.spatialReference}),e);a[0]=l,a[1]=c,i.toScreen(a,a);const u=Ate(n,a,o),h=Math.hypot(a[0]-n[0],a[1]-n[1])/r;!Number.isFinite(h)||Math.abs(h)>4?(s.rotation=0,s.targetGeometry=new Qm({x:0,y:0,spatialReference:e})):(s.scale*=h,s.scale>wa("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(u)?u:0)}catch{}this._get("constraints").constrain(s,null),this._get("state").viewpoint=s,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};bl([Lh({readOnly:!0})],vae.prototype,"animationManager",void 0),bl([Lh({constructOnly:!0})],vae.prototype,"deactivatedWebGLExtensions",void 0),bl([Lh({constructOnly:!0})],vae.prototype,"debugWebGLExtensions",void 0),bl([Lh({readOnly:!0})],vae.prototype,"featuresTilingScheme",void 0),bl([Lh({readOnly:!0})],vae.prototype,"fullOpacity",void 0),bl([Lh({readOnly:!0})],vae.prototype,"graphicsTileStore",null),bl([Lh()],vae.prototype,"graphicsView",void 0),bl([Lh({readOnly:!0})],vae.prototype,"state",void 0),bl([Lh()],vae.prototype,"initialExtentRequired",null),bl([Lh()],vae.prototype,"labelManager",void 0),bl([Lh({readOnly:!0})],vae.prototype,"resourceManager",null),bl([Lh({readOnly:!0})],vae.prototype,"textureManager",null),bl([Lh({readOnly:!0})],vae.prototype,"mapViewNavigation",void 0),bl([Lh({constructOnly:!0})],vae.prototype,"renderCanvas",void 0),bl([Lh()],vae.prototype,"renderingOptions",void 0),bl([Lh({readOnly:!0})],vae.prototype,"rendering",void 0),bl([Lh({constructOnly:!0})],vae.prototype,"supersampleScreenshotsEnabled",void 0),bl([Lh({readOnly:!0})],vae.prototype,"supportsGround",void 0),bl([Lh()],vae.prototype,"_stationaryTimer",void 0),bl([Lh()],vae.prototype,"_defaultsFromMapSettings",null),bl([Lh()],vae.prototype,"_pePromise",void 0),bl([Lh({readOnly:!0})],vae.prototype,"typeSpecificPreconditionsReady",null),bl([Lh()],vae.prototype,"animation",null),bl([Lh({type:uae})],vae.prototype,"background",null),bl([Lh({value:null,type:Qm,dependsOn:["state.id","ready"]})],vae.prototype,"center",null),bl([Lh({type:uie})],vae.prototype,"constraints",null),bl([Lh({value:null,type:Eg,dependsOn:["state.id","ready"]})],vae.prototype,"extent",null),bl([Lh()],vae.prototype,"floors",void 0),bl([Lh({type:ioe})],vae.prototype,"highlightOptions",void 0),bl([Lh({readOnly:!0})],vae.prototype,"inputManager",void 0),bl([Lh()],vae.prototype,"map",void 0),bl([Lh({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],vae.prototype,"padding",null),bl([Lh()],vae.prototype,"resizeAlign",void 0),bl([Lh({readOnly:!0,dependsOn:["state.id"]})],vae.prototype,"resolution",null),bl([Lh({value:0,type:Number,dependsOn:["state.id","ready"]})],vae.prototype,"rotation",null),bl([Lh({value:0,type:Number,dependsOn:["state.id","ready"]})],vae.prototype,"scale",null),bl([Lh({constructOnly:!0})],vae.prototype,"spatialReferenceLocked",void 0),bl([Lh()],vae.prototype,"stationary",null),bl([Lh({type:roe,readOnly:!0})],vae.prototype,"timeline",void 0),bl([Lh({readOnly:!0})],vae.prototype,"type",void 0),bl([Lh({readOnly:!0})],vae.prototype,"updating",null),bl([Lh({value:null,type:iC,dependsOn:["state.id","ready"]})],vae.prototype,"viewpoint",null),bl([Lh({value:-1,dependsOn:["state.id"]})],vae.prototype,"zoom",null),bl([Lh({type:Boolean})],vae.prototype,"navigating",null),bl([Lh({type:aae})],vae.prototype,"ui",void 0),vae=bl([md("esri.views.MapView")],vae);const bae=vae;function wae(e){const t=e.getObjectId();var i,r,n,o;return t?`${null!=(i=null!=(r=null==(n=e.layer)?void 0:n.uid)?r:null==(o=e.sourceLayer)?void 0:o.uid)?i:"MapView"}/${t}`:`"MapView/${e.uid}`}function _ae(e,t,i,r,n){return o=>{if(o instanceof HI){if(o.layer===e)null==n||n();else{const t=e.allLayerViews.find((e=>e.layer===o.layer));t&&(null==r||r(t))}i(wae(o))}else{const i=e.allLayerViews.find((e=>e.layer===o));i&&t(i)}}}function xae(e,t){if(e)if(oC(e))for(const i of e)if(oC(i))for(const e of i)t(e);else t(i);else t(e)}let Sae=class extends(p2(p3(J2(r3(S_(v_(KQ(f_)))))))){constructor(e){super(e),this._visibilityHandles={},this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._visibilityWatcher=this._visibilityWatcher.bind(this)}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}_writeLayers(e,t,i,r){const n=[];if(!e)return n;e.forEach((e=>{const t=Ly(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);_a(t)&&t.layerType&&n.push(t)})),t.layers=n}set portalItem(e){this._set("portalItem",e)}set visibilityMode(e){const t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),Promise.resolve(this)}loadAll(){return hp(this,(e=>{e(this.layers,this.tables)}))}layerAdded(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}layerRemoved(e){const t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach((t=>{t!==e&&(t.visible=!1)}))}_enforceVisibility(e,t){if(!jl(this).initialized)return;const i=this.layers;let r=i.find((e=>e.visible));switch(e){case"exclusive":i.length&&!r&&(r=i.getItemAt(0),r.visible=!0),this._turnOffOtherLayers(r);break;case"inherited":i.forEach((e=>{e.visible=t}))}}_visibleWatcher(e){"inherited"===this.visibilityMode&&this.layers.forEach((t=>{t.visible=e}))}_visibilityWatcher(e,t,i,r){const n=r;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(n):this._isAnyLayerVisible()||(n.visible=!0);break;case"inherited":n.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((e=>e.visible))}};bl([Lh()],Sae.prototype,"fullExtent",void 0),bl([Lh({json:{read:!1,write:{ignoreOrigin:!0}}})],Sae.prototype,"layers",void 0),bl([Mf("layers")],Sae.prototype,"_writeLayers",null),bl([Lh({type:["GroupLayer"]})],Sae.prototype,"operationalLayerType",void 0),bl([Lh({json:{origins:{"web-document":{read:!1,write:!1}}}})],Sae.prototype,"portalItem",null),bl([Lh()],Sae.prototype,"spatialReference",void 0),bl([Lh({json:{read:!1},readOnly:!0,value:"group"})],Sae.prototype,"type",void 0),bl([Lh({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],Sae.prototype,"visibilityMode",null),Sae=bl([md("esri.layers.GroupLayer")],Sae);const kae=Sae;var Mae=Object.freeze({__proto__:null,default:kae}),Tae=[{title:"Rural residents",code:"1",desc:"The population of this supergroup live in rural areas that are far less densely populated compared with elsewhere in the country. They will tend to live in large detached properties which they own and work in the agriculture, forestry and fishing industries. The level of unemployment in these areas is below the national average. Each household is likely to have multiple motor vehicles, and these will be the preferred method of transport to their places of work. The population tends to be older, married and well educated. An above average proportion of the population in these areas provide unpaid care and an above average number of people live in communal establishments (most likely to be retirement homes). There is less ethnic integration in these areas and households tend to speak English or Welsh as their main language.",supergroup:"1",group:"",subgroup:""},{title:"Farming communities",code:"1a",desc:"This group has a lower population density than the supergroup, and people are less likely to live in communal establishments. There is a higher proportion of households living in detached properties when compared with the supergroup and much lower proportions living in terraced properties and flats. Households are less likely to live in social rented accommodation. There is a higher proportion of people working in the agriculture industry compared with the supergroup.",supergroup:"1",group:"a",subgroup:""},{title:"Rural workers and families",code:"1a1",desc:"The population of this subgroup has a slightly higher proportion of people aged 0 to 4 when compared with the group. Households are slightly more likely to live in detached properties, and less likely to live in other types of property. They are also slightly more likely to live in overcrowded conditions than the group and for household members to be unemployed.",supergroup:"1",group:"a",subgroup:"1"},{title:"Established farming communities",code:"1a2",desc:"Compared with the parent supergroup, households in this subgroup are more likely to live in a terraced or end-terraced house. People are slightly more likely to use public transport to get to work. Those in employment are more likely to work in financial related industries.",supergroup:"1",group:"a",subgroup:"2"},{title:"Agricultural communities",code:"1a3",desc:"This subgroup has a lower population density than the group. Compared with the group, a higher proportion of households live in terraced properties or flats, and privately rent their home. The proportion of people working in agricultural industries is higher than the parent group.",supergroup:"1",group:"a",subgroup:"3"},{title:"Older farming communities",code:"1a4",desc:"The age make up of this subgroup is lower than the group for younger ages, but higher for ages and over, and residents tend to live in more densely populated areas. Households are more likely to live in flats, though less likely to live in privately or socially rented accommodation. The proportion of people working in agricultural industries is lower than for the parent group.",supergroup:"1",group:"a",subgroup:"4"},{title:"Rural tenants",code:"1b",desc:"The age structure is very similar to the supergroup, though people are less likely to live in communal establishments. Compared with the parent supergroup, there is a higher proportion of households living in semi-detached, terraced properties and flats, with a higher proportion socially renting. People are less likely to work in the agriculture industry than for the parent supergroup.",supergroup:"1",group:"b",subgroup:""},{title:"Rural life",code:"1b1",desc:"This subgroup is slightly more densely populated than the parent group. Households are less likely to live in flats. There are slightly more people working in the manufacturing and energy industries.",supergroup:"1",group:"b",subgroup:"1"},{title:"Rural white-collar workers",code:"1b2",desc:"This subgroup is slightly less densely populated than the parent group. When compared with the parent group, a higher proportion of people work in the information and communication, and financial related industries, whilst unemployment is lower.",supergroup:"1",group:"b",subgroup:"2"},{title:"Ageing rural flat tenants",code:"1b3",desc:"When compared with the parent group there is a higher proportion of people who are aged 65 and over, and they live in slightly denser populated areas. A higher proportion of households live in flats and socially rent, whilst a lower proportion of people work in the information and communication, and financial industries.",supergroup:"1",group:"b",subgroup:"3"},{title:"Ageing rural dwellers",code:"1c",desc:"The age structure of this group shows has a lower proportion of people aged under 65, and higher proportions aged 65 and over, particularly for the 90 and over age group. People are more likely to live in communal establishments or in detached properties.",supergroup:"1",group:"c",subgroup:""},{title:"Rural employment and retirees",code:"1c1",desc:"This subgroup has a lower proportion of people aged 90 or over compared with the parent group. It has a slightly higher proportion of people who were born in the EU and whose main language is not English or Welsh. The proportion of people working in agricultural industries is higher than the parent group, and a higher proportion of households live in private rented accommodation.",supergroup:"1",group:"c",subgroup:"1"},{title:"Renting rural retirement",code:"1c2",desc:"This subgroup has a higher proportion of people aged 90 and over compared with the parent group. There is a higher proportion of households who live in terraced properties, and households are more likely to rent socially. The proportion of people working in agricultural industries is lower than the parent group.",supergroup:"1",group:"c",subgroup:"2"},{title:"Detached rural retirement",code:"1c3",desc:"This subgroup has a higher proportion of people aged 90 and over compared with the main group, a slightly higher proportion of households who live in detached properties, and a lower proportion who rent socially.",supergroup:"1",group:"c",subgroup:"3"},{title:"Cosmopolitans",code:"2",desc:"The majority of the population in this supergroup live in densely populated urban areas. They are more likely to live in flats and communal establishments, and private renting is more prevalent than nationally. The group has a high ethnic integration, with an above average number of residents from EU accession countries coinciding with a below average proportion of persons stating their country of birth as the UK or Ireland. A result of this is that households are less likely to speak English or Welsh as their main language. The population of the group is characterised by young adults, with a higher proportion of single adults and households without children than nationally. There are also higher proportions of full-time students. Workers are more likely to be employed in the accommodation, information and communication, and financial related industries, and using public transport, or walking or cycling to get to work.",supergroup:"2",group:"",subgroup:""},{title:"Students around campus",code:"2a",desc:"Compared with the parent supergroup a higher proportion of people live in communal establishments. A lower proportion of people are married or divorced and a higher proportion are schoolchildren and full-time students. Households are more likely to live in terraced properties and to live in social rented accommodation compared with the national average. There is also a higher prevalence of workers in the accommodation or food service activities industries.",supergroup:"2",group:"a",subgroup:""},{title:"Student communal living",code:"2a1",desc:"This subgroup has a high proportion of people (largely students) living in communal establishments compared with the group. It also has a higher proportion of people who are of Chinese ethnicity. The proportion of people who are schoolchildren or full-time students is higher than the group.",supergroup:"2",group:"a",subgroup:"1"},{title:"Student digs",code:"2a2",desc:"When compared with the parent group, this subgroup has a much lower proportion of people living in communal establishments. There are lower proportions of people who are married or separated. The proportion of households with full-time students is higher than the parent group, and households are more likely to be living in terraced houses and rented accommodation.",supergroup:"2",group:"a",subgroup:"2"},{title:"Students and professionals",code:"2a3",desc:"The population in this subgroup contains higher proportions of children aged 0 to 14, and adults aged 25 and over than the parent group. The subgroup has a lower proportion of people living in communal establishments than the parent group, with higher proportions of people who are married or separated.",supergroup:"2",group:"a",subgroup:"3"},{title:"Inner city students",code:"2b",desc:"The age profile of this group shows a high proportion of schoolchildren, full-time students, and people aged 25 to 44, though a lower proportion married or divorced. Households are more likely to live in flats, to live in private rented accommodation, and to have overcrowded conditions. A lower proportion of people provide unpaid care, and a higher proportion work in accommodation or food service activities industries.",supergroup:"2",group:"b",subgroup:""},{title:"Students and commuters",code:"2b1",desc:"The proportion of people who are white is slightly higher than for the parent group, however the representation of all other ethnic groups is lower. The proportion of people with level 1 or 2, or apprenticeship qualifications is higher when compared with the parent group. People are more likely to use private transport to travel to work.",supergroup:"2",group:"b",subgroup:"1"},{title:"Multicultural student neighbourhoods",code:"2b2",desc:"The population in this subgroup has a lower proportion of people aged 45 to 89 when compared with the parent group. Its ethnic makeup has a higher proportion of persons of mixed ethnicity.",supergroup:"2",group:"b",subgroup:"2"},{title:"Comfortable cosmopolitan",code:"2c",desc:"The age profile of this group shows a higher proportion of people age 45 and over than the parent supergroup. A higher proportion of people are divorced. There is a lower representation for all non- White ethnic groups when compared with the supergroup and a lower proportion of people born in the old EU. There is a lower proportion of households with full-time students and a higher proportion who live in flats. A higher proportion of workers are employed in the mining and manufacturing industries, and travel to work using private transport.",supergroup:"2",group:"c",subgroup:""},{title:"Migrant families",code:"2c1",desc:"This subgroup has a higher proportion of people aged 0 to 14 when compared with the parent subgroup, with a higher proportion of residents of mixed ethnicity. Households are more likely to live in a detached, semi-detached or terraced property than the parent group. A higher proportion of workers are employed in manufacturing industries.",supergroup:"2",group:"c",subgroup:"1"},{title:"Migrant commuters",code:"2c2",desc:"The population in this subgroup has a higher proportion of people who are of Pakistani ethnicity when compared with the parent group, and households are more likely to live in socially rented accommodation. A lower proportion of households had two or more cars.",supergroup:"2",group:"c",subgroup:"2"},{title:"Professional service cosmopolitans",code:"2c3",desc:"This subgroup had a lower proportion of people whose country of birth is in the new EU, and a lower proportion whose main language is not English or Welsh. When compared with the parent group they are more likely to own their home, and less likely to live in overcrowded conditions. When compared with the other subgroups for the parent group, this subgroup has the lowest proportion of people who are unemployed.",supergroup:"2",group:"c",subgroup:"3"},{title:"Aspiring and affluent",code:"2d",desc:"The proportion of people age 0 to 14 is higher than for the parent supergroup. A higher proportion of people are married. There is a higher proportion of people who are of mixed ethnicity. A lower proportion of households have full-time students. Compared with the supergroup a higher proportion of households live in semi-detached or terraced properties. People are more likely to work in the information and communication, and financial related industries, and use public transport to get to work.",supergroup:"2",group:"d",subgroup:""},{title:"Urban cultural mix",code:"2d1",desc:"When compared with the group a higher proportion of people are of Indian ethnicity. A lower proportion of people were born in the old EU whereas a higher proportion were born in the new EU. They are more likely to live in a detached or semi-detached property.",supergroup:"2",group:"d",subgroup:"1"},{title:"Highly-qualified quaternary workers",code:"2d2",desc:"The label quaternary refers loosely to intellectual activities. In comparison with the parent group there is a higher proportion of people aged 5 to 14, and a lower proportion of persons of Indian ethnicity. Households are more likely to live in terraced or end-terraced properties.",supergroup:"2",group:"d",subgroup:"2"},{title:"EU white-collar workers",code:"2d3",desc:"A key characteristic for this subgroup is the higher proportion of persons born in other EU countries, and most noticeably in other old EU countries, relative to the overall UK figure, and the parent group. When compared with the parent group, a higher proportion of the people in this subgroup are Arab or of other ethnic group. Households are more likely to live in flats and to be living in overcrowded conditions. Households are less likely to have two or more cars and also less likely to use private transport to travel to work.",supergroup:"2",group:"d",subgroup:"3"},{title:"Ethnicity central",code:"3",desc:"The population of this group is predominately located in the denser central areas of London, with other inner urban areas across the UK having smaller concentrations. All non-white ethnic groups have a higher representation than the UK average especially people of mixed ethnicity or who are Black, with an above average number of residents born in other EU countries. Residents are more likely to be young adults with slightly higher rates of divorce or separation than the national average, with a lower proportion of households having no children or non-dependent children. Residents are more likely to live in flats and more likely to rent. A higher proportion of people use public transport to get to work, with lower car ownership, and higher unemployment. Those in employment are more likely to work in the accommodation, information and communication, financial, and administrative related industries.",supergroup:"3",group:"",subgroup:""},{title:"Ethnic family life",code:"3a",desc:"When compared with the parent supergroup, this group has a higher level of all non-White ethnic groups. There is a lower proportion of people born in the old EU but a higher proportion were born in the new EU. There is a higher proportion of people whose main language is not English or Welsh. Households are more likely to live in detached, semi-detached or terraced properties.",supergroup:"3",group:"a",subgroup:""},{title:"Established renting families",code:"3a1",desc:"This subgroup has a lower proportion of people who have Indian or Pakistani ethnicity when compared with the group. The population is less likely to have been born in the new EU, and more likely to have dependent children. Households are more likely to be in socially rented accommodation.",supergroup:"3",group:"a",subgroup:"1"},{title:"Young families and students",code:"3a2",desc:"In comparison with the parent group this subgroup has a higher proportion of people who are of Indian or Pakistani ethnicity. Country of birth for residents is more likely to have been in one of the new EU countries, and residents are more likely to have higher level qualifications. Households are more likely to be privately renting than the parent group and less likely to be social renting.",supergroup:"3",group:"a",subgroup:"2"},{title:"Endeavouring Ethnic Mix",code:"3b",desc:"This group has a higher proportion of people who belong to the Bangladeshi ethnic group than the parent supergroup but a lower proportion of those in Pakistani and Indian ethnic groups. There is a higher proportion of people who were born in the old EU countries. Households are more likely to live in flats and to socially rent than for the supergroup. Overcrowding is also more prevalent, and public transport more commonly used to get to work.",supergroup:"3",group:"b",subgroup:""},{title:"Striving service workers",code:"3b1",desc:"The population of this subgroup has a lower proportion of people who have Bangladeshi ethnicity than the group but a higher proportion who have Black ethnicity. A lower proportion of households are likely to live in privately rented accommodation. Most of the other characteristics are similar to the parent group.",supergroup:"3",group:"b",subgroup:"1"},{title:"Bangladeshi mixed employment",code:"3b2",desc:"A lower proportion of people in this subgroup are of mixed or Black ethnic origin when compared with the group but a far higher proportion of people have Bangladeshi ethnicity. A higher proportion of people whose main language is not English or Welsh are present in the subgroup.",supergroup:"3",group:"b",subgroup:"2"},{title:"Multi-ethnic professional service workers",code:"3b3",desc:"When compared with the group there is a higher proportion of people who are of Indian ethnicity but a lower proportion of Bangladeshi ethnicity. There is a higher proportion of people born in other EU countries with households more likely to live in privately rented accommodation in comparison with the parent group.",supergroup:"3",group:"b",subgroup:"3"},{title:"Ethnic dynamics",code:"3c",desc:"In this group non-White ethnic groups are not represented as highly as in the parent supergroup and there is a higher proportion of people born in the UK or Ireland. Households are more likely to live in a flat and to socially rent. There is a higher proportion of unemployed in the group but those in employment are more likely to work in the manufacturing industry, and to use private transport to travel to work.",supergroup:"3",group:"c",subgroup:""},{title:"Constrained neighbourhoods",code:"3c1",desc:"In comparison with the group, this subgroup has a higher proportion of people who have mixed ethnicity. Households are more likely to live in terraced properties. People in work are slightly more likely to work in manufacturing industries, and households more likely to own two or more cars.",supergroup:"3",group:"c",subgroup:"1"},{title:"Constrained commuters",code:"3c2",desc:"The population of this subgroup has a lower proportion of people aged 65 and over than the parent group. It also has a lower proportion of people with mixed ethnicity. Households in this subgroup are more likely to live in flats, and to use public transport for getting to work.",supergroup:"3",group:"c",subgroup:"2"},{title:"Aspirational techies",code:"3d",desc:"With the exception of the Indian and mixed ethnic group, this group has a lower representation of all non-White ethnic groups than in the parent supergroup. There is a higher proportion of people born in the old EU but a lower proportion whose main language is not English or Welsh. Households are more likely to live in semi-detached or terraced properties, and to live in privately rented accommodation. Workers are more likely to be employed in the information and communication industries, and to travel to work using public transport.",supergroup:"3",group:"d",subgroup:""},{title:"New EU tech workers",code:"3d1",desc:"The population of this subgroup has a higher proportion of people who are of Indian or Pakistani ethnicity than the parent group, and a higher proportion born in the new EU countries. Households are more likely to live in detached properties than the group, and to live in privately rented accommodation. A higher proportion of people work in mining related industries, and use private transport for travelling to work.",supergroup:"3",group:"d",subgroup:"1"},{title:"Established tech workers",code:"3d2",desc:"The population of this subgroup is slightly more likely to have Black ethnicity and more likely to be born in the UK or Ireland, and to have non-dependent children. There is a higher proportion of households who live in terraced housing, and a higher proportion living in socially rented accommodation. Households are also less likely to live in overcrowded conditions.",supergroup:"3",group:"d",subgroup:"2"},{title:"Old EU tech workers",code:"3d3",desc:"The population of this subgroup is more likely to have Bangladeshi ethnicity, and to have been born in old EU countries. A higher proportion of households live in flats, and households are more likely to be living in socially rented accommodation.",supergroup:"3",group:"d",subgroup:"3"},{title:"Multicultural metropolitans",code:"4",desc:"The population of this supergroup is concentrated in larger urban conurbations in the transitional areas between urban centres and suburbia. They are likely to live in terraced housing that is rented - both private and social. The group has a high ethnic mix, but a below average number of UK and Irish born residents. A result of this is that households are less likely to speak English or Welsh as their main language. Residents are likely to be below retirement age. There is likely to be an above average number of families with children who attend school or college, or who are currently too young to do so. The rates of marriage and divorce are broadly comparable with the national average. The level of qualifications is just under the national average with the rates of unemployment being above the national average. Residents who are employed are more likely to work in the transport and administrative related industries. Public transport is the most likely method for individuals to get to and from work, since households are less likely to have multiple motor vehicles available to them.",supergroup:"4",group:"",subgroup:""},{title:"Rented family living",code:"4a",desc:"This group has a higher representation of White and mixed ethnicity residents than the supergroup and a lower proportion of people whose main language is not English or Welsh. Households are more likely to live in terraced properties or flats, and to socially rent their property.",supergroup:"4",group:"a",subgroup:""},{title:"Social renting young families",code:"4a1",desc:"This subgroup, when compared with the parent group, has a higher proportion of children aged to 14, a higher proportion of people who have Pakistani ethnicity, and a higher proportion who were born in the UK or Ireland. Households are more likely to live in semi-detached properties, and to live in social rented accommodation. Unemployment is more prevalent when compared with the parent group.",supergroup:"4",group:"a",subgroup:"1"},{title:"Private renting new arrivals",code:"4a2",desc:"When compared with the group, this population of this subgroup has a lower proportion of people who have Black or of mixed ethnicity. Residents are more likely to have been born in other EU countries. Households are more likely to be living in private rented accommodation.",supergroup:"4",group:"a",subgroup:"2"},{title:"Commuters with young families",code:"4a3",desc:"The population of this subgroup has a lower proportion of people who are of Pakistani ethnicity, but a higher proportion of Black ethnicity when compared with the group. Households are more likely to live in flats and to live in overcrowded conditions. People are more likely to work in the information and communication, and financial related industries.",supergroup:"4",group:"a",subgroup:"3"},{title:"Challenged Asian terraces",code:"4b",desc:"The population of this group has a higher proportion of non-White ethnic groups than the parent supergroup especially people of the Pakistani ethnic group, and a higher proportion of 0 to 14 year- olds. It is more likely that their main language is not English or Welsh. A higher proportion of households live in terraced properties, and overcrowding is more prevalent. When compared with the supergroup more people are likely to be unemployed, and those in employment to be working in the accommodation and food service industries.",supergroup:"4",group:"b",subgroup:""},{title:"Asian terraces and flats",code:"4b1",desc:"The population of this subgroup has a higher representation of people from Indian, Black and Chinese ethnic groups, and a higher proportion of residents born in the new EU countries. Households are more likely to live in flats.",supergroup:"4",group:"b",subgroup:"1"},{title:"Pakistani communities",code:"4b2",desc:"A key distinguishing feature of this subgroup is the high proportion of people with Pakistani ethnicity, though residents are also more likely to have been born in the UK or Ireland, though less likely to speak English or Welsh as their main language. There is a slightly higher proportion of households who live in terraced housing, and also a higher proportion owning their property.",supergroup:"4",group:"b",subgroup:"2"},{title:"Asian traits",code:"4c",desc:"The population of this group has a higher proportion of people who are of Chinese ethnicity and particularly of Indian ethnicity. Compared with the parent supergroup, households are more likely to live in detached and semi-detached properties, and to own their own home. A higher proportion of households have two or more cars, unemployment is lower, and workers are more likely to work in the Information and communication, and financial related industries.",supergroup:"4",group:"c",subgroup:""},{title:"Achieving minorities",code:"4c1",desc:"The population of this subgroup has a higher proportion of people who have Pakistani ethnicity, and lower proportions with Chinese and Black ethnicity than the parent group. A lower proportion of residents were born in other EU countries. Households are more likely to live in detached and semi-detached properties, and to own their own property. Households are also less likely to live in overcrowded conditions.",supergroup:"4",group:"c",subgroup:"1"},{title:"Multicultural new arrivals",code:"4c2",desc:"The population of this subgroup has a higher representation of all non-White ethnic groups than the parent group. A higher proportion of residents were born in new EU countries and a higher proportion without English or Welsh as their main language. Households are more likely to live in terraced properties or flats and to live in overcrowded conditions.",supergroup:"4",group:"c",subgroup:"2"},{title:"Inner city ethnic mix",code:"4c3",desc:"Compared with the parent group, there is a higher representation of persons of mixed ethnicity, but lower representation for the other non-White ethnic groups, and a lower proportion of people whose main language is not English or Welsh. When compared with the parent group, there is a lower proportion of households with non-dependent children, and households are more likely to live in flats.",supergroup:"4",group:"c",subgroup:"3"},{title:"Urbanites",code:"5",desc:"The population of this group are most likely to be located in urban areas in southern England and in less dense concentrations in large urban areas elsewhere in the UK. They are more likely to live in either flats or terraces, and to privately rent their home. The supergroup has an average ethnic mix, with an above average number of residents from other EU countries. A result of this is households are less likely to speak English or Welsh as their main language. Those in employment are more likely to be working in the information and communication, financial, public administration and education related sectors. Compared with the UK, unemployment is lower.",supergroup:"5",group:"",subgroup:""},{title:"Urban professionals and families",code:"5a",desc:"The population of this group shows a noticeably higher proportion of children aged 0 to 14 than the parent supergroup and a lower proportion aged 90 and over. There is also a higher proportion of people with mixed ethnicity. Households in this group are more likely to live in terraced properties and to live in privately rented accommodation. Unemployment is slightly higher than for the parent supergroup.",supergroup:"5",group:"a",subgroup:""},{title:"White professionals",code:"5a1",desc:"The population of this subgroup has a lower representation of all ethnic groups, other than White when compared with the parent group. Residents are less likely to have been born in other EU countries and more likely to have English or Welsh as their main language. Households are more likely to live in detached or semi-detached properties.",supergroup:"5",group:"a",subgroup:"1"},{title:"Multi-ethnic professionals with families",code:"5a2",desc:"The population of this subgroup has a higher representation of all non-White ethnic groups than the parent group, and in particular representation of persons with Indian or mixed ethnicity. Households are more likely to live in detached or semi-detached properties, and to live in socially rented accommodation. There is a higher proportion of people working in the information and communication, and financial related industries.",supergroup:"5",group:"a",subgroup:"2"},{title:"Families in terraces and flats",code:"5a3",desc:"When compared with the parent group, this subgroup has a higher proportion of households living in terraced properties or flats, with households more likely to rent their accommodation, either privately or socially. Households are more likely to live in overcrowded conditions than the parent group and less likely to have two or more cars.",supergroup:"5",group:"a",subgroup:"3"},{title:"Ageing urban living",code:"5b",desc:"The population of this group shows a higher proportion of people aged 65 and over than the parent supergroup. Residents are more likely to live in communal establishments, detached properties and flats than the supergroup, with a higher proportion of households living in socially rented accommodation.",supergroup:"5",group:"b",subgroup:""},{title:"Delayed retirement",code:"5b1",desc:"The population of this group shows a lower proportion of people aged 90 and over than the parent group, and households are more likely to live in flats, though are less likely to socially rent. There is a higher proportion of people who use public transport to get to work and they are more likely to work in the information and communication, and financial related industries.",supergroup:"5",group:"b",subgroup:"1"},{title:"Communal retirement",code:"5b2",desc:"A distinguishing feature of this subgroup is the high proportion of people living in communal establishments. The population of this subgroup shows a higher proportion of people aged 90 and over than the parent group. There is also a higher proportion of households living in terraced properties than the parent group.",supergroup:"5",group:"b",subgroup:"2"},{title:"Self-sufficient retirement",code:"5b3",desc:"A lower proportion of people live in communal establishments than the parent group. Compared with the group a higher proportion of households live in terraced properties and households are more likely to live in socially rented accommodation.",supergroup:"5",group:"b",subgroup:"3"},{title:"Suburbanites",code:"6",desc:"The population of this supergroup is most likely to be located on the outskirts of urban areas. They are more likely to own their own home and to live in semi-detached or detached properties. The population tends to be a mixture of those above retirement age and middle-aged parents with school age children. The number of residents who are married or in civil-partnerships is above the national average. Individuals are likely to have higher-level qualifications than the national average, with the levels of unemployment in these areas being below the national average. All non-White ethnic groups have a lower representation when compared with the UK and the proportion of people born in the UK or Ireland is slightly higher. People are more likely to work in the information and communication, financial, public administration, and education sectors, and use private transport to get to work.",supergroup:"6",group:"",subgroup:""},{title:"Suburban achievers",code:"6a",desc:"When compared with the parent supergroup a higher proportion of households live in detached properties and flats, and are less likely to rent their accommodation or live in overcrowded conditions. People of Indian ethnicity are over-represented when compared with the supergroup. Higher proportions of people have higher qualifications, and are more likely to work in the information and communication, and financial related industries.",supergroup:"6",group:"a",subgroup:""},{title:"Indian tech achievers",code:"6a1",desc:"All non-White ethnic groups are well represented in this subgroup in comparison to the parent group, people of Indian ethnicity being particularly well represented. There is a higher proportion of people born in other EU countries, and whose main language is not English or Welsh. Households are more likely to live in semi-detached properties. Compared with the parent group there is a higher proportion of people working in the information and communication, and financial related industries, and workers using public transport.",supergroup:"6",group:"a",subgroup:"1"},{title:"Comfortable suburbia",code:"6a2",desc:"The population of this group has a higher proportion of people aged 0 to 44 but a lower proportion aged 65 and over than the parent group. Households are less likely to live in semi-detached properties or flats, but more likely to live in detached or terraced properties.",supergroup:"6",group:"a",subgroup:"2"},{title:"Detached retirement living",code:"6a3",desc:"This subgroup has a higher proportion of people aged 65 to 89 than the parent group. There is a lower representation of all non-White ethnic groups in the subgroup. Households are more likely to live in semi-detached properties. 6a4- Ageing in suburbia The population of this subgroup has a higher proportion of people aged 65 and over than the parent group. A much higher proportion of households live in flats, and households are more likely to live in privately rented accommodation. Households are also more likely to live in overcrowded conditions.",supergroup:"6",group:"a",subgroup:"3"},{title:"Semi-detached suburbia",code:"6b",desc:"People in this group are slightly more likely to be divorced or separated than those in the supergroup. Households are more likely to live in semi-detached and terraced properties, with a higher proportion of households renting their accommodation.",supergroup:"6",group:"b",subgroup:""},{title:"Multi-ethnic suburbia",code:"6b1",desc:"All the non-White ethnic groups are represented more highly in this subgroup in comparison with the parent group. There are also higher proportions of people born in the new EU countries and people whose main language is not English or Welsh. Households are more likely to live in semi- detached properties and to live in overcrowded conditions. A higher proportion of workers use public transport to commute to work.",supergroup:"6",group:"b",subgroup:"1"},{title:"White suburban communities",code:"6b2",desc:"Ethnic group representation, including persons with White ethnicity, is very similar to the parent group. The population of this subgroup has a lower proportion of people aged 65 and over than the parent group. Households are more likely to live in detached or terraced properties, and to live in privately rented accommodation.",supergroup:"6",group:"b",subgroup:"2"},{title:"Semi-detached ageing",code:"6b3",desc:"This subgroup has a higher proportion of people aged 65 to 89 than the parent group. All non- White ethnic groups have a lower representation in this subgroup when compared with the parent group. A higher proportion of households live in semi-detached properties, and own their own property.",supergroup:"6",group:"b",subgroup:"3"},{title:"Older workers and retirement",code:"6b4",desc:"There is a higher proportion of residents aged 65 to 89 within this subgroup than the parent group, and households are more likely to live in detached properties or flats. A higher proportion of households socially rent their accommodation, and a higher proportion are likely to live in overcrowded conditions.",supergroup:"6",group:"b",subgroup:"4"},{title:"Constrained city dwellers",code:"7",desc:"This supergroup has a lower proportion of people aged 5 to 14 and a higher level aged 65 and over than nationally. It is more densely populated than the UK average. People are more likely to be single or divorced. There is a lower representation of all the non-White ethnic groups and of people who were born in other EU countries. There is a lower proportion of households with no children. Households are more likely to live in flats and to live in social rented accommodation, and there is a higher prevalence of overcrowding. There is a higher proportion of people whose day-to- day activities are limited, and lower qualification levels than nationally. There is a higher level of unemployment in the supergroup. There are no particular industries in which workers are most likely to be employed, but some industries such as information and communication, and the education sector are underrepresented.",supergroup:"7",group:"",subgroup:""},{title:"Challenged diversity",code:"7a",desc:"The population of this group have a higher level of people aged 0 to 14 in comparison with the supergroup. All non-White ethnic groups have a higher representation than nationally, especially people who have mixed ethnicity. A higher proportion of households live in terraced properties, and are more likely to live in private rented accommodation when compared with the supergroup. Car ownership is generally higher than the supergroup, and people are more likely to be employed in information and communication related industries.",supergroup:"7",group:"a",subgroup:""},{title:"Transitional Eastern European neighbourhoods",code:"7a1",desc:"All non-White ethnic groups have a lower representation in this subgroup when compared with the parent group. A higher proportion of people were born in the new EU countries and there is a higher proportion whose main language is not English or Welsh. Households are more likely to live in detached properties and a greater proportion live in privately rented accommodation when compared with the parent group. People are more likely to work in the agriculture and manufacturing related industries, and to use private transport to get to work.",supergroup:"7",group:"a",subgroup:"1"},{title:"Hampered aspiration",code:"7a2",desc:"The population of this subgroup has a lower representation of people of mixed ethnicity or of Black ethnicity when compared with the parent group. A higher proportion of households live in terraced houses and in privately rented accommodation when compared with the parent group. A higher proportion of people work in the information and communication, financial, and public administration related industries.",supergroup:"7",group:"a",subgroup:"2"},{title:"Multi-ethnic hardship",code:"7a3",desc:"The age make-up of this subgroup is higher in the 5 to 14 age group when compared with the parent group. Whilst there are higher proportions of people of mixed or Black ethnicity, all ethnic groups are well represented, though a lower proportion of people were born in other EU countries. Households were more likely to live in semi-detached properties and were more likely to live in socially rented accommodation. Workers were more likely to be employed in transport or storage industries.",supergroup:"7",group:"a",subgroup:"3"},{title:"Constrained flat dwellers",code:"7b",desc:"This group is characterised by people living in flats, with a higher proportion living in socially rented accommodation than for the supergroup. Ethnic groups generally have a similar representation as for the supergroup, persons of mixed ethnicity are underrepresented. There is a lower proportion of households with two or more cars.",supergroup:"7",group:"b",subgroup:""},{title:"Eastern European communities",code:"7b1",desc:"The population of this group has a higher proportion of people aged 0 to 14 than the parent group and a lower proportion aged 65 and over. A higher proportion of people were born in the new EU countries. There is also a higher proportion of people whose main language is not English or Welsh. Households are more likely to live in socially rented accommodation, with workers more likely to be employed in manufacturing industries.",supergroup:"7",group:"b",subgroup:"1"},{title:"Deprived neighbourhoods",code:"7b2",desc:"The age structure for this subgroup is very similar to the parent group, with a lower proportion of people born in the new EU countries, and whose main language is not English or Welsh. Households are less likely to own their property and more likely to socially rent. There is a higher proportion of unemployed people.",supergroup:"7",group:"b",subgroup:"2"},{title:"Endeavouring flat dwellers",code:"7b3",desc:"In this subgroup there is a lower proportion of people born in new EU countries. There is also a lower proportion of people whose main language is not English or Welsh. In comparison with the parent group households are more likely to have no children, and to own their accommodation, but they are also more likely to be living in privately rented accommodation. People are less likely to be unemployed and there is a higher proportion of people working in the information and communication, finance and public administration, and education related sectors.",supergroup:"7",group:"b",subgroup:"3"},{title:"White communities",code:"7c",desc:"The population of this group are more likely to be white when compared with the parent supergroup, with a lower representation of all other ethnic groups, and a lower proportion of people born in other EU countries. There is a higher proportion of households with non-dependent children, with households more likely to be living in semi-detached and terraced properties, and owning their own accommodation.",supergroup:"7",group:"c",subgroup:""},{title:"Challenged transitionaries",code:"7c1",desc:"Households in this subgroup are more likely to live in terraced properties than those in the parent group. There is a lower proportion social renting and a higher proportion renting privately compared with the parent group. People are less likely to be unemployed and are more likely to work in the information and communication, and financial related industries.",supergroup:"7",group:"c",subgroup:"1"},{title:"Constrained young families",code:"7c2",desc:"The population of this subgroup shows a higher proportion of people aged 0 to 14 than the parent group and a lower proportion of families with no children. Households are more likely to live in terraced properties and to socially rent their accommodation. There is a higher proportion of people who are unemployed and those in employment are more likely to work in the accommodation or food service activities industries.",supergroup:"7",group:"c",subgroup:"2"},{title:"Outer city hardship",code:"7c3",desc:"The population of this subgroup has a higher proportion of people aged 65 and over when compared with the parent group. Households are more likely to live in detached and semi- detached properties, and private renting is slightly more prevalent than the parent group. There is a higher proportion of households with two or more cars and a lower proportion of people who use public transport to get to work.",supergroup:"7",group:"c",subgroup:"3"},{title:"Ageing city dwellers",code:"7d",desc:"The population of this group shows a higher proportion of people aged 65 and over when compared with the parent supergroup, and residents are more likely to live in communal establishments and less likely to be single. There is a higher proportion of households living in detached properties and flats. A lower proportion of people are unemployed.",supergroup:"7",group:"d",subgroup:""},{title:"Ageing communities and families",code:"7d1",desc:"The age profile of this subgroup shows a higher proportion of people aged 0 to 14 and a lower proportion aged 90 and over. People are less likely to live in communal establishments than the parent group. There is a higher proportion of households living in detached and semi-detached properties, and households owning their own property. Households are more likely to have two or more cars. There is a higher proportion of people working in the information and communication, and education related sectors.",supergroup:"7",group:"d",subgroup:"1"},{title:"Retired independent city dwellers",code:"7d2",desc:"When compared with the parent group there is a higher proportion of households living in flats, and in socially rented accommodation. There is a lower proportion of households with two or more cars, but higher unemployment amongst residents.",supergroup:"7",group:"d",subgroup:"2"},{title:"Retired communal city dwellers",code:"7d3",desc:"The population of this subgroup shows a lower proportion of people aged 0 to 14 than the parent group but a higher proportion aged 90 and over. A much higher proportion of people live in communal establishments. When compared with the parent group a higher proportion of households live in detached, semi-detached or terraced properties, privately rent their accommodation, and have two or more cars.",supergroup:"7",group:"d",subgroup:"3"},{title:"Retired city hardship",code:"7d4",desc:"The age profile of this subgroup shows a higher proportion of the population aged 65 and over, though residents are less likely to live in communal establishments or to be single. There is a lower proportion of households with no children and non-dependent children. Households are more likely to live in flats, and more likely to rent socially. People in this subgroup are less likely to have qualifications, and due to the age structure are less likely to work in any of the identified industry categories.",supergroup:"7",group:"d",subgroup:"4"},{title:"Hard-pressed living",code:"8",desc:"The population of this group is most likely to be found in urban surroundings, predominately in northern England and southern Wales. There is less non-White ethnic group representation than elsewhere in the UK, and a higher than average proportion of residents born in the UK and Ireland. Rates of divorce and separation are above the national average. Households are more likely to have non-dependent children and are more likely to live in semi-detached or terraced properties, and to socially rent. There is a smaller proportion of people with higher level qualifications, with rates of unemployment above the national average. Those in employment are more likely to be employed in the mining, manufacturing, energy, wholesale and retail, and transport related industries.",supergroup:"8",group:"",subgroup:""},{title:"Industrious communities",code:"8a",desc:"Age structure and ethnic group representation broadly reflects the parent supergroup. There is a higher proportion of households living in detached and semi-detached properties, with slightly higher property ownership than for the supergroup. Industrious communities have a broadly similar demographic to the supergroup in terms of age group, occupation and population density, however slightly less overcrowding exists in this group. Ownership of two or more cars or vans is also marginally higher.",supergroup:"8",group:"a",subgroup:""},{title:"Industrious transitions",code:"8a1",desc:"The subgroup is broadly similar to the parent group in terms of age groups and ethnic diversity. Compared with the parent group, social renting is less common while a higher proportion of residents live in detached properties. This subgroup exhibits slightly higher proportions of residents in the information and communication, and financial related industries, together with slightly higher levels of educational qualifications.",supergroup:"8",group:"a",subgroup:"1"},{title:"Industrious hardship",code:"8a2",desc:"Age structure and ethnicity for this subgroup are consistent with the parent group. This subgroup has a higher proportion of residents who live in semi-detached properties, and social renting is more common, with marginally higher overcrowding. There is a smaller proportion of people in the information and communication, and financial related industries, and slightly higher levels of unemployment",supergroup:"8",group:"a",subgroup:"2"},{title:"Challenged terraced workers",code:"8b",desc:"A key difference with this group compared with the parent supergroup is the dominance of terraced housing over other types. Ownership of two or more cars and non-White ethnic group representation is also lower. The group has a similar age structure to the supergroup and similar employment characteristics.",supergroup:"8",group:"b",subgroup:""},{title:"Deprived blue-collar terraces",code:"8b1",desc:"Whilst for this subgroup, the age structure is broadly similar to the parent group, it is characterised by a higher degree of non-White ethnic group representation, and higher levels of households in private rented accommodation. There are also marginally higher levels of educational qualifications with employment in the information and communication, financial, and education sectors more prevalent than with the parent group.",supergroup:"8",group:"b",subgroup:"1"},{title:"Hard pressed rented terraces",code:"8b2",desc:"For this subgroup, age structure and representation of ethnic groups are broadly similar to the parent group. There is a higher proportion of households living in semi-detached properties, and a noticeably higher proportion living in socially rented accommodation. There is also a slightly higher use of public transport for commuting to work.",supergroup:"8",group:"b",subgroup:"2"},{title:"Hard pressed ageing workers",code:"8c",desc:"Residents who live in this group have a broadly similar age structure to the supergroup, though a smaller proportion of young people and higher proportion of older people. There is less non-While ethnic group representation than with the parent supergroup. Employment characteristics for this group closely reflect those for the supergroup.",supergroup:"8",group:"c",subgroup:""},{title:"Ageing industrious workers",code:"8c1",desc:"This subgroup is characterised by a slightly older age profile, and a higher proportion of mixed ethnicity of the residents compared with the parent group. Households are more likely to live in detached properties, and to live in privately rented accommodation. Residents have higher educational qualifications, whilst workers are more likely to be employed in the information and communication, and financial related industries.",supergroup:"8",group:"c",subgroup:"1"},{title:"Ageing rural industry workers",code:"8c2",desc:"The age structure is very similar to the parent group, though there is lower non-White ethnic group representation. Households are slightly more likely to live detached or terraced housing, and to be living in private rented accommodation when compared with the parent group. This subgroup contains considerably higher proportions of workers in agriculture, forestry and fishing occupations than the parent group, with a higher proportion of people walking and/or cycling to work.",supergroup:"8",group:"c",subgroup:"2"},{title:"Renting hard-pressed workers",code:"8c3",desc:"This subgroup has smaller proportions of older residents, and ethnic group representation is reasonably similar to the parent group. A higher proportion of households live in semi-detached properties and flats compared with the parent group, and households are more likely to live in socially rented accommodation. Household overcrowding and unemployment is marginally higher than the parent group. Workers are more likely to work in transport or storage industries, and to use public transport to travel to work.",supergroup:"8",group:"c",subgroup:"3"},{title:"Migration and churn",code:"8d",desc:"This group has a higher proportion of children aged 0 to 14 than the supergroup, with a higher representation of non-While ethnic groups. Households are more likely to live in terraced houses or flats, and to socially rent their property. Unemployment is noticeably higher than for the supergroup, and people are more likely to be employed in the tertiary industry (service) sector, and use public transport to get to work.",supergroup:"8",group:"d",subgroup:""},{title:"Young hard-pressed families",code:"8d1",desc:"The age structure for this subgroup largely reflects the parent group. There is a lower non-White ethnic group representation, particularly for people of mixed ethnicity. Households in socially rented accommodation are more prevalent than with the parent group, and unemployment is higher. Certain industries such as the information and communication related industries are underrepresented with this subgroup.",supergroup:"8",group:"d",subgroup:"1"},{title:"Hard-pressed ethnic mix",code:"8d2",desc:"This subgroup is generally characterised by higher levels of non-White ethnic group representation, particularly of persons of mixed and Black ethnicity, together with an older age structure than for the parent group. Households are more likely to live in flats, and more likely to own their own property. There are also a higher proportion of workers in the information and communication, and financial related industries, whilst unemployment is marginally lower than for the parent group.",supergroup:"8",group:"d",subgroup:"2"},{title:"Hard-Pressed European Settlers",code:"8d3",desc:"The key characteristic of this subgroup is the higher proportion of residents who were born in new EU countries compared with the parent group, and a younger age structure. Main language not English or Welsh is also more prevalent. Households in this subgroup are more likely to live in privately rented accommodation when compared with the parent group. Unemployment is marginally lower than for the parent group, with those in employment more likely to travel to work by walking or cycling, and employed in agriculture and manufacturing related industries",supergroup:"8",group:"d",subgroup:"3"}];
/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
const Eae="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function Iae(e,t,i){const r=i||(e=>Array.prototype.slice.call(e));let n=!1,o=[];return function(...i){o=r(i),n||(n=!0,Eae.call(window,(()=>{n=!1,e.apply(t,o)})))}}const Cae=e=>"start"===e?"left":"end"===e?"right":"center",Oae=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2;function Aae(){}const Pae=function(){let e=0;return function(){return e++}}();function Rae(e){return null==e}function Lae(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function Dae(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const Nae=e=>("number"==typeof e||e instanceof Number)&&isFinite(+e);function Fae(e,t){return Nae(e)?e:t}function jae(e,t){return void 0===e?t:e}const $ae=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Vae(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function zae(e,t,i,r){let n,o,s;if(Lae(e))if(o=e.length,r)for(n=o-1;n>=0;n--)t.call(i,e[n],n);else for(n=0;n<o;n++)t.call(i,e[n],n);else if(Dae(e))for(s=Object.keys(e),o=s.length,n=0;n<o;n++)t.call(i,e[s[n]],s[n])}function Uae(e,t){let i,r,n,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,r=e.length;i<r;++i)if(n=e[i],o=t[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function qae(e){if(Lae(e))return e.map(qae);if(Dae(e)){const t=Object.create(null),i=Object.keys(e),r=i.length;let n=0;for(;n<r;++n)t[i[n]]=qae(e[i[n]]);return t}return e}function Gae(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Bae(e,t,i,r){if(!Gae(e))return;const n=t[e],o=i[e];Dae(n)&&Dae(o)?Wae(n,o,r):t[e]=qae(o)}function Wae(e,t,i){const r=Lae(t)?t:[t],n=r.length;if(!Dae(e))return e;const o=(i=i||{}).merger||Bae;for(let s=0;s<n;++s){if(t=r[s],!Dae(t))continue;const n=Object.keys(t);for(let r=0,s=n.length;r<s;++r)o(n[r],e,t,i)}return e}function Hae(e,t){return Wae(e,t,{merger:Jae})}function Jae(e,t,i){if(!Gae(e))return;const r=t[e],n=i[e];Dae(r)&&Dae(n)?Hae(r,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=qae(n))}function Yae(e,t){const i=e.indexOf(".",t);return-1===i?e.length:i}function Zae(e,t){if(""===t)return e;let i=0,r=Yae(t,i);for(;e&&r>i;)e=e[t.substr(i,r-i)],i=r+1,r=Yae(t,i);return e}function Kae(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Xae=e=>void 0!==e,Qae=e=>"function"==typeof e,ele=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};const tle=Math.PI,ile=2*tle,rle=ile+tle,nle=Number.POSITIVE_INFINITY,ole=tle/180,sle=tle/2,ale=tle/4,lle=2*tle/3,cle=Math.log10,ule=Math.sign;function hle(e){const t=Math.round(e);e=ple(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(cle(e))),r=e/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function dle(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ple(e,t,i){return Math.abs(e-t)<i}function fle(e,t,i){let r,n,o;for(r=0,n=e.length;r<n;r++)o=e[r][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function mle(e){return e*(tle/180)}function gle(e){return e*(180/tle)}function yle(e){if(!Nae(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function vle(e,t){const i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o<-.5*tle&&(o+=ile),{angle:o,distance:n}}function ble(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wle(e,t){return(e-t+rle)%ile-tle}function _le(e){return(e%ile+ile)%ile}function xle(e,t,i,r){const n=_le(e),o=_le(t),s=_le(i),a=_le(o-n),l=_le(s-n),c=_le(n-o),u=_le(n-s);return n===o||n===s||r&&o===s||a>l&&c<u}function Sle(e,t,i){return Math.max(t,Math.min(i,e))}function kle(e,t,i,r=1e-6){return e>=Math.min(t,i)-r&&e<=Math.max(t,i)+r}const Mle=e=>0===e||1===e,Tle=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ile/i),Ele=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ile/i)+1,Ile={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*sle),easeOutSine:e=>Math.sin(e*sle),easeInOutSine:e=>-.5*(Math.cos(tle*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Mle(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Mle(e)?e:Tle(e,.075,.3),easeOutElastic:e=>Mle(e)?e:Ele(e,.075,.3),easeInOutElastic(e){const t=.1125;return Mle(e)?e:e<.5?.5*Tle(2*e,t,.45):.5+.5*Ele(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Ile.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*Ile.easeInBounce(2*e):.5*Ile.easeOutBounce(2*e-1)+.5},Cle={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ole="0123456789ABCDEF",Ale=e=>Ole[15&e],Ple=e=>Ole[(240&e)>>4]+Ole[15&e],Rle=e=>(240&e)>>4==(15&e);function Lle(e){var t=function(e){return Rle(e.r)&&Rle(e.g)&&Rle(e.b)&&Rle(e.a)}(e)?Ale:Ple;return e?"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):""):e}function Dle(e){return e+.5|0}const Nle=(e,t,i)=>Math.max(Math.min(e,i),t);function Fle(e){return Nle(Dle(2.55*e),0,255)}function jle(e){return Nle(Dle(255*e),0,255)}function $le(e){return Nle(Dle(e/2.55)/100,0,1)}function Vle(e){return Nle(Dle(100*e),0,100)}const zle=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ule=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qle(e,t,i){const r=t*Math.min(i,1-i),n=(t,n=(t+e/30)%12)=>i-r*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function Gle(e,t,i){const r=(r,n=(r+e/60)%6)=>i-i*t*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function Ble(e,t,i){const r=qle(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)r[n]*=1-t-i,r[n]+=t;return r}function Wle(e){const t=e.r/255,i=e.g/255,r=e.b/255,n=Math.max(t,i,r),o=Math.min(t,i,r),s=(n+o)/2;let a,l,c;return n!==o&&(c=n-o,l=s>.5?c/(2-n-o):c/(n+o),a=n===t?(i-r)/c+(i<r?6:0):n===i?(r-t)/c+2:(t-i)/c+4,a=60*a+.5),[0|a,l||0,s]}function Hle(e,t,i,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,r)).map(jle)}function Jle(e,t,i){return Hle(qle,e,t,i)}function Yle(e){return(e%360+360)%360}function Zle(e){const t=Ule.exec(e);let i,r=255;if(!t)return;t[5]!==i&&(r=t[6]?Fle(+t[5]):jle(+t[5]));const n=Yle(+t[2]),o=+t[3]/100,s=+t[4]/100;return i="hwb"===t[1]?function(e,t,i){return Hle(Ble,e,t,i)}(n,o,s):"hsv"===t[1]?function(e,t,i){return Hle(Gle,e,t,i)}(n,o,s):Jle(n,o,s),{r:i[0],g:i[1],b:i[2],a:r}}const Kle={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xle={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Qle;function ece(e){Qle||(Qle=function(){const e={},t=Object.keys(Xle),i=Object.keys(Kle);let r,n,o,s,a;for(r=0;r<t.length;r++){for(s=a=t[r],n=0;n<i.length;n++)o=i[n],a=a.replace(o,Kle[o]);o=parseInt(Xle[s],16),e[a]=[o>>16&255,o>>8&255,255&o]}return e}(),Qle.transparent=[0,0,0,0]);const t=Qle[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}function tce(e,t,i){if(e){let r=Wle(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*i,0===t?360:1)),r=Jle(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function ice(e,t){return e?Object.assign(t||{},e):e}function rce(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=jle(e[3]))):(t=ice(e,{r:0,g:0,b:0,a:1})).a=jle(t.a),t}function nce(e){return"r"===e.charAt(0)?function(e){const t=zle.exec(e);let i,r,n,o=255;if(t){if(t[7]!==i){const e=+t[7];o=255&(t[8]?Fle(e):255*e)}return i=+t[1],r=+t[3],n=+t[5],i=255&(t[2]?Fle(i):i),r=255&(t[4]?Fle(r):r),n=255&(t[6]?Fle(n):n),{r:i,g:r,b:n,a:o}}}(e):Zle(e)}class oce{constructor(e){if(e instanceof oce)return e;const t=typeof e;let i;var r,n,o;"object"===t?i=rce(e):"string"===t&&(o=(r=e).length,"#"===r[0]&&(4===o||5===o?n={r:255&17*Cle[r[1]],g:255&17*Cle[r[2]],b:255&17*Cle[r[3]],a:5===o?17*Cle[r[4]]:255}:7!==o&&9!==o||(n={r:Cle[r[1]]<<4|Cle[r[2]],g:Cle[r[3]]<<4|Cle[r[4]],b:Cle[r[5]]<<4|Cle[r[6]],a:9===o?Cle[r[7]]<<4|Cle[r[8]]:255})),i=n||ece(e)||nce(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ice(this._rgb);return e&&(e.a=$le(e.a)),e}set rgb(e){this._rgb=rce(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${$le(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):this._rgb}hexString(){return this._valid?Lle(this._rgb):this._rgb}hslString(){return this._valid?function(e){if(!e)return;const t=Wle(e),i=t[0],r=Vle(t[1]),n=Vle(t[2]);return e.a<255?`hsla(${i}, ${r}%, ${n}%, ${$le(e.a)})`:`hsl(${i}, ${r}%, ${n}%)`}(this._rgb):this._rgb}mix(e,t){const i=this;if(e){const r=i.rgb,n=e.rgb;let o;const s=t===o?.5:t,a=2*s-1,l=r.a-n.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,r.r=255&c*r.r+o*n.r+.5,r.g=255&c*r.g+o*n.g+.5,r.b=255&c*r.b+o*n.b+.5,r.a=s*r.a+(1-s)*n.a,i.rgb=r}return i}clone(){return new oce(this.rgb)}alpha(e){return this._rgb.a=jle(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Dle(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tce(this._rgb,2,e),this}darken(e){return tce(this._rgb,2,-e),this}saturate(e){return tce(this._rgb,1,e),this}desaturate(e){return tce(this._rgb,1,-e),this}rotate(e){return function(e,t){var i=Wle(e);i[0]=Yle(i[0]+t),i=Jle(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}function sce(e){return new oce(e)}const ace=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function lce(e){return ace(e)?e:sce(e)}function cce(e){return ace(e)?e:sce(e).saturate(.5).darken(.1).hexString()}const uce=Object.create(null),hce=Object.create(null);function dce(e,t){if(!t)return e;const i=t.split(".");for(let t=0,r=i.length;t<r;++t){const r=i[t];e=e[r]||(e[r]=Object.create(null))}return e}function pce(e,t,i){return"string"==typeof t?Wae(dce(e,t),i):Wae(dce(e,""),t)}var fce=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>cce(t.backgroundColor),this.hoverBorderColor=(e,t)=>cce(t.borderColor),this.hoverColor=(e,t)=>cce(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return pce(this,e,t)}get(e){return dce(this,e)}describe(e,t){return pce(hce,e,t)}override(e,t){return pce(uce,e,t)}route(e,t,i,r){const n=dce(this,e),o=dce(this,i),s="_"+t;Object.defineProperties(n,{[s]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=o[r];return Dae(e)?Object.assign({},t,e):jae(e,t)},set(e){this[s]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function mce(e,t,i,r,n){let o=t[n];return o||(o=t[n]=e.measureText(n).width,i.push(n)),o>r&&(r=o),r}function gce(e,t,i,r){let n=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(n=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const a=i.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=i[l],null!=h&&!0!==Lae(h))s=mce(e,n,o,s,h);else if(Lae(h))for(c=0,u=h.length;c<u;c++)d=h[c],null==d||Lae(d)||(s=mce(e,n,o,s,d));e.restore();const p=o.length/2;if(p>i.length){for(l=0;l<p;l++)delete n[o[l]];o.splice(0,p)}return s}function yce(e,t,i){const r=e.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((t-n)*r)/r+n}function vce(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function bce(e,t,i,r){let n,o,s,a,l;const c=t.pointStyle,u=t.rotation,h=t.radius;let d=(u||0)*ole;if(c&&"object"==typeof c&&(n=c.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return e.save(),e.translate(i,r),e.rotate(d),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void e.restore();if(!(isNaN(h)||h<=0)){switch(e.beginPath(),c){default:e.arc(i,r,h,0,ile),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(d)*h,r-Math.cos(d)*h),d+=lle,e.lineTo(i+Math.sin(d)*h,r-Math.cos(d)*h),d+=lle,e.lineTo(i+Math.sin(d)*h,r-Math.cos(d)*h),e.closePath();break;case"rectRounded":l=.516*h,a=h-l,o=Math.cos(d+ale)*a,s=Math.sin(d+ale)*a,e.arc(i-o,r-s,l,d-tle,d-sle),e.arc(i+s,r-o,l,d-sle,d),e.arc(i+o,r+s,l,d,d+sle),e.arc(i-s,r+o,l,d+sle,d+tle),e.closePath();break;case"rect":if(!u){a=Math.SQRT1_2*h,e.rect(i-a,r-a,2*a,2*a);break}d+=ale;case"rectRot":o=Math.cos(d)*h,s=Math.sin(d)*h,e.moveTo(i-o,r-s),e.lineTo(i+s,r-o),e.lineTo(i+o,r+s),e.lineTo(i-s,r+o),e.closePath();break;case"crossRot":d+=ale;case"cross":o=Math.cos(d)*h,s=Math.sin(d)*h,e.moveTo(i-o,r-s),e.lineTo(i+o,r+s),e.moveTo(i+s,r-o),e.lineTo(i-s,r+o);break;case"star":o=Math.cos(d)*h,s=Math.sin(d)*h,e.moveTo(i-o,r-s),e.lineTo(i+o,r+s),e.moveTo(i+s,r-o),e.lineTo(i-s,r+o),d+=ale,o=Math.cos(d)*h,s=Math.sin(d)*h,e.moveTo(i-o,r-s),e.lineTo(i+o,r+s),e.moveTo(i+s,r-o),e.lineTo(i-s,r+o);break;case"line":o=Math.cos(d)*h,s=Math.sin(d)*h,e.moveTo(i-o,r-s),e.lineTo(i+o,r+s);break;case"dash":e.moveTo(i,r),e.lineTo(i+Math.cos(d)*h,r+Math.sin(d)*h)}e.fill(),t.borderWidth>0&&e.stroke()}}function wce(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function _ce(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function xce(e){e.restore()}function Sce(e,t,i,r,n){if(!t)return e.lineTo(i.x,i.y);if("middle"===n){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else"after"===n!=!!r?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function kce(e,t,i,r){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function Mce(e,t,i,r,n,o={}){const s=Lae(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(e.save(),e.font=n.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);Rae(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<s.length;++l)c=s[l],a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Rae(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,i,r,o.maxWidth)),e.fillText(c,i,r,o.maxWidth),Tce(e,i,r,c,o),r+=n.lineHeight;e.restore()}function Tce(e,t,i,r,n){if(n.strikethrough||n.underline){const o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function Ece(e,t){const{x:i,y:r,w:n,h:o,radius:s}=t;e.arc(i+s.topLeft,r+s.topLeft,s.topLeft,-sle,tle,!0),e.lineTo(i,r+o-s.bottomLeft),e.arc(i+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,tle,sle,!0),e.lineTo(i+n-s.bottomRight,r+o),e.arc(i+n-s.bottomRight,r+o-s.bottomRight,s.bottomRight,sle,0,!0),e.lineTo(i+n,r+s.topRight),e.arc(i+n-s.topRight,r+s.topRight,s.topRight,0,-sle,!0),e.lineTo(i+s.topLeft,r)}const Ice=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Cce=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Oce(e,t){const i=(""+e).match(Ice);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}const Ace=e=>+e||0;function Pce(e,t){const i={},r=Dae(t),n=r?Object.keys(t):t,o=Dae(e)?r?i=>jae(e[i],e[t[i]]):t=>e[t]:()=>e;for(const e of n)i[e]=Ace(o(e));return i}function Rce(e){return Pce(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Lce(e){return Pce(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Dce(e){const t=Rce(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Nce(e,t){e=e||{},t=t||fce.font;let i=jae(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let r=jae(e.style,t.style);r&&!(""+r).match(Cce)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const n={family:jae(e.family,t.family),lineHeight:Oce(jae(e.lineHeight,t.lineHeight),i),size:i,style:r,weight:jae(e.weight,t.weight),string:""};return n.string=function(e){return!e||Rae(e.size)||Rae(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n}function Fce(e,t,i,r){let n,o,s,a=!0;for(n=0,o=e.length;n<o;++n)if(s=e[n],void 0!==s&&(void 0!==t&&"function"==typeof s&&(s=s(t),a=!1),void 0!==i&&Lae(s)&&(s=s[i%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function jce(e,t){return Object.assign(Object.create(e),t)}function $ce(e,t,i){i=i||(i=>e[i]<t);let r,n=e.length-1,o=0;for(;n-o>1;)r=o+n>>1,i(r)?o=r:n=r;return{lo:o,hi:n}}const Vce=(e,t,i)=>$ce(e,i,(r=>e[r][t]<i)),zce=(e,t,i)=>$ce(e,i,(r=>e[r][t]>=i));const Uce=["push","pop","shift","splice","unshift"];function qce(e,t){const i=e._chartjs;if(!i)return;const r=i.listeners,n=r.indexOf(t);-1!==n&&r.splice(n,1),r.length>0||(Uce.forEach((t=>{delete e[t]})),delete e._chartjs)}function Gce(e){const t=new Set;let i,r;for(i=0,r=e.length;i<r;++i)t.add(e[i]);return t.size===r?e:Array.from(t)}function Bce(e,t=[""],i=e,r,n=(()=>e[0])){Xae(r)||(r=iue("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:n,override:n=>Bce([n,...e],t,i,r)};return new Proxy(o,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,r)=>Zce(i,r,(()=>function(e,t,i,r){let n;for(const o of t)if(n=iue(Jce(o,e),i),Xae(n))return Yce(e,n)?eue(i,r,e,n):n}(r,t,e,i))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>rue(e).includes(t),ownKeys:e=>rue(e),set(e,t,i){const r=e._storage||(e._storage=n());return e[t]=r[t]=i,delete e._keys,!0}})}function Wce(e,t,i,r){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Hce(e,r),setContext:t=>Wce(e,t,i,r),override:n=>Wce(e.override(n),t,i,r)};return new Proxy(n,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>Zce(e,t,(()=>function(e,t,i){const{_proxy:r,_context:n,_subProxy:o,_descriptors:s}=e;let a=r[t];Qae(a)&&s.isScriptable(t)&&(a=function(e,t,i,r){const{_proxy:n,_context:o,_subProxy:s,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e),t=t(o,s||r),a.delete(e),Yce(e,t)&&(t=eue(n._scopes,n,e,t));return t}(t,a,e,i));Lae(a)&&a.length&&(a=function(e,t,i,r){const{_proxy:n,_context:o,_subProxy:s,_descriptors:a}=i;if(Xae(o.index)&&r(e))t=t[o.index%t.length];else if(Dae(t[0])){const i=t,r=n._scopes.filter((e=>e!==i));t=[];for(const l of i){const i=eue(r,n,e,l);t.push(Wce(i,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable));Yce(t,a)&&(a=Wce(a,n,o&&o[t],s));return a}(e,t,i))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,r)=>(e[i]=r,delete t[i],!0)})}function Hce(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:r=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:r,isScriptable:Qae(i)?i:()=>i,isIndexable:Qae(r)?r:()=>r}}const Jce=(e,t)=>e?e+Kae(t):t,Yce=(e,t)=>Dae(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Zce(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=i();return e[t]=r,r}function Kce(e,t,i){return Qae(e)?e(t,i):e}const Xce=(e,t)=>!0===e?t:"string"==typeof e?Zae(t,e):void 0;function Qce(e,t,i,r,n){for(const o of t){const t=Xce(i,o);if(t){e.add(t);const o=Kce(t._fallback,i,n);if(Xae(o)&&o!==i&&o!==r)return o}else if(!1===t&&Xae(r)&&i!==r)return null}return!1}function eue(e,t,i,r){const n=t._rootScopes,o=Kce(t._fallback,i,r),s=[...e,...n],a=new Set;a.add(r);let l=tue(a,s,i,o||i,r);return null!==l&&((!Xae(o)||o===i||(l=tue(a,s,o,l,r),null!==l))&&Bce(Array.from(a),[""],n,o,(()=>function(e,t,i){const r=e._getTarget();t in r||(r[t]={});const n=r[t];if(Lae(n)&&Dae(i))return i;return n}(t,i,r))))}function tue(e,t,i,r,n){for(;i;)i=Qce(e,t,i,r,n);return i}function iue(e,t){for(const i of t){if(!i)continue;const t=i[e];if(Xae(t))return t}}function rue(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}const nue=Number.EPSILON||1e-14,oue=(e,t)=>t<e.length&&!e[t].skip&&e[t],sue=e=>"x"===e?"y":"x";function aue(e,t,i,r){const n=e.skip?t:e,o=t,s=i.skip?t:i,a=ble(o,n),l=ble(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:o.x-h*(s.x-n.x),y:o.y-h*(s.y-n.y)},next:{x:o.x+d*(s.x-n.x),y:o.y+d*(s.y-n.y)}}}function lue(e,t="x"){const i=sue(t),r=e.length,n=Array(r).fill(0),o=Array(r);let s,a,l,c=oue(e,0);for(s=0;s<r;++s)if(a=l,l=c,c=oue(e,s+1),l){if(c){const e=c[t]-l[t];n[s]=0!==e?(c[i]-l[i])/e:0}o[s]=a?c?ule(n[s-1])!==ule(n[s])?0:(n[s-1]+n[s])/2:n[s-1]:n[s]}!function(e,t,i){const r=e.length;let n,o,s,a,l,c=oue(e,0);for(let u=0;u<r-1;++u)l=c,c=oue(e,u+1),l&&c&&(ple(t[u],0,nue)?i[u]=i[u+1]=0:(n=i[u]/t[u],o=i[u+1]/t[u],a=Math.pow(n,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),i[u]=n*s*t[u],i[u+1]=o*s*t[u])))}(e,n,o),function(e,t,i="x"){const r=sue(i),n=e.length;let o,s,a,l=oue(e,0);for(let c=0;c<n;++c){if(s=a,a=l,l=oue(e,c+1),!a)continue;const n=a[i],u=a[r];s&&(o=(n-s[i])/3,a[`cp1${i}`]=n-o,a[`cp1${r}`]=u-o*t[c]),l&&(o=(l[i]-n)/3,a[`cp2${i}`]=n+o,a[`cp2${r}`]=u+o*t[c])}}(e,o,t)}function cue(e,t,i){return Math.max(Math.min(e,i),t)}function uue(e,t,i,r,n){let o,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)lue(e,n);else{let i=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],l=aue(i,a,e[Math.min(o+1,s-(r?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}t.capBezierPoints&&function(e,t){let i,r,n,o,s,a=wce(e[0],t);for(i=0,r=e.length;i<r;++i)s=o,o=a,a=i<r-1&&wce(e[i+1],t),o&&(n=e[i],s&&(n.cp1x=cue(n.cp1x,t.left,t.right),n.cp1y=cue(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=cue(n.cp2x,t.left,t.right),n.cp2y=cue(n.cp2y,t.top,t.bottom)))}(e,i)}function hue(){return"undefined"!=typeof window&&"undefined"!=typeof document}function due(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function pue(e,t,i){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[i])):r=e,r}const fue=e=>window.getComputedStyle(e,null);const mue=["top","right","bottom","left"];function gue(e,t,i){const r={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=mue[n];r[o]=parseFloat(e[t+"-"+o+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function yue(e,t){const{canvas:i,currentDevicePixelRatio:r}=t,n=fue(i),o="border-box"===n.boxSizing,s=gue(n,"padding"),a=gue(n,"border","width"),{x:l,y:c,box:u}=function(e,t){const i=e.native||e,r=i.touches,n=r&&r.length?r[0]:i,{offsetX:o,offsetY:s}=n;let a,l,c=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(o,s,i.target))a=o,l=s;else{const e=t.getBoundingClientRect();a=n.clientX-e.left,l=n.clientY-e.top,c=!0}return{x:a,y:l,box:c}}(e,i),h=s.left+(u&&a.left),d=s.top+(u&&a.top);let{width:p,height:f}=t;return o&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-h)/p*i.width/r),y:Math.round((c-d)/f*i.height/r)}}const vue=e=>Math.round(10*e)/10;function bue(e,t,i,r){const n=fue(e),o=gue(n,"margin"),s=pue(n.maxWidth,e,"clientWidth")||nle,a=pue(n.maxHeight,e,"clientHeight")||nle,l=function(e,t,i){let r,n;if(void 0===t||void 0===i){const o=due(e);if(o){const e=o.getBoundingClientRect(),s=fue(o),a=gue(s,"border","width"),l=gue(s,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,r=pue(s.maxWidth,o,"clientWidth"),n=pue(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:r||nle,maxHeight:n||nle}}(e,t,i);let{width:c,height:u}=l;if("content-box"===n.boxSizing){const e=gue(n,"border","width"),t=gue(n,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-o.width),u=Math.max(0,r?Math.floor(c/r):u-o.height),c=vue(Math.min(c,s,l.maxWidth)),u=vue(Math.min(u,a,l.maxHeight)),c&&!u&&(u=vue(c/2)),{width:c,height:u}}function wue(e,t,i){const r=t||1,n=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=n/r,e.width=o/r;const s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==n||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=n,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const _ue=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function xue(e,t){const i=function(e,t){return fue(e).getPropertyValue(t)}(e,t),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Sue(e,t,i,r){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function kue(e,t,i,r){return{x:e.x+i*(t.x-e.x),y:"middle"===r?i<.5?e.y:t.y:"after"===r?i<1?e.y:t.y:i>0?t.y:e.y}}function Mue(e,t,i,r){const n={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=Sue(e,n,i),a=Sue(n,o,i),l=Sue(o,t,i),c=Sue(s,a,i),u=Sue(a,l,i);return Sue(c,u,i)}const Tue=new Map;function Eue(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let r=Tue.get(i);return r||(r=new Intl.NumberFormat(e,t),Tue.set(i,r)),r}(t,i).format(e)}function Iue(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Cue(e,t){let i,r;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,r=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Oue(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Aue(e){return"angle"===e?{between:xle,compare:wle,normalize:_le}:{between:kle,compare:(e,t)=>e-t,normalize:e=>e}}function Pue({start:e,end:t,count:i,loop:r,style:n}){return{start:e%i,end:t%i,loop:r&&(t-e+1)%i==0,style:n}}function Rue(e,t,i){if(!i)return[e];const{property:r,start:n,end:o}=i,s=t.length,{compare:a,between:l,normalize:c}=Aue(r),{start:u,end:h,loop:d,style:p}=function(e,t,i){const{property:r,start:n,end:o}=i,{between:s,normalize:a}=Aue(r),l=t.length;let c,u,{start:h,end:d,loop:p}=e;if(p){for(h+=l,d+=l,c=0,u=l;c<u&&s(a(t[h%l][r]),n,o);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:p,style:e.style}}(e,t,i),f=[];let m,g,y,v=!1,b=null;const w=()=>v||l(n,y,m)&&0!==a(n,y),_=()=>!v||0===a(o,m)||l(o,y,m);for(let e=u,i=u;e<=h;++e)g=t[e%s],g.skip||(m=c(g[r]),m!==y&&(v=l(m,n,o),null===b&&w()&&(b=0===a(m,n)?e:i),null!==b&&_()&&(f.push(Pue({start:b,end:e,loop:d,count:s,style:p})),b=null),i=e,y=m));return null!==b&&f.push(Pue({start:b,end:h,loop:d,count:s,style:p})),f}function Lue(e,t,i,r){return r&&r.setContext&&i?function(e,t,i,r){const n=e._chart.getContext(),o=Due(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=i.length,c=[];let u=o,h=t[0].start,d=h;function p(e,t,r,n){const o=a?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=o;for(;i[t%l].skip;)t+=o;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:r,style:n}),u=n,h=t%l)}}for(const e of t){h=a?h:e.start;let t,o=i[h%l];for(d=h+1;d<=e.end;d++){const a=i[d%l];t=Due(r.setContext(jce(n,{type:"segment",p0:o,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),Nue(t,u)&&p(h,d-1,e.loop,u),o=a,u=t}h<d-1&&p(h,d-1,e.loop,u)}return c}(e,t,i,r):t}function Due(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Nue(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}
/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */var Fue=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const n=t.listeners[r],o=t.duration;n.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Eae.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((i,r)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,s=n.length-1,a=!1;for(;s>=0;--s)o=n[s],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(e),a=!0):(n[s]=n[n.length-1],n.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),n.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=n.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const jue={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const r=lce(e||"transparent"),n=r.valid&&lce(t||"transparent");return n&&n.valid?n.mix(r,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class $ue{constructor(e,t,i,r){const n=t[i];r=Fce([e.to,r,n,e.from]);const o=Fce([e.from,n,r]);this._active=!0,this._fn=e.fn||jue[e.type||typeof o],this._easing=Ile[e.easing]||Ile.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=Fce([e.to,t,r,e.from]),this._from=Fce([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,n=this._from,o=this._loop,s=this._to;let a;if(this._active=n!==s&&(o||t<i),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=n:(a=t/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(n,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,i)=>{e.push({res:t,rej:i})}))}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}fce.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Vue=Object.keys(fce.animation);fce.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),fce.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),fce.describe("animations",{_fallback:"animation"}),fce.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class zue{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Dae(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Dae(r))return;const n={};for(const e of Vue)n[e]=r[e];(Lae(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&t.has(e)||t.set(e,n)}))}))}_animateOptions(e,t){const i=t.options,r=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!r)return[];const n=this._createAnimations(r,i);return i.$shared&&function(e,t){const i=[],r=Object.keys(t);for(let t=0;t<r.length;t++){const n=e[r[t]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}(e.options.$animations,i).then((()=>{e.options=i}),(()=>{})),n}_createAnimations(e,t){const i=this._properties,r=[],n=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=n[l];const h=i.get(l);if(u){if(h&&u.active()){u.update(h,c,s);continue}u.cancel()}h&&h.duration?(n[l]=u=new $ue(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(Fue.add(this._chart,i),!0):void 0}}function Uue(e,t){const i=e&&e.options||{},r=i.reverse,n=void 0===i.min?t:0,o=void 0===i.max?t:0;return{start:r?o:n,end:r?n:o}}function que(e,t){const i=[],r=e._getSortedDatasetMetas(t);let n,o;for(n=0,o=r.length;n<o;++n)i.push(r[n].index);return i}function Gue(e,t,i,r={}){const n=e.keys,o="single"===r.mode;let s,a,l,c;if(null!==t){for(s=0,a=n.length;s<a;++s){if(l=+n[s],l===i){if(r.all)continue;break}c=e.values[l],Nae(c)&&(o||0===t||ule(t)===ule(c))&&(t+=c)}return t}}function Bue(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function Wue(e,t,i){const r=e[t]||(e[t]={});return r[i]||(r[i]={})}function Hue(e,t,i,r){for(const n of t.getMatchingVisibleMetas(r).reverse()){const t=e[n.index];if(i&&t>0||!i&&t<0)return n.index}return null}function Jue(e,t){const{chart:i,_cachedMeta:r}=e,n=i._stacks||(i._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,u=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(o,s,r),h=t.length;let d;for(let e=0;e<h;++e){const i=t[e],{[l]:o,[c]:h}=i;d=(i._stacks||(i._stacks={}))[c]=Wue(n,u,o),d[a]=h,d._top=Hue(d,s,!0,r.type),d._bottom=Hue(d,s,!1,r.type)}}function Yue(e,t){const i=e.scales;return Object.keys(i).filter((e=>i[e].axis===t)).shift()}function Zue(e,t){const i=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][i])return;delete t[r][i]}}}const Kue=e=>"reset"===e||"none"===e,Xue=(e,t)=>t?e:Object.assign({},e);class Que{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bue(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Zue(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(e,t,i,r)=>"x"===e?t:"r"===e?r:i,n=t.xAxisID=jae(i.xAxisID,Yue(e,"x")),o=t.yAxisID=jae(i.yAxisID,Yue(e,"y")),s=t.rAxisID=jae(i.rAxisID,Yue(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,n,o,s),c=t.vAxisID=r(a,o,n,s);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&qce(this._data,this),e._stacked&&Zue(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Dae(t))this._data=function(e){const t=Object.keys(e),i=new Array(t.length);let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r],i[r]={x:o,y:e[o]};return i}(t);else if(i!==t){if(i){qce(i,this);const e=this._cachedMeta;Zue(e),e._parsed=[]}t&&Object.isExtensible(t)&&(n=this,(r=t)._chartjs?r._chartjs.listeners.push(n):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),Uce.forEach((e=>{const t="_onData"+Kae(e),i=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...e){const n=i.apply(this,e);return r._chartjs.listeners.forEach((i=>{"function"==typeof i[t]&&i[t](...e)})),n}})})))),this._syncList=[],this._data=t}var r,n}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const n=t._stacked;t._stacked=Bue(t.vScale,t),t.stack!==i.stack&&(r=!0,Zue(t),t.stack=i.stack),this._resyncElements(e),(r||n!==t._stacked)&&Jue(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:n,_stacked:o}=i,s=n.axis;let a,l,c,u=0===e&&t===r.length||i._sorted,h=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=r,i._sorted=!0,c=r;else{c=Lae(r[e])?this.parseArrayData(i,r,e,t):Dae(r[e])?this.parseObjectData(i,r,e,t):this.parsePrimitiveData(i,r,e,t);const n=()=>null===l[s]||h&&l[s]<h[s];for(a=0;a<t;++a)i._parsed[a+e]=l=c[a],u&&(n()&&(u=!1),h=l);i._sorted=u}o&&Jue(this,c)}parsePrimitiveData(e,t,i,r){const{iScale:n,vScale:o}=e,s=n.axis,a=o.axis,l=n.getLabels(),c=n===o,u=new Array(r);let h,d,p;for(h=0,d=r;h<d;++h)p=h+i,u[h]={[s]:c||n.parse(l[p],p),[a]:o.parse(t[p],p)};return u}parseArrayData(e,t,i,r){const{xScale:n,yScale:o}=e,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+i,u=t[c],s[a]={x:n.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(e,t,i,r){const{xScale:n,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+i,d=t[h],l[c]={x:n.parse(Zae(d,s),h),y:o.parse(Zae(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,n=this._cachedMeta,o=t[e.axis];return Gue({keys:que(r,!0),values:t._stacks[e.axis]},o,n.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const n=i[t.axis];let o=null===n?NaN:n;const s=r&&i._stacks[t.axis];r&&s&&(r.values=s,o=Gue(r,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,n=i._sorted&&e===i.iScale,o=r.length,s=this._getOtherScale(e),a=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:que(i,!0),values:null})(t,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:i,minDefined:r,maxDefined:n}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(s);let h,d;function p(){d=r[h];const t=d[s.axis];return!Nae(d[e.axis])||c>t||u<t}for(h=0;h<o&&(p()||(this.updateRangeFromParsed(l,e,d,a),!n));++h);if(n)for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,n,o;for(r=0,n=t.length;r<n;++r)o=t[r][e.axis],Nae(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,n=this.getParsed(e);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,r,n;return Dae(e)?(t=e.top,i=e.right,r=e.bottom,n=e.left):t=i=r=n=e,{top:t,right:i,bottom:r,left:n,disabled:!1===e}}(jae(this.options.clip,function(e,t,i){if(!1===i)return!1;const r=Uue(e,i),n=Uue(t,i);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],n=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,n,s,a),c=s;c<s+a;++c){const t=r[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,n))}for(c=0;c<o.length;++c)o[c].draw(e,n)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];n=t.$context||(t.$context=function(e,t,i){return jce(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),n.parsed=this.getParsed(e),n.raw=r.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(e,t){return jce(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=i,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r="active"===t,n=this._cachedDataOpts,o=e+"-"+t,s=n[o],a=this.enableOptionSharing&&Xae(i);if(s)return Xue(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(fce.elements[e]),p=l.resolveNamedOptions(h,d,(()=>this.getContext(i,r)),u);return p.$shared&&(p.$shared=a,n[o]=Object.freeze(Xue(p,a))),p}_resolveAnimations(e,t,i){const r=this.chart,n=this._cachedDataOpts,o=`animation-${t}`,s=n[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,n=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),n);a=r.createResolver(o,this.getContext(e,i,t))}const l=new zue(r,a&&a.animations);return a&&a._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Kue(e)||this.chart._animationsDisabled}updateElement(e,t,i,r){Kue(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!Kue(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const n=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];const r=i.length,n=t.length,o=Math.min(n,r);o&&this.parse(0,o),n>r?this._insertElements(r,n-r,e):n<r&&this._removeElements(n,r-n)}_insertElements(e,t,i=!0){const r=this._cachedMeta,n=r.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(n),s=e;s<o;++s)n[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),i&&this.updateElements(n,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Zue(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ehe(e){const t=e.iScale,i=function(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,n=i.length;t<n;t++)r=r.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=Gce(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,n,o,s,a=t._length;const l=()=>{32767!==o&&-32768!==o&&(Xae(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,n=i.length;r<n;++r)o=t.getPixelForValue(i[r]),l();for(s=void 0,r=0,n=t.ticks.length;r<n;++r)o=t.getPixelForTick(r),l();return a}function the(e,t,i,r){return Lae(e)?function(e,t,i,r){const n=i.parse(e[0],r),o=i.parse(e[1],r),s=Math.min(n,o),a=Math.max(n,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:o,min:s,max:a}}(e,t,i,r):t[i.axis]=i.parse(e,r),t}function ihe(e,t,i,r){const n=e.iScale,o=e.vScale,s=n.getLabels(),a=n===o,l=[];let c,u,h,d;for(c=i,u=i+r;c<u;++c)d=t[c],h={},h[n.axis]=a||n.parse(s[c],c),l.push(the(d,h,o,c));return l}function rhe(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function nhe(e,t,i,r){let n=t.borderSkipped;const o={};if(!n)return void(e.borderSkipped=o);const{start:s,end:a,reverse:l,top:c,bottom:u}=function(e){let t,i,r,n,o;return e.horizontal?(t=e.base>e.x,i="left",r="right"):(t=e.base<e.y,i="bottom",r="top"),t?(n="end",o="start"):(n="start",o="end"),{start:i,end:r,reverse:t,top:n,bottom:o}}(e);"middle"===n&&i&&(e.enableBorderRadius=!0,(i._top||0)===r?n=c:(i._bottom||0)===r?n=u:(o[ohe(u,s,a,l)]=!0,n=c)),o[ohe(n,s,a,l)]=!0,e.borderSkipped=o}function ohe(e,t,i,r){var n,o,s;return r?(s=i,e=she(e=(n=e)===(o=t)?s:n===s?o:n,i,t)):e=she(e,t,i),e}function she(e,t,i){return"start"===e?t:"end"===e?i:e}function ahe(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?1===i?.33:0:t}Que.defaults={},Que.prototype.datasetElementType=null,Que.prototype.dataElementType=null;class lhe extends Que{parsePrimitiveData(e,t,i,r){return ihe(e,t,i,r)}parseArrayData(e,t,i,r){return ihe(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:n,vScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===n.axis?s:a,c="x"===o.axis?s:a,u=[];let h,d,p,f;for(h=i,d=i+r;h<d;++h)f=t[h],p={},p[n.axis]=n.parse(Zae(f,l),h),u.push(the(Zae(f,c),p,o,h));return u}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const n=i._custom;n&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,n=this.getParsed(e),o=n._custom,s=rhe(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(n[r.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const n="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),u=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h);this.updateSharedOptions(h,r,u);for(let u=t;u<t+i;u++){const t=this.getParsed(u),i=n||Rae(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(u),p=this._calculateBarIndexPixels(u,c),f=(t._stacks||{})[s.axis],m={horizontal:l,base:i.base,enableBorderRadius:!f||rhe(t._custom)||o===f._top||o===f._bottom,x:l?i.head:p.center,y:l?p.center:i.head,height:l?p.size:Math.abs(i.size),width:l?Math.abs(i.size):p.size};d&&(m.options=h||this.resolveDataElementOptions(u,e[u].active?"active":r));const g=m.options||e[u].options;nhe(m,g,f,o),ahe(m,g,c.ratio),this.updateElement(e[u],u,m,r)}}_getStacks(e,t){const i=this._cachedMeta.iScale,r=i.getMatchingVisibleMetas(this._type),n=i.options.stacked,o=r.length,s=[];let a,l;for(a=0;a<o;++a)if(l=r[a],l.controller.options.grouped){if(void 0!==t){const e=l.controller.getParsed(t)[l.controller._cachedMeta.vScale.axis];if(Rae(e)||isNaN(e))continue}if((!1===n||-1===s.indexOf(l.stack)||void 0===n&&void 0===l.stack)&&s.push(l.stack),l.index===e)break}return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),n=void 0!==t?r.indexOf(t):-1;return-1===n?r.length-1:n}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let n,o;for(n=0,o=t.data.length;n<o;++n)r.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const s=e.barThickness;return{min:s||ehe(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i},options:{base:r,minBarLength:n}}=this,o=r||0,s=this.getParsed(e),a=s._custom,l=rhe(a);let c,u,h=s[t.axis],d=0,p=i?this.applyStack(t,s,i):h;p!==h&&(d=p-h,p=h),l&&(h=a.barStart,p=a.barEnd-a.barStart,0!==h&&ule(h)!==ule(a.barEnd)&&(d=0),d+=h);const f=Rae(r)||l?d:r;let m=t.getPixelForValue(f);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(d+p):m,u=c-m,Math.abs(u)<n&&(u=function(e,t,i){return 0!==e?ule(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(u,t,o)*n,h===o&&(m-=u/2),c=m+u),m===t.getPixelForValue(o)){const e=ule(u)*t.getLineWidthForValue(o)/2;m+=e,u-=e}return{size:u,base:m,head:c,center:c+u/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,n=r.skipNull,o=jae(r.maxBarThickness,1/0);let s,a;if(t.grouped){const i=n?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,i,r){const n=t.pixels,o=n[e];let s=e>0?n[e-1]:null,a=e<n.length-1?n[e+1]:null;const l=i.categoryPercentage;null===s&&(s=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:i.barPercentage,start:c}}(e,t,r,i):function(e,t,i,r){const n=i.barThickness;let o,s;return Rae(n)?(o=t.min*i.categoryPercentage,s=i.barPercentage):(o=n*r,s=1),{chunk:o/r,ratio:s,start:t.pixels[e]-o/2}}(e,t,r,i),c=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=i.getPixelForValue(this.getParsed(e)[i.axis],e),a=Math.min(o,t.min*t.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let n=0;for(;n<r;++n)null!==this.getParsed(n)[t.axis]&&i[n].draw(this._ctx)}}lhe.id="bar",lhe.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},lhe.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class che extends Que{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){const n=super.parsePrimitiveData(e,t,i,r);for(let e=0;e<n.length;e++)n[e]._custom=this.resolveDataElementOptions(e+i).radius;return n}parseArrayData(e,t,i,r){const n=super.parseArrayData(e,t,i,r);for(let e=0;e<n.length;e++){const r=t[i+e];n[e]._custom=jae(r[2],this.resolveDataElementOptions(e+i).radius)}return n}parseObjectData(e,t,i,r){const n=super.parseObjectData(e,t,i,r);for(let e=0;e<n.length;e++){const r=t[i+e];n[e]._custom=jae(r&&r.r&&+r.r,this.resolveDataElementOptions(e+i).radius)}return n}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:i,yScale:r}=t,n=this.getParsed(e),o=i.getLabelForValue(n.x),s=r.getLabelForValue(n.y),a=n._custom;return{label:t.label,value:"("+o+", "+s+(a?", "+a:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){const n="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,a=this.resolveDataElementOptions(t,r),l=this.getSharedOptions(a),c=this.includeOptions(r,l),u=o.axis,h=s.axis;for(let a=t;a<t+i;a++){const t=e[a],i=!n&&this.getParsed(a),l={},d=l[u]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[u]),p=l[h]=n?s.getBasePixel():s.getPixelForValue(i[h]);l.skip=isNaN(d)||isNaN(p),c&&(l.options=this.resolveDataElementOptions(a,t.active?"active":r),n&&(l.options.radius=0)),this.updateElement(t,a,l,r)}this.updateSharedOptions(l,r,a)}resolveDataElementOptions(e,t){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const n=r.radius;return"active"!==t&&(r.radius=0),r.radius+=jae(i&&i._custom,n),r}}che.id="bubble",che.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},che.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class uhe extends Que{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let n,o,s=e=>+i[e];if(Dae(i[e])){const{key:e="value"}=this._parsing;s=t=>+Zae(i[t],e)}for(n=e,o=e+t;n<o;++n)r._parsed[n]=s(n)}}_getRotation(){return mle(this.options.rotation-90)}_getCircumference(){return mle(this.options.circumference)}_getRotationExtents(){let e=ile,t=-ile;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const r=this.chart.getDatasetMeta(i).controller,n=r._getRotation(),o=r._getCircumference();e=Math.min(e,n),t=Math.max(t,n+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,n=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,i){let r=1,n=1,o=0,s=0;if(t<ile){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),p=(e,t,r)=>xle(e,a,l,!0)?1:Math.max(t,t*i,r,r*i),f=(e,t,r)=>xle(e,a,l,!0)?-1:Math.min(t,t*i,r,r*i),m=p(0,c,h),g=p(sle,u,d),y=f(tle,c,h),v=f(tle+sle,u,d);r=(m-y)/2,n=(g-v)/2,o=-(m+y)/2,s=-(g+v)/2}return{ratioX:r,ratioY:n,offsetX:o,offsetY:s}}(d,h,a),y=(i.width-o)/p,v=(i.height-o)/f,b=Math.max(Math.min(y,v)/2,0),w=$ae(this.options.radius,b),_=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,n=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*n/ile)}updateElements(e,t,i,r){const n="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=n&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,p=this.resolveDataElementOptions(t,r),f=this.getSharedOptions(p),m=this.includeOptions(r,f);let g,y=this._getRotation();for(g=0;g<t;++g)y+=this._circumference(g,n);for(g=t;g<t+i;++g){const t=this._circumference(g,n),i=e[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:y,endAngle:y+t,circumference:t,outerRadius:d,innerRadius:h};m&&(o.options=f||this.resolveDataElementOptions(g,i.active?"active":r)),y+=t,this.updateElement(i,g,o,r)}this.updateSharedOptions(f,r,p)}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,r=0;for(i=0;i<t.length;i++){const n=e._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||t[i].hidden||(r+=Math.abs(n))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ile*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=Eue(t._parsed[e],i.options.locale);return{label:r[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,n,o,s,a;if(!e)for(r=0,n=i.data.datasets.length;r<n;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,s=o.controller;break}if(!e)return 0;for(r=0,n=e.length;r<n;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(jae(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}uhe.id="doughnut",uhe.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},uhe.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},uhe.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map(((t,r)=>{const n=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const i=": "+e.formattedValue;return Lae(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}};class hhe extends Que{initialize(){this.enableOptionSharing=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:n}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=function(e,t,i){const r=t.length;let n=0,o=r;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:u,minDefined:h,maxDefined:d}=s.getUserBounds();h&&(n=Sle(Math.min(Vce(a,s.axis,c).lo,i?r:Vce(t,l,s.getPixelForValue(c)).lo),0,r-1)),o=d?Sle(Math.max(Vce(a,s.axis,u).hi+1,i?0:Vce(t,l,s.getPixelForValue(u)).hi+1),n,r)-n:r-n}return{start:n,count:o}}(t,r,o);this._drawStart=s,this._drawCount=a,function(e){const{xScale:t,yScale:i,_scaleRanges:r}=e,n={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!r)return e._scaleRanges=n,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,n),o}(t)&&(s=0,a=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},e),this.updateElements(r,s,a,e)}updateElements(e,t,i,r){const n="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=o.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=dle(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||n||"none"===r;let v=t>0&&this.getParsed(t-1);for(let c=t;c<t+i;++c){const t=e[c],i=this.getParsed(c),f=y?t:{},b=Rae(i[p]),w=f[d]=o.getPixelForValue(i[d],c),_=f[p]=n||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,i,a):i[p],c);f.skip=isNaN(w)||isNaN(_)||b,f.stop=c>0&&i[d]-v[d]>g,m&&(f.parsed=i,f.raw=l.data[c]),h&&(f.options=u||this.resolveDataElementOptions(c,t.active?"active":r)),y||this.updateElement(t,c,f,r),v=i}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const n=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,n,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}hhe.id="line",hhe.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},hhe.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class dhe extends Que{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=Eue(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:n}}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),n=Math.max(r/2,0),o=(n-Math.max(i.cutoutPercentage?n/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,i,r){const n="reset"===r,o=this.chart,s=this.getDataset(),a=o.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,h=l.getIndexAngle(0)-.5*tle;let d,p=h;const f=360/this.countVisibleElements();for(d=0;d<t;++d)p+=this._computeAngle(d,r,f);for(d=t;d<t+i;d++){const t=e[d];let i=p,m=p+this._computeAngle(d,r,f),g=o.getDataVisibility(d)?l.getDistanceFromCenterForValue(s.data[d]):0;p=m,n&&(a.animateScale&&(g=0),a.animateRotate&&(i=m=h));const y={x:c,y:u,innerRadius:0,outerRadius:g,startAngle:i,endAngle:m,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,y,r)}}countVisibleElements(){const e=this.getDataset(),t=this._cachedMeta;let i=0;return t.data.forEach(((t,r)=>{!isNaN(e.data[r])&&this.chart.getDataVisibility(r)&&i++})),i}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?mle(this.resolveDataElementOptions(e,t).angle||i):0}}dhe.id="polarArea",dhe.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},dhe.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map(((t,r)=>{const n=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,lineWidth:n.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class phe extends uhe{}phe.id="pie",phe.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class fhe extends Que{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}update(e){const t=this._cachedMeta,i=t.dataset,r=t.data||[],n=t.iScale.getLabels();if(i.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===r.length,options:t};this.updateElement(i,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){const n=this.getDataset(),o=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+i;a++){const t=e[a],i=this.resolveDataElementOptions(a,t.active?"active":r),l=o.getPointPositionForValue(a,n.data[a]),c=s?o.xCenter:l.x,u=s?o.yCenter:l.y,h={x:c,y:u,angle:l.angle,skip:isNaN(c)||isNaN(u),options:i};this.updateElement(t,a,h,r)}}}fhe.id="radar",fhe.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},fhe.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class mhe extends hhe{}function ghe(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}mhe.id="scatter",mhe.defaults={showLine:!1,fill:!1},mhe.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};class yhe{constructor(e){this.options=e||{}}formats(){return ghe()}parse(e,t){return ghe()}format(e,t){return ghe()}add(e,t,i){return ghe()}diff(e,t,i){return ghe()}startOf(e,t,i){return ghe()}endOf(e,t){return ghe()}}yhe.override=function(e){Object.assign(yhe.prototype,e)};var vhe={_date:yhe};function bhe(e,t){return"native"in e?{x:e.x,y:e.y}:yue(e,t)}function whe(e,t,i,r){const{controller:n,data:o,_sorted:s}=e,a=n._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const e=a._reversePixels?zce:Vce;if(!r)return e(o,t,i);if(n._sharedOptions){const r=o[0],n="function"==typeof r.getRange&&r.getRange(t);if(n){const r=e(o,t,i-n),s=e(o,t,i+n);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function _he(e,t,i,r,n){const o=e.getSortedVisibleDatasetMetas(),s=i[t];for(let e=0,i=o.length;e<i;++e){const{index:i,data:a}=o[e],{lo:l,hi:c}=whe(o[e],t,s,n);for(let e=l;e<=c;++e){const t=a[e];t.skip||r(t,i,e)}}}function xhe(e,t,i,r){const n=[];if(!wce(t,e.chartArea,e._minPadding))return n;return _he(e,i,t,(function(e,i,o){e.inRange(t.x,t.y,r)&&n.push({element:e,datasetIndex:i,index:o})}),!0),n}function She(e,t,i,r,n){let o=[];const s=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,r){const n=t?Math.abs(e.x-r.x):0,o=i?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let a=Number.POSITIVE_INFINITY;return _he(e,i,t,(function(i,l,c){const u=i.inRange(t.x,t.y,n);if(r&&!u)return;const h=i.getCenterPoint(n);if(!wce(h,e.chartArea,e._minPadding)&&!u)return;const d=s(t,h);d<a?(o=[{element:i,datasetIndex:l,index:c}],a=d):d===a&&o.push({element:i,datasetIndex:l,index:c})})),o}function khe(e,t,i,r,n){return wce(t,e.chartArea,e._minPadding)?"r"!==i||r?She(e,t,i,r,n):function(e,t,i,r){let n=[];return _he(e,i,t,(function(e,i,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=vle(e,{x:t.x,y:t.y});xle(l,s,a)&&n.push({element:e,datasetIndex:i,index:o})})),n}(e,t,i,n):[]}function Mhe(e,t,i,r){const n=bhe(t,e),o=[],s=i.axis,a="x"===s?"inXRange":"inYRange";let l=!1;return function(e,t){const i=e.getSortedVisibleDatasetMetas();let r,n,o;for(let e=0,s=i.length;e<s;++e){({index:r,data:n}=i[e]);for(let e=0,i=n.length;e<i;++e)o=n[e],o.skip||t(o,r,e)}}(e,((e,t,i)=>{e[a](n[s],r)&&o.push({element:e,datasetIndex:t,index:i}),e.inRange(n.x,n.y,r)&&(l=!0)})),i.intersect&&!l?[]:o}var The={modes:{index(e,t,i,r){const n=bhe(t,e),o=i.axis||"x",s=i.intersect?xhe(e,n,o,r):khe(e,n,o,!1,r),a=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=s[0].index,i=e.data[t];i&&!i.skip&&a.push({element:i,datasetIndex:e.index,index:t})})),a):[]},dataset(e,t,i,r){const n=bhe(t,e),o=i.axis||"xy";let s=i.intersect?xhe(e,n,o,r):khe(e,n,o,!1,r);if(s.length>0){const t=s[0].datasetIndex,i=e.getDatasetMeta(t).data;s=[];for(let e=0;e<i.length;++e)s.push({element:i[e],datasetIndex:t,index:e})}return s},point:(e,t,i,r)=>xhe(e,bhe(t,e),i.axis||"xy",r),nearest:(e,t,i,r)=>khe(e,bhe(t,e),i.axis||"xy",i.intersect,r),x:(e,t,i,r)=>Mhe(e,t,{axis:"x",intersect:i.intersect},r),y:(e,t,i,r)=>Mhe(e,t,{axis:"y",intersect:i.intersect},r)}};const Ehe=["left","top","right","bottom"];function Ihe(e,t){return e.filter((e=>e.pos===t))}function Che(e,t){return e.filter((e=>-1===Ehe.indexOf(e.pos)&&e.box.axis===t))}function Ohe(e,t){return e.sort(((e,i)=>{const r=t?i:e,n=t?e:i;return r.weight===n.weight?r.index-n.index:r.weight-n.weight}))}function Ahe(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:r,stackWeight:n}=i;if(!e||!Ehe.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:n}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&t.availableWidth,a.height=n):(a.width=r,a.height=c?c*n:s&&t.availableHeight)}return i}function Phe(e,t,i,r){return Math.max(e[i],t[i])+Math.max(e[r],t[r])}function Rhe(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Lhe(e,t,i,r){const{pos:n,box:o}=i,s=e.maxPadding;if(!Dae(n)){i.size&&(e[n]-=i.size);const t=r[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?o.height:o.width),i.size=t.size/t.count,e[n]+=i.size}o.getPadding&&Rhe(s,o.getPadding());const a=Math.max(0,t.outerWidth-Phe(s,e,"left","right")),l=Math.max(0,t.outerHeight-Phe(s,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function Dhe(e,t){const i=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],i[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Nhe(e,t,i,r){const n=[];let o,s,a,l,c,u;for(o=0,s=e.length,c=0;o<s;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,Dhe(a.horizontal,t));const{same:s,other:h}=Lhe(t,i,a,r);c|=s&&n.length,u=u||h,l.fullSize||n.push(a)}return c&&Nhe(n,t,i,r)||u}function Fhe(e,t,i,r,n){e.top=i,e.left=t,e.right=t+r,e.bottom=i+n,e.width=r,e.height=n}function jhe(e,t,i,r){const n=i.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,o=l.size||e.height;Xae(l.start)&&(s=l.start),e.fullSize?Fhe(e,n.left,s,i.outerWidth-n.right-n.left,o):Fhe(e,t.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;Xae(l.start)&&(o=l.start),e.fullSize?Fhe(e,o,n.top,s,i.outerHeight-n.bottom-n.top):Fhe(e,o,t.top+l.placed,s,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=s}fce.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var $he={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,r){if(!e)return;const n=Dce(e.options.layout.padding),o=Math.max(t-n.width,0),s=Math.max(i-n.height,0),a=function(e){const t=function(e){const t=[];let i,r,n,o,s,a;for(i=0,r=(e||[]).length;i<r;++i)n=e[i],({position:o,options:{stack:s,stackWeight:a=1}}=n),t.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:s&&o+s,stackWeight:a});return t}(e),i=Ohe(t.filter((e=>e.box.fullSize)),!0),r=Ohe(Ihe(t,"left"),!0),n=Ohe(Ihe(t,"right")),o=Ohe(Ihe(t,"top"),!0),s=Ohe(Ihe(t,"bottom")),a=Che(t,"x"),l=Che(t,"y");return{fullSize:i,leftAndTop:r.concat(o),rightAndBottom:n.concat(l).concat(s).concat(a),chartArea:Ihe(t,"chartArea"),vertical:r.concat(n).concat(l),horizontal:o.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;zae(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),d=Object.assign({},n);Rhe(d,Dce(r));const p=Object.assign({maxPadding:d,w:o,h:s,x:n.left,y:n.top},n),f=Ahe(l.concat(c),h);Nhe(a.fullSize,p,h,f),Nhe(l,p,h,f),Nhe(c,p,h,f)&&Nhe(l,p,h,f),function(e){const t=e.maxPadding;function i(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(p),jhe(a.leftAndTop,p,h,f),p.x+=p.w,p.y+=p.h,jhe(a.rightAndBottom,p,h,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},zae(a.chartArea,(t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class Vhe{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class zhe extends Vhe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Uhe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qhe=e=>null===e||""===e;const Ghe=!!_ue&&{passive:!0};function Bhe(e,t,i){e.canvas.removeEventListener(t,i,Ghe)}function Whe(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function Hhe(e,t,i){const r=e.canvas,n=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||Whe(i.addedNodes,r),t=t&&!Whe(i.removedNodes,r);t&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function Jhe(e,t,i){const r=e.canvas,n=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||Whe(i.removedNodes,r),t=t&&!Whe(i.addedNodes,r);t&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const Yhe=new Map;let Zhe=0;function Khe(){const e=window.devicePixelRatio;e!==Zhe&&(Zhe=e,Yhe.forEach(((t,i)=>{i.currentDevicePixelRatio!==e&&t()})))}function Xhe(e,t,i){const r=e.canvas,n=r&&due(r);if(!n)return;const o=Iae(((e,t)=>{const r=n.clientWidth;i(e,t),r<n.clientWidth&&i()}),window),s=new ResizeObserver((e=>{const t=e[0],i=t.contentRect.width,r=t.contentRect.height;0===i&&0===r||o(i,r)}));return s.observe(n),function(e,t){Yhe.size||window.addEventListener("resize",Khe),Yhe.set(e,t)}(e,o),s}function Qhe(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){Yhe.delete(e),Yhe.size||window.removeEventListener("resize",Khe)}(e)}function ede(e,t,i){const r=e.canvas,n=Iae((t=>{null!==e.ctx&&i(function(e,t){const i=Uhe[e.type]||e.type,{x:r,y:n}=yue(e,t);return{type:i,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==n?n:null}}(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,i){e.addEventListener(t,i,Ghe)}(r,t,n),n}class tde extends Vhe{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,r=e.getAttribute("height"),n=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",qhe(n)){const t=xue(e,"width");void 0!==t&&(e.width=t)}if(qhe(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=xue(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t.$chartjs)return!1;const i=t.$chartjs.initial;["height","width"].forEach((e=>{const r=i[e];Rae(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=i.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),n={attach:Hhe,detach:Jhe,resize:Xhe}[t]||ede;r[t]=n(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:Qhe,detach:Qhe,resize:Qhe}[t]||Bhe)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return bue(e,t,i,r)}isAttached(e){const t=due(e);return!(!t||!t.isConnected)}}class ide{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return dle(this.x)&&dle(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach((e=>{r[e]=i[e]&&i[e].active()?i[e]._to:this[e]})),r}}ide.defaults={},ide.defaultRoutes=void 0;const rde={values:e=>Lae(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const r=this.chart.options.locale;let n,o=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(n="scientific"),o=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}const s=cle(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Eue(e,r,l)},logarithmic(e,t,i){if(0===e)return"0";const r=e/Math.pow(10,Math.floor(cle(e)));return 1===r||2===r||5===r?rde.numeric.call(this,e,t,i):""}};var nde={formatters:rde};function ode(e,t){const i=e.options.ticks,r=i.maxTicksLimit||function(e){const t=e.options.offset,i=e._tickSize(),r=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(r,n))}(e),n=i.major.enabled?function(e){const t=[];let i,r;for(i=0,r=e.length;i<r;i++)e[i].major&&t.push(i);return t}(t):[],o=n.length,s=n[0],a=n[o-1],l=[];if(o>r)return function(e,t,i,r){let n,o=0,s=i[0];for(r=Math.ceil(r),n=0;n<e.length;n++)n===s&&(t.push(e[n]),o++,s=i[o*r])}(t,l,n,o/r),l;const c=function(e,t,i){const r=function(e){const t=e.length;let i,r;if(t<2)return!1;for(r=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==r)return!1;return r}(e),n=t.length/i;if(!r)return Math.max(n,1);const o=function(e){const t=[],i=Math.sqrt(e);let r;for(r=1;r<i;r++)e%r==0&&(t.push(r),t.push(e/r));return i===(0|i)&&t.push(i),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let e=0,t=o.length-1;e<t;e++){const t=o[e];if(t>n)return t}return Math.max(n,1)}(n,t,r);if(o>0){let e,i;const r=o>1?Math.round((a-s)/(o-1)):null;for(sde(t,l,c,Rae(r)?0:s-r,s),e=0,i=o-1;e<i;e++)sde(t,l,c,n[e],n[e+1]);return sde(t,l,c,a,Rae(r)?t.length:a+r),l}return sde(t,l,c),l}function sde(e,t,i,r,n){const o=jae(r,0),s=Math.min(jae(n,e.length),e.length);let a,l,c,u=0;for(i=Math.ceil(i),n&&(a=n-r,i=a/Math.floor(a/i)),c=o;c<0;)u++,c=Math.round(o+u*i);for(l=Math.max(o,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(o+u*i))}fce.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nde.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),fce.route("scale.ticks","color","","color"),fce.route("scale.grid","color","","borderColor"),fce.route("scale.grid","borderColor","","borderColor"),fce.route("scale.title","color","","color"),fce.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),fce.describe("scales",{_fallback:"scale"}),fce.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const ade=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i;function lde(e,t){const i=[],r=e.length/t,n=e.length;let o=0;for(;o<n;o+=r)i.push(e[Math.floor(o)]);return i}function cde(e,t,i){const r=e.ticks.length,n=Math.min(t,r-1),o=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(n);if(!(i&&(l=1===r?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(n-1))/2,c+=n<t?l:-l,c<o-a||c>s+a)))return c}function ude(e){return e.drawTicks?e.tickLength:0}function hde(e,t){if(!e.display)return 0;const i=Nce(e.font,t),r=Dce(e.padding);return(Lae(e.text)?e.text.length:1)*i.lineHeight+r.height}function dde(e,t,i){let r=Cae(e);return(i&&"right"!==t||!i&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class pde extends ide{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Fae(e,Number.POSITIVE_INFINITY),t=Fae(t,Number.NEGATIVE_INFINITY),i=Fae(i,Number.POSITIVE_INFINITY),r=Fae(r,Number.NEGATIVE_INFINITY),{min:Fae(e,i),max:Fae(t,r),minDefined:Nae(e),maxDefined:Nae(t)}}getMinMax(e){let t,{min:i,max:r,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),n||(i=Math.min(i,t.min)),o||(r=Math.max(r,t.max));return i=o&&i>r?r:i,r=n&&i>r?i:r,{min:Fae(i,Fae(r,i)),max:Fae(r,Fae(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vae(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:n,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){const{min:r,max:n}=e,o=$ae(t,(n-r)/2),s=(e,t)=>i&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(n,o)}}(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?lde(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=ode(this,this.ticks),this._labelSizes=null),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vae(this.options.afterUpdate,[this])}beforeSetDimensions(){Vae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,n;for(i=0,r=e.length;i<r;i++)n=e[i],n.label=Vae(t.callback,[n.value,i,e],this)}afterTickToLabelConversion(){Vae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=this.ticks.length,r=t.minRotation||0,n=t.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!t.display||r>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Sle(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/i:d/(i-1),u+6>o&&(o=d/(i-(e.offset?.5:1)),s=this.maxHeight-ude(e.grid)-t.padding-hde(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=gle(Math.min(Math.asin(Sle((c.highest.height+6)/o,-1,1)),Math.asin(Sle(s/a,-1,1))-Math.asin(Sle(h/a,-1,1)))),l=Math.max(r,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){Vae(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Vae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:n}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=hde(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=ude(n)+o):(e.height=this.maxHeight,e.width=ude(n)+o),i.display&&this.ticks.length){const{first:t,last:r,widest:n,highest:o}=this._getLabelSizes(),a=2*i.padding,l=mle(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=i.mirror?0:u*n.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=i.mirror?0:c*n.width+u*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:n,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=r*e.width,h=i*t.height):(u=i*e.height,h=r*t.width):"start"===n?h=t.width:"end"===n?u=e.width:(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((h-c+o)*this.width/(this.width-c),0)}else{let i=t.height/2,r=e.height/2;"start"===n?(i=0,r=e.height):"end"===n&&(i=t.height,r=0),this.paddingTop=i+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)Rae(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=lde(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,t){const{ctx:i,_longestTextCache:r}=this,n=[],o=[];let s,a,l,c,u,h,d,p,f,m,g,y=0,v=0;for(s=0;s<t;++s){if(c=e[s].label,u=this._resolveTickFontOptions(s),i.font=h=u.string,d=r[h]=r[h]||{data:{},gc:[]},p=u.lineHeight,f=m=0,Rae(c)||Lae(c)){if(Lae(c))for(a=0,l=c.length;a<l;++a)g=c[a],Rae(g)||Lae(g)||(f=mce(i,d.data,d.gc,f,g),m+=p)}else f=mce(i,d.data,d.gc,f,c),m=p;n.push(f),o.push(m),y=Math.max(f,y),v=Math.max(m,v)}!function(e,t){zae(e,(e=>{const i=e.gc,r=i.length/2;let n;if(r>t){for(n=0;n<r;++n)delete e.data[i[n]];i.splice(0,r)}}))}(r,t);const b=n.indexOf(y),w=o.indexOf(v),_=e=>({width:n[e]||0,height:o[e]||0});return{first:_(0),last:_(t-1),widest:_(b),highest:_(w),widths:n,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Sle(this._alignToPixels?yce(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return jce(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=jce(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=mle(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,s=n?n.widest.width+o:0,a=n?n.highest.height+o:0;return this.isHorizontal()?a*i>s*r?s/i:a/r:a*r<s*i?a/i:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:n,position:o}=r,s=n.offset,a=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=ude(n),u=[],h=n.setContext(this.getContext()),d=h.drawBorder?h.borderWidth:0,p=d/2,f=function(e){return yce(i,e,d)};let m,g,y,v,b,w,_,x,S,k,M,T;if("top"===o)m=f(this.bottom),w=this.bottom-c,x=m-p,k=f(e.top)+p,T=e.bottom;else if("bottom"===o)m=f(this.top),k=e.top,T=f(e.bottom)-p,w=m+p,x=this.top+c;else if("left"===o)m=f(this.right),b=this.right-c,_=m-p,S=f(e.left)+p,M=e.right;else if("right"===o)m=f(this.left),S=e.left,M=f(e.right)-p,b=m+p,_=this.left+c;else if("x"===t){if("center"===o)m=f((e.top+e.bottom)/2+.5);else if(Dae(o)){const e=Object.keys(o)[0],t=o[e];m=f(this.chart.scales[e].getPixelForValue(t))}k=e.top,T=e.bottom,w=m+p,x=w+c}else if("y"===t){if("center"===o)m=f((e.left+e.right)/2);else if(Dae(o)){const e=Object.keys(o)[0],t=o[e];m=f(this.chart.scales[e].getPixelForValue(t))}b=m-p,_=b-c,S=e.left,M=e.right}const E=jae(r.ticks.maxTicksLimit,l),I=Math.max(1,Math.ceil(l/E));for(g=0;g<l;g+=I){const e=n.setContext(this.getContext(g)),t=e.lineWidth,r=e.color,o=n.borderDash||[],l=e.borderDashOffset,c=e.tickWidth,h=e.tickColor,d=e.tickBorderDash||[],p=e.tickBorderDashOffset;y=cde(this,g,s),void 0!==y&&(v=yce(i,y,t),a?b=_=S=M=v:w=x=k=T=v,u.push({tx1:b,ty1:w,tx2:_,ty2:x,x1:S,y1:k,x2:M,y2:T,width:t,color:r,borderDash:o,borderDashOffset:l,tickWidth:c,tickColor:h,tickBorderDash:d,tickBorderDashOffset:p}))}return this._ticksLength=l,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:n}=i,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=n,h=ude(i.grid),d=h+c,p=u?-c:d,f=-mle(this.labelRotation),m=[];let g,y,v,b,w,_,x,S,k,M,T,E,I="middle";if("top"===r)_=this.bottom-p,x=this._getXAxisLabelAlignment();else if("bottom"===r)_=this.top+p,x=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("x"===t){if("center"===r)_=(e.top+e.bottom)/2+d;else if(Dae(r)){const e=Object.keys(r)[0],t=r[e];_=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)w=(e.left+e.right)/2-d;else if(Dae(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const C=this._getLabelSizes();for(g=0,y=s.length;g<y;++g){v=s[g],b=v.label;const e=n.setContext(this.getContext(g));S=this.getPixelForTick(g)+n.labelOffset,k=this._resolveTickFontOptions(g),M=k.lineHeight,T=Lae(b)?b.length:1;const t=T/2,i=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h;if(o?(w=S,E="top"===r?"near"===l||0!==f?-T*M+M/2:"center"===l?-C.highest.height/2-t*M+M:-C.highest.height+M/2:"near"===l||0!==f?M/2:"center"===l?C.highest.height/2-t*M:C.highest.height-T*M,u&&(E*=-1)):(_=S,E=(1-T)*M/2),e.showLabelBackdrop){const t=Dce(e.backdropPadding),i=C.heights[g],r=C.widths[g];let n=_+E-t.top,o=w-t.left;switch(I){case"middle":n-=i/2;break;case"bottom":n-=i}switch(x){case"center":o-=r/2;break;case"right":o-=r}h={left:o,top:n,width:r+t.width,height:i+t.height,color:e.backdropColor}}m.push({rotation:f,label:b,font:k,color:i,strokeColor:a,strokeWidth:c,textOffset:E,textAlign:x,textBaseline:I,translation:[w,_],backdrop:h})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-mle(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align&&(i="right"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:n}}=this.options,o=e+n,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+n,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+n,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:n,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,n,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex((t=>t.value===e));if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,o;const s=(e,t,r)=>{r.width&&r.color&&(i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.setLineDash(r.borderDash||[]),i.lineDashOffset=r.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(n=0,o=r.length;n<o;++n){const e=r[n];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:i}}=this,r=i.setContext(this.getContext()),n=i.drawBorder?r.borderWidth:0;if(!n)return;const o=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let a,l,c,u;this.isHorizontal()?(a=yce(e,this.left,n)-n/2,l=yce(e,this.right,o)+o/2,c=u=s):(c=yce(e,this.top,n)-n/2,u=yce(e,this.bottom,o)+o/2,a=l=s),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(a,c),t.lineTo(l,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&_ce(t,i);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let n,o;for(n=0,o=r.length;n<o;++n){const e=r[n],i=e.font,o=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),Mce(t,o,0,e.textOffset,i,e)}i&&xce(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const n=Nce(i.font),o=Dce(i.padding),s=i.align;let a=n.lineHeight/2;"bottom"===t||"center"===t||Dae(t)?(a+=o.bottom,Lae(i.text)&&(a+=n.lineHeight*(i.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,i,r){const{top:n,left:o,bottom:s,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,p,f=0;const m=s-n,g=a-o;if(e.isHorizontal()){if(d=Oae(r,o,a),Dae(i)){const e=Object.keys(i)[0],r=i[e];p=u[e].getPixelForValue(r)+m-t}else p="center"===i?(c.bottom+c.top)/2+m-t:ade(e,i,t);h=a-o}else{if(Dae(i)){const e=Object.keys(i)[0],r=i[e];d=u[e].getPixelForValue(r)-g+t}else d="center"===i?(c.left+c.right)/2-g+t:ade(e,i,t);p=Oae(r,s,n),f="left"===i?-sle:sle}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}(this,a,t,s);Mce(e,i.text,0,0,n,{color:i.color,maxWidth:u,rotation:h,textAlign:dde(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=jae(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===pde.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let n,o;for(n=0,o=t.length;n<o;++n){const o=t[n];o[i]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return Nce(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fde{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const r=this.items,n=e.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in r||(r[n]=e,function(e,t,i){const r=Wae(Object.create(null),[i?fce.get(i):{},fce.get(t),e.defaults]);fce.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((i=>{const r=i.split("."),n=r.pop(),o=[e].concat(r).join("."),s=t[i].split("."),a=s.pop(),l=s.join(".");fce.route(o,n,l,a)}))}(t,e.defaultRoutes);e.descriptors&&fce.describe(t,e.descriptors)}(e,o,i),this.override&&fce.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in fce[r]&&(delete fce[r][i],this.override&&delete uce[i])}}var mde=new class{constructor(){this.controllers=new fde(Que,"datasets",!0),this.elements=new fde(ide,"elements"),this.plugins=new fde(Object,"plugins"),this.scales=new fde(pde,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach((t=>{const r=i||this._getRegistryForType(t);i||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):zae(t,(t=>{const r=i||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,i){const r=Kae(e);Vae(i["before"+r],[],i),t[e](i),Vae(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+i+".");return r}};class gde{constructor(){this._init=[]}notify(e,t,i,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(n,e,t,i);return"afterDestroy"===t&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const n of e){const e=n.plugin;if(!1===Vae(e[i],[t,r,n.options],e)&&r.cancelable)return!1}return!0}invalidate(){Rae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=jae(i.options&&i.options.plugins,{}),n=function(e){const t=[],i=Object.keys(mde.plugins.items);for(let e=0;e<i.length;e++)t.push(mde.getPlugin(i[e]));const r=e.plugins||[];for(let e=0;e<r.length;e++){const i=r[e];-1===t.indexOf(i)&&t.push(i)}return t}(i);return!1!==r||t?function(e,t,i,r){const n=[],o=e.getContext();for(let s=0;s<t.length;s++){const a=t[s],l=yde(i[a.id],r);null!==l&&n.push({plugin:a,options:vde(e.config,a,l,o)})}return n}(e,n,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function yde(e,t){return t||!1!==e?!0===e?{}:e:null}function vde(e,t,i,r){const n=e.pluginScopeKeys(t),o=e.getOptionScopes(i,n);return e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bde(e,t){const i=fce.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function wde(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(i=t.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.charAt(0).toLowerCase();var i}function _de(e){const t=e.options||(e.options={});t.plugins=jae(t.plugins,{}),t.scales=function(e,t){const i=uce[e.type]||{scales:{}},r=t.scales||{},n=bde(e.type,t),o=Object.create(null),s=Object.create(null);return Object.keys(r).forEach((e=>{const t=r[e];if(!Dae(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=wde(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(a,n),c=i.scales||{};o[a]=o[a]||e,s[e]=Hae(Object.create(null),[{axis:a},t,c[a],c[l]])})),e.data.datasets.forEach((i=>{const n=i.type||e.type,a=i.indexAxis||bde(n,t),l=(uce[n]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,a),n=i[t+"AxisID"]||o[t]||t;s[n]=s[n]||Object.create(null),Hae(s[n],[{axis:t},r[n],l[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Hae(t,[fce.scales[t.type],fce.scale])})),s}(e,t)}function xde(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Sde=new Map,kde=new Set;function Mde(e,t){let i=Sde.get(e);return i||(i=t(),Sde.set(e,i),kde.add(i)),i}const Tde=(e,t,i)=>{const r=Zae(t,i);void 0!==r&&e.add(r)};class Ede{constructor(e){this._config=function(e){return(e=e||{}).data=xde(e.data),_de(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=xde(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_de(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mde(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Mde(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Mde(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Mde(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return r&&!t||(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:n}=this,o=this._cachedScopes(e,i),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>Tde(a,e,t)))),t.forEach((e=>Tde(a,r,e))),t.forEach((e=>Tde(a,uce[n]||{},e))),t.forEach((e=>Tde(a,fce,e))),t.forEach((e=>Tde(a,hce,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),kde.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,uce[t]||{},fce.datasets[t]||{},{type:t},fce,hce]}resolveNamedOptions(e,t,i,r=[""]){const n={$shared:!0},{resolver:o,subPrefixes:s}=Ide(this._resolverCache,e,r);let a=o;if(function(e,t){const{isScriptable:i,isIndexable:r}=Hce(e);for(const n of t){const t=i(n),o=r(n),s=(o||t)&&e[n];if(t&&(Qae(s)||Cde(s))||o&&Lae(s))return!0}return!1}(o,t)){n.$shared=!1;a=Wce(o,i=Qae(i)?i():i,this.createResolver(e,i,s))}for(const e of t)n[e]=a[e];return n}createResolver(e,t,i=[""],r){const{resolver:n}=Ide(this._resolverCache,e,i);return Dae(t)?Wce(n,t,void 0,r):n}}function Ide(e,t,i){let r=e.get(t);r||(r=new Map,e.set(t,r));const n=i.join();let o=r.get(n);if(!o){o={resolver:Bce(t,i),subPrefixes:i.filter((e=>!e.toLowerCase().includes("hover")))},r.set(n,o)}return o}const Cde=e=>Dae(e)&&Object.getOwnPropertyNames(e).reduce(((t,i)=>t||Qae(e[i])),!1);const Ode=["top","bottom","left","right","chartArea"];function Ade(e,t){return"top"===e||"bottom"===e||-1===Ode.indexOf(e)&&"x"===t}function Pde(e,t){return function(i,r){return i[e]===r[e]?i[t]-r[t]:i[e]-r[e]}}function Rde(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Vae(i&&i.onComplete,[e],t)}function Lde(e){const t=e.chart,i=t.options.animation;Vae(i&&i.onProgress,[e],t)}function Dde(e){return hue()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Nde={},Fde=e=>{const t=Dde(e);return Object.values(Nde).filter((e=>e.canvas===t)).pop()};function jde(e,t,i){const r=Object.keys(e);for(const n of r){const r=+n;if(r>=t){const o=e[n];delete e[n],(i>0||r>t)&&(e[r+i]=o)}}}class $de{constructor(e,t){const i=this.config=new Ede(t),r=Dde(e),n=Fde(r);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(e){return!hue()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?zhe:tde}(r)),this.platform.updateConfig(i);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Pae(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gde,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(...r){return t?(clearTimeout(i),i=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),o.resizeDelay||0),this._dataChanges=[],Nde[this.id]=this,s&&a?(Fue.listen(this,"complete",Rde),Fue.listen(this,"progress",Lde),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:n}=this;return Rae(e)?t&&n?n:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wue(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vce(this.canvas,this.ctx),this}stop(){return Fue.stop(this),this}resize(e,t){Fue.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,n),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,wue(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),Vae(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){zae(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce(((e,t)=>(e[t]=!1,e)),{});let n=[];t&&(n=n.concat(Object.keys(t).map((e=>{const i=t[e],r=wde(e,i),n="r"===r,o="x"===r;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),zae(n,(t=>{const n=t.options,o=n.id,s=wde(o,n),a=jae(n.type,t.dtype);void 0!==n.position&&Ade(n.position,s)===Ade(t.dposition)||(n.position=t.dposition),r[o]=!0;let l=null;if(o in i&&i[o].type===a)l=i[o];else{l=new(mde.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(n,e)})),zae(r,((e,t)=>{e||delete i[t]})),zae(i,(e=>{$he.configure(this,e,e.options),$he.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort(((e,t)=>e.index-t.index)),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Pde("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,i)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const r=t[i];let n=this.getDatasetMeta(i);const o=r.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=r.indexAxis||bde(o,this.options),n.order=r.order||0,n.index=i,n.label=""+r.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const t=mde.getController(o),{datasetElementType:r,dataElementType:s}=fce.datasets[o];Object.assign(t.prototype,{dataElementType:mde.getElement(s),datasetElementType:r&&mde.getElement(r)}),n.controller=new t(this,i),e.push(n.controller)}}return this._updateMetasets(),e}_resetElements(){zae(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),i=!r&&-1===n.indexOf(t);t.buildOrUpdateElements(i),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||zae(n,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pde("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){zae(this.scales,(e=>{$he.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);ele(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:n}of t){jde(e,r,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=i(0);for(let e=1;e<t;e++)if(!ele(r,i(e)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;$he.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],zae(this.boxes,(e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Qae(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Fue.has(this)?this.attached&&!Fue.running(this)&&Fue.start(this):(this.draw(),Rde({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,n;for(r=0,n=t.length;r<n;++r){const n=t[r];e&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,r=!i.disabled,n=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&_ce(t,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),e.controller.draw(),r&&xce(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(e,t,i,r){const n=The.modes[t];return"function"==typeof n?n(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=jce(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,r);Xae(t)?(n.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(n,{visible:i}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Fue.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vce(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Nde[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),e[i]=r},r=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};zae(this.options.events,(e=>i(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),e[i]=r},r=(i,r)=>{e[i]&&(t.removeEventListener(this,i,r),delete e[i])},n=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,r("resize",n),this._stop(),this._resize(0,0),i("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){zae(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},zae(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let n,o,s,a;for("dataset"===t&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map((({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}));!Uae(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}_updateHoverStyles(e,t,i){const r=this.options.hover,n=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=n(t,e),s=i?e:n(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:wce(e,this.chartArea,this._minPadding)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;const n=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(n||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:n}=this,o=t,s=this._getActiveElements(e,r,i,o),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,i,r){return i&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,i,a);i&&(this._lastEvent=null,Vae(n.onHover,[e,s,this],this),a&&Vae(n.onClick,[e,s,this],this));const c=!Uae(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,i,r){if("mouseout"===e.type)return[];if(!i)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,r)}}const Vde=()=>zae($de.instances,(e=>e._plugins.invalidate()));function zde(e,t,i){const{startAngle:r,pixelMargin:n,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=n/a;e.beginPath(),e.arc(o,s,a,r-c,i+c),l>n?(c=n/l,e.arc(o,s,l,i+c,r-c,!0)):e.arc(o,s,n,i+sle,r-sle),e.closePath(),e.clip()}function Ude(e,t,i,r){const n=Pce(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-t)/2,s=Math.min(o,r*t/2),a=e=>{const t=(i-Math.min(o,e))*r/2;return Sle(e,0,Math.min(o,t))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Sle(n.innerStart,0,s),innerEnd:Sle(n.innerEnd,0,s)}}function qde(e,t,i,r){return{x:i+e*Math.cos(t),y:r+e*Math.sin(t)}}function Gde(e,t,i,r,n){const{x:o,y:s,startAngle:a,pixelMargin:l,innerRadius:c}=t,u=Math.max(t.outerRadius+r+i-l,0),h=c>0?c+r+i+l:0;let d=0;const p=n-a;if(r){const e=((c>0?c-r:0)+(u>0?u-r:0))/2;d=(p-(0!==e?p*e/(e+r):p))/2}const f=(p-Math.max(.001,p*u-i/tle)/u)/2,m=a+f+d,g=n-f-d,{outerStart:y,outerEnd:v,innerStart:b,innerEnd:w}=Ude(t,h,u,g-m),_=u-y,x=u-v,S=m+y/_,k=g-v/x,M=h+b,T=h+w,E=m+b/M,I=g-w/T;if(e.beginPath(),e.arc(o,s,u,S,k),v>0){const t=qde(x,k,o,s);e.arc(t.x,t.y,v,k,g+sle)}const C=qde(T,g,o,s);if(e.lineTo(C.x,C.y),w>0){const t=qde(T,I,o,s);e.arc(t.x,t.y,w,g+sle,I+Math.PI)}if(e.arc(o,s,h,g-w/h,m+b/h,!0),b>0){const t=qde(M,E,o,s);e.arc(t.x,t.y,b,E+Math.PI,m-sle)}const O=qde(_,m,o,s);if(e.lineTo(O.x,O.y),y>0){const t=qde(_,S,o,s);e.arc(t.x,t.y,y,m-sle,S)}e.closePath()}function Bde(e,t,i,r,n){const{options:o}=t,{borderWidth:s,borderJoinStyle:a}=o,l="inner"===o.borderAlign;s&&(l?(e.lineWidth=2*s,e.lineJoin=a||"round"):(e.lineWidth=s,e.lineJoin=a||"bevel"),t.fullCircles&&function(e,t,i){const{x:r,y:n,startAngle:o,pixelMargin:s,fullCircles:a}=t,l=Math.max(t.outerRadius-s,0),c=t.innerRadius+s;let u;for(i&&zde(e,t,o+ile),e.beginPath(),e.arc(r,n,c,o+ile,o,!0),u=0;u<a;++u)e.stroke();for(e.beginPath(),e.arc(r,n,l,o,o+ile),u=0;u<a;++u)e.stroke()}(e,t,l),l&&zde(e,t,n),Gde(e,t,i,r,n),e.stroke())}Object.defineProperties($de,{defaults:{enumerable:true,value:fce},instances:{enumerable:true,value:Nde},overrides:{enumerable:true,value:uce},registry:{enumerable:true,value:mde},version:{enumerable:true,value:"3.7.1"},getChart:{enumerable:true,value:Fde},register:{enumerable:true,value:(...e)=>{mde.add(...e),Vde()}},unregister:{enumerable:true,value:(...e)=>{mde.remove(...e),Vde()}}});class Wde extends ide{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:n,distance:o}=vle(r,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,d=jae(u,a-s)>=ile||xle(n,s,a),p=kle(o,l+h,c+h);return d&&p}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:n,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:a,spacing:l}=this.options,c=(r+n)/2,u=(o+s+l+a)/2;return{x:t+Math.cos(c)*u,y:i+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/2,n=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>ile?Math.floor(i/ile):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let o=0;if(r){o=r/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*o,Math.sin(t)*o),this.circumference>=tle&&(o=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const s=function(e,t,i,r){const{fullCircles:n,startAngle:o,circumference:s}=t;let a=t.endAngle;if(n){Gde(e,t,i,r,o+ile);for(let t=0;t<n;++t)e.fill();isNaN(s)||(a=o+s%ile,s%ile==0&&(a+=ile))}return Gde(e,t,i,r,a),e.fill(),a}(e,this,o,n);Bde(e,this,o,n,s),e.restore()}}function Hde(e,t,i=t){e.lineCap=jae(i.borderCapStyle,t.borderCapStyle),e.setLineDash(jae(i.borderDash,t.borderDash)),e.lineDashOffset=jae(i.borderDashOffset,t.borderDashOffset),e.lineJoin=jae(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jae(i.borderWidth,t.borderWidth),e.strokeStyle=jae(i.borderColor,t.borderColor)}function Jde(e,t,i){e.lineTo(i.x,i.y)}function Yde(e,t,i={}){const r=e.length,{start:n=0,end:o=r-1}=i,{start:s,end:a}=t,l=Math.max(n,s),c=Math.min(o,a),u=n<s&&o<s||n>a&&o>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Zde(e,t,i,r){const{points:n,options:o}=t,{count:s,start:a,loop:l,ilen:c}=Yde(n,i,r),u=function(e){return e.stepped?Sce:e.tension||"monotone"===e.cubicInterpolationMode?kce:Jde}(o);let h,d,p,{move:f=!0,reverse:m}=r||{};for(h=0;h<=c;++h)d=n[(a+(m?c-h:h))%s],d.skip||(f?(e.moveTo(d.x,d.y),f=!1):u(e,p,d,m,o.stepped),p=d);return l&&(d=n[(a+(m?c:0))%s],u(e,p,d,m,o.stepped)),!!l}function Kde(e,t,i,r){const n=t.points,{count:o,start:s,ilen:a}=Yde(n,i,r),{move:l=!0,reverse:c}=r||{};let u,h,d,p,f,m,g=0,y=0;const v=e=>(s+(c?a-e:e))%o,b=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(h=n[v(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=n[v(u)],h.skip)continue;const t=h.x,i=h.y,r=0|t;r===d?(i<p?p=i:i>f&&(f=i),g=(y*g+t)/++y):(b(),e.lineTo(t,i),d=r,y=0,p=f=i),m=i}b()}function Xde(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i)?Kde:Zde}Wde.id="arc",Wde.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Wde.defaultRoutes={backgroundColor:"backgroundColor"};const Qde="function"==typeof Path2D;function epe(e,t,i,r){Qde&&!t.options.segment?function(e,t,i,r){let n=t._path;n||(n=t._path=new Path2D,t.path(n,i,r)&&n.closePath()),Hde(e,t.options),e.stroke(n)}(e,t,i,r):function(e,t,i,r){const{segments:n,options:o}=t,s=Xde(t);for(const a of n)Hde(e,o,a.style),e.beginPath(),s(e,t,a,{start:i,end:i+r-1})&&e.closePath(),e.stroke()}(e,t,i,r)}class tpe extends ide{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;uue(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const i=e.points,r=e.options.spanGaps,n=i.length;if(!n)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,i,r){let n=0,o=t-1;if(i&&!r)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,i&&(o+=n);o>n&&e[o%t].skip;)o--;return o%=t,{start:n,end:o}}(i,n,o,r);return Lue(e,!0===r?[{start:s,end:a,loop:o}]:function(e,t,i,r){const n=e.length,o=[];let s,a=t,l=e[t];for(s=t+1;s<=i;++s){const i=e[s%n];i.skip||i.stop?l.skip||(r=!1,o.push({start:t%n,end:(s-1)%n,loop:r}),t=a=i.stop?s:null):(a=s,l.skip&&(t=s)),l=i}return null!==a&&o.push({start:t%n,end:a%n,loop:r}),o}(i,s,a<s?a+n:a,!!e._fullLoop&&0===s&&a===n-1),i,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],n=this.points,o=function(e,t){const i=[],r=e.segments;for(let n=0;n<r.length;n++){const o=Rue(r[n],e.points,t);o.length&&i.push(...o)}return i}(this,{property:t,start:r,end:r});if(!o.length)return;const s=[],a=function(e){return e.stepped?kue:e.tension||"monotone"===e.cubicInterpolationMode?Mue:Sue}(i);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],h=n[c],d=n[u];if(h===d){s.push(h);continue}const p=a(h,d,Math.abs((r-h[t])/(d[t]-h[t])),i.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,i){return Xde(this)(e,this,t,i)}path(e,t,i){const r=this.segments,n=Xde(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const s of r)o&=n(e,this,s,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),epe(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ipe(e,t,i,r){const n=e.options,{[i]:o}=e.getProps([i],r);return Math.abs(t-o)<n.radius+n.hitRadius}tpe.id="line",tpe.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},tpe.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},tpe.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class rpe extends ide{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(e-n,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return ipe(this,e,"x",t)}inYRange(e,t){return ipe(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const i=this.options;this.skip||i.radius<.1||!wce(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,bce(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function npe(e,t){const{x:i,y:r,base:n,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=s/2,a=Math.min(i,n),l=Math.max(i,n),c=r-h,u=r+h):(h=o/2,a=i-h,l=i+h,c=Math.min(r,n),u=Math.max(r,n)),{left:a,top:c,right:l,bottom:u}}function ope(e,t,i,r){return e?0:Sle(t,i,r)}function spe(e){const t=npe(e),i=t.right-t.left,r=t.bottom-t.top,n=function(e,t,i){const r=e.options.borderWidth,n=e.borderSkipped,o=Rce(r);return{t:ope(n.top,o.top,0,i),r:ope(n.right,o.right,0,t),b:ope(n.bottom,o.bottom,0,i),l:ope(n.left,o.left,0,t)}}(e,i/2,r/2),o=function(e,t,i){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,o=Lce(n),s=Math.min(t,i),a=e.borderSkipped,l=r||Dae(n);return{topLeft:ope(!l||a.top||a.left,o.topLeft,0,s),topRight:ope(!l||a.top||a.right,o.topRight,0,s),bottomLeft:ope(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:ope(!l||a.bottom||a.right,o.bottomRight,0,s)}}(e,i/2,r/2);return{outer:{x:t.left,y:t.top,w:i,h:r,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:i-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function ape(e,t,i,r){const n=null===t,o=null===i,s=e&&!(n&&o)&&npe(e,r);return s&&(n||kle(t,s.left,s.right))&&(o||kle(i,s.top,s.bottom))}function lpe(e,t){e.rect(t.x,t.y,t.w,t.h)}function cpe(e,t,i={}){const r=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-r,s=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+r,y:e.y+n,w:e.w+o,h:e.h+s,radius:e.radius}}rpe.id="point",rpe.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},rpe.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class upe extends ide{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:n,outer:o}=spe(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Ece:lpe;var a;e.save(),o.w===n.w&&o.h===n.h||(e.beginPath(),s(e,cpe(o,t,n)),e.clip(),s(e,cpe(n,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),s(e,cpe(n,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return ape(this,e,t,i)}inXRange(e,t){return ape(this,e,null,t)}inYRange(e,t){return ape(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(t+r)/2:t,y:n?i:(i+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}upe.id="bar",upe.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},upe.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};const hpe=(e,t)=>{let{boxHeight:i=t,boxWidth:r=t}=e;return e.usePointStyle&&(i=Math.min(i,t),r=Math.min(r,t)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(t,i)}};class dpe extends ide{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Vae(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,i)=>e.sort(t,i,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,r=Nce(i.font),n=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=hpe(i,n);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,n,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,n,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:n,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=e;n.textAlign="left",n.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,p)=>{const f=i+t/2+n.measureText(e.text).width;(0===p||l[l.length-1]+f+2*s>o)&&(u+=c,l[l.length-(p>0?0:1)]=0,d+=c,h++),a[p]={left:0,top:d,row:h,width:f,height:r},l[l.length-1]+=f+s})),u}_fitCols(e,t,i,r){const{ctx:n,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let u=s,h=0,d=0,p=0,f=0;return this.legendItems.forEach(((e,o)=>{const m=i+t/2+n.measureText(e.text).width;o>0&&d+r+2*s>c&&(u+=h+s,l.push({width:h,height:d}),p+=h+s,f++,h=d=0),a[o]={left:p,top:d,col:f,width:m,height:r},h=Math.max(h,m),d+=r+s})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:n}}=this,o=Iue(n,this.left,this.width);if(this.isHorizontal()){let n=0,s=Oae(i,this.left+r,this.right-this.lineWidths[n]);for(const a of t)n!==a.row&&(n=a.row,s=Oae(i,this.left+r,this.right-this.lineWidths[n])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let n=0,s=Oae(i,this.top+e+r,this.bottom-this.columnSizes[n].height);for(const a of t)a.col!==n&&(n=a.col,s=Oae(i,this.top+e+r,this.bottom-this.columnSizes[n].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;_ce(e,this),this._draw(),xce(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:n,labels:o}=e,s=fce.color,a=Iue(e.rtl,this.left,this.width),l=Nce(o.font),{color:c,padding:u}=o,h=l.size,d=h/2;let p;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:m,itemHeight:g}=hpe(o,h),y=this.isHorizontal(),v=this._computeTitleHeight();p=y?{x:Oae(n,this.left+u,this.right-i[0]),y:this.top+u+v,line:0}:{x:this.left+u,y:Oae(n,this.top+v+u,this.bottom-t[0].height),line:0},Cue(this.ctx,e.textDirection);const b=g+u;this.legendItems.forEach(((w,_)=>{r.strokeStyle=w.fontColor||c,r.fillStyle=w.fontColor||c;const x=r.measureText(w.text).width,S=a.textAlign(w.textAlign||(w.textAlign=o.textAlign)),k=f+d+x;let M=p.x,T=p.y;a.setWidth(this.width),y?_>0&&M+k+u>this.right&&(T=p.y+=b,p.line++,M=p.x=Oae(n,this.left+u,this.right-i[p.line])):_>0&&T+b>this.bottom&&(M=p.x=M+t[p.line].width+u,p.line++,T=p.y=Oae(n,this.top+v+u,this.bottom-t[p.line].height));!function(e,t,i){if(isNaN(f)||f<=0||isNaN(m)||m<0)return;r.save();const n=jae(i.lineWidth,1);if(r.fillStyle=jae(i.fillStyle,s),r.lineCap=jae(i.lineCap,"butt"),r.lineDashOffset=jae(i.lineDashOffset,0),r.lineJoin=jae(i.lineJoin,"miter"),r.lineWidth=n,r.strokeStyle=jae(i.strokeStyle,s),r.setLineDash(jae(i.lineDash,[])),o.usePointStyle){const o={radius:f*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},s=a.xPlus(e,f/2);bce(r,o,s,t+d)}else{const o=t+Math.max((h-m)/2,0),s=a.leftForLtr(e,f),l=Lce(i.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Ece(r,{x:s,y:o,w:f,h:m,radius:l}):r.rect(s,o,f,m),r.fill(),0!==n&&r.stroke()}r.restore()}(a.x(M),T,w),M=((e,t,i,r)=>e===(r?"left":"right")?i:"center"===e?(t+i)/2:t)(S,M+f+d,y?M+k:this.right,e.rtl),function(e,t,i){Mce(r,i.text,e,t+g/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(M),T,w),y?p.x+=k+u:p.y+=b})),Oue(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Nce(t.font),r=Dce(t.padding);if(!t.display)return;const n=Iue(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=i.size/2,l=r.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Oae(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Oae(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=Oae(s,u,u+h);o.textAlign=n.textAlign(Cae(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Mce(o,t.text,d,c,i)}_computeTitleHeight(){const e=this.options.title,t=Nce(e.font),i=Dce(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,n;if(kle(e,this.left,this.right)&&kle(t,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(r=n[i],kle(e,r.left,r.left+r.width)&&kle(t,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if("mousemove"===e&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type){const r=this._hoveredItem,n=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,i);r&&!n&&Vae(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!n&&Vae(t.onHover,[e,i,this],this)}else i&&Vae(t.onClick,[e,i,this],this)}}var ppe={id:"legend",_element:dpe,start(e,t,i){const r=e.legend=new dpe({ctx:e.ctx,options:i,chart:e});$he.configure(e,r,i),$he.addBox(e,r)},stop(e){$he.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const r=e.legend;$he.configure(e,r,i),r.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const r=t.datasetIndex,n=i.chart;n.isDatasetVisible(r)?(n.hide(r),t.hidden=!0):(n.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:n,color:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const s=e.controller.getStyle(i?0:void 0),a=Dce(s.borderWidth);return{text:t[e.index].label,fillStyle:s.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:s.borderColor,pointStyle:r||s.pointStyle,rotation:s.rotation,textAlign:n||s.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class fpe extends ide{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=Lae(i.text)?i.text.length:1;this._padding=Dce(i.padding);const n=r*Nce(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:r,right:n,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=Oae(s,i,n),c=t+e,a=n-i):("left"===o.position?(l=i+e,c=Oae(s,r,t),u=-.5*tle):(l=n-e,c=Oae(s,t,r),u=.5*tle),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Nce(t.font),r=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);Mce(e,t.text,0,0,i,{color:t.color,maxWidth:s,rotation:a,textAlign:Cae(t.align),textBaseline:"middle",translation:[n,o]})}}var mpe={id:"title",_element:fpe,start(e,t,i){!function(e,t){const i=new fpe({ctx:e.ctx,options:t,chart:e});$he.configure(e,i,t),$he.addBox(e,i),e.titleBlock=i}(e,i)},stop(e){const t=e.titleBlock;$he.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const r=e.titleBlock;$he.configure(e,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gpe={average(e){if(!e.length)return!1;let t,i,r=0,n=0,o=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();r+=e.x,n+=e.y,++o}}return{x:r/o,y:n/o}},nearest(e,t){if(!e.length)return!1;let i,r,n,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(i=0,r=e.length;i<r;++i){const r=e[i].element;if(r&&r.hasValue()){const e=ble(t,r.getCenterPoint());e<a&&(a=e,n=r)}}if(n){const e=n.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function ype(e,t){return t&&(Lae(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function vpe(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function bpe(e,t){const{element:i,datasetIndex:r,index:n}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(n);return{chart:e,label:s,parsed:o.getParsed(n),raw:e.data.datasets[r].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:r,element:i}}function wpe(e,t){const i=e.chart.ctx,{body:r,footer:n,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=Nce(t.bodyFont),c=Nce(t.titleFont),u=Nce(t.footerFont),h=o.length,d=n.length,p=r.length,f=Dce(t.padding);let m=f.height,g=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){m+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,i.measureText(e).width+v)};return i.save(),i.font=c.string,zae(e.title,b),i.font=l.string,zae(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?s+2+t.boxPadding:0,zae(r,(e=>{zae(e.before,b),zae(e.lines,b),zae(e.after,b)})),v=0,i.font=u.string,zae(e.footer,b),i.restore(),g+=f.width,{width:g,height:m}}function _pe(e,t,i,r){const{x:n,width:o}=i,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=n<=(a+l)/2?"left":"right":n<=o/2?c="left":n>=s-o/2&&(c="right"),function(e,t,i,r){const{x:n,width:o}=r,s=i.caretSize+i.caretPadding;return"left"===e&&n+o+s>t.width||"right"===e&&n-o-s<0||void 0}(c,e,t,i)&&(c="center"),c}function xpe(e,t,i){const r=i.yAlign||t.yAlign||function(e,t){const{y:i,height:r}=t;return i<r/2?"top":i>e.height-r/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||_pe(e,t,i,r),yAlign:r}}function Spe(e,t,i,r){const{caretSize:n,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=i,c=n+o,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Lce(s);let f=function(e,t){let{x:i,width:r}=e;return"right"===t?i-=r:"center"===t&&(i-=r/2),i}(t,a);const m=function(e,t,i){let{y:r,height:n}=e;return"top"===t?r+=i:r-="bottom"===t?n+i:n/2,r}(t,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(u,d)+n:"right"===a&&(f+=Math.max(h,p)+n),{x:Sle(f,0,r.width-t.width),y:Sle(m,0,r.height-t.height)}}function kpe(e,t,i){const r=Dce(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Mpe(e){return ype([],vpe(e))}function Tpe(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}class Epe extends ide{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,n=new zue(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,jce(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,r=i.beforeTitle.apply(this,[e]),n=i.title.apply(this,[e]),o=i.afterTitle.apply(this,[e]);let s=[];return s=ype(s,vpe(r)),s=ype(s,vpe(n)),s=ype(s,vpe(o)),s}getBeforeBody(e,t){return Mpe(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:i}=t,r=[];return zae(e,(e=>{const t={before:[],lines:[],after:[]},n=Tpe(i,e);ype(t.before,vpe(n.beforeLabel.call(this,e))),ype(t.lines,n.label.call(this,e)),ype(t.after,vpe(n.afterLabel.call(this,e))),r.push(t)})),r}getAfterBody(e,t){return Mpe(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:i}=t,r=i.beforeFooter.apply(this,[e]),n=i.footer.apply(this,[e]),o=i.afterFooter.apply(this,[e]);let s=[];return s=ype(s,vpe(r)),s=ype(s,vpe(n)),s=ype(s,vpe(o)),s}_createItems(e){const t=this._active,i=this.chart.data,r=[],n=[],o=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(bpe(this.chart,t[s]));return e.filter&&(l=l.filter(((t,r,n)=>e.filter(t,r,n,i)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,i)))),zae(l,(t=>{const i=Tpe(e.callbacks,t);r.push(i.labelColor.call(this,t)),n.push(i.labelPointStyle.call(this,t)),o.push(i.labelTextColor.call(this,t))})),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let n,o=[];if(r.length){const e=gpe[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const t=this._size=wpe(this,i),s=Object.assign({},e,t),a=xpe(this.chart,i,s),l=Spe(i,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,n={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const n=this.getCaretPosition(e,i,r);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:n}=this,{caretSize:o,cornerRadius:s}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Lce(s),{x:h,y:d}=e,{width:p,height:f}=t;let m,g,y,v,b,w;return"center"===n?(b=d+f/2,"left"===r?(m=h,g=m-o,v=b+o,w=b-o):(m=h+p,g=m+o,v=b-o,w=b+o),y=m):(g="left"===r?h+Math.max(a,c)+o:"right"===r?h+p-Math.max(l,u)-o:this.caretX,"top"===n?(v=d,b=v-o,m=g-o,y=g+o):(v=d+f,b=v+o,m=g+o,y=g-o),w=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:w}}drawTitle(e,t,i){const r=this.title,n=r.length;let o,s,a;if(n){const l=Iue(i.rtl,this.x,this.width);for(e.x=kpe(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",o=Nce(i.titleFont),s=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,a=0;a<n;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===n&&(e.y+=i.titleMarginBottom-s)}}_drawColorBox(e,t,i,r,n){const o=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Nce(n.bodyFont),h=kpe(this,"left",n),d=r.x(h),p=a<u.lineHeight?(u.lineHeight-a)/2:0,f=t.y+p;if(n.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},i=r.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,bce(e,t,i,c),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,bce(e,t,i,c)}else{e.lineWidth=o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(d,l-c),i=r.leftForLtr(r.xPlus(d,1),l-c-2),s=Lce(o.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=n.multiKeyBackground,Ece(e,{x:t,y:f,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ece(e,{x:i,y:f+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=o.backgroundColor,e.fillRect(i,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:n,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=i,u=Nce(i.bodyFont);let h=u.lineHeight,d=0;const p=Iue(i.rtl,this.x,this.width),f=function(i){t.fillText(i,p.x(e.x+d),e.y+h/2),e.y+=h+n},m=p.textAlign(o);let g,y,v,b,w,_,x;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=kpe(this,m,i),t.fillStyle=i.bodyColor,zae(this.beforeBody,f),d=s&&"right"!==m?"center"===o?l/2+c:l+2+c:0,b=0,_=r.length;b<_;++b){for(g=r[b],y=this.labelTextColors[b],t.fillStyle=y,zae(g.before,f),v=g.lines,s&&v.length&&(this._drawColorBox(t,e,b,p,i),h=Math.max(u.lineHeight,a)),w=0,x=v.length;w<x;++w)f(v[w]),h=u.lineHeight;zae(g.after,f)}d=0,h=u.lineHeight,zae(this.afterBody,f),e.y-=n}drawFooter(e,t,i){const r=this.footer,n=r.length;let o,s;if(n){const a=Iue(i.rtl,this.x,this.width);for(e.x=kpe(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",o=Nce(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,s=0;s<n;++s)t.fillText(r[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:n,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:c}=i,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=Lce(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+u,a),"top"===o&&this.drawCaret(e,t,i,r),t.lineTo(s+l-h,a),t.quadraticCurveTo(s+l,a,s+l,a+h),"center"===o&&"right"===n&&this.drawCaret(e,t,i,r),t.lineTo(s+l,a+c-p),t.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===o&&this.drawCaret(e,t,i,r),t.lineTo(s+d,a+c),t.quadraticCurveTo(s,a+c,s,a+c-d),"center"===o&&"left"===n&&this.drawCaret(e,t,i,r),t.lineTo(s,a+u),t.quadraticCurveTo(s,a,s+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,n=i&&i.y;if(r||n){const i=gpe[e.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=wpe(this,e),s=Object.assign({},i,this._size),a=xpe(t,e,s),l=Spe(e,s,a,t);r._to===l.x&&n._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Dce(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(n,e,r,t),Cue(e,t.textDirection),n.y+=o.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),Oue(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map((({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}})),n=!Uae(i,r),o=this._positionChanged(r,t);(n||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,n=this._active||[],o=this._getActiveElements(e,n,t,i),s=this._positionChanged(o,e),a=t||!Uae(o,n)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,r){const n=this.options;if("mouseout"===e.type)return[];if(!r)return t;const o=this.chart.getElementsAtEventForMode(e,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:n}=this,o=gpe[n.position].call(this,e,t);return!1!==o&&(i!==o.x||r!==o.y)}}Epe.positioners=gpe;var Ipe={id:"tooltip",_element:Epe,positioners:gpe,afterInit(e,t,i){i&&(e.tooltip=new Epe({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip,i={tooltip:t};!1!==e.notifyPlugins("beforeTooltipDraw",i)&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i))},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Aae,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return i[t.dataIndex]}return""},afterTitle:Aae,beforeBody:Aae,beforeLabel:Aae,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return Rae(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Aae,afterBody:Aae,beforeFooter:Aae,footer:Aae,afterFooter:Aae}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Cpe(e,t,i,r){const n=e.indexOf(t);if(-1===n)return((e,t,i,r)=>("string"==typeof t?(i=e.push(t)-1,r.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(e,t,i,r);return n!==e.lastIndexOf(t)?i:n}class Ope extends pde{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:i,label:r}of t)e[i]===r&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Rae(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:Sle(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:Cpe(i,e,jae(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let n=this.getLabels();n=0===e&&t===n.length-1?n:n.slice(e,t+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ape(e,t){const i=[],{bounds:r,step:n,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=n||1,p=c-1,{min:f,max:m}=t,g=!Rae(o),y=!Rae(s),v=!Rae(l),b=(m-f)/(u+1);let w,_,x,S,k=hle((m-f)/p/d)*d;if(k<1e-14&&!g&&!y)return[{value:f},{value:m}];S=Math.ceil(m/k)-Math.floor(f/k),S>p&&(k=hle(S*k/p/d)*d),Rae(a)||(w=Math.pow(10,a),k=Math.ceil(k*w)/w),"ticks"===r?(_=Math.floor(f/k)*k,x=Math.ceil(m/k)*k):(_=f,x=m),g&&y&&n&&function(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}((s-o)/n,k/1e3)?(S=Math.round(Math.min((s-o)/k,c)),k=(s-o)/S,_=o,x=s):v?(_=g?o:_,x=y?s:x,S=l-1,k=(x-_)/S):(S=(x-_)/k,S=ple(S,Math.round(S),k/1e3)?Math.round(S):Math.ceil(S));const M=Math.max(yle(k),yle(_));w=Math.pow(10,Rae(a)?M:a),_=Math.round(_*w)/w,x=Math.round(x*w)/w;let T=0;for(g&&(h&&_!==o?(i.push({value:o}),_<o&&T++,ple(Math.round((_+T*k)*w)/w,o,Ppe(o,b,e))&&T++):_<o&&T++);T<S;++T)i.push({value:Math.round((_+T*k)*w)/w});return y&&h&&x!==s?i.length&&ple(i[i.length-1].value,s,Ppe(s,b,e))?i[i.length-1].value=s:i.push({value:s}):y&&x!==s||i.push({value:x}),i}function Ppe(e,t,{horizontal:i,minRotation:r}){const n=mle(r),o=(i?Math.sin(n):Math.cos(n))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}Ope.id="category",Ope.defaults={ticks:{callback:Ope.prototype.getLabelForValue}};class Rpe extends pde{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Rae(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:n}=this;const o=e=>r=t?r:e,s=e=>n=i?n:e;if(e){const e=ule(r),t=ule(n);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===n){let t=1;(n>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*n)),s(n+t),e||o(r-t)}this.min=r,this.max=n}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:i,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r=Ape({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&fle(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Eue(e,this.chart.options.locale,this.options.ticks.format)}}class Lpe extends Rpe{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Nae(e)?e:0,this.max=Nae(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=mle(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function Dpe(e){return 1===e/Math.pow(10,Math.floor(cle(e)))}Lpe.id="linear",Lpe.defaults={ticks:{callback:nde.formatters.numeric}};class Npe extends pde{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Rpe.prototype.parse.apply(this,[e,t]);if(0!==i)return Nae(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Nae(e)?Math.max(0,e):null,this.max=Nae(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const n=t=>i=e?i:t,o=e=>r=t?r:e,s=(e,t)=>Math.pow(10,Math.floor(cle(e))+t);i===r&&(i<=0?(n(1),o(10)):(n(s(i,-1)),o(s(r,1)))),i<=0&&n(s(r,-1)),r<=0&&o(s(i,1)),this._zero&&this.min!==this._suggestedMin&&i===s(this.min,0)&&n(s(i,-1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t=function(e,t){const i=Math.floor(cle(t.max)),r=Math.ceil(t.max/Math.pow(10,i)),n=[];let o=Fae(e.min,Math.pow(10,Math.floor(cle(t.min)))),s=Math.floor(cle(o)),a=Math.floor(o/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{n.push({value:o,major:Dpe(o)}),++a,10===a&&(a=1,++s,l=s>=0?1:l),o=Math.round(a*Math.pow(10,s)*l)/l}while(s<i||s===i&&a<r);const c=Fae(e.max,o);return n.push({value:c,major:Dpe(o)}),n}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&fle(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Eue(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=cle(e),this._valueRange=cle(this.max)-cle(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(cle(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Fpe(e){const t=e.ticks;if(t.display&&e.display){const e=Dce(t.backdropPadding);return jae(t.font&&t.font.size,fce.font.size)+e.height}return 0}function jpe(e,t,i,r,n){return e===r||e===n?{start:t-i/2,end:t+i/2}:e<r||e>n?{start:t-i,end:t}:{start:t,end:t+i}}function $pe(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),r=[],n=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?tle/o:0;for(let h=0;h<o;h++){const o=s.setContext(e.getPointLabelContext(h));n[h]=o.padding;const d=e.getPointPosition(h,e.drawingArea+n[h],a),p=Nce(o.font),f=(l=e.ctx,c=p,u=Lae(u=e._pointLabels[h])?u:[u],{w:gce(l,c.string,u),h:u.length*c.lineHeight});r[h]=f;const m=_le(e.getIndexAngle(h)+a),g=Math.round(gle(m));Vpe(i,t,m,jpe(g,d.x,f.w,0,180),jpe(g,d.y,f.h,90,270))}var l,c,u;e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){const r=[],n=e._pointLabels.length,o=e.options,s=Fpe(o)/2,a=e.drawingArea,l=o.pointLabels.centerPointLabels?tle/n:0;for(let o=0;o<n;o++){const n=e.getPointPosition(o,a+s+i[o],l),c=Math.round(gle(_le(n.angle+sle))),u=t[o],h=qpe(n.y,u.h,c),d=zpe(c),p=Upe(n.x,u.w,d);r.push({x:n.x,y:h,textAlign:d,left:p,top:h,right:p+u.w,bottom:h+u.h})}return r}(e,r,n)}function Vpe(e,t,i,r,n){const o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/s,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function zpe(e){return 0===e||180===e?"center":e<180?"left":"right"}function Upe(e,t,i){return"right"===i?e-=t:"center"===i&&(e-=t/2),e}function qpe(e,t,i){return 90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t),e}function Gpe(e,t,i,r){const{ctx:n}=e;if(i)n.arc(e.xCenter,e.yCenter,t,0,ile);else{let i=e.getPointPosition(0,t);n.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=e.getPointPosition(o,t),n.lineTo(i.x,i.y)}}Npe.id="logarithmic",Npe.defaults={ticks:{callback:nde.formatters.logarithmic,major:{enabled:!0}}};class Bpe extends Rpe{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Dce(Fpe(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Nae(e)&&!isNaN(e)?e:0,this.max=Nae(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fpe(this.options))}generateTickLabels(e){Rpe.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const i=Vae(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?$pe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){return _le(e*(ile/(this._pointLabels.length||1))+mle(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Rae(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Rae(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function(e,t,i){return jce(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-sle+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:n}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Gpe(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r}=t,n=this._pointLabels.length;let o,s,a;if(t.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:r}}=e;for(let n=t-1;n>=0;n--){const t=r.setContext(e.getPointLabelContext(n)),o=Nce(t.font),{x:s,y:a,textAlign:l,left:c,top:u,right:h,bottom:d}=e._pointLabelItems[n],{backdropColor:p}=t;if(!Rae(p)){const e=Dce(t.backdropPadding);i.fillStyle=p,i.fillRect(c-e.left,u-e.top,h-c+e.width,d-u+e.height)}Mce(i,e._pointLabels[n],s,a+o.lineHeight/2,o,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,n),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){s=this.getDistanceFromCenterForValue(e.value);!function(e,t,i,r){const n=e.ctx,o=t.circular,{color:s,lineWidth:a}=t;!o&&!r||!s||!a||i<0||(n.save(),n.strokeStyle=s,n.lineWidth=a,n.setLineDash(t.borderDash),n.lineDashOffset=t.borderDashOffset,n.beginPath(),Gpe(e,i,o,r),n.closePath(),n.stroke(),n.restore())}(this,r.setContext(this.getContext(t-1)),s,n)}})),i.display){for(e.save(),o=n-1;o>=0;o--){const r=i.setContext(this.getPointLabelContext(o)),{color:n,lineWidth:l}=r;l&&n&&(e.lineWidth=l,e.strokeStyle=n,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),a=this.getPointPosition(o,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(a.x,a.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let n,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&!t.reverse)return;const a=i.setContext(this.getContext(s)),l=Nce(a.font);if(n=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){e.font=l.string,o=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=Dce(a.backdropPadding);e.fillRect(-o/2-t.left,-n-l.size/2-t.top,o+t.width,l.size+t.height)}Mce(e,r.label,0,-n,l,{color:a.color})})),e.restore()}drawTitle(){}}Bpe.id="radialLinear",Bpe.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:nde.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},Bpe.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Bpe.descriptors={angleLines:{_fallback:"grid"}};const Wpe={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hpe=Object.keys(Wpe);function Jpe(e,t){return e-t}function Ype(e,t){if(Rae(t))return null;const i=e._adapter,{parser:r,round:n,isoWeekday:o}=e._parseOpts;let s=t;return"function"==typeof r&&(s=r(s)),Nae(s)||(s="string"==typeof r?i.parse(s,r):i.parse(s)),null===s?null:(n&&(s="week"!==n||!dle(o)&&!0!==o?i.startOf(s,n):i.startOf(s,"isoWeek",o)),+s)}function Zpe(e,t,i,r){const n=Hpe.length;for(let o=Hpe.indexOf(e);o<n-1;++o){const e=Wpe[Hpe[o]],n=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(n*e.size))<=r)return Hpe[o]}return Hpe[n-1]}function Kpe(e,t,i){if(i){if(i.length){const{lo:r,hi:n}=$ce(i,t);e[i[r]>=t?i[r]:i[n]]=!0}}else e[t]=!0}function Xpe(e,t,i){const r=[],n={},o=t.length;let s,a;for(s=0;s<o;++s)a=t[s],n[a]=s,r.push({value:a,major:!1});return 0!==o&&i?function(e,t,i,r){const n=e._adapter,o=+n.startOf(t[0].value,r),s=t[t.length-1].value;let a,l;for(a=o;a<=s;a=+n.add(a,1,r))l=i[a],l>=0&&(t[l].major=!0);return t}(e,r,n,i):r}class Qpe extends pde{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const i=e.time||(e.time={}),r=this._adapter=new vhe._date(e.adapters.date);Hae(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Ype(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:n,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(n=Math.max(n,e.max))}o&&s||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=Nae(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),n=Nae(n)&&!isNaN(n)?n:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,n-1),this.max=Math.max(r+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const n=this.min,o=function(e,t,i){let r=0,n=e.length;for(;r<n&&e[r]<t;)r++;for(;n>r&&e[n-1]>i;)n--;return r>0||n<e.length?e.slice(r,n):e}(r,n,this.max);return this._unit=t.unit||(i.autoSkip?Zpe(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(e,t,i,r,n){for(let o=Hpe.length-1;o>=Hpe.indexOf(i);o--){const i=Hpe[o];if(Wpe[i].common&&e._adapter.diff(n,r,i)>=t-1)return i}return Hpe[i?Hpe.indexOf(i):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=Hpe.indexOf(e)+1,i=Hpe.length;t<i;++t)if(Wpe[Hpe[t]].common)return Hpe[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),Xpe(this,o,this._majorUnit)}initOffsets(e){let t,i,r=0,n=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),n=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=Sle(r,0,o),n=Sle(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,n=r.time,o=n.unit||Zpe(n.minUnit,t,i,this._getLabelCapacity(t)),s=jae(n.stepSize,1),a="week"===o&&n.isoWeekday,l=dle(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":o),e.diff(i,t,o)>1e5*s)throw new Error(t+" and "+i+" are too far apart with stepSize of "+s+" "+o);const p="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<i;u=+e.add(u,s,o),h++)Kpe(c,u,p);return u!==i&&"ticks"!==r.bounds&&1!==h||Kpe(c,u,p),Object.keys(c).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,t,i,r){const n=this.options,o=n.time.displayFormats,s=this._unit,a=this._majorUnit,l=s&&o[s],c=a&&o[a],u=i[t],h=a&&c&&u&&u.major,d=this._adapter.format(e,r||(h?c:l)),p=n.ticks.callback;return p?Vae(p,[d,t,i],this):d}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=mle(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:i*n+s*o,h:i*o+s*n}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,n=this._tickFormatFunction(e,0,Xpe(this,[e],this._majorUnit),r),o=this._getLabelSize(n),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)i=i.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(Ype(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Gce(e.sort(Jpe))}}function efe(e,t,i){let r,n,o,s,a=0,l=e.length-1;i?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=Vce(e,"pos",t)),({pos:r,time:o}=e[a]),({pos:n,time:s}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=Vce(e,"time",t)),({time:r,pos:o}=e[a]),({time:n,pos:s}=e[l]));const c=n-r;return c?o+(s-o)*(t-r)/c:o}Qpe.id="time",Qpe.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class tfe extends Qpe{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=efe(t,this.min),this._tableRange=efe(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],n=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,s=r.length;o<s;++o)c=r[o+1],a=r[o-1],l=r[o],Math.round((c+a)/2)!==l&&n.push({time:l,pos:o/(s-1)});return n}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(efe(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return efe(this._table,i*this._tableRange+this._minPos,!0)}}function ife(e){var t=e.getAttribute("colour"),i=e.getAttribute("title");e.hasAttribute("percentage")&&(i+=" - "+e.getAttribute("percentage")+"%");var r=$("<b/>").text(i).css("display","flex").css("align-items","center"),n=$('<calcite-icon icon="squareArea" scale="m"></calcite-icon>').css("color",t).css("margin-right","5px");$(r).prepend(n),$(e.shadowRoot).find(".section-header__text").html(r)}tfe.id="timeseries",tfe.defaults=Qpe.defaults,customElements.define("calcite-block",Fs),customElements.define("calcite-block-section",js),customElements.define("calcite-accordion",Ds),customElements.define("calcite-accordion-item",Ns),customElements.define("calcite-icon",qs);customElements.define("new-calcite-block-section",class extends js{static get observedAttributes(){return["percentage"]}constructor(){super()}attributeChangedCallback(e,t,i){ife(this)}connectedCallback(){super.connectedCallback(),ife(this)}});customElements.define("new-calcite-accordion-item",class extends Ns{static get observedAttributes(){return["percentage"]}constructor(){super()}attributeChangedCallback(e,t,i){!function(e){var t=e.getAttribute("item-title");e.hasAttribute("percentage")&&(t+=" - "+e.getAttribute("percentage")+"%",$(e.shadowRoot).find(".accordion-item-title").text(t))}(this)}connectedCallback(){super.connectedCallback()}});const rfe=Tae;$de.register(phe,mpe,Ipe,ppe,Wde);const nfe=["#e69f00","#56b4e9","#009e73","#f0e442","#0072b2","#d55e00","#cc79a7","#bbbbbb"];for(var ofe=[],sfe=0;sfe<rfe.length;sfe++){var afe=rfe[sfe],lfe=afe.title,cfe=afe.code;if(""!=afe.supergroup&&""==afe.group)var ufe="supergroup";else if(""!=afe.supergroup&&""!=afe.group&&""==afe.subgroup)ufe="group";else if(""!=afe.supergroup&&""!=afe.group&&""!=afe.subgroup)ufe="subgroup";var hfe={title:lfe,code:cfe,type:ufe,count:0,colour:nfe[afe.supergroup-1]};ofe.push(hfe)}$(document).ready((function(){for(var e=0;e<rfe.length;e++)if(""!=(afe=rfe[e]).supergroup&&""==afe.group){var t=nfe[afe.supergroup-1],i=$("<div>").addClass("desc-item").addClass(afe.code).append($("<p/>").text(afe.desc)).append("<br>").append($("<b/>").text("Groups")).append("<br>").append($("<calcite-accordion/>").addClass("groups")).append("<br>").append($("<b/>").text("Subgroups")).append($("<calcite-accordion/>").addClass("subgroups")),r=$("<new-calcite-block-section/>").attr("id",afe.code).attr("colour",t).attr("title",afe.title).html(i);$("#descriptions").append(r)}else if(""!=afe.group||""!=afe.subgroup){if(""==afe.subgroup)var n="."+afe.supergroup+" .groups";else n="."+afe.supergroup+" .subgroups";$(n).append($("<new-calcite-accordion-item/>").attr("item-title",afe.title).attr("id",afe.code).html($("<p/>").text(afe.desc)))}}));var dfe,pfe=[];for(sfe=0;sfe<8;sfe++){var ffe={value:sfe+1,symbol:(dfe=nfe[sfe],{type:"simple-fill",color:dfe,outline:{width:.2,color:[0,0,0,.1]}})};pfe.push(ffe)}var mfe={type:"unique-value",valueExpression:"return Number(Mid(Text($feature.oac), 0, 1));",uniqueValueInfos:pfe},gfe=null,yfe="Combined";$.getJSON("https://ancient-dawn-46f2.jacobweinbren.workers.dev/",(function(e){vl.apiKey=e.access_token;const t=new v4({copyright:"Ordnance Survey",url:"https://services5.arcgis.com/N6Nhpnxaedla81he/arcgis/rest/services/MK_Buildings/FeatureServer"}),i=new v4({renderer:mfe,maxScale:0,url:"https://services5.arcgis.com/N6Nhpnxaedla81he/arcgis/rest/services/MK_Classification/FeatureServer",copyright:"ONS"}),r=new kae({layers:[t,i]});i.blendMode="source-in";const n=new M_({basemap:"arcgis-dark-gray",layers:[r]});var o=new bae({map:n,zoom:11,center:[-.75,52.04],container:"map",constraints:{minZoom:10}});function s(e){if("Combined"==yfe)var t="";else t="new_con = '"+yfe+"' OR old_con = '"+yfe+"'";e.filter={where:t};var r=new tz;r.where=t,r.outFields=["oac"],i.queryFeatures(r).then((function(e){for(var t=e.features,i=0;i<ofe.length;i++)ofe[i].count=0;for(i=0;i<t.length;i++)for(var r=t[i].attributes.oac,n=0;n<ofe.length;n++){switch((c=ofe[n]).type){case"supergroup":c.code==r.substring(0,1)&&(ofe[n].count+=1);break;case"group":c.code==r.substring(0,2)&&(ofe[n].count+=1);break;case"subgroup":c.code==r.substring(0,3)&&(ofe[n].count+=1)}}var o=[{backgroundColor:[],data:[],titles:[]},{backgroundColor:[],data:[],titles:[]}],s=0,a=0,l=0;for(i=0;i<ofe.length;i++)switch(ofe[i].type){case"supergroup":s+=ofe[i].count;break;case"group":a+=ofe[i].count;break;case"subgroup":l+=ofe[i].count}for(i=0;i<ofe.length;i++){var c,u;switch((c=ofe[i]).type){case"supergroup":u=(c.count/s*100).toFixed(2),o[1].backgroundColor.push(c.colour),o[1].data.push(u),o[1].titles.push(c.title+": "+Math.round(u)+"%"),$("#"+c.code).attr("percentage",Math.round(u));break;case"group":u=(c.count/a*100).toFixed(2),o[0].backgroundColor.push(c.colour),o[0].data.push(u),o[0].titles.push(c.title+": "+Math.round(u)+"%"),$("#"+c.code).attr("percentage",Math.round(u));break;case"subgroup":u=(c.count/l*100).toFixed(2),$("#"+c.code).attr("percentage",Math.round(u))}}const h={labels:[],datasets:o};var d=["Area Classification Categories - ONS Supergroups","Line Chart","",$($("#dropdown").prop("selectedItems")[0]).text()];null!=gfe?(gfe.data.datasets=o,gfe.options.plugins.title.text=d,gfe.update()):gfe=new $de($("#chart"),{type:"pie",data:h,options:{responsive:!0,plugins:{title:{display:!0,text:d,font:{family:"Avenir Next"}},tooltip:{bodyFont:{family:"Avenir Next"}},legend:{labels:{font:{family:"Avenir Next"},generateLabels:function(e){var t=[];for(i=0;i<ofe.length;i++){var r=ofe[i];"supergroup"==r.type&&t.push({text:r.title,fillStyle:r.colour,strokeStyle:"#fff",lineWidth:1,hidden:!1,index:i,datasetIndex:i})}return t}}},tooltip:{callbacks:{label:function(e){return" "+e.dataset.titles[e.dataIndex]}}}}}})}))}o.whenLayerView(i).then((e=>{var t;s(e),o.ui.add("dropdown","top-right"),$("#dropdown").show(),o.ui.add("descriptions","top-right"),$("#descriptions").show(),o.ui.add("chart","bottom-left"),$("#chart").show(),$("#dropdown").on("calciteDropdownSelect",(function(){t!=$("#dropdown").prop("selectedItems")&&(t=$("#dropdown").prop("selectedItems"),yfe=$(t[0]).attr("choice"),s(e))}))}))}));export{uu as $,Jy as A,ka as B,am as C,Ea as D,yu as E,tte as F,Aee as G,roe as H,Iu as I,Uc as J,rD as K,Cie as L,Eee as M,xee as N,Hee as O,loe as P,noe as Q,soe as R,hv as S,db as T,NK as U,VK as V,ew as W,vd as X,tD as Y,bl as Z,Lh as _,rl as a,bie as a$,md as a0,$6 as a1,Rk as a2,Wy as a3,fv as a4,dv as a5,bv as a6,iC as a7,Qm as a8,Ub as a9,gz as aA,Ww as aB,n_ as aC,cq as aD,bw as aE,eq as aF,bq as aG,vq as aH,XU as aI,LM as aJ,Oz as aK,Lne as aL,Mz as aM,DM as aN,TM as aO,c_ as aP,Moe as aQ,AM as aR,PM as aS,Yf as aT,Xc as aU,yw as aV,a5 as aW,l5 as aX,s5 as aY,gie as aZ,vie as a_,Ute as aa,Lk as ab,Ste as ac,Lee as ad,jte as ae,_te as af,Dte as ag,Ate as ah,Pee as ai,$te as aj,Vb as ak,mu as al,vf as am,MM as an,Nf as ao,Vf as ap,dz as aq,e_ as ar,Qw as as,Xw as at,i_ as au,t_ as av,Cw as aw,bg as ax,mz as ay,pz as az,Ua as b,mie as b$,Pie as b0,_ie as b1,wie as b2,ol as b3,Mee as b4,hie as b5,_ee as b6,kee as b7,pie as b8,EM as b9,bT as bA,OQ as bB,i5 as bC,r5 as bD,n5 as bE,$X as bF,O_ as bG,Mf as bH,cX as bI,FK as bJ,AK as bK,dq as bL,r_ as bM,lq as bN,mq as bO,uq as bP,Pz as bQ,Tq as bR,Sq as bS,xQ as bT,La as bU,Da as bV,A5 as bW,xie as bX,Va as bY,nq as bZ,rq as b_,wl as ba,Ak as bb,OM as bc,fb as bd,Eb as be,J1 as bf,q1 as bg,G1 as bh,fu as bi,Gm as bj,Bm as bk,BA as bl,Bf as bm,Df as bn,Um as bo,VA as bp,nre as bq,Eq as br,hq as bs,Pk as bt,IQ as bu,LQ as bv,AQ as bw,CQ as bx,sy as by,Ap as bz,Oa as c,J_ as c$,Na as c0,TO as c1,M6 as c2,ly as c3,Pl as c4,A_ as c5,$g as c6,Am as c7,tp as c8,Fd as c9,NM as cA,fre as cB,wre as cC,Ere as cD,zb as cE,Em as cF,jd as cG,Zb as cH,Gb as cI,np as cJ,op as cK,nu as cL,QC as cM,cre as cN,x2 as cO,b2 as cP,q2 as cQ,uD as cR,j_ as cS,z_ as cT,Tl as cU,tz as cV,I_ as cW,Z_ as cX,B_ as cY,H_ as cZ,W_ as c_,nf as ca,kz as cb,HI as cc,lp as cd,pu as ce,rG as cf,l1 as cg,Eg as ch,iV as ci,uz as cj,fl as ck,Q3 as cl,e5 as cm,t5 as cn,su as co,J5 as cp,gy as cq,CM as cr,tg as cs,qm as ct,$A as cu,IM as cv,iu as cw,cp as cx,dw as cy,Yw as cz,wa as d,ff as d$,$_ as d0,V_ as d1,bx as d2,xU as d3,Yb as d4,Bb as d5,Y_ as d6,FP as d7,bk as d8,UQ as d9,$M as dA,KM as dB,Ow as dC,zM as dD,ic as dE,Oie as dF,wQ as dG,yee as dH,yj as dI,vF as dJ,wj as dK,MC as dL,mL as dM,Fl as dN,A$ as dO,nl as dP,kp as dQ,qp as dR,tf as dS,Jp as dT,$p as dU,pl as dV,Wp as dW,tm as dX,Al as dY,x1 as dZ,S1 as d_,pQ as da,$d as db,tw as dc,G9 as dd,Jb as de,gb as df,Sie as dg,FA as dh,jA as di,GA as dj,cA as dk,lA as dl,aA as dm,pA as dn,vA as dp,zA as dq,Ote as dr,nD as ds,Xf as dt,Pp as du,sz as dv,Lp as dw,ZM as dx,em as dy,_f as dz,Ac as e,ig as e$,Mm as e0,tG as e1,Vg as e2,Cb as e3,oz as e4,mf as e5,Ka as e6,A1 as e7,J2 as e8,r3 as e9,K_ as eA,Az as eB,Wf as eC,VJ as eD,FM as eE,JM as eF,xq as eG,p6 as eH,lx as eI,zw as eJ,Vw as eK,vw as eL,jX as eM,FX as eN,Aa as eO,Ca as eP,WM as eQ,u7 as eR,Sa as eS,OO as eT,Ff as eU,kq as eV,jU as eW,tq as eX,YU as eY,ug as eZ,Sg as e_,KQ as ea,Ra as eb,s1 as ec,F2 as ed,f_ as ee,Ga as ef,xF as eg,Lu as eh,jc as ei,xh as ej,s_ as ek,az as el,kV as em,JK as en,BK as eo,WK as ep,HK as eq,XK as er,nm as es,Fa as et,Yp as eu,ja as ev,xf as ew,Sk as ex,WZ as ey,HZ as ez,pb as f,cU as f$,$a as f0,Ja as f1,Rne as f2,Wa as f3,mv as f4,Sv as f5,Ba as f6,Xa as f7,pv as f8,kv as f9,Iv as fA,jm as fB,kie as fC,Tie as fD,qO as fE,EO as fF,kO as fG,xO as fH,av as fI,zv as fJ,qv as fK,Hv as fL,Qv as fM,eb as fN,Zv as fO,Kv as fP,Xv as fQ,tb as fR,ib as fS,$v as fT,lv as fU,up as fV,za as fW,fU as fX,uU as fY,Nz as fZ,gq as f_,Mv as fa,vb as fb,Rv as fc,gv as fd,wv as fe,hb as ff,Uv as fg,yb as fh,WO as fi,GO as fj,UO as fk,VO as fl,Ev as fm,aO as fn,XA as fo,zO as fp,ZA as fq,QO as fr,Pv as fs,XO as ft,Hy as fu,$f as fv,Uf as fw,Gf as fx,fie as fy,yie as fz,Ma as g,IY as g$,wF as g0,pU as g1,_F as g2,RM as g3,ou as g4,Kb as g5,S3 as g6,aD as g7,wV as g8,aq as g9,Cv as gA,Ch as gB,sK as gC,gK as gD,AA as gE,Qa as gF,nC as gG,rC as gH,cf as gI,uf as gJ,Zw as gK,xl as gL,MY as gM,TY as gN,kY as gO,$G as gP,BY as gQ,fZ as gR,gZ as gS,xY as gT,Wc as gU,cu as gV,HY as gW,KY as gX,qY as gY,RY as gZ,JY as g_,ax as ga,hx as gb,dx as gc,vx as gd,wb as ge,PA as gf,Ib as gg,ju as gh,nU as gi,Qz as gj,Vz as gk,hU as gl,yq as gm,SC as gn,_Q as go,au as gp,LU as gq,DU as gr,Ta as gs,T1 as gt,Rm as gu,Rz as gv,Qne as gw,fq as gx,Lz as gy,el as gz,Cz as h,xT as h$,LY as h0,EY as h1,SY as h2,PY as h3,yY as h4,UY as h5,hu as h6,jG as h7,pY as h8,gY as h9,OY as hA,AY as hB,Hc as hC,zY as hD,pZ as hE,zG as hF,lu as hG,xZ as hH,vY as hI,bY as hJ,mY as hK,fY as hL,xX as hM,pf as hN,NI as hO,SE as hP,_E as hQ,IN as hR,FD as hS,KD as hT,QD as hU,DN as hV,NN as hW,_N as hX,qM as hY,QM as hZ,rT as h_,LJ as ha,$Y as hb,Lg as hc,YY as hd,DY as he,xg as hf,VG as hg,gw as hh,XY as hi,QY as hj,oZ as hk,_Y as hl,lZ as hm,aZ as hn,cZ as ho,wY as hp,zJ as hq,GY as hr,NY as hs,CY as ht,_Z as hu,vZ as hv,yZ as hw,oY as hx,bZ as hy,wZ as hz,il as i,hh as i$,wT as i0,aoe as i1,vh as i2,JA as i3,Hp as i4,iv as i5,HO as i6,p2 as i7,p3 as i8,d3 as i9,j2 as iA,oM as iB,uI as iC,EI as iD,SI as iE,t3 as iF,f2 as iG,S2 as iH,k3 as iI,L_ as iJ,N_ as iK,x5 as iL,N2 as iM,m5 as iN,j5 as iO,z2 as iP,VQ as iQ,L2 as iR,M5 as iS,E5 as iT,gD as iU,a_ as iV,du as iW,kU as iX,bU as iY,vU as iZ,Nh as i_,XQ as ia,V2 as ib,v4 as ic,K5 as id,R2 as ie,zQ as ig,D2 as ih,L5 as ii,Fh as ij,dp as ik,Gk as il,yD as im,m1 as io,rw as ip,hp as iq,G2 as ir,$2 as is,B2 as it,M1 as iu,k1 as iv,I1 as iw,C1 as ix,_T as iy,jf as iz,ru as j,Xx as j$,H5 as j0,yX as j1,eK as j2,IK as j3,_6 as j4,eX as j5,x6 as j6,DX as j7,EX as j8,$Q as j9,af as jA,Ol as jB,HS as jC,FI as jD,Ia as jE,GQ as jF,I3 as jG,_5 as jH,Rb as jI,H2 as jJ,W2 as jK,zh as jL,VI as jM,_1 as jN,Eu as jO,Zp as jP,Op as jQ,U2 as jR,O1 as jS,Kd as jT,gu as jU,If as jV,lO as jW,z3 as jX,C_ as jY,Hx as jZ,Wx as j_,Oh as ja,BZ as jb,MQ as jc,E1 as jd,Dh as je,ET as jf,nc as jg,Kp as jh,MT as ji,Xp as jj,Ql as jk,IT as jl,WA as jm,Qd as jn,Rl as jo,cO as jp,dh as jq,TV as jr,jl as js,z5 as jt,UV as ju,oc as jv,z9 as jw,OI as jx,Kw as jy,RP as jz,Yc as k,J3 as k0,sY as k1,rY as k2,WJ as k3,HJ as k4,BJ as k5,dZ as k6,iY as k7,lY as k8,ZV as k9,P1 as kA,UM as kB,Yy as kC,HM as kD,vv as kE,ef as kF,JO as kG,sh as kH,Lc as kI,rte as kJ,Zy as kK,rv as kL,sf as kM,km as kN,yU as kO,SU as kP,WX as kQ,b4 as kR,Mae as kS,aY as ka,nz as kb,ZJ as kc,YJ as kd,XJ as ke,QJ as kf,tY as kg,JJ as kh,nY as ki,eY as kj,uZ as kk,iZ as kl,eZ as km,tZ as kn,Tv as ko,_v as kp,Qp as kq,tl as kr,om as ks,mb as kt,GM as ku,BM as kv,xv as kw,xb as kx,eA as ky,iee as kz,Xie as l,Jc as m,goe as n,moe as o,Kc as p,vl as q,_a as r,Dl as s,xa as t,Ree as u,eu as v,Qc as w,Ok as x,Aie as y,wd as z};
