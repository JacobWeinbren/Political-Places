import{n as e}from"./arcadeUtils-06d89b42.js";import{hk as n,gV as t,hA as r,cF as a,hG as i,h0 as s,gY as l}from"../main.js";import{g as o,d as u}from"./SpatialFilter-d1565216.js";import{w as c,A as f,x as p,O as d,p as m,g as h,h as R}from"./geometryEngineAsync-6b6e3313.js";import"./WhereClause-3a857400.js";function S(e){return e instanceof a}function y(s,l,R,y,g){return g(s,l,(function(s,l,g){if(g.length<2)return y(new Error("Missing Parameters"));if(null===(g=n(g))[0]&&null===g[1])return t(!1);if(r(g[0]))return g[1]instanceof a?t(new o({parentfeatureset:g[0],relation:R,relationGeom:g[1]})):null===g[1]?t(new u({parentfeatureset:g[0]})):y("Spatial Relation cannot accept this parameter type");if(S(g[0])){if(S(g[1])){let n=null;switch(R){case"esriSpatialRelEnvelopeIntersects":n=h(e(g[0]),e(g[1]));break;case"esriSpatialRelIntersects":n=h(g[0],g[1]);break;case"esriSpatialRelContains":n=m(g[0],g[1]);break;case"esriSpatialRelOverlaps":n=d(g[0],g[1]);break;case"esriSpatialRelWithin":n=p(g[0],g[1]);break;case"esriSpatialRelTouches":n=f(g[0],g[1]);break;case"esriSpatialRelCrosses":n=c(g[0],g[1])}return null!==n?n:i(new Error("Unrecognised Relationship"))}return r(g[1])?t(new o({parentfeatureset:g[1],relation:R,relationGeom:g[0]})):null===g[1]?t(!1):y("Spatial Relation cannot accept this parameter type")}return null!==g[0]?y("Spatial Relation cannot accept this parameter type"):r(g[1])?t(new u({parentfeatureset:g[1]})):g[1]instanceof a||null===g[1]?t(!1):void 0}))}function g(e){"async"===e.mode&&(e.functions.intersects=function(n,t){return y(n,t,"esriSpatialRelIntersects",e.failDefferred,e.standardFunctionAsync)},e.functions.envelopeintersects=function(n,t){return y(n,t,"esriSpatialRelEnvelopeIntersects",e.failDefferred,e.standardFunctionAsync)},e.signatures.push({name:"envelopeintersects",min:"2",max:"2"}),e.functions.contains=function(n,t){return y(n,t,"esriSpatialRelContains",e.failDefferred,e.standardFunctionAsync)},e.functions.overlaps=function(n,t){return y(n,t,"esriSpatialRelOverlaps",e.failDefferred,e.standardFunctionAsync)},e.functions.within=function(n,t){return y(n,t,"esriSpatialRelWithin",e.failDefferred,e.standardFunctionAsync)},e.functions.touches=function(n,t){return y(n,t,"esriSpatialRelTouches",e.failDefferred,e.standardFunctionAsync)},e.functions.crosses=function(n,t){return y(n,t,"esriSpatialRelCrosses",e.failDefferred,e.standardFunctionAsync)},e.functions.relate=function(t,i){return e.standardFunctionAsync(t,i,(function(e,t,i){if(i=n(i),s(i,3,3),S(i[0])&&S(i[1]))return R(i[0],i[1],l(i[2]));if(i[0]instanceof a&&null===i[1])return!1;if(i[1]instanceof a&&null===i[0])return!1;if(r(i[0])&&null===i[1])return new u({parentfeatureset:i[0]});if(r(i[1])&&null===i[0])return new u({parentfeatureset:i[1]});if(r(i[0])&&i[1]instanceof a)return i[0].relate(i[1],l(i[2]));if(r(i[1])&&i[0]instanceof a)return i[1].relate(i[0],l(i[2]));if(null===i[0]&&null===i[1])return!1;throw new Error("Illegal Argument")}))})}export{g as registerFunctions};
