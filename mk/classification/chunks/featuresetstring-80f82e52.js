import{J as n,k as e,K as t,X as o,i as r,al as a,l as i,am as c,an as d,ao as u,ap as s,M as m}from"./arcadeUtils-f663d019.js";import"../main.js";import"eng/classification.json";import"./number-46c19cf1.js";import"./FeatureSetReader-a25b9a02.js";import"./centroid-3e5c0257.js";function f(n){return n&&n.domain?"coded-value"===n.domain.type||"codedValue"===n.domain.type?r.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:a[n.field.type],codedValues:n.domain.codedValues.map((n=>({name:n.name,code:n.code})))}):r.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:a[n.field.type],min:n.domain.min,max:n.domain.max}):null}function l(a){"async"===a.mode&&(a.functions.domain=function(r,d){return a.standardFunctionAsync(r,d,(function(r,a,d){if(n(d,2,3),d[0]instanceof e)return f(d[0].fullDomain(t(d[1]),void 0===d[2]?void 0:o(d[2])));if(i(d[0]))return d[0]._ensureLoaded().then((()=>f(c(t(d[1]),d[0],null,void 0===d[2]?void 0:o(d[2])))));throw new Error("Invalid Parameter")}))},a.functions.subtypes=function(t,o){return a.standardFunctionAsync(t,o,(function(t,o,a){if(n(a,1,1),a[0]instanceof e){const n=a[0].subtypes();return n?r.convertObjectToArcadeDictionary(n):null}if(i(a[0]))return a[0]._ensureLoaded().then((()=>{const n=a[0].subtypes();return n?r.convertObjectToArcadeDictionary(n):null}));throw new Error("Invalid Parameter")}))},a.functions.domainname=function(r,u){return a.standardFunctionAsync(r,u,(function(r,a,u){if(n(u,2,4),u[0]instanceof e)return u[0].domainValueLookup(t(u[1]),u[2],void 0===u[3]?void 0:o(u[3]));if(i(u[0]))return u[0]._ensureLoaded().then((()=>{const n=c(t(u[1]),u[0],null,void 0===u[3]?void 0:o(u[3]));return d(n,u[2])}));throw new Error("Invalid Parameter")}))},a.signatures.push({name:"domainname",min:"2",max:"4"}),a.functions.domaincode=function(r,d){return a.standardFunctionAsync(r,d,(function(r,a,d){if(n(d,2,4),d[0]instanceof e)return d[0].domainCodeLookup(t(d[1]),d[2],void 0===d[3]?void 0:o(d[3]));if(i(d[0]))return d[0]._ensureLoaded().then((()=>{const n=c(t(d[1]),d[0],null,void 0===d[3]?void 0:o(d[3]));return u(n,d[2])}));throw new Error("Invalid Parameter")}))},a.signatures.push({name:"domaincode",min:"2",max:"4"})),a.functions.text=function(e,t){return a.standardFunctionAsync(e,t,(function(e,t,o){if(n(o,1,2),!i(o[0]))return s(o[0],o[1]);{const n=m(o[1],"");if(""===n)return o[0].castToText();if("schema"===n.toLowerCase())return o[0].convertToText("schema",e.abortSignal);if("featureset"===n.toLowerCase())return o[0].convertToText("featureset",e.abortSignal)}}))},a.functions.gdbversion=function(t,o){return a.standardFunctionAsync(t,o,(function(t,o,r){if(n(r,1,1),r[0]instanceof e)return r[0].gdbVersion();if(i(r[0]))return r[0].load().then((n=>n.gdbVersion));throw new Error("Invalid Parameter")}))},a.functions.schema=function(t,o){return a.standardFunctionAsync(t,o,(function(t,o,a){if(n(a,1,1),i(a[0]))return a[0].load().then((()=>r.convertObjectToArcadeDictionary(a[0].schema())));if(a[0]instanceof e){const n=a[0].schema();return n?r.convertObjectToArcadeDictionary(n):null}throw new Error("Invalid Parameter")}))}}export{l as registerFunctions};
